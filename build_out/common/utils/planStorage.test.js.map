{"version":3,"file":"planStorage.test.js","sourceRoot":"","sources":["../../../src/common/utils/planStorage.test.ts"],"names":[],"mappings":";;AAAA,+CAAuE;AAEvE,QAAQ,CAAC,aAAa,EAAE,GAAG,EAAE,CAAC;IAC5B,2EAA2E;IAC3E,MAAM,eAAe,GAAG,QAAQ,CAAC;IAEjC,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE,CAAC;QAChC,EAAE,CAAC,yDAAyD,EAAE,GAAG,EAAE,CAAC;YAClE,MAAM,MAAM,GAAG,IAAA,6BAAe,EAAC,eAAe,EAAE,KAAK,CAAC,CAAC;YACvD,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,eAAe,6BAA6B,CAAC,CAAC;QAAA,CACtE,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE,CAAC;YACnD,MAAM,OAAO,GAAG,IAAA,6BAAe,EAAC,cAAc,EAAE,WAAW,CAAC,CAAC;YAC7D,MAAM,OAAO,GAAG,IAAA,6BAAe,EAAC,cAAc,EAAE,WAAW,CAAC,CAAC;YAC7D,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAAA,CAC/B,CAAC,CAAC;QAEH,EAAE,CAAC,yCAAyC,EAAE,GAAG,EAAE,CAAC;YAClD,MAAM,OAAO,GAAG,IAAA,6BAAe,EAAC,cAAc,EAAE,KAAK,CAAC,CAAC;YACvD,MAAM,OAAO,GAAG,IAAA,6BAAe,EAAC,WAAW,EAAE,eAAe,CAAC,CAAC;YAC9D,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,eAAe,4BAA4B,CAAC,CAAC;YACrE,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,eAAe,mCAAmC,CAAC,CAAC;QAAA,CAC7E,CAAC,CAAC;QAEH,EAAE,CAAC,gEAAgE,EAAE,GAAG,EAAE,CAAC;YACzE,MAAM,MAAM,GAAG,IAAA,6BAAe,EAAC,eAAe,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC;YACnE,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,qCAAqC,CAAC,CAAC;QAAA,CAC5D,CAAC,CAAC;QAEH,EAAE,CAAC,oDAAoD,EAAE,GAAG,EAAE,CAAC;YAC7D,MAAM,WAAW,GAAG,IAAA,6BAAe,EAAC,WAAW,EAAE,SAAS,CAAC,CAAC;YAC5D,MAAM,YAAY,GAAG,IAAA,6BAAe,EAAC,WAAW,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;YACvE,MAAM,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAAA,CACxC,CAAC,CAAC;IAAA,CACJ,CAAC,CAAC;IAEH,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE,CAAC;QACtC,EAAE,CAAC,sCAAsC,EAAE,GAAG,EAAE,CAAC;YAC/C,MAAM,MAAM,GAAG,IAAA,mCAAqB,EAAC,YAAY,CAAC,CAAC;YACnD,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,eAAe,sBAAsB,CAAC,CAAC;QAAA,CAC/D,CAAC,CAAC;QAEH,EAAE,CAAC,iCAAiC,EAAE,GAAG,EAAE,CAAC;YAC1C,MAAM,MAAM,GAAG,IAAA,mCAAqB,EAAC,UAAU,CAAC,CAAC;YACjD,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,eAAe,oBAAoB,CAAC,CAAC;QAAA,CAC7D,CAAC,CAAC;IAAA,CACJ,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { getPlanFilePath, getLegacyPlanFilePath } from \"./planStorage\";\n\ndescribe(\"planStorage\", () => {\n  // Plan paths use tilde prefix for portability across local/remote runtimes\n  const expectedMuxHome = \"~/.mux\";\n\n  describe(\"getPlanFilePath\", () => {\n    it(\"should return path with project name and workspace name\", () => {\n      const result = getPlanFilePath(\"fix-plan-a1b2\", \"mux\");\n      expect(result).toBe(`${expectedMuxHome}/plans/mux/fix-plan-a1b2.md`);\n    });\n\n    it(\"should produce same path for same inputs\", () => {\n      const result1 = getPlanFilePath(\"fix-bug-x1y2\", \"myproject\");\n      const result2 = getPlanFilePath(\"fix-bug-x1y2\", \"myproject\");\n      expect(result1).toBe(result2);\n    });\n\n    it(\"should organize plans by project folder\", () => {\n      const result1 = getPlanFilePath(\"sidebar-a1b2\", \"mux\");\n      const result2 = getPlanFilePath(\"auth-c3d4\", \"other-project\");\n      expect(result1).toBe(`${expectedMuxHome}/plans/mux/sidebar-a1b2.md`);\n      expect(result2).toBe(`${expectedMuxHome}/plans/other-project/auth-c3d4.md`);\n    });\n\n    it(\"should use custom muxHome when provided (Docker uses /var/mux)\", () => {\n      const result = getPlanFilePath(\"fix-plan-a1b2\", \"mux\", \"/var/mux\");\n      expect(result).toBe(\"/var/mux/plans/mux/fix-plan-a1b2.md\");\n    });\n\n    it(\"should default to ~/.mux when muxHome not provided\", () => {\n      const withDefault = getPlanFilePath(\"workspace\", \"project\");\n      const withExplicit = getPlanFilePath(\"workspace\", \"project\", \"~/.mux\");\n      expect(withDefault).toBe(withExplicit);\n    });\n  });\n\n  describe(\"getLegacyPlanFilePath\", () => {\n    it(\"should return path with workspace ID\", () => {\n      const result = getLegacyPlanFilePath(\"a1b2c3d4e5\");\n      expect(result).toBe(`${expectedMuxHome}/plans/a1b2c3d4e5.md`);\n    });\n\n    it(\"should handle legacy format IDs\", () => {\n      const result = getLegacyPlanFilePath(\"mux-main\");\n      expect(result).toBe(`${expectedMuxHome}/plans/mux-main.md`);\n    });\n  });\n});\n"]}