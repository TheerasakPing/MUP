{"version":3,"file":"modelDisplay.js","sourceRoot":"","sources":["../../../../src/common/utils/ai/modelDisplay.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * Formatting utilities for model display names\r\n */\r\n\r\n/**\r\n * Format a model name for display with proper capitalization and spacing.\r\n *\r\n * Examples:\r\n * - \"claude-sonnet-4-5\" -> \"Sonnet 4.5\"\r\n * - \"claude-opus-4-1\" -> \"Opus 4.1\"\r\n * - \"gpt-5-pro\" -> \"GPT-5 Pro\"\r\n * - \"gpt-4o\" -> \"GPT-4o\"\r\n * - \"gemini-2-0-flash-exp\" -> \"Gemini 2.0 Flash Exp\"\r\n * - \"global.anthropic.claude-sonnet-4-5-20250929-v1:0\" -> \"Sonnet 4.5\"\r\n *\r\n * @param modelName - The technical model name (without provider prefix)\r\n * @returns Formatted display name\r\n */\r\nexport function formatModelDisplayName(modelName: string): string {\r\n  // Bedrock models have format: [region.]vendor.model-name-date-version:0\r\n  // e.g., \"global.anthropic.claude-sonnet-4-5-20250929-v1:0\"\r\n  //       \"us.anthropic.claude-opus-4-20250514-v1:0\"\r\n  //       \"anthropic.claude-3-5-sonnet-20240620-v1:0\"\r\n  const bedrockParsed = parseBedrockModelName(modelName);\r\n  if (bedrockParsed) {\r\n    modelName = bedrockParsed;\r\n  }\r\n\r\n  const lower = modelName.toLowerCase();\r\n\r\n  // Claude models - extract the model tier and version\r\n  if (lower.startsWith(\"claude-\")) {\r\n    const parts = lower.replace(\"claude-\", \"\").split(\"-\");\r\n\r\n    // Known tiers for Claude models\r\n    const tiers = [\"sonnet\", \"opus\", \"haiku\"];\r\n\r\n    // Format: claude-{tier}-{major}-{minor} (newer naming)\r\n    // e.g., \"claude-sonnet-4-5\" -> \"Sonnet 4.5\"\r\n    if (parts.length >= 3 && tiers.includes(parts[0])) {\r\n      const tier = capitalize(parts[0]); // sonnet, opus, haiku\r\n      const version = formatVersion(parts.slice(1)); // 4-5 -> 4.5\r\n      return `${tier} ${version}`;\r\n    }\r\n\r\n    // Format: claude-{major}-{minor}-{tier} (older naming like claude-3-5-sonnet)\r\n    // e.g., \"claude-3-5-sonnet\" -> \"Sonnet 3.5\"\r\n    if (parts.length >= 3) {\r\n      const tierIdx = parts.findIndex((p) => tiers.includes(p));\r\n      if (tierIdx > 0) {\r\n        const tier = capitalize(parts[tierIdx]);\r\n        const version = formatVersion(parts.slice(0, tierIdx));\r\n        return `${tier} ${version}`;\r\n      }\r\n    }\r\n\r\n    // Format: claude-{tier}-{major}\r\n    // e.g., \"claude-sonnet-4\" -> \"Sonnet 4\"\r\n    if (parts.length === 2 && tiers.includes(parts[0])) {\r\n      const tier = capitalize(parts[0]);\r\n      return `${tier} ${parts[1]}`;\r\n    }\r\n  }\r\n\r\n  // GPT models\r\n  if (lower.startsWith(\"gpt-\")) {\r\n    // \"gpt-5-pro\" -> \"GPT-5 Pro\"\r\n    // \"gpt-4o\" -> \"GPT-4o\"\r\n    // \"gpt-4o-mini\" -> \"GPT-4o Mini\"\r\n    const parts = lower.split(\"-\");\r\n\r\n    if (parts.length >= 2) {\r\n      // Keep \"gpt\" and first part together (gpt-5, gpt-4o)\r\n      const base = `GPT-${parts[1]}`;\r\n\r\n      // Capitalize remaining parts\r\n      const rest = parts.slice(2).map(capitalize).join(\" \");\r\n\r\n      return rest ? `${base} ${rest}` : base;\r\n    }\r\n  }\r\n\r\n  // Gemini models\r\n  if (lower.startsWith(\"gemini-\")) {\r\n    // \"gemini-2-0-flash-exp\" -> \"Gemini 2.0 Flash Exp\"\r\n    const parts = lower.replace(\"gemini-\", \"\").split(\"-\");\r\n\r\n    // Try to detect version pattern (numbers at start)\r\n    const versionParts: string[] = [];\r\n    const nameParts: string[] = [];\r\n\r\n    for (const part of parts) {\r\n      if (versionParts.length < 2 && /^\\d+$/.test(part)) {\r\n        versionParts.push(part);\r\n      } else {\r\n        nameParts.push(capitalize(part));\r\n      }\r\n    }\r\n\r\n    const version = versionParts.length > 0 ? versionParts.join(\".\") : \"\";\r\n    const name = nameParts.join(\" \");\r\n\r\n    if (version && name) {\r\n      return `Gemini ${version} ${name}`;\r\n    } else if (version) {\r\n      return `Gemini ${version}`;\r\n    } else if (name) {\r\n      return `Gemini ${name}`;\r\n    }\r\n  }\r\n\r\n  // Ollama models - handle format like \"llama3.2:7b\" or \"codellama:13b\"\r\n  // Split by colon to handle quantization/size suffix\r\n  const [baseName, size] = modelName.split(\":\");\r\n  if (size) {\r\n    // \"llama3.2:7b\" -> \"Llama 3.2 (7B)\"\r\n    // \"codellama:13b\" -> \"Codellama (13B)\"\r\n    const formatted = baseName\r\n      .split(/(\\d+\\.?\\d*)/)\r\n      .map((part, idx) => {\r\n        if (idx === 0) return capitalize(part);\r\n        if (/^\\d+\\.?\\d*$/.test(part)) return ` ${part}`;\r\n        return part;\r\n      })\r\n      .join(\"\");\r\n    return `${formatted.trim()} (${size.toUpperCase()})`;\r\n  }\r\n\r\n  // Fallback: capitalize first letter of each dash-separated part\r\n  return modelName.split(\"-\").map(capitalize).join(\" \");\r\n}\r\n\r\n/**\r\n * Capitalize the first letter of a string\r\n */\r\nfunction capitalize(str: string): string {\r\n  if (!str) return str;\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n/**\r\n * Format version numbers: [\"4\", \"5\"] -> \"4.5\"\r\n */\r\nfunction formatVersion(parts: string[]): string {\r\n  return parts.join(\".\");\r\n}\r\n\r\n/**\r\n * Parse Bedrock model ID to extract the core model name.\r\n *\r\n * Bedrock format: [region.]vendor.model-name-date-version:0\r\n * Examples:\r\n * - \"global.anthropic.claude-sonnet-4-5-20250929-v1:0\" -> \"claude-sonnet-4-5\"\r\n * - \"us.anthropic.claude-opus-4-20250514-v1:0\" -> \"claude-opus-4\"\r\n * - \"anthropic.claude-3-5-sonnet-20240620-v1:0\" -> \"claude-3-5-sonnet\"\r\n * - \"amazon.titan-text-premier-v1:0\" -> \"titan-text-premier\"\r\n *\r\n * @returns The extracted model name, or null if not a Bedrock format\r\n */\r\nfunction parseBedrockModelName(modelId: string): string | null {\r\n  // Must contain a dot to be Bedrock format\r\n  if (!modelId.includes(\".\")) {\r\n    return null;\r\n  }\r\n\r\n  // Split by dot to get parts\r\n  const dotParts = modelId.split(\".\");\r\n\r\n  // Need at least vendor.modelName (2 parts)\r\n  if (dotParts.length < 2) {\r\n    return null;\r\n  }\r\n\r\n  // Check if this looks like a Bedrock model (known vendors or region prefixes)\r\n  const knownVendors = [\"anthropic\", \"amazon\", \"meta\", \"cohere\", \"mistral\", \"ai21\"];\r\n  const knownRegionPrefixes = [\"global\", \"us\", \"eu\", \"ap\", \"sa\"];\r\n\r\n  const firstPart = dotParts[0].toLowerCase();\r\n  const secondPart = dotParts.length > 1 ? dotParts[1].toLowerCase() : \"\";\r\n\r\n  // Format is either: vendor.model or region.vendor.model\r\n  const isVendor = knownVendors.includes(firstPart);\r\n  const isRegionPrefix = knownRegionPrefixes.some(\r\n    (prefix) => firstPart === prefix || firstPart.startsWith(`${prefix}-`)\r\n  );\r\n  const secondPartIsVendor = knownVendors.includes(secondPart);\r\n\r\n  if (!isVendor && !(isRegionPrefix && secondPartIsVendor)) {\r\n    return null;\r\n  }\r\n\r\n  // Last part is the model name with possible date/version suffix\r\n  const rawModelName = dotParts[dotParts.length - 1];\r\n\r\n  // Remove version suffix like \":0\"\r\n  const withoutVersion = rawModelName.split(\":\")[0];\r\n\r\n  // Remove date and version suffix: -YYYYMMDD-vN or just -vN\r\n  // Pattern: model-name[-major[-minor]]-YYYYMMDD-vN\r\n  const dateVersionPattern = /-\\d{8}-v\\d+$/;\r\n  const versionOnlyPattern = /-v\\d+$/;\r\n  const cleanedName = withoutVersion\r\n    .replace(dateVersionPattern, \"\")\r\n    .replace(versionOnlyPattern, \"\");\r\n\r\n  return cleanedName;\r\n}\r\n"]}