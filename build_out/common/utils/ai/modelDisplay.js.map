{"version":3,"file":"modelDisplay.js","sourceRoot":"","sources":["../../../../src/common/utils/ai/modelDisplay.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Formatting utilities for model display names\n */\n\n/**\n * Format a model name for display with proper capitalization and spacing.\n *\n * Examples:\n * - \"claude-sonnet-4-5\" -> \"Sonnet 4.5\"\n * - \"claude-opus-4-1\" -> \"Opus 4.1\"\n * - \"gpt-5-pro\" -> \"GPT-5 Pro\"\n * - \"gpt-4o\" -> \"GPT-4o\"\n * - \"gemini-2-0-flash-exp\" -> \"Gemini 2.0 Flash Exp\"\n * - \"global.anthropic.claude-sonnet-4-5-20250929-v1:0\" -> \"Sonnet 4.5\"\n *\n * @param modelName - The technical model name (without provider prefix)\n * @returns Formatted display name\n */\nexport function formatModelDisplayName(modelName: string): string {\n  // Bedrock models have format: [region.]vendor.model-name-date-version:0\n  // e.g., \"global.anthropic.claude-sonnet-4-5-20250929-v1:0\"\n  //       \"us.anthropic.claude-opus-4-20250514-v1:0\"\n  //       \"anthropic.claude-3-5-sonnet-20240620-v1:0\"\n  const bedrockParsed = parseBedrockModelName(modelName);\n  if (bedrockParsed) {\n    modelName = bedrockParsed;\n  }\n\n  const lower = modelName.toLowerCase();\n\n  // Claude models - extract the model tier and version\n  if (lower.startsWith(\"claude-\")) {\n    const parts = lower.replace(\"claude-\", \"\").split(\"-\");\n\n    // Known tiers for Claude models\n    const tiers = [\"sonnet\", \"opus\", \"haiku\"];\n\n    // Format: claude-{tier}-{major}-{minor} (newer naming)\n    // e.g., \"claude-sonnet-4-5\" -> \"Sonnet 4.5\"\n    if (parts.length >= 3 && tiers.includes(parts[0])) {\n      const tier = capitalize(parts[0]); // sonnet, opus, haiku\n      const version = formatVersion(parts.slice(1)); // 4-5 -> 4.5\n      return `${tier} ${version}`;\n    }\n\n    // Format: claude-{major}-{minor}-{tier} (older naming like claude-3-5-sonnet)\n    // e.g., \"claude-3-5-sonnet\" -> \"Sonnet 3.5\"\n    if (parts.length >= 3) {\n      const tierIdx = parts.findIndex((p) => tiers.includes(p));\n      if (tierIdx > 0) {\n        const tier = capitalize(parts[tierIdx]);\n        const version = formatVersion(parts.slice(0, tierIdx));\n        return `${tier} ${version}`;\n      }\n    }\n\n    // Format: claude-{tier}-{major}\n    // e.g., \"claude-sonnet-4\" -> \"Sonnet 4\"\n    if (parts.length === 2 && tiers.includes(parts[0])) {\n      const tier = capitalize(parts[0]);\n      return `${tier} ${parts[1]}`;\n    }\n  }\n\n  // GPT models\n  if (lower.startsWith(\"gpt-\")) {\n    // \"gpt-5-pro\" -> \"GPT-5 Pro\"\n    // \"gpt-4o\" -> \"GPT-4o\"\n    // \"gpt-4o-mini\" -> \"GPT-4o Mini\"\n    const parts = lower.split(\"-\");\n\n    if (parts.length >= 2) {\n      // Keep \"gpt\" and first part together (gpt-5, gpt-4o)\n      const base = `GPT-${parts[1]}`;\n\n      // Capitalize remaining parts\n      const rest = parts.slice(2).map(capitalize).join(\" \");\n\n      return rest ? `${base} ${rest}` : base;\n    }\n  }\n\n  // Gemini models\n  if (lower.startsWith(\"gemini-\")) {\n    // \"gemini-2-0-flash-exp\" -> \"Gemini 2.0 Flash Exp\"\n    const parts = lower.replace(\"gemini-\", \"\").split(\"-\");\n\n    // Try to detect version pattern (numbers at start)\n    const versionParts: string[] = [];\n    const nameParts: string[] = [];\n\n    for (const part of parts) {\n      if (versionParts.length < 2 && /^\\d+$/.test(part)) {\n        versionParts.push(part);\n      } else {\n        nameParts.push(capitalize(part));\n      }\n    }\n\n    const version = versionParts.length > 0 ? versionParts.join(\".\") : \"\";\n    const name = nameParts.join(\" \");\n\n    if (version && name) {\n      return `Gemini ${version} ${name}`;\n    } else if (version) {\n      return `Gemini ${version}`;\n    } else if (name) {\n      return `Gemini ${name}`;\n    }\n  }\n\n  // Ollama models - handle format like \"llama3.2:7b\" or \"codellama:13b\"\n  // Split by colon to handle quantization/size suffix\n  const [baseName, size] = modelName.split(\":\");\n  if (size) {\n    // \"llama3.2:7b\" -> \"Llama 3.2 (7B)\"\n    // \"codellama:13b\" -> \"Codellama (13B)\"\n    const formatted = baseName\n      .split(/(\\d+\\.?\\d*)/)\n      .map((part, idx) => {\n        if (idx === 0) return capitalize(part);\n        if (/^\\d+\\.?\\d*$/.test(part)) return ` ${part}`;\n        return part;\n      })\n      .join(\"\");\n    return `${formatted.trim()} (${size.toUpperCase()})`;\n  }\n\n  // Fallback: capitalize first letter of each dash-separated part\n  return modelName.split(\"-\").map(capitalize).join(\" \");\n}\n\n/**\n * Capitalize the first letter of a string\n */\nfunction capitalize(str: string): string {\n  if (!str) return str;\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * Format version numbers: [\"4\", \"5\"] -> \"4.5\"\n */\nfunction formatVersion(parts: string[]): string {\n  return parts.join(\".\");\n}\n\n/**\n * Parse Bedrock model ID to extract the core model name.\n *\n * Bedrock format: [region.]vendor.model-name-date-version:0\n * Examples:\n * - \"global.anthropic.claude-sonnet-4-5-20250929-v1:0\" -> \"claude-sonnet-4-5\"\n * - \"us.anthropic.claude-opus-4-20250514-v1:0\" -> \"claude-opus-4\"\n * - \"anthropic.claude-3-5-sonnet-20240620-v1:0\" -> \"claude-3-5-sonnet\"\n * - \"amazon.titan-text-premier-v1:0\" -> \"titan-text-premier\"\n *\n * @returns The extracted model name, or null if not a Bedrock format\n */\nfunction parseBedrockModelName(modelId: string): string | null {\n  // Must contain a dot to be Bedrock format\n  if (!modelId.includes(\".\")) {\n    return null;\n  }\n\n  // Split by dot to get parts\n  const dotParts = modelId.split(\".\");\n\n  // Need at least vendor.modelName (2 parts)\n  if (dotParts.length < 2) {\n    return null;\n  }\n\n  // Check if this looks like a Bedrock model (known vendors or region prefixes)\n  const knownVendors = [\"anthropic\", \"amazon\", \"meta\", \"cohere\", \"mistral\", \"ai21\"];\n  const knownRegionPrefixes = [\"global\", \"us\", \"eu\", \"ap\", \"sa\"];\n\n  const firstPart = dotParts[0].toLowerCase();\n  const secondPart = dotParts.length > 1 ? dotParts[1].toLowerCase() : \"\";\n\n  // Format is either: vendor.model or region.vendor.model\n  const isVendor = knownVendors.includes(firstPart);\n  const isRegionPrefix = knownRegionPrefixes.some(\n    (prefix) => firstPart === prefix || firstPart.startsWith(`${prefix}-`)\n  );\n  const secondPartIsVendor = knownVendors.includes(secondPart);\n\n  if (!isVendor && !(isRegionPrefix && secondPartIsVendor)) {\n    return null;\n  }\n\n  // Last part is the model name with possible date/version suffix\n  const rawModelName = dotParts[dotParts.length - 1];\n\n  // Remove version suffix like \":0\"\n  const withoutVersion = rawModelName.split(\":\")[0];\n\n  // Remove date and version suffix: -YYYYMMDD-vN or just -vN\n  // Pattern: model-name[-major[-minor]]-YYYYMMDD-vN\n  const dateVersionPattern = /-\\d{8}-v\\d+$/;\n  const versionOnlyPattern = /-v\\d+$/;\n  const cleanedName = withoutVersion\n    .replace(dateVersionPattern, \"\")\n    .replace(versionOnlyPattern, \"\");\n\n  return cleanedName;\n}\n"]}