{"version":3,"file":"planStorage.js","sourceRoot":"","sources":["../../../src/common/utils/planStorage.ts"],"names":[],"mappings":";;;;AAAA;;;;;;;GAOG;AACH,MAAM,gBAAgB,GAAG,QAAQ,CAAC;AAElC;;;;;;;;;;;;;GAaG;AACH,yBACE,aAAqB,EACrB,WAAmB,EACnB,OAAO,GAAG,gBAAgB,EAClB;IACR,OAAO,GAAG,OAAO,UAAU,WAAW,IAAI,aAAa,KAAK,CAAC;AAAA,CAC9D;AAED;;;;;;GAMG;AACH,+BAAsC,WAAmB,EAAU;IACjE,OAAO,GAAG,gBAAgB,UAAU,WAAW,KAAK,CAAC;AAAA,CACtD","sourcesContent":["/**\n * Default mux home directory for plan storage.\n * Uses tilde prefix for portability across local/remote runtimes.\n * Note: Plan files intentionally do NOT use the -dev suffix because they\n * should be accessible regardless of whether running dev or prod builds.\n *\n * Docker containers use /var/mux instead (passed via muxHome parameter).\n */\nconst DEFAULT_MUX_HOME = \"~/.mux\";\n\n/**\n * Get the plan file path for a workspace.\n * Returns a path that works with the specified runtime's mux home directory.\n *\n * Plan files are stored at: {muxHome}/plans/{projectName}/{workspaceName}.md\n *\n * Workspace names include a random suffix (e.g., \"sidebar-a1b2\") making them\n * globally unique with high probability. The project folder is for organization\n * and discoverability, not uniqueness.\n *\n * @param workspaceName - Human-readable workspace name with suffix (e.g., \"fix-plan-a1b2\")\n * @param projectName - Project name extracted from project path (e.g., \"mux\")\n * @param muxHome - Mux home directory (default: ~/.mux, Docker uses /var/mux)\n */\nexport function getPlanFilePath(\n  workspaceName: string,\n  projectName: string,\n  muxHome = DEFAULT_MUX_HOME\n): string {\n  return `${muxHome}/plans/${projectName}/${workspaceName}.md`;\n}\n\n/**\n * Get the legacy plan file path (stored by workspace ID).\n * Used for migration: when reading, check new path first, then fall back to legacy.\n * Note: Legacy paths are not used for Docker (no migration needed for new runtime).\n *\n * @param workspaceId - Stable workspace identifier (e.g., \"a1b2c3d4e5\")\n */\nexport function getLegacyPlanFilePath(workspaceId: string): string {\n  return `${DEFAULT_MUX_HOME}/plans/${workspaceId}.md`;\n}\n"]}