{"version":3,"file":"planStorage.js","sourceRoot":"","sources":["../../../src/common/utils/planStorage.ts"],"names":[],"mappings":";;;;AAAA;;;;;;;GAOG;AACH,MAAM,gBAAgB,GAAG,QAAQ,CAAC;AAElC;;;;;;;;;;;;;GAaG;AACH,yBACE,aAAqB,EACrB,WAAmB,EACnB,OAAO,GAAG,gBAAgB,EAClB;IACR,OAAO,GAAG,OAAO,UAAU,WAAW,IAAI,aAAa,KAAK,CAAC;AAAA,CAC9D;AAED;;;;;;GAMG;AACH,+BAAsC,WAAmB,EAAU;IACjE,OAAO,GAAG,gBAAgB,UAAU,WAAW,KAAK,CAAC;AAAA,CACtD","sourcesContent":["/**\r\n * Default mux home directory for plan storage.\r\n * Uses tilde prefix for portability across local/remote runtimes.\r\n * Note: Plan files intentionally do NOT use the -dev suffix because they\r\n * should be accessible regardless of whether running dev or prod builds.\r\n *\r\n * Docker containers use /var/mux instead (passed via muxHome parameter).\r\n */\r\nconst DEFAULT_MUX_HOME = \"~/.mux\";\r\n\r\n/**\r\n * Get the plan file path for a workspace.\r\n * Returns a path that works with the specified runtime's mux home directory.\r\n *\r\n * Plan files are stored at: {muxHome}/plans/{projectName}/{workspaceName}.md\r\n *\r\n * Workspace names include a random suffix (e.g., \"sidebar-a1b2\") making them\r\n * globally unique with high probability. The project folder is for organization\r\n * and discoverability, not uniqueness.\r\n *\r\n * @param workspaceName - Human-readable workspace name with suffix (e.g., \"fix-plan-a1b2\")\r\n * @param projectName - Project name extracted from project path (e.g., \"mux\")\r\n * @param muxHome - Mux home directory (default: ~/.mux, Docker uses /var/mux)\r\n */\r\nexport function getPlanFilePath(\r\n  workspaceName: string,\r\n  projectName: string,\r\n  muxHome = DEFAULT_MUX_HOME\r\n): string {\r\n  return `${muxHome}/plans/${projectName}/${workspaceName}.md`;\r\n}\r\n\r\n/**\r\n * Get the legacy plan file path (stored by workspace ID).\r\n * Used for migration: when reading, check new path first, then fall back to legacy.\r\n * Note: Legacy paths are not used for Docker (no migration needed for new runtime).\r\n *\r\n * @param workspaceId - Stable workspace identifier (e.g., \"a1b2c3d4e5\")\r\n */\r\nexport function getLegacyPlanFilePath(workspaceId: string): string {\r\n  return `${DEFAULT_MUX_HOME}/plans/${workspaceId}.md`;\r\n}\r\n"]}