{"version":3,"file":"nameStatusParser.test.js","sourceRoot":"","sources":["../../../../src/common/utils/git/nameStatusParser.test.ts"],"names":[],"mappings":";;AAAA,uCAAgD;AAChD,yDAAqD;AAErD,IAAA,mBAAQ,EAAC,iBAAiB,EAAE,GAAG,EAAE,CAAC;IAChC,IAAA,aAAE,EAAC,uCAAuC,EAAE,GAAG,EAAE,CAAC;QAChD,MAAM,MAAM,GAAG,CAAC,WAAW,EAAE,mBAAmB,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE1E,IAAA,iBAAM,EAAC,IAAA,kCAAe,EAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC;YACtC,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,OAAO,EAAE;YAC3C,EAAE,QAAQ,EAAE,gBAAgB,EAAE,UAAU,EAAE,UAAU,EAAE;YACtD,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE;SAC9C,CAAC,CAAC;IAAA,CACJ,CAAC,CAAC;IAEH,IAAA,aAAE,EAAC,uBAAuB,EAAE,GAAG,EAAE,CAAC;QAChC,MAAM,MAAM,GAAG,kCAAkC,CAAC;QAElD,IAAA,iBAAM,EAAC,IAAA,kCAAe,EAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC;YACtC,EAAE,QAAQ,EAAE,aAAa,EAAE,OAAO,EAAE,aAAa,EAAE,UAAU,EAAE,OAAO,EAAE;SACzE,CAAC,CAAC;IAAA,CACJ,CAAC,CAAC;IACH,IAAA,aAAE,EAAC,wBAAwB,EAAE,GAAG,EAAE,CAAC;QACjC,MAAM,MAAM,GAAG,gCAAgC,CAAC;QAEhD,IAAA,iBAAM,EAAC,IAAA,kCAAe,EAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC;YACtC,EAAE,QAAQ,EAAE,YAAY,EAAE,OAAO,EAAE,YAAY,EAAE,UAAU,EAAE,SAAS,EAAE;SACzE,CAAC,CAAC;IAAA,CACJ,CAAC,CAAC;IAEH,IAAA,aAAE,EAAC,kCAAkC,EAAE,GAAG,EAAE,CAAC;QAC3C,MAAM,MAAM,GAAG;YACb,YAAY;YACZ,YAAY;YACZ,aAAa;YACb,aAAa;YACb,yBAAyB;SAC1B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEb,uCAAuC;QACvC,IAAA,iBAAM,EAAC,IAAA,kCAAe,EAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC;YACtC,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE;YAC9C,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,OAAO,EAAE;SAC9C,CAAC,CAAC;IAAA,CACJ,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { describe, it, expect } from \"bun:test\";\nimport { parseNameStatus } from \"./nameStatusParser\";\n\ndescribe(\"parseNameStatus\", () => {\n  it(\"parses added/modified/deleted entries\", () => {\n    const output = [\"A\\tnew.ts\", \"M\\tsrc/changed.ts\", \"D\\told.ts\"].join(\"\\n\");\n\n    expect(parseNameStatus(output)).toEqual([\n      { filePath: \"new.ts\", changeType: \"added\" },\n      { filePath: \"src/changed.ts\", changeType: \"modified\" },\n      { filePath: \"old.ts\", changeType: \"deleted\" },\n    ]);\n  });\n\n  it(\"parses copied entries\", () => {\n    const output = \"C100\\tsrc/orig.ts\\tsrc/copy.ts\\n\";\n\n    expect(parseNameStatus(output)).toEqual([\n      { filePath: \"src/copy.ts\", oldPath: \"src/orig.ts\", changeType: \"added\" },\n    ]);\n  });\n  it(\"parses renamed entries\", () => {\n    const output = \"R100\\tsrc/old.ts\\tsrc/new.ts\\n\";\n\n    expect(parseNameStatus(output)).toEqual([\n      { filePath: \"src/new.ts\", oldPath: \"src/old.ts\", changeType: \"renamed\" },\n    ]);\n  });\n\n  it(\"dedupes by changeType precedence\", () => {\n    const output = [\n      \"M\\tsame.ts\",\n      \"D\\tsame.ts\",\n      \"A\\tother.ts\",\n      \"M\\tother.ts\",\n      \"R100\\tfrom.ts\\tother.ts\",\n    ].join(\"\\n\");\n\n    // deleted > added > renamed > modified\n    expect(parseNameStatus(output)).toEqual([\n      { filePath: \"same.ts\", changeType: \"deleted\" },\n      { filePath: \"other.ts\", changeType: \"added\" },\n    ]);\n  });\n});\n"]}