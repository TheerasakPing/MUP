{"version":3,"file":"languageDetector.js","sourceRoot":"","sources":["../../../../src/common/utils/git/languageDetector.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * Language detection utility for syntax highlighting in diffs\r\n * Maps file paths to Prism language identifiers using file extensions\r\n */\r\n\r\n/**\r\n * Maps file extensions to Prism language identifiers\r\n * Comprehensive mapping covering common programming languages and formats\r\n */\r\nconst EXTENSION_TO_PRISM: Record<string, string> = {\r\n  // JavaScript/TypeScript ecosystem\r\n  \".ts\": \"typescript\",\r\n  \".tsx\": \"tsx\",\r\n  \".js\": \"javascript\",\r\n  \".mjs\": \"javascript\",\r\n  \".cjs\": \"javascript\",\r\n  \".jsx\": \"jsx\",\r\n\r\n  // Web technologies\r\n  \".html\": \"html\",\r\n  \".htm\": \"html\",\r\n  \".css\": \"css\",\r\n  \".scss\": \"scss\",\r\n  \".sass\": \"sass\",\r\n  \".less\": \"less\",\r\n\r\n  // Backend languages\r\n  \".py\": \"python\",\r\n  \".pyw\": \"python\",\r\n  \".java\": \"java\",\r\n  \".cs\": \"csharp\",\r\n  \".cpp\": \"cpp\",\r\n  \".cc\": \"cpp\",\r\n  \".cxx\": \"cpp\",\r\n  \".c\": \"c\",\r\n  \".h\": \"c\",\r\n  \".go\": \"go\",\r\n  \".rs\": \"rust\",\r\n  \".rb\": \"ruby\",\r\n  \".php\": \"php\",\r\n  \".kt\": \"kotlin\",\r\n  \".kts\": \"kotlin\",\r\n  \".swift\": \"swift\",\r\n  \".scala\": \"scala\",\r\n  \".sc\": \"scala\",\r\n  \".ex\": \"elixir\",\r\n  \".exs\": \"elixir\",\r\n  \".erl\": \"erlang\",\r\n  \".hrl\": \"erlang\",\r\n  \".hs\": \"haskell\",\r\n  \".lhs\": \"haskell\",\r\n  \".lua\": \"lua\",\r\n  \".pl\": \"perl\",\r\n  \".pm\": \"perl\",\r\n  \".r\": \"r\",\r\n  \".R\": \"r\",\r\n\r\n  // Shell/scripting\r\n  \".sh\": \"bash\",\r\n  \".bash\": \"bash\",\r\n  \".zsh\": \"bash\",\r\n  \".ps1\": \"powershell\",\r\n  \".psm1\": \"powershell\",\r\n  \".bat\": \"batch\",\r\n  \".cmd\": \"batch\",\r\n\r\n  // Data/config formats\r\n  \".json\": \"json\",\r\n  \".jsonc\": \"json\",\r\n  \".yaml\": \"yaml\",\r\n  \".yml\": \"yaml\",\r\n  \".toml\": \"toml\",\r\n  \".xml\": \"xml\",\r\n  \".md\": \"markdown\",\r\n  \".markdown\": \"markdown\",\r\n  \".sql\": \"sql\",\r\n  \".graphql\": \"graphql\",\r\n  \".gql\": \"graphql\",\r\n\r\n  // Other languages\r\n  \".vim\": \"vim\",\r\n  \".diff\": \"diff\",\r\n  \".patch\": \"diff\",\r\n  \".clj\": \"clojure\",\r\n  \".cljs\": \"clojurescript\",\r\n  \".coffee\": \"coffeescript\",\r\n  \".dart\": \"dart\",\r\n  \".elm\": \"elm\",\r\n  \".jl\": \"julia\",\r\n  \".nim\": \"nim\",\r\n  \".ml\": \"ocaml\",\r\n  \".re\": \"reason\",\r\n  \".sol\": \"solidity\",\r\n  \".zig\": \"zig\",\r\n};\r\n\r\n/**\r\n * Maps special filenames to Prism language identifiers\r\n */\r\nconst FILENAME_TO_PRISM: Record<string, string> = {\r\n  Dockerfile: \"docker\",\r\n  \"Dockerfile.dev\": \"docker\",\r\n  \"Dockerfile.prod\": \"docker\",\r\n  \"Dockerfile.test\": \"docker\",\r\n  Makefile: \"makefile\",\r\n  GNUmakefile: \"makefile\",\r\n  makefile: \"makefile\",\r\n  Gemfile: \"ruby\",\r\n  \"Gemfile.lock\": \"ruby\",\r\n  Rakefile: \"ruby\",\r\n  Vagrantfile: \"ruby\",\r\n};\r\n\r\n/**\r\n * Detects the programming language from a file path for syntax highlighting\r\n * @param filePath - Relative or absolute file path\r\n * @returns Prism language identifier (e.g., \"typescript\", \"python\") or \"text\" if unknown\r\n */\r\nexport function getLanguageFromPath(filePath: string): string {\r\n  // Extract filename and extension\r\n  const parts = filePath.split(\"/\");\r\n  const filename = parts[parts.length - 1];\r\n  const lastDot = filename.lastIndexOf(\".\");\r\n  const extension = lastDot >= 0 ? filename.slice(lastDot).toLowerCase() : \"\";\r\n\r\n  // Check special filenames first (Dockerfile, Makefile, etc.)\r\n  if (FILENAME_TO_PRISM[filename]) {\r\n    return FILENAME_TO_PRISM[filename];\r\n  }\r\n\r\n  // Check extension mapping\r\n  if (extension && EXTENSION_TO_PRISM[extension]) {\r\n    return EXTENSION_TO_PRISM[extension];\r\n  }\r\n\r\n  // Unknown file type\r\n  return \"text\";\r\n}\r\n\r\n/**\r\n * Maps Prism language identifiers to human-readable display names\r\n */\r\nconst LANGUAGE_DISPLAY_NAMES: Record<string, string> = {\r\n  typescript: \"TypeScript\",\r\n  tsx: \"TypeScript React\",\r\n  javascript: \"JavaScript\",\r\n  jsx: \"JavaScript React\",\r\n  html: \"HTML\",\r\n  css: \"CSS\",\r\n  scss: \"SCSS\",\r\n  sass: \"Sass\",\r\n  less: \"Less\",\r\n  python: \"Python\",\r\n  java: \"Java\",\r\n  csharp: \"C#\",\r\n  cpp: \"C++\",\r\n  c: \"C\",\r\n  go: \"Go\",\r\n  rust: \"Rust\",\r\n  ruby: \"Ruby\",\r\n  php: \"PHP\",\r\n  kotlin: \"Kotlin\",\r\n  swift: \"Swift\",\r\n  scala: \"Scala\",\r\n  elixir: \"Elixir\",\r\n  erlang: \"Erlang\",\r\n  haskell: \"Haskell\",\r\n  clojure: \"Clojure\",\r\n  lua: \"Lua\",\r\n  perl: \"Perl\",\r\n  r: \"R\",\r\n  julia: \"Julia\",\r\n  dart: \"Dart\",\r\n  sql: \"SQL\",\r\n  graphql: \"GraphQL\",\r\n  json: \"JSON\",\r\n  yaml: \"YAML\",\r\n  toml: \"TOML\",\r\n  xml: \"XML\",\r\n  markdown: \"Markdown\",\r\n  latex: \"LaTeX\",\r\n  bash: \"Bash\",\r\n  powershell: \"PowerShell\",\r\n  docker: \"Dockerfile\",\r\n  makefile: \"Makefile\",\r\n  nginx: \"nginx\",\r\n  diff: \"Diff\",\r\n  text: \"Plain Text\",\r\n};\r\n\r\n/**\r\n * Returns a human-readable display name for a Prism language identifier\r\n * @param language - Prism language identifier (e.g., \"typescript\", \"python\")\r\n * @returns Human-readable name (e.g., \"TypeScript\", \"Python\")\r\n */\r\nexport function getLanguageDisplayName(language: string): string {\r\n  return LANGUAGE_DISPLAY_NAMES[language] ?? language;\r\n}\r\n"]}