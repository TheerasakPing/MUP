{"version":3,"file":"languageDetector.js","sourceRoot":"","sources":["../../../../src/common/utils/git/languageDetector.ts"],"names":[],"mappings":";AAAA;;;GAGG;;;;AAEH;;;GAGG;AACH,MAAM,kBAAkB,GAA2B;IACjD,kCAAkC;IAClC,KAAK,EAAE,YAAY;IACnB,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,YAAY;IACnB,MAAM,EAAE,YAAY;IACpB,MAAM,EAAE,YAAY;IACpB,MAAM,EAAE,KAAK;IAEb,mBAAmB;IACnB,OAAO,EAAE,MAAM;IACf,MAAM,EAAE,MAAM;IACd,MAAM,EAAE,KAAK;IACb,OAAO,EAAE,MAAM;IACf,OAAO,EAAE,MAAM;IACf,OAAO,EAAE,MAAM;IAEf,oBAAoB;IACpB,KAAK,EAAE,QAAQ;IACf,MAAM,EAAE,QAAQ;IAChB,OAAO,EAAE,MAAM;IACf,KAAK,EAAE,QAAQ;IACf,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,KAAK;IACZ,MAAM,EAAE,KAAK;IACb,IAAI,EAAE,GAAG;IACT,IAAI,EAAE,GAAG;IACT,KAAK,EAAE,IAAI;IACX,KAAK,EAAE,MAAM;IACb,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,QAAQ;IACf,MAAM,EAAE,QAAQ;IAChB,QAAQ,EAAE,OAAO;IACjB,QAAQ,EAAE,OAAO;IACjB,KAAK,EAAE,OAAO;IACd,KAAK,EAAE,QAAQ;IACf,MAAM,EAAE,QAAQ;IAChB,MAAM,EAAE,QAAQ;IAChB,MAAM,EAAE,QAAQ;IAChB,KAAK,EAAE,SAAS;IAChB,MAAM,EAAE,SAAS;IACjB,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,MAAM;IACb,KAAK,EAAE,MAAM;IACb,IAAI,EAAE,GAAG;IACT,IAAI,EAAE,GAAG;IAET,kBAAkB;IAClB,KAAK,EAAE,MAAM;IACb,OAAO,EAAE,MAAM;IACf,MAAM,EAAE,MAAM;IACd,MAAM,EAAE,YAAY;IACpB,OAAO,EAAE,YAAY;IACrB,MAAM,EAAE,OAAO;IACf,MAAM,EAAE,OAAO;IAEf,sBAAsB;IACtB,OAAO,EAAE,MAAM;IACf,QAAQ,EAAE,MAAM;IAChB,OAAO,EAAE,MAAM;IACf,MAAM,EAAE,MAAM;IACd,OAAO,EAAE,MAAM;IACf,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,UAAU;IACjB,WAAW,EAAE,UAAU;IACvB,MAAM,EAAE,KAAK;IACb,UAAU,EAAE,SAAS;IACrB,MAAM,EAAE,SAAS;IAEjB,kBAAkB;IAClB,MAAM,EAAE,KAAK;IACb,OAAO,EAAE,MAAM;IACf,QAAQ,EAAE,MAAM;IAChB,MAAM,EAAE,SAAS;IACjB,OAAO,EAAE,eAAe;IACxB,SAAS,EAAE,cAAc;IACzB,OAAO,EAAE,MAAM;IACf,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,OAAO;IACd,MAAM,EAAE,KAAK;IACb,KAAK,EAAE,OAAO;IACd,KAAK,EAAE,QAAQ;IACf,MAAM,EAAE,UAAU;IAClB,MAAM,EAAE,KAAK;CACd,CAAC;AAEF;;GAEG;AACH,MAAM,iBAAiB,GAA2B;IAChD,UAAU,EAAE,QAAQ;IACpB,gBAAgB,EAAE,QAAQ;IAC1B,iBAAiB,EAAE,QAAQ;IAC3B,iBAAiB,EAAE,QAAQ;IAC3B,QAAQ,EAAE,UAAU;IACpB,WAAW,EAAE,UAAU;IACvB,QAAQ,EAAE,UAAU;IACpB,OAAO,EAAE,MAAM;IACf,cAAc,EAAE,MAAM;IACtB,QAAQ,EAAE,MAAM;IAChB,WAAW,EAAE,MAAM;CACpB,CAAC;AAEF;;;;GAIG;AACH,6BAAoC,QAAgB,EAAU;IAC5D,iCAAiC;IACjC,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAClC,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACzC,MAAM,OAAO,GAAG,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;IAC1C,MAAM,SAAS,GAAG,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IAE5E,6DAA6D;IAC7D,IAAI,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC;QAChC,OAAO,iBAAiB,CAAC,QAAQ,CAAC,CAAC;IACrC,CAAC;IAED,0BAA0B;IAC1B,IAAI,SAAS,IAAI,kBAAkB,CAAC,SAAS,CAAC,EAAE,CAAC;QAC/C,OAAO,kBAAkB,CAAC,SAAS,CAAC,CAAC;IACvC,CAAC;IAED,oBAAoB;IACpB,OAAO,MAAM,CAAC;AAAA,CACf;AAED;;GAEG;AACH,MAAM,sBAAsB,GAA2B;IACrD,UAAU,EAAE,YAAY;IACxB,GAAG,EAAE,kBAAkB;IACvB,UAAU,EAAE,YAAY;IACxB,GAAG,EAAE,kBAAkB;IACvB,IAAI,EAAE,MAAM;IACZ,GAAG,EAAE,KAAK;IACV,IAAI,EAAE,MAAM;IACZ,IAAI,EAAE,MAAM;IACZ,IAAI,EAAE,MAAM;IACZ,MAAM,EAAE,QAAQ;IAChB,IAAI,EAAE,MAAM;IACZ,MAAM,EAAE,IAAI;IACZ,GAAG,EAAE,KAAK;IACV,CAAC,EAAE,GAAG;IACN,EAAE,EAAE,IAAI;IACR,IAAI,EAAE,MAAM;IACZ,IAAI,EAAE,MAAM;IACZ,GAAG,EAAE,KAAK;IACV,MAAM,EAAE,QAAQ;IAChB,KAAK,EAAE,OAAO;IACd,KAAK,EAAE,OAAO;IACd,MAAM,EAAE,QAAQ;IAChB,MAAM,EAAE,QAAQ;IAChB,OAAO,EAAE,SAAS;IAClB,OAAO,EAAE,SAAS;IAClB,GAAG,EAAE,KAAK;IACV,IAAI,EAAE,MAAM;IACZ,CAAC,EAAE,GAAG;IACN,KAAK,EAAE,OAAO;IACd,IAAI,EAAE,MAAM;IACZ,GAAG,EAAE,KAAK;IACV,OAAO,EAAE,SAAS;IAClB,IAAI,EAAE,MAAM;IACZ,IAAI,EAAE,MAAM;IACZ,IAAI,EAAE,MAAM;IACZ,GAAG,EAAE,KAAK;IACV,QAAQ,EAAE,UAAU;IACpB,KAAK,EAAE,OAAO;IACd,IAAI,EAAE,MAAM;IACZ,UAAU,EAAE,YAAY;IACxB,MAAM,EAAE,YAAY;IACpB,QAAQ,EAAE,UAAU;IACpB,KAAK,EAAE,OAAO;IACd,IAAI,EAAE,MAAM;IACZ,IAAI,EAAE,YAAY;CACnB,CAAC;AAEF;;;;GAIG;AACH,gCAAuC,QAAgB,EAAU;IAC/D,OAAO,sBAAsB,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC;AAAA,CACrD","sourcesContent":["/**\n * Language detection utility for syntax highlighting in diffs\n * Maps file paths to Prism language identifiers using file extensions\n */\n\n/**\n * Maps file extensions to Prism language identifiers\n * Comprehensive mapping covering common programming languages and formats\n */\nconst EXTENSION_TO_PRISM: Record<string, string> = {\n  // JavaScript/TypeScript ecosystem\n  \".ts\": \"typescript\",\n  \".tsx\": \"tsx\",\n  \".js\": \"javascript\",\n  \".mjs\": \"javascript\",\n  \".cjs\": \"javascript\",\n  \".jsx\": \"jsx\",\n\n  // Web technologies\n  \".html\": \"html\",\n  \".htm\": \"html\",\n  \".css\": \"css\",\n  \".scss\": \"scss\",\n  \".sass\": \"sass\",\n  \".less\": \"less\",\n\n  // Backend languages\n  \".py\": \"python\",\n  \".pyw\": \"python\",\n  \".java\": \"java\",\n  \".cs\": \"csharp\",\n  \".cpp\": \"cpp\",\n  \".cc\": \"cpp\",\n  \".cxx\": \"cpp\",\n  \".c\": \"c\",\n  \".h\": \"c\",\n  \".go\": \"go\",\n  \".rs\": \"rust\",\n  \".rb\": \"ruby\",\n  \".php\": \"php\",\n  \".kt\": \"kotlin\",\n  \".kts\": \"kotlin\",\n  \".swift\": \"swift\",\n  \".scala\": \"scala\",\n  \".sc\": \"scala\",\n  \".ex\": \"elixir\",\n  \".exs\": \"elixir\",\n  \".erl\": \"erlang\",\n  \".hrl\": \"erlang\",\n  \".hs\": \"haskell\",\n  \".lhs\": \"haskell\",\n  \".lua\": \"lua\",\n  \".pl\": \"perl\",\n  \".pm\": \"perl\",\n  \".r\": \"r\",\n  \".R\": \"r\",\n\n  // Shell/scripting\n  \".sh\": \"bash\",\n  \".bash\": \"bash\",\n  \".zsh\": \"bash\",\n  \".ps1\": \"powershell\",\n  \".psm1\": \"powershell\",\n  \".bat\": \"batch\",\n  \".cmd\": \"batch\",\n\n  // Data/config formats\n  \".json\": \"json\",\n  \".jsonc\": \"json\",\n  \".yaml\": \"yaml\",\n  \".yml\": \"yaml\",\n  \".toml\": \"toml\",\n  \".xml\": \"xml\",\n  \".md\": \"markdown\",\n  \".markdown\": \"markdown\",\n  \".sql\": \"sql\",\n  \".graphql\": \"graphql\",\n  \".gql\": \"graphql\",\n\n  // Other languages\n  \".vim\": \"vim\",\n  \".diff\": \"diff\",\n  \".patch\": \"diff\",\n  \".clj\": \"clojure\",\n  \".cljs\": \"clojurescript\",\n  \".coffee\": \"coffeescript\",\n  \".dart\": \"dart\",\n  \".elm\": \"elm\",\n  \".jl\": \"julia\",\n  \".nim\": \"nim\",\n  \".ml\": \"ocaml\",\n  \".re\": \"reason\",\n  \".sol\": \"solidity\",\n  \".zig\": \"zig\",\n};\n\n/**\n * Maps special filenames to Prism language identifiers\n */\nconst FILENAME_TO_PRISM: Record<string, string> = {\n  Dockerfile: \"docker\",\n  \"Dockerfile.dev\": \"docker\",\n  \"Dockerfile.prod\": \"docker\",\n  \"Dockerfile.test\": \"docker\",\n  Makefile: \"makefile\",\n  GNUmakefile: \"makefile\",\n  makefile: \"makefile\",\n  Gemfile: \"ruby\",\n  \"Gemfile.lock\": \"ruby\",\n  Rakefile: \"ruby\",\n  Vagrantfile: \"ruby\",\n};\n\n/**\n * Detects the programming language from a file path for syntax highlighting\n * @param filePath - Relative or absolute file path\n * @returns Prism language identifier (e.g., \"typescript\", \"python\") or \"text\" if unknown\n */\nexport function getLanguageFromPath(filePath: string): string {\n  // Extract filename and extension\n  const parts = filePath.split(\"/\");\n  const filename = parts[parts.length - 1];\n  const lastDot = filename.lastIndexOf(\".\");\n  const extension = lastDot >= 0 ? filename.slice(lastDot).toLowerCase() : \"\";\n\n  // Check special filenames first (Dockerfile, Makefile, etc.)\n  if (FILENAME_TO_PRISM[filename]) {\n    return FILENAME_TO_PRISM[filename];\n  }\n\n  // Check extension mapping\n  if (extension && EXTENSION_TO_PRISM[extension]) {\n    return EXTENSION_TO_PRISM[extension];\n  }\n\n  // Unknown file type\n  return \"text\";\n}\n\n/**\n * Maps Prism language identifiers to human-readable display names\n */\nconst LANGUAGE_DISPLAY_NAMES: Record<string, string> = {\n  typescript: \"TypeScript\",\n  tsx: \"TypeScript React\",\n  javascript: \"JavaScript\",\n  jsx: \"JavaScript React\",\n  html: \"HTML\",\n  css: \"CSS\",\n  scss: \"SCSS\",\n  sass: \"Sass\",\n  less: \"Less\",\n  python: \"Python\",\n  java: \"Java\",\n  csharp: \"C#\",\n  cpp: \"C++\",\n  c: \"C\",\n  go: \"Go\",\n  rust: \"Rust\",\n  ruby: \"Ruby\",\n  php: \"PHP\",\n  kotlin: \"Kotlin\",\n  swift: \"Swift\",\n  scala: \"Scala\",\n  elixir: \"Elixir\",\n  erlang: \"Erlang\",\n  haskell: \"Haskell\",\n  clojure: \"Clojure\",\n  lua: \"Lua\",\n  perl: \"Perl\",\n  r: \"R\",\n  julia: \"Julia\",\n  dart: \"Dart\",\n  sql: \"SQL\",\n  graphql: \"GraphQL\",\n  json: \"JSON\",\n  yaml: \"YAML\",\n  toml: \"TOML\",\n  xml: \"XML\",\n  markdown: \"Markdown\",\n  latex: \"LaTeX\",\n  bash: \"Bash\",\n  powershell: \"PowerShell\",\n  docker: \"Dockerfile\",\n  makefile: \"Makefile\",\n  nginx: \"nginx\",\n  diff: \"Diff\",\n  text: \"Plain Text\",\n};\n\n/**\n * Returns a human-readable display name for a Prism language identifier\n * @param language - Prism language identifier (e.g., \"typescript\", \"python\")\n * @returns Human-readable name (e.g., \"TypeScript\", \"Python\")\n */\nexport function getLanguageDisplayName(language: string): string {\n  return LANGUAGE_DISPLAY_NAMES[language] ?? language;\n}\n"]}