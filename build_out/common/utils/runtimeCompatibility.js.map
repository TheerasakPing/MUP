{"version":3,"file":"runtimeCompatibility.js","sourceRoot":"","sources":["../../../src/common/utils/runtimeCompatibility.ts"],"names":[],"mappings":";AAAA;;;;;GAKG;;;AAEH,mDAA0D;AAG1D;;;;;;;;;;;;;GAaG;AACH,qCAA4C,MAAiC,EAAW;IACtF,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,OAAO,KAAK,CAAC;IACf,CAAC;IACD,qCAAqC;IACrC,OAAO,CAAC,2BAAiB,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC;AAAA,CAC1D","sourcesContent":["/**\n * Runtime configuration compatibility checks.\n *\n * This module is intentionally in common/ to avoid circular dependencies\n * with runtime implementations (LocalRuntime, SSHRuntime, etc.).\n */\n\nimport { RuntimeModeSchema } from \"@/common/orpc/schemas\";\nimport type { RuntimeConfig } from \"@/common/types/runtime\";\n\n/**\n * Check if a runtime config is from a newer version and incompatible.\n *\n * This handles downgrade compatibility: if a user upgrades to a version\n * with new runtime types, then downgrades, those workspaces should show\n * a clear error rather than crashing.\n *\n * Currently supported types:\n * - \"local\" without srcBaseDir: Project-dir runtime (uses project path directly)\n * - \"local\" with srcBaseDir: Legacy worktree config (for backward compat)\n * - \"worktree\": Explicit worktree runtime\n * - \"ssh\": Remote SSH runtime\n * - \"docker\": Docker container runtime\n */\nexport function isIncompatibleRuntimeConfig(config: RuntimeConfig | undefined): boolean {\n  if (!config) {\n    return false;\n  }\n  // Unknown type from a future version\n  return !RuntimeModeSchema.safeParse(config.type).success;\n}\n"]}