{"version":3,"file":"formatSendError.js","sourceRoot":"","sources":["../../../../src/common/utils/errors/formatSendError.ts"],"names":[],"mappings":";AAAA;;;GAGG;;;AASH;;;GAGG;AACH,gCAAuC,KAAuB,EAAkB;IAC9E,QAAQ,KAAK,CAAC,IAAI,EAAE,CAAC;QACnB,KAAK,mBAAmB;YACtB,OAAO;gBACL,OAAO,EAAE,yBAAyB,KAAK,CAAC,QAAQ,GAAG;gBACnD,cAAc,EAAE,sDAAoD,KAAK,CAAC,QAAQ,GAAG;aACtF,CAAC;QAEJ,KAAK,qBAAqB;YACxB,OAAO;gBACL,OAAO,EAAE,2BAA2B,KAAK,CAAC,QAAQ,GAAG;gBACrD,cAAc,EAAE,gDAA8C,KAAK,CAAC,QAAQ,WAAW;aACxF,CAAC;QAEJ,KAAK,wBAAwB;YAC3B,OAAO;gBACL,OAAO,EAAE,YAAY,KAAK,CAAC,QAAQ,wBAAwB;aAC5D,CAAC;QAEJ,KAAK,sBAAsB;YACzB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,wBAAwB;YAC3B,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,mBAAmB;YACtB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,sBAAsB;YACzB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,eAAe;YAClB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,SAAS,EAAE,CAAC;YACf,MAAM,GAAG,GAAG,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAClE,OAAO;gBACL,OAAO,EAAE,GAAG,IAAI,8BAA8B;aAC/C,CAAC;QACJ,CAAC;IACH,CAAC;AAAA,CACF","sourcesContent":["/**\n * Centralized error message formatting for SendMessageError types\n * Used by both RetryBarrier and ChatInputToasts\n */\n\nimport type { SendMessageError } from \"@/common/types/errors\";\n\nexport interface FormattedError {\n  message: string;\n  resolutionHint?: string; // e.g., \"Open Settings → Providers and add an API key\"\n}\n\n/**\n * Format a SendMessageError into a user-friendly message\n * Returns both the message and an optional command suggestion\n */\nexport function formatSendMessageError(error: SendMessageError): FormattedError {\n  switch (error.type) {\n    case \"api_key_not_found\":\n      return {\n        message: `API key not found for ${error.provider}.`,\n        resolutionHint: `Open Settings → Providers and add an API key for ${error.provider}.`,\n      };\n\n    case \"oauth_not_connected\":\n      return {\n        message: `OAuth not connected for ${error.provider}.`,\n        resolutionHint: `Open Settings → Providers and connect your ${error.provider} account.`,\n      };\n\n    case \"provider_not_supported\":\n      return {\n        message: `Provider ${error.provider} is not supported yet.`,\n      };\n\n    case \"invalid_model_string\":\n      return {\n        message: error.message,\n      };\n\n    case \"incompatible_workspace\":\n      return {\n        message: error.message,\n      };\n\n    case \"runtime_not_ready\":\n      return {\n        message: error.message,\n      };\n\n    case \"runtime_start_failed\":\n      return {\n        message: error.message,\n      };\n\n    case \"policy_denied\":\n      return {\n        message: error.message,\n      };\n\n    case \"unknown\": {\n      const raw = typeof error.raw === \"string\" ? error.raw.trim() : \"\";\n      return {\n        message: raw || \"An unexpected error occurred\",\n      };\n    }\n  }\n}\n"]}