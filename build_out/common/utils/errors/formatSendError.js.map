{"version":3,"file":"formatSendError.js","sourceRoot":"","sources":["../../../../src/common/utils/errors/formatSendError.ts"],"names":[],"mappings":";AAAA;;;GAGG;;;AASH;;;GAGG;AACH,gCAAuC,KAAuB,EAAkB;IAC9E,QAAQ,KAAK,CAAC,IAAI,EAAE,CAAC;QACnB,KAAK,mBAAmB;YACtB,OAAO;gBACL,OAAO,EAAE,yBAAyB,KAAK,CAAC,QAAQ,GAAG;gBACnD,cAAc,EAAE,sDAAoD,KAAK,CAAC,QAAQ,GAAG;aACtF,CAAC;QAEJ,KAAK,qBAAqB;YACxB,OAAO;gBACL,OAAO,EAAE,2BAA2B,KAAK,CAAC,QAAQ,GAAG;gBACrD,cAAc,EAAE,gDAA8C,KAAK,CAAC,QAAQ,WAAW;aACxF,CAAC;QAEJ,KAAK,wBAAwB;YAC3B,OAAO;gBACL,OAAO,EAAE,YAAY,KAAK,CAAC,QAAQ,wBAAwB;aAC5D,CAAC;QAEJ,KAAK,sBAAsB;YACzB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,wBAAwB;YAC3B,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,mBAAmB;YACtB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,sBAAsB;YACzB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,eAAe;YAClB,OAAO;gBACL,OAAO,EAAE,KAAK,CAAC,OAAO;aACvB,CAAC;QAEJ,KAAK,SAAS,EAAE,CAAC;YACf,MAAM,GAAG,GAAG,OAAO,KAAK,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAClE,OAAO;gBACL,OAAO,EAAE,GAAG,IAAI,8BAA8B;aAC/C,CAAC;QACJ,CAAC;IACH,CAAC;AAAA,CACF","sourcesContent":["/**\r\n * Centralized error message formatting for SendMessageError types\r\n * Used by both RetryBarrier and ChatInputToasts\r\n */\r\n\r\nimport type { SendMessageError } from \"@/common/types/errors\";\r\n\r\nexport interface FormattedError {\r\n  message: string;\r\n  resolutionHint?: string; // e.g., \"Open Settings → Providers and add an API key\"\r\n}\r\n\r\n/**\r\n * Format a SendMessageError into a user-friendly message\r\n * Returns both the message and an optional command suggestion\r\n */\r\nexport function formatSendMessageError(error: SendMessageError): FormattedError {\r\n  switch (error.type) {\r\n    case \"api_key_not_found\":\r\n      return {\r\n        message: `API key not found for ${error.provider}.`,\r\n        resolutionHint: `Open Settings → Providers and add an API key for ${error.provider}.`,\r\n      };\r\n\r\n    case \"oauth_not_connected\":\r\n      return {\r\n        message: `OAuth not connected for ${error.provider}.`,\r\n        resolutionHint: `Open Settings → Providers and connect your ${error.provider} account.`,\r\n      };\r\n\r\n    case \"provider_not_supported\":\r\n      return {\r\n        message: `Provider ${error.provider} is not supported yet.`,\r\n      };\r\n\r\n    case \"invalid_model_string\":\r\n      return {\r\n        message: error.message,\r\n      };\r\n\r\n    case \"incompatible_workspace\":\r\n      return {\r\n        message: error.message,\r\n      };\r\n\r\n    case \"runtime_not_ready\":\r\n      return {\r\n        message: error.message,\r\n      };\r\n\r\n    case \"runtime_start_failed\":\r\n      return {\r\n        message: error.message,\r\n      };\r\n\r\n    case \"policy_denied\":\r\n      return {\r\n        message: error.message,\r\n      };\r\n\r\n    case \"unknown\": {\r\n      const raw = typeof error.raw === \"string\" ? error.raw.trim() : \"\";\r\n      return {\r\n        message: raw || \"An unexpected error occurred\",\r\n      };\r\n    }\r\n  }\r\n}\r\n"]}