{"version":3,"file":"modeUtils.test.js","sourceRoot":"","sources":["../../../../src/common/utils/ui/modeUtils.test.ts"],"names":[],"mappings":";;AAAA,2CAAsE;AAEtE,QAAQ,CAAC,wBAAwB,EAAE,GAAG,EAAE,CAAC;IACvC,EAAE,CAAC,iCAAiC,EAAE,GAAG,EAAE,CAAC;QAC1C,MAAM,WAAW,GAAG,IAAA,kCAAsB,EAAC,cAAc,EAAE,KAAK,CAAC,CAAC;QAElE,MAAM,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,8BAA8B,CAAC,CAAC;QAC9D,MAAM,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,yBAAyB,CAAC,CAAC;QACzD,MAAM,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;IAAA,CACpD,CAAC,CAAC;IAEH,EAAE,CAAC,yCAAyC,EAAE,GAAG,EAAE,CAAC;QAClD,MAAM,WAAW,GAAG,IAAA,kCAAsB,EAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;QAE1E,MAAM,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,uCAAuC,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,uCAAuC,CAAC,CAAC;IAAA,CACxE,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC;AAEH,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE,CAAC;IAChC,EAAE,CAAC,gDAAgD,EAAE,GAAG,EAAE,CAAC;QACzD,MAAM,CAAC,IAAA,2BAAe,EAAC,cAAc,EAAE,KAAK,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;IAAA,CAC3D,CAAC,CAAC;IAEH,EAAE,CAAC,8DAA8D,EAAE,GAAG,EAAE,CAAC;QACvE,MAAM,IAAI,GAAG,IAAA,2BAAe,EAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAEnD,IAAI,CAAC,IAAI;YAAE,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC;QAErD,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,qCAAqC,CAAC,CAAC;QAC9D,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAC;QACnD,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,uDAAuD,CAAC,CAAC;IAAA,CACjF,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { getPlanFileHint, getPlanModeInstruction } from \"./modeUtils\";\r\n\r\ndescribe(\"getPlanModeInstruction\", () => {\r\n  it(\"provides plan file path context\", () => {\r\n    const instruction = getPlanModeInstruction(\"/tmp/plan.md\", false);\r\n\r\n    expect(instruction).toContain(\"Plan file path: /tmp/plan.md\");\r\n    expect(instruction).toContain(\"No plan file exists yet\");\r\n    expect(instruction).toContain(\"file_edit_* tools\");\r\n  });\r\n\r\n  it(\"indicates when plan file already exists\", () => {\r\n    const instruction = getPlanModeInstruction(\"/tmp/existing-plan.md\", true);\r\n\r\n    expect(instruction).toContain(\"Plan file path: /tmp/existing-plan.md\");\r\n    expect(instruction).toContain(\"A plan file already exists\");\r\n    expect(instruction).toContain(\"read it to determine if it's relevant\");\r\n  });\r\n});\r\n\r\ndescribe(\"getPlanFileHint\", () => {\r\n  it(\"returns null when the plan file does not exist\", () => {\r\n    expect(getPlanFileHint(\"/tmp/plan.md\", false)).toBeNull();\r\n  });\r\n\r\n  it(\"includes post-compaction guidance and an ignore escape hatch\", () => {\r\n    const hint = getPlanFileHint(\"/tmp/plan.md\", true);\r\n\r\n    if (!hint) throw new Error(\"expected non-null hint\");\r\n\r\n    expect(hint).toContain(\"A plan file exists at: /tmp/plan.md\");\r\n    expect(hint).toContain(\"compaction/context reset\");\r\n    expect(hint).toContain(\"If it is unrelated to the current request, ignore it.\");\r\n  });\r\n});\r\n"]}