{"version":3,"file":"cloneToolPreservingDescriptors.js","sourceRoot":"","sources":["../../../../src/common/utils/tools/cloneToolPreservingDescriptors.ts"],"names":[],"mappings":";;;;;;AACA,mEAA2C;AAE3C;;;;;;GAMG;AACH,wCAA+C,IAAa,EAAQ;IAClE,IAAA,gBAAM,EAAC,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,wBAAwB,CAAC,CAAC;IAEnE,MAAM,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,IAAI,CAAY,CAAC;IACzD,IAAA,gBAAM,EACJ,SAAS,KAAK,IAAI,IAAI,OAAO,SAAS,KAAK,QAAQ,EACnD,0CAA0C,CAC3C,CAAC;IAEF,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,CAAW,CAAC;IACjD,MAAM,CAAC,gBAAgB,CAAC,KAAK,EAAE,MAAM,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC;IACvE,OAAO,KAAa,CAAC;AAAA,CACtB","sourcesContent":["import type { Tool } from \"ai\";\r\nimport assert from \"@/common/utils/assert\";\r\n\r\n/**\r\n * Shallow-clone a Tool preserving property descriptors (getters, etc.).\r\n *\r\n * This avoids invoking getters during cloning, which matters for some\r\n * dynamic tools. Used whenever we need a writable copy of a frozen tool\r\n * object (e.g., to override `execute` or `description`).\r\n */\r\nexport function cloneToolPreservingDescriptors(tool: unknown): Tool {\r\n  assert(tool && typeof tool === \"object\", \"tool must be an object\");\r\n\r\n  const prototype = Object.getPrototypeOf(tool) as unknown;\r\n  assert(\r\n    prototype === null || typeof prototype === \"object\",\r\n    \"tool prototype must be an object or null\"\r\n  );\r\n\r\n  const clone = Object.create(prototype) as object;\r\n  Object.defineProperties(clone, Object.getOwnPropertyDescriptors(tool));\r\n  return clone as Tool;\r\n}\r\n"]}