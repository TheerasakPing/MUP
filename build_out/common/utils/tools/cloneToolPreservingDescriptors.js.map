{"version":3,"file":"cloneToolPreservingDescriptors.js","sourceRoot":"","sources":["../../../../src/common/utils/tools/cloneToolPreservingDescriptors.ts"],"names":[],"mappings":";;;;;;AACA,mEAA2C;AAE3C;;;;;;GAMG;AACH,wCAA+C,IAAa,EAAQ;IAClE,IAAA,gBAAM,EAAC,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE,wBAAwB,CAAC,CAAC;IAEnE,MAAM,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,IAAI,CAAY,CAAC;IACzD,IAAA,gBAAM,EACJ,SAAS,KAAK,IAAI,IAAI,OAAO,SAAS,KAAK,QAAQ,EACnD,0CAA0C,CAC3C,CAAC;IAEF,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,SAAS,CAAW,CAAC;IACjD,MAAM,CAAC,gBAAgB,CAAC,KAAK,EAAE,MAAM,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC,CAAC;IACvE,OAAO,KAAa,CAAC;AAAA,CACtB","sourcesContent":["import type { Tool } from \"ai\";\nimport assert from \"@/common/utils/assert\";\n\n/**\n * Shallow-clone a Tool preserving property descriptors (getters, etc.).\n *\n * This avoids invoking getters during cloning, which matters for some\n * dynamic tools. Used whenever we need a writable copy of a frozen tool\n * object (e.g., to override `execute` or `description`).\n */\nexport function cloneToolPreservingDescriptors(tool: unknown): Tool {\n  assert(tool && typeof tool === \"object\", \"tool must be an object\");\n\n  const prototype = Object.getPrototypeOf(tool) as unknown;\n  assert(\n    prototype === null || typeof prototype === \"object\",\n    \"tool prototype must be an object or null\"\n  );\n\n  const clone = Object.create(prototype) as object;\n  Object.defineProperties(clone, Object.getOwnPropertyDescriptors(tool));\n  return clone as Tool;\n}\n"]}