{"version":3,"file":"tools.test.js","sourceRoot":"","sources":["../../../../src/common/utils/tools/tools.test.ts"],"names":[],"mappings":";;AAAA,uCAAkD;AAGlD,8DAA2D;AAC3D,mCAA2C;AAE3C,IAAA,mBAAQ,EAAC,kBAAkB,EAAE,GAAG,EAAE,CAAC;IACjC,IAAA,eAAI,EAAC,wDAAwD,EAAE,KAAK,IAAI,EAAE,CAAC;QACzE,MAAM,OAAO,GAAG,IAAI,2BAAY,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;QAChD,MAAM,gBAAgB,GAAG;YACvB,WAAW,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE;SACN,CAAC;QAEjC,MAAM,kBAAkB,GAAG,MAAM,IAAA,wBAAgB,EAC/C,YAAY,EACZ;YACE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE;YAClB,OAAO;YACP,cAAc,EAAE,MAAM;YACtB,iBAAiB,EAAE,KAAK;SACzB,EACD,MAAM,EACN,gBAAgB,CACjB,CAAC;QACF,IAAA,iBAAM,EAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,aAAa,EAAE,CAAC;QAExD,MAAM,eAAe,GAAG,MAAM,IAAA,wBAAgB,EAC5C,YAAY,EACZ;YACE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE;YAClB,OAAO;YACP,cAAc,EAAE,MAAM;YACtB,iBAAiB,EAAE,IAAI;SACxB,EACD,MAAM,EACN,gBAAgB,CACjB,CAAC;QACF,IAAA,iBAAM,EAAC,eAAe,CAAC,YAAY,CAAC,CAAC,WAAW,EAAE,CAAC;IAAA,CACpD,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { describe, expect, test } from \"bun:test\";\n\nimport type { InitStateManager } from \"@/node/services/initStateManager\";\nimport { LocalRuntime } from \"@/node/runtime/LocalRuntime\";\nimport { getToolsForModel } from \"./tools\";\n\ndescribe(\"getToolsForModel\", () => {\n  test(\"only includes agent_report when enableAgentReport=true\", async () => {\n    const runtime = new LocalRuntime(process.cwd());\n    const initStateManager = {\n      waitForInit: () => Promise.resolve(),\n    } as unknown as InitStateManager;\n\n    const toolsWithoutReport = await getToolsForModel(\n      \"noop:model\",\n      {\n        cwd: process.cwd(),\n        runtime,\n        runtimeTempDir: \"/tmp\",\n        enableAgentReport: false,\n      },\n      \"ws-1\",\n      initStateManager\n    );\n    expect(toolsWithoutReport.agent_report).toBeUndefined();\n\n    const toolsWithReport = await getToolsForModel(\n      \"noop:model\",\n      {\n        cwd: process.cwd(),\n        runtime,\n        runtimeTempDir: \"/tmp\",\n        enableAgentReport: true,\n      },\n      \"ws-1\",\n      initStateManager\n    );\n    expect(toolsWithReport.agent_report).toBeDefined();\n  });\n});\n"]}