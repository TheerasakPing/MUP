{"version":3,"file":"tools.test.js","sourceRoot":"","sources":["../../../../src/common/utils/tools/tools.test.ts"],"names":[],"mappings":";;AAAA,uCAAkD;AAGlD,8DAA2D;AAC3D,mCAA2C;AAE3C,IAAA,mBAAQ,EAAC,kBAAkB,EAAE,GAAG,EAAE,CAAC;IACjC,IAAA,eAAI,EAAC,wDAAwD,EAAE,KAAK,IAAI,EAAE,CAAC;QACzE,MAAM,OAAO,GAAG,IAAI,2BAAY,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,CAAC;QAChD,MAAM,gBAAgB,GAAG;YACvB,WAAW,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE;SACN,CAAC;QAEjC,MAAM,kBAAkB,GAAG,MAAM,IAAA,wBAAgB,EAC/C,YAAY,EACZ;YACE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE;YAClB,OAAO;YACP,cAAc,EAAE,MAAM;YACtB,iBAAiB,EAAE,KAAK;SACzB,EACD,MAAM,EACN,gBAAgB,CACjB,CAAC;QACF,IAAA,iBAAM,EAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,aAAa,EAAE,CAAC;QAExD,MAAM,eAAe,GAAG,MAAM,IAAA,wBAAgB,EAC5C,YAAY,EACZ;YACE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE;YAClB,OAAO;YACP,cAAc,EAAE,MAAM;YACtB,iBAAiB,EAAE,IAAI;SACxB,EACD,MAAM,EACN,gBAAgB,CACjB,CAAC;QACF,IAAA,iBAAM,EAAC,eAAe,CAAC,YAAY,CAAC,CAAC,WAAW,EAAE,CAAC;IAAA,CACpD,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { describe, expect, test } from \"bun:test\";\r\n\r\nimport type { InitStateManager } from \"@/node/services/initStateManager\";\r\nimport { LocalRuntime } from \"@/node/runtime/LocalRuntime\";\r\nimport { getToolsForModel } from \"./tools\";\r\n\r\ndescribe(\"getToolsForModel\", () => {\r\n  test(\"only includes agent_report when enableAgentReport=true\", async () => {\r\n    const runtime = new LocalRuntime(process.cwd());\r\n    const initStateManager = {\r\n      waitForInit: () => Promise.resolve(),\r\n    } as unknown as InitStateManager;\r\n\r\n    const toolsWithoutReport = await getToolsForModel(\r\n      \"noop:model\",\r\n      {\r\n        cwd: process.cwd(),\r\n        runtime,\r\n        runtimeTempDir: \"/tmp\",\r\n        enableAgentReport: false,\r\n      },\r\n      \"ws-1\",\r\n      initStateManager\r\n    );\r\n    expect(toolsWithoutReport.agent_report).toBeUndefined();\r\n\r\n    const toolsWithReport = await getToolsForModel(\r\n      \"noop:model\",\r\n      {\r\n        cwd: process.cwd(),\r\n        runtime,\r\n        runtimeTempDir: \"/tmp\",\r\n        enableAgentReport: true,\r\n      },\r\n      \"ws-1\",\r\n      initStateManager\r\n    );\r\n    expect(toolsWithReport.agent_report).toBeDefined();\r\n  });\r\n});\r\n"]}