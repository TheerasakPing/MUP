{"version":3,"file":"shareExpiration.js","sourceRoot":"","sources":["../../../src/common/lib/shareExpiration.ts"],"names":[],"mappings":";AAAA;;;;;GAKG;;;;;;AAEH,oDAAoD;AACvC,QAAA,kBAAkB,GAAG;IAChC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE;IACpD,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE;IAC5D,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE;IAC7D,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE;IAChE,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE;CACpC,CAAC;AAIX,6EAA6E;AAC7E,wBAA+B,KAAsB,EAAiB;IACpE,MAAM,GAAG,GAAG,QAAA,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC;IAC9D,OAAO,GAAG,EAAE,EAAE,IAAI,IAAI,CAAC;AAAA,CACxB;AAED,uDAAuD;AACvD,+BAAsC,SAA6B,EAAmB;IACpF,IAAI,CAAC,SAAS;QAAE,OAAO,OAAO,CAAC;IAC/B,MAAM,SAAS,GAAG,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;IACzC,IAAI,SAAS,IAAI,CAAC;QAAE,OAAO,IAAI,CAAC,CAAC,uCAAuC;IACxE,0BAA0B;IAC1B,KAAK,MAAM,GAAG,IAAI,QAAA,kBAAkB,EAAE,CAAC;QACrC,IAAI,GAAG,CAAC,EAAE,IAAI,SAAS,IAAI,GAAG,CAAC,EAAE,GAAG,GAAG;YAAE,OAAO,GAAG,CAAC,KAAK,CAAC;IAC5D,CAAC;IACD,OAAO,OAAO,CAAC;AAAA,CAChB;AAED,oCAAoC;AACpC,0BAAiC,SAA6B,EAAU;IACtE,IAAI,CAAC,SAAS;QAAE,OAAO,OAAO,CAAC;IAC/B,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC;IACjC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;IACvB,MAAM,IAAI,GAAG,SAAS,GAAG,GAAG,CAAC;IAE7B,IAAI,IAAI,IAAI,CAAC;QAAE,OAAO,SAAS,CAAC;IAChC,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;QAAE,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC;IACtE,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;QAAE,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC;IAChF,IAAI,IAAI,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;QAAE,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC;IACzF,OAAO,IAAI,CAAC,kBAAkB,EAAE,CAAC;AAAA,CAClC","sourcesContent":["/**\r\n * Shared expiration utilities for mux.md share links.\r\n *\r\n * Used by both ShareMessagePopover and ShareTranscriptDialog to provide\r\n * consistent expiration controls.\r\n */\r\n\r\n/** Expiration options with human-readable labels */\r\nexport const EXPIRATION_OPTIONS = [\r\n  { value: \"1h\", label: \"1 hour\", ms: 60 * 60 * 1000 },\r\n  { value: \"24h\", label: \"24 hours\", ms: 24 * 60 * 60 * 1000 },\r\n  { value: \"7d\", label: \"7 days\", ms: 7 * 24 * 60 * 60 * 1000 },\r\n  { value: \"30d\", label: \"30 days\", ms: 30 * 24 * 60 * 60 * 1000 },\r\n  { value: \"never\", label: \"Never\", ms: null },\r\n] as const;\r\n\r\nexport type ExpirationValue = (typeof EXPIRATION_OPTIONS)[number][\"value\"];\r\n\r\n/** Convert expiration value to milliseconds from now, or null for \"never\" */\r\nexport function expirationToMs(value: ExpirationValue): number | null {\r\n  const opt = EXPIRATION_OPTIONS.find((o) => o.value === value);\r\n  return opt?.ms ?? null;\r\n}\r\n\r\n/** Convert timestamp to expiration value (best fit) */\r\nexport function timestampToExpiration(expiresAt: number | undefined): ExpirationValue {\r\n  if (!expiresAt) return \"never\";\r\n  const remaining = expiresAt - Date.now();\r\n  if (remaining <= 0) return \"1h\"; // Already expired, default to shortest\r\n  // Find the closest option\r\n  for (const opt of EXPIRATION_OPTIONS) {\r\n    if (opt.ms && remaining <= opt.ms * 1.5) return opt.value;\r\n  }\r\n  return \"never\";\r\n}\r\n\r\n/** Format expiration for display */\r\nexport function formatExpiration(expiresAt: number | undefined): string {\r\n  if (!expiresAt) return \"Never\";\r\n  const date = new Date(expiresAt);\r\n  const now = Date.now();\r\n  const diff = expiresAt - now;\r\n\r\n  if (diff <= 0) return \"Expired\";\r\n  if (diff < 60 * 60 * 1000) return `${Math.ceil(diff / (60 * 1000))}m`;\r\n  if (diff < 24 * 60 * 60 * 1000) return `${Math.ceil(diff / (60 * 60 * 1000))}h`;\r\n  if (diff < 7 * 24 * 60 * 60 * 1000) return `${Math.ceil(diff / (24 * 60 * 60 * 1000))}d`;\r\n  return date.toLocaleDateString();\r\n}\r\n"]}