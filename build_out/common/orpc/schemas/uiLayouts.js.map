{"version":3,"file":"uiLayouts.js","sourceRoot":"","sources":["../../../../src/common/orpc/schemas/uiLayouts.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\n  RightSidebarLayoutPresetNode,\n  RightSidebarPresetTabType,\n} from \"@/common/types/uiLayouts\";\nimport { z } from \"zod\";\n\nexport const KeybindSchema = z\n  // Keep in sync with the Keybind type (including allowShift). Strict schemas will\n  // otherwise reject normalized config objects that include optional fields.\n  .object({\n    key: z.string().min(1),\n    allowShift: z.boolean().optional(),\n    ctrl: z.boolean().optional(),\n    shift: z.boolean().optional(),\n    alt: z.boolean().optional(),\n    meta: z.boolean().optional(),\n    macCtrlBehavior: z.enum([\"either\", \"command\", \"control\"]).optional(),\n  })\n  .strict();\n\nconst RightSidebarPresetBaseTabSchema = z.enum([\"costs\", \"review\", \"explorer\", \"stats\"]);\n\nexport const RightSidebarPresetTabSchema: z.ZodType<RightSidebarPresetTabType> = z.union([\n  RightSidebarPresetBaseTabSchema,\n  z\n    .string()\n    .min(\"terminal_new:\".length + 1)\n    .regex(/^terminal_new:.+$/),\n]) as z.ZodType<RightSidebarPresetTabType>;\n\nexport const RightSidebarLayoutPresetNodeSchema: z.ZodType<RightSidebarLayoutPresetNode> = z.lazy(\n  () => {\n    const tabset = z\n      .object({\n        type: z.literal(\"tabset\"),\n        id: z.string().min(1),\n        tabs: z.array(RightSidebarPresetTabSchema),\n        activeTab: RightSidebarPresetTabSchema,\n      })\n      .strict();\n\n    const split = z\n      .object({\n        type: z.literal(\"split\"),\n        id: z.string().min(1),\n        direction: z.enum([\"horizontal\", \"vertical\"]),\n        sizes: z.tuple([z.number(), z.number()]),\n        children: z.tuple([RightSidebarLayoutPresetNodeSchema, RightSidebarLayoutPresetNodeSchema]),\n      })\n      .strict();\n\n    return z.union([split, tabset]);\n  }\n);\n\nexport const RightSidebarLayoutPresetStateSchema = z\n  .object({\n    version: z.literal(1),\n    nextId: z.number().int(),\n    focusedTabsetId: z.string().min(1),\n    root: RightSidebarLayoutPresetNodeSchema,\n  })\n  .strict();\n\nexport const RightSidebarWidthPresetSchema = z.discriminatedUnion(\"mode\", [\n  z\n    .object({\n      mode: z.literal(\"px\"),\n      value: z.number().int(),\n    })\n    .strict(),\n  z\n    .object({\n      mode: z.literal(\"fraction\"),\n      value: z.number(),\n    })\n    .strict(),\n]);\n\nexport const LayoutPresetSchema = z\n  .object({\n    id: z.string().min(1),\n    name: z.string().min(1),\n    leftSidebarCollapsed: z.boolean(),\n    leftSidebarWidthPx: z.number().int().optional(),\n    rightSidebar: z\n      .object({\n        collapsed: z.boolean(),\n        width: RightSidebarWidthPresetSchema,\n        layout: RightSidebarLayoutPresetStateSchema,\n      })\n      .strict(),\n  })\n  .strict();\n\nexport const LayoutSlotSchema = z\n  .object({\n    slot: z.number().int().min(1),\n    preset: LayoutPresetSchema.optional(),\n    keybindOverride: KeybindSchema.optional(),\n  })\n  .strict();\n\nexport const LayoutPresetsConfigSchema = z\n  .object({\n    version: z.literal(2),\n    slots: z.array(LayoutSlotSchema),\n  })\n  .strict();\n"]}