{"version":3,"file":"uiLayouts.js","sourceRoot":"","sources":["../../../../src/common/orpc/schemas/uiLayouts.ts"],"names":[],"mappings":"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","sourcesContent":["import type {\r\n  RightSidebarLayoutPresetNode,\r\n  RightSidebarPresetTabType,\r\n} from \"@/common/types/uiLayouts\";\r\nimport { z } from \"zod\";\r\n\r\nexport const KeybindSchema = z\r\n  // Keep in sync with the Keybind type (including allowShift). Strict schemas will\r\n  // otherwise reject normalized config objects that include optional fields.\r\n  .object({\r\n    key: z.string().min(1),\r\n    allowShift: z.boolean().optional(),\r\n    ctrl: z.boolean().optional(),\r\n    shift: z.boolean().optional(),\r\n    alt: z.boolean().optional(),\r\n    meta: z.boolean().optional(),\r\n    macCtrlBehavior: z.enum([\"either\", \"command\", \"control\"]).optional(),\r\n  })\r\n  .strict();\r\n\r\nconst RightSidebarPresetBaseTabSchema = z.enum([\"costs\", \"review\", \"explorer\", \"stats\"]);\r\n\r\nexport const RightSidebarPresetTabSchema: z.ZodType<RightSidebarPresetTabType> = z.union([\r\n  RightSidebarPresetBaseTabSchema,\r\n  z\r\n    .string()\r\n    .min(\"terminal_new:\".length + 1)\r\n    .regex(/^terminal_new:.+$/),\r\n]) as z.ZodType<RightSidebarPresetTabType>;\r\n\r\nexport const RightSidebarLayoutPresetNodeSchema: z.ZodType<RightSidebarLayoutPresetNode> = z.lazy(\r\n  () => {\r\n    const tabset = z\r\n      .object({\r\n        type: z.literal(\"tabset\"),\r\n        id: z.string().min(1),\r\n        tabs: z.array(RightSidebarPresetTabSchema),\r\n        activeTab: RightSidebarPresetTabSchema,\r\n      })\r\n      .strict();\r\n\r\n    const split = z\r\n      .object({\r\n        type: z.literal(\"split\"),\r\n        id: z.string().min(1),\r\n        direction: z.enum([\"horizontal\", \"vertical\"]),\r\n        sizes: z.tuple([z.number(), z.number()]),\r\n        children: z.tuple([RightSidebarLayoutPresetNodeSchema, RightSidebarLayoutPresetNodeSchema]),\r\n      })\r\n      .strict();\r\n\r\n    return z.union([split, tabset]);\r\n  }\r\n);\r\n\r\nexport const RightSidebarLayoutPresetStateSchema = z\r\n  .object({\r\n    version: z.literal(1),\r\n    nextId: z.number().int(),\r\n    focusedTabsetId: z.string().min(1),\r\n    root: RightSidebarLayoutPresetNodeSchema,\r\n  })\r\n  .strict();\r\n\r\nexport const RightSidebarWidthPresetSchema = z.discriminatedUnion(\"mode\", [\r\n  z\r\n    .object({\r\n      mode: z.literal(\"px\"),\r\n      value: z.number().int(),\r\n    })\r\n    .strict(),\r\n  z\r\n    .object({\r\n      mode: z.literal(\"fraction\"),\r\n      value: z.number(),\r\n    })\r\n    .strict(),\r\n]);\r\n\r\nexport const LayoutPresetSchema = z\r\n  .object({\r\n    id: z.string().min(1),\r\n    name: z.string().min(1),\r\n    leftSidebarCollapsed: z.boolean(),\r\n    leftSidebarWidthPx: z.number().int().optional(),\r\n    rightSidebar: z\r\n      .object({\r\n        collapsed: z.boolean(),\r\n        width: RightSidebarWidthPresetSchema,\r\n        layout: RightSidebarLayoutPresetStateSchema,\r\n      })\r\n      .strict(),\r\n  })\r\n  .strict();\r\n\r\nexport const LayoutSlotSchema = z\r\n  .object({\r\n    slot: z.number().int().min(1),\r\n    preset: LayoutPresetSchema.optional(),\r\n    keybindOverride: KeybindSchema.optional(),\r\n  })\r\n  .strict();\r\n\r\nexport const LayoutPresetsConfigSchema = z\r\n  .object({\r\n    version: z.literal(2),\r\n    slots: z.array(LayoutSlotSchema),\r\n  })\r\n  .strict();\r\n"]}