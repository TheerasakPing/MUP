{"version":3,"file":"agentSkill.js","sourceRoot":"","sources":["../../../../src/common/orpc/schemas/agentSkill.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAEX,QAAA,qBAAqB,GAAG,OAAC,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC;AAE/E;;;;;;GAMG;AACU,QAAA,eAAe,GAAG,OAAC;KAC7B,MAAM,EAAE;KACR,GAAG,CAAC,CAAC,CAAC;KACN,GAAG,CAAC,EAAE,CAAC;KACP,KAAK,CAAC,4BAA4B,CAAC,CAAC;AAE1B,QAAA,2BAA2B,GAAG,OAAC,CAAC,MAAM,CAAC;IAClD,IAAI,EAAE,QAAA,eAAe;IACrB,WAAW,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;IACxC,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC9B,aAAa,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE;IACpD,QAAQ,EAAE,OAAC,CAAC,MAAM,CAAC,OAAC,CAAC,MAAM,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;IAErD,yEAAyE;IACzE,wGAAwG;IACxG,yFAAyF;IACzF,SAAS,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;CAClC,CAAC,CAAC;AAEU,QAAA,0BAA0B,GAAG,OAAC,CAAC,MAAM,CAAC;IACjD,IAAI,EAAE,QAAA,eAAe;IACrB,WAAW,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;IACxC,KAAK,EAAE,QAAA,qBAAqB;IAC5B,SAAS,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;CAClC,CAAC,CAAC;AAEU,QAAA,uBAAuB,GAAG,OAAC;KACrC,MAAM,CAAC;IACN,KAAK,EAAE,QAAA,qBAAqB;IAC5B,aAAa,EAAE,QAAA,eAAe;IAC9B,WAAW,EAAE,QAAA,2BAA2B;IACxC,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;CACjB,CAAC;KACD,MAAM,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,aAAa,KAAK,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE;IACjE,OAAO,EAAE,gEAAgE;IACzE,IAAI,EAAE,CAAC,aAAa,EAAE,MAAM,CAAC;CAC9B,CAAC,CAAC;AAEL,wCAAwC;AAC3B,QAAA,qBAAqB,GAAG,OAAC,CAAC,MAAM,CAAC;IAC5C,8EAA8E;IAC9E,aAAa,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAChC,KAAK,EAAE,QAAA,qBAAqB;IAC5B,gFAAgF;IAChF,WAAW,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAC9B,sDAAsD;IACtD,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAC1B,+BAA+B;IAC/B,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;CACnC,CAAC,CAAC","sourcesContent":["import { z } from \"zod\";\n\nexport const AgentSkillScopeSchema = z.enum([\"project\", \"global\", \"built-in\"]);\n\n/**\n * Skill name per agentskills.io\n * - 1â€“64 chars\n * - lowercase letters/numbers/hyphens\n * - no leading/trailing hyphen\n * - no consecutive hyphens\n */\nexport const SkillNameSchema = z\n  .string()\n  .min(1)\n  .max(64)\n  .regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/);\n\nexport const AgentSkillFrontmatterSchema = z.object({\n  name: SkillNameSchema,\n  description: z.string().min(1).max(1024),\n  license: z.string().optional(),\n  compatibility: z.string().min(1).max(500).optional(),\n  metadata: z.record(z.string(), z.string()).optional(),\n\n  // When false, skill is NOT listed in the tool description's skill index.\n  // Unadvertised skills can still be invoked via /skill-name or agent_skill_read({ name: \"skill-name\" }).\n  // Use for internal orchestration skills, sub-agent-only skills, or power-user workflows.\n  advertise: z.boolean().optional(),\n});\n\nexport const AgentSkillDescriptorSchema = z.object({\n  name: SkillNameSchema,\n  description: z.string().min(1).max(1024),\n  scope: AgentSkillScopeSchema,\n  advertise: z.boolean().optional(),\n});\n\nexport const AgentSkillPackageSchema = z\n  .object({\n    scope: AgentSkillScopeSchema,\n    directoryName: SkillNameSchema,\n    frontmatter: AgentSkillFrontmatterSchema,\n    body: z.string(),\n  })\n  .refine((value) => value.directoryName === value.frontmatter.name, {\n    message: \"SKILL.md frontmatter.name must match the parent directory name\",\n    path: [\"frontmatter\", \"name\"],\n  });\n\n// Diagnostics (invalid skill discovery)\nexport const AgentSkillIssueSchema = z.object({\n  /** Directory name under the skills root (may be invalid / non-kebab-case). */\n  directoryName: z.string().min(1),\n  scope: AgentSkillScopeSchema,\n  /** User-facing path to the problematic skill (typically .../<dir>/SKILL.md). */\n  displayPath: z.string().min(1),\n  /** What went wrong while trying to load the skill. */\n  message: z.string().min(1),\n  /** Optional fix suggestion. */\n  hint: z.string().min(1).optional(),\n});\n"]}