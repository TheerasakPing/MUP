{"version":3,"file":"agentSkill.js","sourceRoot":"","sources":["../../../../src/common/orpc/schemas/agentSkill.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAEX,QAAA,qBAAqB,GAAG,OAAC,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC,CAAC;AAE/E;;;;;;GAMG;AACU,QAAA,eAAe,GAAG,OAAC;KAC7B,MAAM,EAAE;KACR,GAAG,CAAC,CAAC,CAAC;KACN,GAAG,CAAC,EAAE,CAAC;KACP,KAAK,CAAC,4BAA4B,CAAC,CAAC;AAE1B,QAAA,2BAA2B,GAAG,OAAC,CAAC,MAAM,CAAC;IAClD,IAAI,EAAE,QAAA,eAAe;IACrB,WAAW,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;IACxC,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC9B,aAAa,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE;IACpD,QAAQ,EAAE,OAAC,CAAC,MAAM,CAAC,OAAC,CAAC,MAAM,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;IAErD,yEAAyE;IACzE,wGAAwG;IACxG,yFAAyF;IACzF,SAAS,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;CAClC,CAAC,CAAC;AAEU,QAAA,0BAA0B,GAAG,OAAC,CAAC,MAAM,CAAC;IACjD,IAAI,EAAE,QAAA,eAAe;IACrB,WAAW,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC;IACxC,KAAK,EAAE,QAAA,qBAAqB;IAC5B,SAAS,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;CAClC,CAAC,CAAC;AAEU,QAAA,uBAAuB,GAAG,OAAC;KACrC,MAAM,CAAC;IACN,KAAK,EAAE,QAAA,qBAAqB;IAC5B,aAAa,EAAE,QAAA,eAAe;IAC9B,WAAW,EAAE,QAAA,2BAA2B;IACxC,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE;CACjB,CAAC;KACD,MAAM,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,aAAa,KAAK,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE;IACjE,OAAO,EAAE,gEAAgE;IACzE,IAAI,EAAE,CAAC,aAAa,EAAE,MAAM,CAAC;CAC9B,CAAC,CAAC;AAEL,wCAAwC;AAC3B,QAAA,qBAAqB,GAAG,OAAC,CAAC,MAAM,CAAC;IAC5C,8EAA8E;IAC9E,aAAa,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAChC,KAAK,EAAE,QAAA,qBAAqB;IAC5B,gFAAgF;IAChF,WAAW,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAC9B,sDAAsD;IACtD,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAC1B,+BAA+B;IAC/B,IAAI,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;CACnC,CAAC,CAAC","sourcesContent":["import { z } from \"zod\";\r\n\r\nexport const AgentSkillScopeSchema = z.enum([\"project\", \"global\", \"built-in\"]);\r\n\r\n/**\r\n * Skill name per agentskills.io\r\n * - 1â€“64 chars\r\n * - lowercase letters/numbers/hyphens\r\n * - no leading/trailing hyphen\r\n * - no consecutive hyphens\r\n */\r\nexport const SkillNameSchema = z\r\n  .string()\r\n  .min(1)\r\n  .max(64)\r\n  .regex(/^[a-z0-9]+(?:-[a-z0-9]+)*$/);\r\n\r\nexport const AgentSkillFrontmatterSchema = z.object({\r\n  name: SkillNameSchema,\r\n  description: z.string().min(1).max(1024),\r\n  license: z.string().optional(),\r\n  compatibility: z.string().min(1).max(500).optional(),\r\n  metadata: z.record(z.string(), z.string()).optional(),\r\n\r\n  // When false, skill is NOT listed in the tool description's skill index.\r\n  // Unadvertised skills can still be invoked via /skill-name or agent_skill_read({ name: \"skill-name\" }).\r\n  // Use for internal orchestration skills, sub-agent-only skills, or power-user workflows.\r\n  advertise: z.boolean().optional(),\r\n});\r\n\r\nexport const AgentSkillDescriptorSchema = z.object({\r\n  name: SkillNameSchema,\r\n  description: z.string().min(1).max(1024),\r\n  scope: AgentSkillScopeSchema,\r\n  advertise: z.boolean().optional(),\r\n});\r\n\r\nexport const AgentSkillPackageSchema = z\r\n  .object({\r\n    scope: AgentSkillScopeSchema,\r\n    directoryName: SkillNameSchema,\r\n    frontmatter: AgentSkillFrontmatterSchema,\r\n    body: z.string(),\r\n  })\r\n  .refine((value) => value.directoryName === value.frontmatter.name, {\r\n    message: \"SKILL.md frontmatter.name must match the parent directory name\",\r\n    path: [\"frontmatter\", \"name\"],\r\n  });\r\n\r\n// Diagnostics (invalid skill discovery)\r\nexport const AgentSkillIssueSchema = z.object({\r\n  /** Directory name under the skills root (may be invalid / non-kebab-case). */\r\n  directoryName: z.string().min(1),\r\n  scope: AgentSkillScopeSchema,\r\n  /** User-facing path to the problematic skill (typically .../<dir>/SKILL.md). */\r\n  displayPath: z.string().min(1),\r\n  /** What went wrong while trying to load the skill. */\r\n  message: z.string().min(1),\r\n  /** Optional fix suggestion. */\r\n  hint: z.string().min(1).optional(),\r\n});\r\n"]}