{"version":3,"file":"coder.js","sourceRoot":"","sources":["../../../../src/common/orpc/schemas/coder.ts"],"names":[],"mappings":"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","sourcesContent":["import { z } from \"zod\";\n\n// Coder workspace config - attached to SSH runtime when using Coder\nexport const CoderWorkspaceConfigSchema = z.object({\n  /**\n   * Coder workspace name.\n   * - For new workspaces: omit or undefined (backend derives from mux branch name)\n   * - For existing workspaces: required (the selected Coder workspace name)\n   * - After creation: populated with the actual Coder workspace name for reference\n   */\n  workspaceName: z.string().optional().meta({ description: \"Coder workspace name\" }),\n  template: z.string().optional().meta({ description: \"Template used to create workspace\" }),\n  templateOrg: z.string().optional().meta({\n    description: \"Template organization (for disambiguation when templates have same name)\",\n  }),\n  preset: z.string().optional().meta({ description: \"Preset used during creation\" }),\n\n  /** True if connected to pre-existing Coder workspace (vs mux creating one). */\n  existingWorkspace: z.boolean().optional().meta({\n    description: \"True if connected to pre-existing Coder workspace\",\n  }),\n});\n\nexport type CoderWorkspaceConfig = z.infer<typeof CoderWorkspaceConfigSchema>;\n\n// Coder CLI unavailable reason - missing, not logged in, or error with message\nexport const CoderUnavailableReasonSchema = z.union([\n  z.literal(\"missing\"),\n  z.object({ kind: z.literal(\"not-logged-in\"), message: z.string() }),\n  z.object({ kind: z.literal(\"error\"), message: z.string() }),\n]);\n\nexport type CoderUnavailableReason = z.infer<typeof CoderUnavailableReasonSchema>;\n\n// Coder CLI availability info - discriminated union by state\nexport const CoderInfoSchema = z.discriminatedUnion(\"state\", [\n  z.object({\n    state: z.literal(\"available\"),\n    version: z.string(),\n    username: z.string().optional(),\n    url: z.string().optional(),\n  }),\n  z.object({\n    state: z.literal(\"outdated\"),\n    version: z.string(),\n    minVersion: z.string(),\n    binaryPath: z.string().optional(),\n  }),\n  z.object({ state: z.literal(\"unavailable\"), reason: CoderUnavailableReasonSchema }),\n]);\n\nexport type CoderInfo = z.infer<typeof CoderInfoSchema>;\n\n// Coder template\nexport const CoderTemplateSchema = z.object({\n  name: z.string(),\n  displayName: z.string(),\n  organizationName: z.string(),\n});\n\nexport type CoderTemplate = z.infer<typeof CoderTemplateSchema>;\n\n// Coder preset for a template\nexport const CoderPresetSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  description: z.string().optional(),\n  isDefault: z.boolean(),\n});\n\nexport type CoderPreset = z.infer<typeof CoderPresetSchema>;\n\n// Coder workspace status\nexport const CoderWorkspaceStatusSchema = z.enum([\n  \"running\",\n  \"stopped\",\n  \"starting\",\n  \"stopping\",\n  \"failed\",\n  \"pending\",\n  \"canceling\",\n  \"canceled\",\n  \"deleting\",\n  \"deleted\",\n]);\n\nexport type CoderWorkspaceStatus = z.infer<typeof CoderWorkspaceStatusSchema>;\n\n// Coder workspace\nexport const CoderWorkspaceSchema = z.object({\n  name: z.string(),\n  templateName: z.string(),\n  templateDisplayName: z.string(),\n  status: CoderWorkspaceStatusSchema,\n});\n\nexport type CoderWorkspace = z.infer<typeof CoderWorkspaceSchema>;\n\n// Coder workspace list result (lets UI distinguish errors from empty list)\nexport const CoderListWorkspacesResultSchema = z.discriminatedUnion(\"ok\", [\n  z.object({ ok: z.literal(true), workspaces: z.array(CoderWorkspaceSchema) }),\n  z.object({ ok: z.literal(false), error: z.string() }),\n]);\n\nexport type CoderListWorkspacesResult = z.infer<typeof CoderListWorkspacesResultSchema>;\n\n// Coder template list result (lets UI distinguish errors from empty list)\nexport const CoderListTemplatesResultSchema = z.discriminatedUnion(\"ok\", [\n  z.object({ ok: z.literal(true), templates: z.array(CoderTemplateSchema) }),\n  z.object({ ok: z.literal(false), error: z.string() }),\n]);\n\nexport type CoderListTemplatesResult = z.infer<typeof CoderListTemplatesResultSchema>;\n\n// Coder preset list result (lets UI distinguish errors from empty list)\nexport const CoderListPresetsResultSchema = z.discriminatedUnion(\"ok\", [\n  z.object({ ok: z.literal(true), presets: z.array(CoderPresetSchema) }),\n  z.object({ ok: z.literal(false), error: z.string() }),\n]);\n\nexport type CoderListPresetsResult = z.infer<typeof CoderListPresetsResultSchema>;\n\n// API schemas for coder namespace\nexport const coder = {\n  getInfo: {\n    input: z.void(),\n    output: CoderInfoSchema,\n  },\n  listTemplates: {\n    input: z.void(),\n    output: CoderListTemplatesResultSchema,\n  },\n  listPresets: {\n    input: z.object({\n      template: z.string(),\n      org: z.string().optional().meta({ description: \"Organization name for disambiguation\" }),\n    }),\n    output: CoderListPresetsResultSchema,\n  },\n  listWorkspaces: {\n    input: z.void(),\n    output: CoderListWorkspacesResultSchema,\n  },\n};\n"]}