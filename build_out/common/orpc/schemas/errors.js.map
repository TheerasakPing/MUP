{"version":3,"file":"errors.js","sourceRoot":"","sources":["../../../../src/common/orpc/schemas/errors.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAExB;;;;;;GAMG;AACU,QAAA,sBAAsB,GAAG,OAAC,CAAC,kBAAkB,CAAC,MAAM,EAAE;IACjE,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,EAAE,QAAQ,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;IACxE,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,qBAAqB,CAAC,EAAE,QAAQ,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;IAC1E,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,wBAAwB,CAAC,EAAE,QAAQ,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;IAC7E,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,sBAAsB,CAAC,EAAE,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;IAC1E,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,wBAAwB,CAAC,EAAE,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;IAC5E,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,mBAAmB,CAAC,EAAE,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;IACvE,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,sBAAsB,CAAC,EAAE,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,wBAAwB;IACpG,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE,OAAO,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;IACnE,OAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,OAAC,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,GAAG,EAAE,OAAC,CAAC,MAAM,EAAE,EAAE,CAAC;CAC1D,CAAC,CAAC;AAEH;;;GAGG;AACU,QAAA,qBAAqB,GAAG,OAAC,CAAC,IAAI,CAAC;IAC1C,gBAAgB,EAAE,6BAA6B;IAC/C,YAAY,EAAE,oBAAoB;IAClC,cAAc,EAAE,oBAAoB;IACpC,KAAK,EAAE,qBAAqB;IAC5B,cAAc,EAAE,kBAAkB;IAClC,SAAS,EAAE,eAAe;IAC1B,SAAS,EAAE,uBAAuB;IAClC,kBAAkB,EAAE,sCAAsC;IAC1D,OAAO,EAAE,6BAA6B;IACtC,iBAAiB,EAAE,uBAAuB;IAC1C,mBAAmB,EAAE,iEAAiE;IACtF,sBAAsB,EAAE,6DAA6D;IACrF,SAAS,EAAE,YAAY;CACxB,CAAC,CAAC","sourcesContent":["import { z } from \"zod\";\r\n\r\n/**\r\n * Discriminated union for all possible sendMessage errors.\r\n *\r\n * The frontend is responsible for language and messaging for api_key_not_found,\r\n * oauth_not_connected, and provider_not_supported errors. Other error types include\r\n * details needed for display.\r\n */\r\nexport const SendMessageErrorSchema = z.discriminatedUnion(\"type\", [\r\n  z.object({ type: z.literal(\"api_key_not_found\"), provider: z.string() }),\r\n  z.object({ type: z.literal(\"oauth_not_connected\"), provider: z.string() }),\r\n  z.object({ type: z.literal(\"provider_not_supported\"), provider: z.string() }),\r\n  z.object({ type: z.literal(\"invalid_model_string\"), message: z.string() }),\r\n  z.object({ type: z.literal(\"incompatible_workspace\"), message: z.string() }),\r\n  z.object({ type: z.literal(\"runtime_not_ready\"), message: z.string() }),\r\n  z.object({ type: z.literal(\"runtime_start_failed\"), message: z.string() }), // Transient - retryable\r\n  z.object({ type: z.literal(\"policy_denied\"), message: z.string() }),\r\n  z.object({ type: z.literal(\"unknown\"), raw: z.string() }),\r\n]);\r\n\r\n/**\r\n * Stream error types - categorizes errors during AI streaming\r\n * Used across backend (StreamManager) and frontend (StreamErrorMessage)\r\n */\r\nexport const StreamErrorTypeSchema = z.enum([\r\n  \"authentication\", // API key issues, 401 errors\r\n  \"rate_limit\", // 429 rate limiting\r\n  \"server_error\", // 5xx server errors\r\n  \"api\", // Generic API errors\r\n  \"retry_failed\", // Retry exhausted\r\n  \"aborted\", // User aborted\r\n  \"network\", // Network/fetch errors\r\n  \"context_exceeded\", // Context length/token limit exceeded\r\n  \"quota\", // Usage quota/billing limits\r\n  \"model_not_found\", // Model does not exist\r\n  \"runtime_not_ready\", // Container/runtime doesn't exist or failed to start (permanent)\r\n  \"runtime_start_failed\", // Runtime is starting or temporarily unavailable (retryable)\r\n  \"unknown\", // Catch-all\r\n]);\r\n"]}