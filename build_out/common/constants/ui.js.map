{"version":3,"file":"ui.js","sourceRoot":"","sources":["../../../src/common/constants/ui.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * UI-related constants shared across components\r\n */\r\n\r\n/**\r\n * Auto-compaction threshold bounds (percentage)\r\n * MIN: Allow any value - user can choose aggressive compaction if desired\r\n * MAX: Cap at 90% to leave buffer before hitting context limit\r\n */\r\nexport const AUTO_COMPACTION_THRESHOLD_MIN = 0;\r\nexport const AUTO_COMPACTION_THRESHOLD_MAX = 90;\r\n\r\n/**\r\n * Default auto-compaction threshold percentage (50-90 range)\r\n * Applied when creating new workspaces\r\n */\r\nexport const DEFAULT_AUTO_COMPACTION_THRESHOLD_PERCENT = 70;\r\n\r\n/**\r\n * Default threshold as decimal for calculations (0.7 = 70%)\r\n */\r\nexport const DEFAULT_AUTO_COMPACTION_THRESHOLD = DEFAULT_AUTO_COMPACTION_THRESHOLD_PERCENT / 100;\r\n\r\n/**\r\n * Default word target for compaction summaries\r\n */\r\nexport const DEFAULT_COMPACTION_WORD_TARGET = 2000;\r\n\r\n/**\r\n * Approximate ratio of tokens to words (tokens per word)\r\n * Used for converting between word counts and token counts\r\n */\r\nexport const WORDS_TO_TOKENS_RATIO = 1.3;\r\n\r\n/**\r\n * Build the compaction prompt for a given word target.\r\n * Shared across desktop and mobile clients.\r\n */\r\nexport function buildCompactionPrompt(targetWords: number): string {\r\n  return `Summarize this conversation for a new Assistant to continue helping the user.\r\n\r\nYour summary must be approximately ${targetWords} words.\r\n\r\nInclude:\r\n- The user's overall goal and current task\r\n- Key decisions made and their rationale\r\n- Current state of the work (what's done, what's in progress)\r\n- Important technical details (file paths, function names, configurations)\r\n- Any errors encountered and how they were resolved\r\n- Unresolved issues or blockers\r\n\r\nDo not include:\r\n- Suggestions for next steps\r\n- Conversational filler or pleasantries\r\n- Redundant information\r\n\r\nWrite in a factual, dense style. Every sentence should convey essential context.`;\r\n}\r\n\r\n/**\r\n * Force-compact this many percentage points after threshold.\r\n * Gives user a buffer zone between warning and force-compaction.\r\n * E.g., with 70% threshold, force-compact triggers at 75%.\r\n */\r\nexport const FORCE_COMPACTION_BUFFER_PERCENT = 5;\r\n\r\n/**\r\n * Duration (ms) to show \"copied\" feedback after copying to clipboard\r\n */\r\nexport const COPY_FEEDBACK_DURATION_MS = 2000;\r\n\r\n/**\r\n * Predefined color palette for project sections.\r\n * Each color is designed to work well with the dark theme.\r\n * Format: [name, hex value]\r\n */\r\nexport const SECTION_COLOR_PALETTE = [\r\n  [\"Gray\", \"#6b7280\"],\r\n  [\"Slate\", \"#64748b\"],\r\n  [\"Blue\", \"#5a9bd4\"],\r\n  [\"Cyan\", \"#22d3ee\"],\r\n  [\"Teal\", \"#4ab5a7\"],\r\n  [\"Green\", \"#4caf7c\"],\r\n  [\"Yellow\", \"#d9b836\"],\r\n  [\"Orange\", \"#e5853a\"],\r\n  [\"Red\", \"#e54545\"],\r\n  [\"Pink\", \"#d465a5\"],\r\n] as const;\r\n\r\nexport type SectionColorName = (typeof SECTION_COLOR_PALETTE)[number][0];\r\n\r\n/**\r\n * Default color for new sections (neutral gray)\r\n */\r\nexport const DEFAULT_SECTION_COLOR = SECTION_COLOR_PALETTE[0][1];\r\n\r\n/**\r\n * Resolve a section color string (hex value or preset name) to a canonical hex color.\r\n *\r\n * Sections persist their color to config.json as a string, which may be either:\r\n * - a hex color (e.g. \"#5a9bd4\")\r\n * - a palette name (e.g. \"Blue\")\r\n *\r\n * For consistent rendering (and for safely appending hex alpha like \"10\"), we normalize\r\n * to a 6-digit \"#rrggbb\" string.\r\n */\r\nexport function resolveSectionColor(color: string | null | undefined): string {\r\n  if (!color) {\r\n    return DEFAULT_SECTION_COLOR;\r\n  }\r\n\r\n  const trimmed = color.trim();\r\n  if (trimmed.length === 0) {\r\n    return DEFAULT_SECTION_COLOR;\r\n  }\r\n\r\n  const paletteMatch = SECTION_COLOR_PALETTE.find(\r\n    ([name]) => name.toLowerCase() === trimmed.toLowerCase()\r\n  );\r\n  if (paletteMatch) {\r\n    return paletteMatch[1];\r\n  }\r\n\r\n  const hex3Match = /^#([0-9a-fA-F]{3})$/.exec(trimmed);\r\n  if (hex3Match) {\r\n    const [r, g, b] = hex3Match[1].split(\"\");\r\n    return `#${r}${r}${g}${g}${b}${b}`.toLowerCase();\r\n  }\r\n\r\n  const hex6Match = /^#([0-9a-fA-F]{6})$/.exec(trimmed);\r\n  if (hex6Match) {\r\n    return `#${hex6Match[1]}`.toLowerCase();\r\n  }\r\n\r\n  // If the stored value includes an alpha channel, drop it so downstream code can\r\n  // safely apply its own alpha.\r\n  const hex8Match = /^#([0-9a-fA-F]{8})$/.exec(trimmed);\r\n  if (hex8Match) {\r\n    return `#${hex8Match[1].slice(0, 6)}`.toLowerCase();\r\n  }\r\n\r\n  return DEFAULT_SECTION_COLOR;\r\n}\r\n"]}