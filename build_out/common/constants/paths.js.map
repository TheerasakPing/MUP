{"version":3,"file":"paths.js","sourceRoot":"","sources":["../../../src/common/constants/paths.ts"],"names":[],"mappings":"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","sourcesContent":["import { existsSync, renameSync, symlinkSync } from \"fs\";\r\nimport { homedir } from \"os\";\r\nimport { join } from \"path\";\r\n\r\nconst LEGACY_MUX_DIR_NAME = \".cmux\";\r\nconst MUX_DIR_NAME = \".mux\";\r\n\r\n/**\r\n * Migrate from the legacy ~/.cmux directory into ~/.mux for rebranded installs.\r\n * Called on startup to preserve data created by earlier releases.\r\n *\r\n * If .mux exists, nothing happens (already migrated).\r\n * If .cmux exists but .mux doesn't, moves .cmux â†’ .mux and creates symlink.\r\n * This ensures old scripts/tools referencing ~/.cmux continue working.\r\n */\r\nexport function migrateLegacyMuxHome(): void {\r\n  const oldPath = join(homedir(), LEGACY_MUX_DIR_NAME);\r\n  const newPath = join(homedir(), MUX_DIR_NAME);\r\n\r\n  // If .mux exists, we're done (already migrated or fresh install)\r\n  if (existsSync(newPath)) {\r\n    return;\r\n  }\r\n\r\n  // If .cmux exists, move it and create symlink for backward compatibility\r\n  if (existsSync(oldPath)) {\r\n    renameSync(oldPath, newPath);\r\n    symlinkSync(newPath, oldPath, \"dir\");\r\n  }\r\n\r\n  // If neither exists, nothing to do (will be created on first use)\r\n}\r\n\r\n/**\r\n * Get the root directory for all mux configuration and data.\r\n * Can be overridden with MUX_ROOT environment variable.\r\n * Appends '-dev' suffix when NODE_ENV=development (explicit dev mode).\r\n *\r\n * This is a getter function to support test mocking of os.homedir().\r\n *\r\n * Note: This file is only used by main process code, but lives in constants/\r\n * for organizational purposes. The process.env access is safe.\r\n */\r\nexport function getMuxHome(): string {\r\n  // eslint-disable-next-line no-restricted-syntax, no-restricted-globals\r\n  if (process.env.MUX_ROOT) {\r\n    // eslint-disable-next-line no-restricted-syntax, no-restricted-globals\r\n    return process.env.MUX_ROOT;\r\n  }\r\n\r\n  const baseName = MUX_DIR_NAME;\r\n  // Use -dev suffix only when explicitly in development mode\r\n  // eslint-disable-next-line no-restricted-syntax, no-restricted-globals\r\n  const suffix = process.env.NODE_ENV === \"development\" ? \"-dev\" : \"\";\r\n  return join(homedir(), baseName + suffix);\r\n}\r\n\r\n/**\r\n * Get the directory where workspace git worktrees are stored.\r\n * Example: ~/.mux/src/my-project/feature-branch\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxSrcDir(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"src\");\r\n}\r\n\r\n/**\r\n * Get the directory where session chat histories are stored.\r\n * Example: ~/.mux/sessions/workspace-id/chat.jsonl\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxSessionsDir(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"sessions\");\r\n}\r\n\r\n/**\r\n * Get the directory where plan files are stored.\r\n * Example: ~/.mux/plans/workspace-id.md\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxPlansDir(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"plans\");\r\n}\r\n\r\n/**\r\n * Get the main configuration file path.\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxConfigFile(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"config.json\");\r\n}\r\n\r\n/**\r\n * Get the providers configuration file path.\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxProvidersFile(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"providers.jsonc\");\r\n}\r\n\r\n/**\r\n * Get the secrets file path.\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxSecretsFile(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"secrets.json\");\r\n}\r\n\r\n/**\r\n * Get the default directory for new projects created with bare names.\r\n * Example: ~/.mux/projects/my-project\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxProjectsDir(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"projects\");\r\n}\r\n\r\n/**\r\n * Get the extension metadata file path (shared with VS Code extension).\r\n *\r\n * @param rootDir - Optional root directory (defaults to getMuxHome())\r\n */\r\nexport function getMuxExtensionMetadataPath(rootDir?: string): string {\r\n  const root = rootDir ?? getMuxHome();\r\n  return join(root, \"extensionMetadata.json\");\r\n}\r\n"]}