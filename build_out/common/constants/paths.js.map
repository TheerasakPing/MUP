{"version":3,"file":"paths.js","sourceRoot":"","sources":["../../../src/common/constants/paths.ts"],"names":[],"mappings":"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","sourcesContent":["import { existsSync, renameSync, symlinkSync } from \"fs\";\nimport { homedir } from \"os\";\nimport { join } from \"path\";\n\nconst LEGACY_MUX_DIR_NAME = \".cmux\";\nconst MUX_DIR_NAME = \".mux\";\n\n/**\n * Migrate from the legacy ~/.cmux directory into ~/.mux for rebranded installs.\n * Called on startup to preserve data created by earlier releases.\n *\n * If .mux exists, nothing happens (already migrated).\n * If .cmux exists but .mux doesn't, moves .cmux â†’ .mux and creates symlink.\n * This ensures old scripts/tools referencing ~/.cmux continue working.\n */\nexport function migrateLegacyMuxHome(): void {\n  const oldPath = join(homedir(), LEGACY_MUX_DIR_NAME);\n  const newPath = join(homedir(), MUX_DIR_NAME);\n\n  // If .mux exists, we're done (already migrated or fresh install)\n  if (existsSync(newPath)) {\n    return;\n  }\n\n  // If .cmux exists, move it and create symlink for backward compatibility\n  if (existsSync(oldPath)) {\n    renameSync(oldPath, newPath);\n    symlinkSync(newPath, oldPath, \"dir\");\n  }\n\n  // If neither exists, nothing to do (will be created on first use)\n}\n\n/**\n * Get the root directory for all mux configuration and data.\n * Can be overridden with MUX_ROOT environment variable.\n * Appends '-dev' suffix when NODE_ENV=development (explicit dev mode).\n *\n * This is a getter function to support test mocking of os.homedir().\n *\n * Note: This file is only used by main process code, but lives in constants/\n * for organizational purposes. The process.env access is safe.\n */\nexport function getMuxHome(): string {\n  // eslint-disable-next-line no-restricted-syntax, no-restricted-globals\n  if (process.env.MUX_ROOT) {\n    // eslint-disable-next-line no-restricted-syntax, no-restricted-globals\n    return process.env.MUX_ROOT;\n  }\n\n  const baseName = MUX_DIR_NAME;\n  // Use -dev suffix only when explicitly in development mode\n  // eslint-disable-next-line no-restricted-syntax, no-restricted-globals\n  const suffix = process.env.NODE_ENV === \"development\" ? \"-dev\" : \"\";\n  return join(homedir(), baseName + suffix);\n}\n\n/**\n * Get the directory where workspace git worktrees are stored.\n * Example: ~/.mux/src/my-project/feature-branch\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxSrcDir(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"src\");\n}\n\n/**\n * Get the directory where session chat histories are stored.\n * Example: ~/.mux/sessions/workspace-id/chat.jsonl\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxSessionsDir(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"sessions\");\n}\n\n/**\n * Get the directory where plan files are stored.\n * Example: ~/.mux/plans/workspace-id.md\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxPlansDir(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"plans\");\n}\n\n/**\n * Get the main configuration file path.\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxConfigFile(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"config.json\");\n}\n\n/**\n * Get the providers configuration file path.\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxProvidersFile(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"providers.jsonc\");\n}\n\n/**\n * Get the secrets file path.\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxSecretsFile(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"secrets.json\");\n}\n\n/**\n * Get the default directory for new projects created with bare names.\n * Example: ~/.mux/projects/my-project\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxProjectsDir(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"projects\");\n}\n\n/**\n * Get the extension metadata file path (shared with VS Code extension).\n *\n * @param rootDir - Optional root directory (defaults to getMuxHome())\n */\nexport function getMuxExtensionMetadataPath(rootDir?: string): string {\n  const root = rootDir ?? getMuxHome();\n  return join(root, \"extensionMetadata.json\");\n}\n"]}