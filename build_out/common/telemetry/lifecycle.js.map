{"version":3,"file":"lifecycle.js","sourceRoot":"","sources":["../../../src/common/telemetry/lifecycle.ts"],"names":[],"mappings":";AAAA;;;;GAIG;;;AAEH,qCAAsC;AACtC,wDAA6D;AAE7D,wCAAwC;AACxC,MAAM,gBAAgB,GAAG,2BAA2B,CAAC;AAErD;;;GAGG;AACH,SAAS,gBAAgB,GAAY;IACnC,MAAM,iBAAiB,GAAG,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,IAAI,iBAAiB,EAAE,CAAC;QACtB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,8BAA8B;IAC9B,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;IAC/C,OAAO,IAAI,CAAC;AAAA,CACb;AAED;;GAEG;AACH,SAAS,mBAAmB,GAAY;IACtC,OAAO,YAAY,CAAC,OAAO,CAAC,yBAAe,CAAC,KAAK,MAAM,CAAC;AAAA,CACzD;AAED;;;GAGG;AACH,2BAAwC;IACtC,MAAM,aAAa,GAAG,gBAAgB,EAAE,CAAC;IACzC,MAAM,cAAc,GAAG,mBAAmB,EAAE,CAAC;IAE7C,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,EAAE,aAAa,EAAE,cAAc,EAAE,CAAC,CAAC;IAEhF,IAAA,mBAAU,EAAC;QACT,KAAK,EAAE,aAAa;QACpB,UAAU,EAAE;YACV,aAAa;YACb,cAAc;SACf;KACF,CAAC,CAAC;AAAA,CACJ","sourcesContent":["/**\r\n * Telemetry lifecycle tracking\r\n *\r\n * Handles app startup events\r\n */\r\n\r\nimport { trackEvent } from \"./client\";\r\nimport { VIM_ENABLED_KEY } from \"@/common/constants/storage\";\r\n\r\n// Storage key for first launch tracking\r\nconst FIRST_LAUNCH_KEY = \"mux_first_launch_complete\";\r\n\r\n/**\r\n * Check if this is the first app launch\r\n * Uses localStorage to persist flag across sessions\r\n */\r\nfunction checkFirstLaunch(): boolean {\r\n  const hasLaunchedBefore = localStorage.getItem(FIRST_LAUNCH_KEY);\r\n  if (hasLaunchedBefore) {\r\n    return false;\r\n  }\r\n\r\n  // First launch - set the flag\r\n  localStorage.setItem(FIRST_LAUNCH_KEY, \"true\");\r\n  return true;\r\n}\r\n\r\n/**\r\n * Check if vim mode is enabled\r\n */\r\nfunction checkVimModeEnabled(): boolean {\r\n  return localStorage.getItem(VIM_ENABLED_KEY) === \"true\";\r\n}\r\n\r\n/**\r\n * Track app startup\r\n * Should be called once when the app initializes\r\n */\r\nexport function trackAppStarted(): void {\r\n  const isFirstLaunch = checkFirstLaunch();\r\n  const vimModeEnabled = checkVimModeEnabled();\r\n\r\n  console.debug(\"[Telemetry] trackAppStarted\", { isFirstLaunch, vimModeEnabled });\r\n\r\n  trackEvent({\r\n    event: \"app_started\",\r\n    properties: {\r\n      isFirstLaunch,\r\n      vimModeEnabled,\r\n    },\r\n  });\r\n}\r\n"]}