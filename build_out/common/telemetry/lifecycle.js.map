{"version":3,"file":"lifecycle.js","sourceRoot":"","sources":["../../../src/common/telemetry/lifecycle.ts"],"names":[],"mappings":";AAAA;;;;GAIG;;;AAEH,qCAAsC;AACtC,wDAA6D;AAE7D,wCAAwC;AACxC,MAAM,gBAAgB,GAAG,2BAA2B,CAAC;AAErD;;;GAGG;AACH,SAAS,gBAAgB,GAAY;IACnC,MAAM,iBAAiB,GAAG,YAAY,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;IACjE,IAAI,iBAAiB,EAAE,CAAC;QACtB,OAAO,KAAK,CAAC;IACf,CAAC;IAED,8BAA8B;IAC9B,YAAY,CAAC,OAAO,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;IAC/C,OAAO,IAAI,CAAC;AAAA,CACb;AAED;;GAEG;AACH,SAAS,mBAAmB,GAAY;IACtC,OAAO,YAAY,CAAC,OAAO,CAAC,yBAAe,CAAC,KAAK,MAAM,CAAC;AAAA,CACzD;AAED;;;GAGG;AACH,2BAAwC;IACtC,MAAM,aAAa,GAAG,gBAAgB,EAAE,CAAC;IACzC,MAAM,cAAc,GAAG,mBAAmB,EAAE,CAAC;IAE7C,OAAO,CAAC,KAAK,CAAC,6BAA6B,EAAE,EAAE,aAAa,EAAE,cAAc,EAAE,CAAC,CAAC;IAEhF,IAAA,mBAAU,EAAC;QACT,KAAK,EAAE,aAAa;QACpB,UAAU,EAAE;YACV,aAAa;YACb,cAAc;SACf;KACF,CAAC,CAAC;AAAA,CACJ","sourcesContent":["/**\n * Telemetry lifecycle tracking\n *\n * Handles app startup events\n */\n\nimport { trackEvent } from \"./client\";\nimport { VIM_ENABLED_KEY } from \"@/common/constants/storage\";\n\n// Storage key for first launch tracking\nconst FIRST_LAUNCH_KEY = \"mux_first_launch_complete\";\n\n/**\n * Check if this is the first app launch\n * Uses localStorage to persist flag across sessions\n */\nfunction checkFirstLaunch(): boolean {\n  const hasLaunchedBefore = localStorage.getItem(FIRST_LAUNCH_KEY);\n  if (hasLaunchedBefore) {\n    return false;\n  }\n\n  // First launch - set the flag\n  localStorage.setItem(FIRST_LAUNCH_KEY, \"true\");\n  return true;\n}\n\n/**\n * Check if vim mode is enabled\n */\nfunction checkVimModeEnabled(): boolean {\n  return localStorage.getItem(VIM_ENABLED_KEY) === \"true\";\n}\n\n/**\n * Track app startup\n * Should be called once when the app initializes\n */\nexport function trackAppStarted(): void {\n  const isFirstLaunch = checkFirstLaunch();\n  const vimModeEnabled = checkVimModeEnabled();\n\n  console.debug(\"[Telemetry] trackAppStarted\", { isFirstLaunch, vimModeEnabled });\n\n  trackEvent({\n    event: \"app_started\",\n    properties: {\n      isFirstLaunch,\n      vimModeEnabled,\n    },\n  });\n}\n"]}