{"version":3,"file":"stream.js","sourceRoot":"","sources":["../../../src/common/types/stream.ts"],"names":[],"mappings":";AAAA;;GAEG","sourcesContent":["/**\n * Event types emitted by AIService\n */\n\nimport type { z } from \"zod\";\nimport type { MuxReasoningPart, MuxTextPart, MuxToolPart } from \"./message\";\nimport type {\n  ErrorEventSchema,\n  ReasoningDeltaEventSchema,\n  ReasoningEndEventSchema,\n  StreamAbortReasonSchema,\n  StreamAbortEventSchema,\n  StreamDeltaEventSchema,\n  StreamEndEventSchema,\n  StreamStartEventSchema,\n  ToolCallDeltaEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallStartEventSchema,\n  BashOutputEventSchema,\n  TaskCreatedEventSchema,\n  UsageDeltaEventSchema,\n  RuntimeStatusEventSchema,\n} from \"../orpc/schemas\";\n\n/**\n * Completed message part (reasoning, text, or tool) suitable for serialization\n * Used in StreamEndEvent and partial message storage\n */\nexport type CompletedMessagePart = MuxReasoningPart | MuxTextPart | MuxToolPart;\n\nexport type StreamStartEvent = z.infer<typeof StreamStartEventSchema>;\nexport type StreamDeltaEvent = z.infer<typeof StreamDeltaEventSchema>;\nexport type StreamEndEvent = z.infer<typeof StreamEndEventSchema>;\nexport type StreamAbortReason = z.infer<typeof StreamAbortReasonSchema>;\nexport interface StreamAbortReasonSnapshot {\n  reason: StreamAbortReason;\n  at: number;\n}\nexport type StreamAbortEvent = z.infer<typeof StreamAbortEventSchema>;\n\nexport type ErrorEvent = z.infer<typeof ErrorEventSchema>;\n\nexport type BashOutputEvent = z.infer<typeof BashOutputEventSchema>;\nexport type TaskCreatedEvent = z.infer<typeof TaskCreatedEventSchema>;\nexport type ToolCallStartEvent = z.infer<typeof ToolCallStartEventSchema>;\nexport type ToolCallDeltaEvent = z.infer<typeof ToolCallDeltaEventSchema>;\nexport type ToolCallEndEvent = z.infer<typeof ToolCallEndEventSchema>;\n\nexport type ReasoningDeltaEvent = z.infer<typeof ReasoningDeltaEventSchema>;\nexport type ReasoningEndEvent = z.infer<typeof ReasoningEndEventSchema>;\n\n/**\n * Emitted on each AI SDK finish-step event, providing incremental usage updates.\n * Allows UI to update token display as steps complete (after each tool call or at stream end).\n */\nexport type UsageDeltaEvent = z.infer<typeof UsageDeltaEventSchema>;\n\n/**\n * Progress event for runtime readiness checks.\n * Used by Coder workspaces to show \"Starting Coder workspace...\" while ensureReady() blocks.\n */\nexport type RuntimeStatusEvent = z.infer<typeof RuntimeStatusEventSchema>;\n"]}