{"version":3,"file":"stream.js","sourceRoot":"","sources":["../../../src/common/types/stream.ts"],"names":[],"mappings":";AAAA;;GAEG","sourcesContent":["/**\r\n * Event types emitted by AIService\r\n */\r\n\r\nimport type { z } from \"zod\";\r\nimport type { MuxReasoningPart, MuxTextPart, MuxToolPart } from \"./message\";\r\nimport type {\r\n  ErrorEventSchema,\r\n  ReasoningDeltaEventSchema,\r\n  ReasoningEndEventSchema,\r\n  StreamAbortReasonSchema,\r\n  StreamAbortEventSchema,\r\n  StreamDeltaEventSchema,\r\n  StreamEndEventSchema,\r\n  StreamStartEventSchema,\r\n  ToolCallDeltaEventSchema,\r\n  ToolCallEndEventSchema,\r\n  ToolCallStartEventSchema,\r\n  BashOutputEventSchema,\r\n  TaskCreatedEventSchema,\r\n  UsageDeltaEventSchema,\r\n  RuntimeStatusEventSchema,\r\n} from \"../orpc/schemas\";\r\n\r\n/**\r\n * Completed message part (reasoning, text, or tool) suitable for serialization\r\n * Used in StreamEndEvent and partial message storage\r\n */\r\nexport type CompletedMessagePart = MuxReasoningPart | MuxTextPart | MuxToolPart;\r\n\r\nexport type StreamStartEvent = z.infer<typeof StreamStartEventSchema>;\r\nexport type StreamDeltaEvent = z.infer<typeof StreamDeltaEventSchema>;\r\nexport type StreamEndEvent = z.infer<typeof StreamEndEventSchema>;\r\nexport type StreamAbortReason = z.infer<typeof StreamAbortReasonSchema>;\r\nexport interface StreamAbortReasonSnapshot {\r\n  reason: StreamAbortReason;\r\n  at: number;\r\n}\r\nexport type StreamAbortEvent = z.infer<typeof StreamAbortEventSchema>;\r\n\r\nexport type ErrorEvent = z.infer<typeof ErrorEventSchema>;\r\n\r\nexport type BashOutputEvent = z.infer<typeof BashOutputEventSchema>;\r\nexport type TaskCreatedEvent = z.infer<typeof TaskCreatedEventSchema>;\r\nexport type ToolCallStartEvent = z.infer<typeof ToolCallStartEventSchema>;\r\nexport type ToolCallDeltaEvent = z.infer<typeof ToolCallDeltaEventSchema>;\r\nexport type ToolCallEndEvent = z.infer<typeof ToolCallEndEventSchema>;\r\n\r\nexport type ReasoningDeltaEvent = z.infer<typeof ReasoningDeltaEventSchema>;\r\nexport type ReasoningEndEvent = z.infer<typeof ReasoningEndEventSchema>;\r\n\r\n/**\r\n * Emitted on each AI SDK finish-step event, providing incremental usage updates.\r\n * Allows UI to update token display as steps complete (after each tool call or at stream end).\r\n */\r\nexport type UsageDeltaEvent = z.infer<typeof UsageDeltaEventSchema>;\r\n\r\n/**\r\n * Progress event for runtime readiness checks.\r\n * Used by Coder workspaces to show \"Starting Coder workspace...\" while ensureReady() blocks.\r\n */\r\nexport type RuntimeStatusEvent = z.infer<typeof RuntimeStatusEventSchema>;\r\n"]}