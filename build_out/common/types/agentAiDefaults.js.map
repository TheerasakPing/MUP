{"version":3,"file":"agentAiDefaults.js","sourceRoot":"","sources":["../../../src/common/types/agentAiDefaults.ts"],"names":[],"mappings":";;;AAAA,mDAAsD;AACtD,yCAAqE;AAiBrE,kCAAyC,GAAY,EAAmB;IACtE,MAAM,MAAM,GAAG,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAE,GAA+B,CAAC,CAAC,CAAE,EAAY,CAAC;IAEjG,MAAM,MAAM,GAAoB,EAAE,CAAC;IAEnC,KAAK,MAAM,CAAC,UAAU,EAAE,QAAQ,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC;QAC5D,MAAM,OAAO,GAAG,UAAU,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;QAChD,IAAI,CAAC,OAAO;YAAE,SAAS;QACvB,IAAI,CAAC,uBAAa,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO;YAAE,SAAS;QACxD,IAAI,CAAC,QAAQ,IAAI,OAAO,QAAQ,KAAK,QAAQ;YAAE,SAAS;QAExD,MAAM,KAAK,GAAG,QAAmC,CAAC;QAElD,MAAM,WAAW,GACf,OAAO,KAAK,CAAC,WAAW,KAAK,QAAQ,IAAI,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,MAAM,GAAG,CAAC;YAC1E,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE;YAC1B,CAAC,CAAC,SAAS,CAAC;QAEhB,MAAM,aAAa,GAAG,IAAA,8BAAmB,EAAC,KAAK,CAAC,aAAa,CAAC,CAAC;QAE/D,MAAM,OAAO,GAAG,OAAO,KAAK,CAAC,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;QAE/E,IAAI,CAAC,WAAW,IAAI,CAAC,aAAa,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;YAC5D,SAAS;QACX,CAAC;QAED,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,WAAW,EAAE,aAAa,EAAE,OAAO,EAAE,CAAC;IAC5D,CAAC;IAED,OAAO,MAAM,CAAC;AAAA,CACf","sourcesContent":["import { AgentIdSchema } from \"@/common/orpc/schemas\";\r\nimport { coerceThinkingLevel, type ThinkingLevel } from \"./thinking\";\r\n\r\nexport interface AgentAiDefaultsEntry {\r\n  modelString?: string;\r\n  thinkingLevel?: ThinkingLevel;\r\n  /**\r\n   * Local enablement override.\r\n   *\r\n   * - true: force enable (even if the agent front-matter disables it)\r\n   * - false: force disable\r\n   * - undefined: inherit from agent front-matter\r\n   */\r\n  enabled?: boolean;\r\n}\r\n\r\nexport type AgentAiDefaults = Record<string, AgentAiDefaultsEntry>;\r\n\r\nexport function normalizeAgentAiDefaults(raw: unknown): AgentAiDefaults {\r\n  const record = raw && typeof raw === \"object\" ? (raw as Record<string, unknown>) : ({} as const);\r\n\r\n  const result: AgentAiDefaults = {};\r\n\r\n  for (const [agentIdRaw, entryRaw] of Object.entries(record)) {\r\n    const agentId = agentIdRaw.trim().toLowerCase();\r\n    if (!agentId) continue;\r\n    if (!AgentIdSchema.safeParse(agentId).success) continue;\r\n    if (!entryRaw || typeof entryRaw !== \"object\") continue;\r\n\r\n    const entry = entryRaw as Record<string, unknown>;\r\n\r\n    const modelString =\r\n      typeof entry.modelString === \"string\" && entry.modelString.trim().length > 0\r\n        ? entry.modelString.trim()\r\n        : undefined;\r\n\r\n    const thinkingLevel = coerceThinkingLevel(entry.thinkingLevel);\r\n\r\n    const enabled = typeof entry.enabled === \"boolean\" ? entry.enabled : undefined;\r\n\r\n    if (!modelString && !thinkingLevel && enabled === undefined) {\r\n      continue;\r\n    }\r\n\r\n    result[agentId] = { modelString, thinkingLevel, enabled };\r\n  }\r\n\r\n  return result;\r\n}\r\n"]}