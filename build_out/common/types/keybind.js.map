{"version":3,"file":"keybind.js","sourceRoot":"","sources":["../../../src/common/types/keybind.ts"],"names":[],"mappings":";;;;;;;AAAA,mEAA2C;AAyB3C,4BAAmC,OAAgB,EAAW;IAC5D,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC;AAAA,CACzF;AAED,0BAAiC,GAAY,EAAuB;IAClE,IAAI,CAAC,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;QACpC,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,MAAM,GAAG,GAA8B,CAAC;IAE9C,MAAM,MAAM,GAAG,OAAO,MAAM,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;IAChE,MAAM,GAAG,GAAG,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IACpD,IAAI,CAAC,GAAG,EAAE,CAAC;QACT,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,UAAU,GAAG,OAAO,MAAM,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC;IAC1F,MAAM,IAAI,GAAG,OAAO,MAAM,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC;IACxE,MAAM,KAAK,GAAG,OAAO,MAAM,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC;IAC3E,MAAM,GAAG,GAAG,OAAO,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC;IACrE,MAAM,IAAI,GAAG,OAAO,MAAM,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC;IAExE,MAAM,eAAe,GACnB,MAAM,CAAC,eAAe,KAAK,QAAQ;QACnC,MAAM,CAAC,eAAe,KAAK,SAAS;QACpC,MAAM,CAAC,eAAe,KAAK,SAAS;QAClC,CAAC,CAAC,MAAM,CAAC,eAAe;QACxB,CAAC,CAAC,SAAS,CAAC;IAEhB,MAAM,MAAM,GAAY;QACtB,GAAG;QACH,UAAU;QACV,IAAI;QACJ,KAAK;QACL,GAAG;QACH,IAAI;QACJ,eAAe;KAChB,CAAC;IAEF,IAAA,gBAAM,EAAC,OAAO,MAAM,CAAC,GAAG,KAAK,QAAQ,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,+BAA+B,CAAC,CAAC;IAEjG,OAAO,MAAM,CAAC;AAAA,CACf","sourcesContent":["import assert from \"@/common/utils/assert\";\n\nexport interface Keybind {\n  key: string;\n  ctrl?: boolean;\n  /**\n   * Allow Shift even when this keybind doesn't require it.\n   *\n   * Useful for keyboard layouts where producing a character (e.g. \"/\") requires Shift,\n   * but the resulting `KeyboardEvent.key` is still that character.\n   */\n  allowShift?: boolean;\n  shift?: boolean;\n  alt?: boolean;\n  meta?: boolean;\n  /**\n   * On macOS, Ctrl-based shortcuts traditionally use Cmd instead.\n   * Use this field to control that behavior:\n   * - \"either\" (default): accept Ctrl or Cmd\n   * - \"command\": require Cmd specifically\n   * - \"control\": require the Control key specifically\n   */\n  macCtrlBehavior?: \"either\" | \"command\" | \"control\";\n}\n\nexport function hasModifierKeybind(keybind: Keybind): boolean {\n  return [keybind.ctrl, keybind.shift, keybind.alt, keybind.meta].some((v) => v === true);\n}\n\nexport function normalizeKeybind(raw: unknown): Keybind | undefined {\n  if (!raw || typeof raw !== \"object\") {\n    return undefined;\n  }\n\n  const record = raw as Record<string, unknown>;\n\n  const rawKey = typeof record.key === \"string\" ? record.key : \"\";\n  const key = rawKey === \" \" ? rawKey : rawKey.trim();\n  if (!key) {\n    return undefined;\n  }\n\n  const allowShift = typeof record.allowShift === \"boolean\" ? record.allowShift : undefined;\n  const ctrl = typeof record.ctrl === \"boolean\" ? record.ctrl : undefined;\n  const shift = typeof record.shift === \"boolean\" ? record.shift : undefined;\n  const alt = typeof record.alt === \"boolean\" ? record.alt : undefined;\n  const meta = typeof record.meta === \"boolean\" ? record.meta : undefined;\n\n  const macCtrlBehavior =\n    record.macCtrlBehavior === \"either\" ||\n    record.macCtrlBehavior === \"command\" ||\n    record.macCtrlBehavior === \"control\"\n      ? record.macCtrlBehavior\n      : undefined;\n\n  const result: Keybind = {\n    key,\n    allowShift,\n    ctrl,\n    shift,\n    alt,\n    meta,\n    macCtrlBehavior,\n  };\n\n  assert(typeof result.key === \"string\" && result.key.length > 0, \"Keybind.key must be non-empty\");\n\n  return result;\n}\n"]}