{"version":3,"file":"keybind.js","sourceRoot":"","sources":["../../../src/common/types/keybind.ts"],"names":[],"mappings":";;;;;;;AAAA,mEAA2C;AAyB3C,4BAAmC,OAAgB,EAAW;IAC5D,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC;AAAA,CACzF;AAED,0BAAiC,GAAY,EAAuB;IAClE,IAAI,CAAC,GAAG,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,CAAC;QACpC,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,MAAM,GAAG,GAA8B,CAAC;IAE9C,MAAM,MAAM,GAAG,OAAO,MAAM,CAAC,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;IAChE,MAAM,GAAG,GAAG,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IACpD,IAAI,CAAC,GAAG,EAAE,CAAC;QACT,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,UAAU,GAAG,OAAO,MAAM,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC;IAC1F,MAAM,IAAI,GAAG,OAAO,MAAM,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC;IACxE,MAAM,KAAK,GAAG,OAAO,MAAM,CAAC,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC;IAC3E,MAAM,GAAG,GAAG,OAAO,MAAM,CAAC,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC;IACrE,MAAM,IAAI,GAAG,OAAO,MAAM,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC;IAExE,MAAM,eAAe,GACnB,MAAM,CAAC,eAAe,KAAK,QAAQ;QACnC,MAAM,CAAC,eAAe,KAAK,SAAS;QACpC,MAAM,CAAC,eAAe,KAAK,SAAS;QAClC,CAAC,CAAC,MAAM,CAAC,eAAe;QACxB,CAAC,CAAC,SAAS,CAAC;IAEhB,MAAM,MAAM,GAAY;QACtB,GAAG;QACH,UAAU;QACV,IAAI;QACJ,KAAK;QACL,GAAG;QACH,IAAI;QACJ,eAAe;KAChB,CAAC;IAEF,IAAA,gBAAM,EAAC,OAAO,MAAM,CAAC,GAAG,KAAK,QAAQ,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,+BAA+B,CAAC,CAAC;IAEjG,OAAO,MAAM,CAAC;AAAA,CACf","sourcesContent":["import assert from \"@/common/utils/assert\";\r\n\r\nexport interface Keybind {\r\n  key: string;\r\n  ctrl?: boolean;\r\n  /**\r\n   * Allow Shift even when this keybind doesn't require it.\r\n   *\r\n   * Useful for keyboard layouts where producing a character (e.g. \"/\") requires Shift,\r\n   * but the resulting `KeyboardEvent.key` is still that character.\r\n   */\r\n  allowShift?: boolean;\r\n  shift?: boolean;\r\n  alt?: boolean;\r\n  meta?: boolean;\r\n  /**\r\n   * On macOS, Ctrl-based shortcuts traditionally use Cmd instead.\r\n   * Use this field to control that behavior:\r\n   * - \"either\" (default): accept Ctrl or Cmd\r\n   * - \"command\": require Cmd specifically\r\n   * - \"control\": require the Control key specifically\r\n   */\r\n  macCtrlBehavior?: \"either\" | \"command\" | \"control\";\r\n}\r\n\r\nexport function hasModifierKeybind(keybind: Keybind): boolean {\r\n  return [keybind.ctrl, keybind.shift, keybind.alt, keybind.meta].some((v) => v === true);\r\n}\r\n\r\nexport function normalizeKeybind(raw: unknown): Keybind | undefined {\r\n  if (!raw || typeof raw !== \"object\") {\r\n    return undefined;\r\n  }\r\n\r\n  const record = raw as Record<string, unknown>;\r\n\r\n  const rawKey = typeof record.key === \"string\" ? record.key : \"\";\r\n  const key = rawKey === \" \" ? rawKey : rawKey.trim();\r\n  if (!key) {\r\n    return undefined;\r\n  }\r\n\r\n  const allowShift = typeof record.allowShift === \"boolean\" ? record.allowShift : undefined;\r\n  const ctrl = typeof record.ctrl === \"boolean\" ? record.ctrl : undefined;\r\n  const shift = typeof record.shift === \"boolean\" ? record.shift : undefined;\r\n  const alt = typeof record.alt === \"boolean\" ? record.alt : undefined;\r\n  const meta = typeof record.meta === \"boolean\" ? record.meta : undefined;\r\n\r\n  const macCtrlBehavior =\r\n    record.macCtrlBehavior === \"either\" ||\r\n    record.macCtrlBehavior === \"command\" ||\r\n    record.macCtrlBehavior === \"control\"\r\n      ? record.macCtrlBehavior\r\n      : undefined;\r\n\r\n  const result: Keybind = {\r\n    key,\r\n    allowShift,\r\n    ctrl,\r\n    shift,\r\n    alt,\r\n    meta,\r\n    macCtrlBehavior,\r\n  };\r\n\r\n  assert(typeof result.key === \"string\" && result.key.length > 0, \"Keybind.key must be non-empty\");\r\n\r\n  return result;\r\n}\r\n"]}