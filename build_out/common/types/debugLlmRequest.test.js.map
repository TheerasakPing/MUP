{"version":3,"file":"debugLlmRequest.test.js","sourceRoot":"","sources":["../../../src/common/types/debugLlmRequest.test.ts"],"names":[],"mappings":";;AAAA,uCAAkD;AAIlD,IAAA,mBAAQ,EAAC,yBAAyB,EAAE,GAAG,EAAE,CAAC;IACxC,IAAA,eAAI,EAAC,iCAAiC,EAAE,GAAG,EAAE,CAAC;QAC5C,MAAM,QAAQ,GAA4B;YACxC,UAAU,EAAE,IAAI,CAAC,GAAG,EAAE;YACtB,WAAW,EAAE,aAAa;YAC1B,SAAS,EAAE,aAAa;YACxB,KAAK,EAAE,6BAA6B;YACpC,YAAY,EAAE,WAAW;YACzB,aAAa,EAAE,KAAK;YACpB,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,MAAM;YACf,eAAe,EAAE,IAAI;YACrB,aAAa,EAAE,gBAAgB;YAC/B,QAAQ,EAAE;gBACR,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE;gBAClC,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE;aAC/D;YACD,QAAQ,EAAE;gBACR,UAAU,EAAE,IAAI,CAAC,GAAG,EAAE;gBACtB,QAAQ,EAAE;oBACR,KAAK,EAAE,6BAA6B;oBACpC,KAAK,EAAE;wBACL,WAAW,EAAE,CAAC;wBACd,YAAY,EAAE,CAAC;wBACf,WAAW,EAAE,CAAC;qBACf;iBACF;gBACD,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;aACxC;SACF,CAAC;QAEF,IAAA,iBAAM,EAAC,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;QAErD,IAAI,OAAO,eAAe,KAAK,UAAU,EAAE,CAAC;YAC1C,IAAA,iBAAM,EAAC,GAAG,EAAE,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;QACxD,CAAC;IAAA,CACF,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { describe, expect, test } from \"bun:test\";\r\n\r\nimport type { DebugLlmRequestSnapshot } from \"./debugLlmRequest\";\r\n\r\ndescribe(\"DebugLlmRequestSnapshot\", () => {\r\n  test(\"is JSON + structured-clone safe\", () => {\r\n    const snapshot: DebugLlmRequestSnapshot = {\r\n      capturedAt: Date.now(),\r\n      workspaceId: \"workspace-1\",\r\n      messageId: \"assistant-1\",\r\n      model: \"anthropic:claude-3-5-sonnet\",\r\n      providerName: \"anthropic\",\r\n      thinkingLevel: \"off\",\r\n      mode: \"exec\",\r\n      agentId: \"exec\",\r\n      maxOutputTokens: 1234,\r\n      systemMessage: \"System message\",\r\n      messages: [\r\n        { role: \"user\", content: \"hello\" },\r\n        { role: \"assistant\", content: [{ type: \"text\", text: \"hi\" }] },\r\n      ],\r\n      response: {\r\n        capturedAt: Date.now(),\r\n        metadata: {\r\n          model: \"anthropic:claude-3-5-sonnet\",\r\n          usage: {\r\n            inputTokens: 1,\r\n            outputTokens: 2,\r\n            totalTokens: 3,\r\n          },\r\n        },\r\n        parts: [{ type: \"text\", text: \"done\" }],\r\n      },\r\n    };\r\n\r\n    expect(() => JSON.stringify(snapshot)).not.toThrow();\r\n\r\n    if (typeof structuredClone === \"function\") {\r\n      expect(() => structuredClone(snapshot)).not.toThrow();\r\n    }\r\n  });\r\n});\r\n"]}