{"version":3,"file":"debugLlmRequest.test.js","sourceRoot":"","sources":["../../../src/common/types/debugLlmRequest.test.ts"],"names":[],"mappings":";;AAAA,uCAAkD;AAIlD,IAAA,mBAAQ,EAAC,yBAAyB,EAAE,GAAG,EAAE,CAAC;IACxC,IAAA,eAAI,EAAC,iCAAiC,EAAE,GAAG,EAAE,CAAC;QAC5C,MAAM,QAAQ,GAA4B;YACxC,UAAU,EAAE,IAAI,CAAC,GAAG,EAAE;YACtB,WAAW,EAAE,aAAa;YAC1B,SAAS,EAAE,aAAa;YACxB,KAAK,EAAE,6BAA6B;YACpC,YAAY,EAAE,WAAW;YACzB,aAAa,EAAE,KAAK;YACpB,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,MAAM;YACf,eAAe,EAAE,IAAI;YACrB,aAAa,EAAE,gBAAgB;YAC/B,QAAQ,EAAE;gBACR,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE;gBAClC,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE;aAC/D;YACD,QAAQ,EAAE;gBACR,UAAU,EAAE,IAAI,CAAC,GAAG,EAAE;gBACtB,QAAQ,EAAE;oBACR,KAAK,EAAE,6BAA6B;oBACpC,KAAK,EAAE;wBACL,WAAW,EAAE,CAAC;wBACd,YAAY,EAAE,CAAC;wBACf,WAAW,EAAE,CAAC;qBACf;iBACF;gBACD,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;aACxC;SACF,CAAC;QAEF,IAAA,iBAAM,EAAC,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;QAErD,IAAI,OAAO,eAAe,KAAK,UAAU,EAAE,CAAC;YAC1C,IAAA,iBAAM,EAAC,GAAG,EAAE,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;QACxD,CAAC;IAAA,CACF,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { describe, expect, test } from \"bun:test\";\n\nimport type { DebugLlmRequestSnapshot } from \"./debugLlmRequest\";\n\ndescribe(\"DebugLlmRequestSnapshot\", () => {\n  test(\"is JSON + structured-clone safe\", () => {\n    const snapshot: DebugLlmRequestSnapshot = {\n      capturedAt: Date.now(),\n      workspaceId: \"workspace-1\",\n      messageId: \"assistant-1\",\n      model: \"anthropic:claude-3-5-sonnet\",\n      providerName: \"anthropic\",\n      thinkingLevel: \"off\",\n      mode: \"exec\",\n      agentId: \"exec\",\n      maxOutputTokens: 1234,\n      systemMessage: \"System message\",\n      messages: [\n        { role: \"user\", content: \"hello\" },\n        { role: \"assistant\", content: [{ type: \"text\", text: \"hi\" }] },\n      ],\n      response: {\n        capturedAt: Date.now(),\n        metadata: {\n          model: \"anthropic:claude-3-5-sonnet\",\n          usage: {\n            inputTokens: 1,\n            outputTokens: 2,\n            totalTokens: 3,\n          },\n        },\n        parts: [{ type: \"text\", text: \"done\" }],\n      },\n    };\n\n    expect(() => JSON.stringify(snapshot)).not.toThrow();\n\n    if (typeof structuredClone === \"function\") {\n      expect(() => structuredClone(snapshot)).not.toThrow();\n    }\n  });\n});\n"]}