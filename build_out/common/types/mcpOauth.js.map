{"version":3,"file":"mcpOauth.js","sourceRoot":"","sources":["../../../src/common/types/mcpOauth.ts"],"names":[],"mappings":";AAAA;;;;;;GAMG","sourcesContent":["/**\r\n * Shared types for MCP OAuth (Model Context Protocol authorization).\r\n *\r\n * Important: These are wire/storage types only.\r\n * - Do NOT send access tokens or client secrets to the browser.\r\n * - Never persist tokens into project-local .mux/mcp.jsonc.\r\n */\r\n\r\nimport type { MCPServerTransport } from \"./mcp\";\r\n\r\n/**\r\n * Transport types supported by MCP OAuth.\r\n *\r\n * OAuth is only supported for remote MCP servers (http/sse/auto), not stdio.\r\n */\r\nexport type MCPOAuthServerTransport = Exclude<MCPServerTransport, \"stdio\">;\r\n\r\n/**\r\n * Ephemeral MCP server config used to start OAuth flows before the server is saved\r\n * into project config.\r\n */\r\nexport interface MCPOAuthPendingServerConfig {\r\n  transport: MCPOAuthServerTransport;\r\n  url: string;\r\n}\r\n\r\n/**\r\n * OAuth 2.1 token response.\r\n *\r\n * Matches the shape used by @ai-sdk/mcp.\r\n */\r\nexport interface MCPOAuthTokens {\r\n  access_token: string;\r\n  id_token?: string;\r\n  token_type: string;\r\n  expires_in?: number;\r\n  scope?: string;\r\n  refresh_token?: string;\r\n}\r\n\r\n/**\r\n * OAuth dynamic client registration information.\r\n *\r\n * Matches the shape used by @ai-sdk/mcp.\r\n */\r\nexport interface MCPOAuthClientInformation {\r\n  client_id: string;\r\n  client_secret?: string;\r\n  client_id_issued_at?: number;\r\n  client_secret_expires_at?: number;\r\n}\r\n\r\n/**\r\n * Credentials stored globally per MCP server URL.\r\n *\r\n * NOTE: This object contains secrets and must never be returned over IPC.\r\n */\r\nexport interface MCPOAuthStoredCredentials {\r\n  /**\r\n   * The MCP server URL these credentials were created for.\r\n   *\r\n   * Used for defensive invalidation when the configured server URL changes.\r\n   */\r\n  serverUrl: string;\r\n\r\n  clientInformation?: MCPOAuthClientInformation;\r\n  tokens?: MCPOAuthTokens;\r\n\r\n  updatedAtMs: number;\r\n}\r\n\r\n/**\r\n * Redacted auth status safe for IPC/UI.\r\n */\r\nexport interface MCPOAuthAuthStatus {\r\n  serverUrl?: string;\r\n  isLoggedIn: boolean;\r\n  hasRefreshToken: boolean;\r\n  scope?: string;\r\n  updatedAtMs?: number;\r\n}\r\n"]}