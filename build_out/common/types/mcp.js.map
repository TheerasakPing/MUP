{"version":3,"file":"mcp.js","sourceRoot":"","sources":["../../../src/common/types/mcp.ts"],"names":[],"mappings":"","sourcesContent":["/** Supported MCP server transports. */\nexport type MCPServerTransport = \"stdio\" | \"http\" | \"sse\" | \"auto\";\n\nexport type MCPHeaderValue = string | { secret: string };\n\nexport interface MCPServerBaseInfo {\n  transport: MCPServerTransport;\n  disabled: boolean;\n  /**\n   * Optional tool allowlist at project level.\n   * If set, only these tools are exposed from this server.\n   * If not set, all tools are exposed.\n   */\n  toolAllowlist?: string[];\n}\n\n/** stdio server definition (local process). */\nexport interface MCPStdioServerInfo extends MCPServerBaseInfo {\n  transport: \"stdio\";\n  command: string;\n}\n\n/** HTTP-based server definition. */\nexport interface MCPHttpServerInfo extends MCPServerBaseInfo {\n  transport: \"http\" | \"sse\" | \"auto\";\n  url: string;\n  /** Optional headers (string literal or reference to a project secret key). */\n  headers?: Record<string, MCPHeaderValue>;\n}\n\n/** Normalized server info (always has disabled field). */\nexport type MCPServerInfo = MCPStdioServerInfo | MCPHttpServerInfo;\n\nexport interface MCPConfig {\n  servers: Record<string, MCPServerInfo>;\n}\n\n/**\n * Internal map of server name â†’ server info (used after filtering disabled).\n * Values are not shown to the model; only server names are exposed.\n */\nexport type MCPServerMap = Record<string, MCPServerInfo>;\n\n/**\n * Parsed OAuth hints from a `WWW-Authenticate: Bearer ...` challenge.\n *\n * NOTE: This type is safe for IPC/UI; it must never contain tokens.\n */\nexport interface BearerChallenge {\n  scope?: string;\n  /** `resource_metadata` hint URL (if present and parseable). */\n  resourceMetadataUrl?: string;\n}\n\n/** Result of testing an MCP server connection */\nexport type MCPTestResult =\n  | { success: true; tools: string[] }\n  | { success: false; error: string; oauthChallenge?: BearerChallenge };\n\n/** Cached test result with timestamp for age display */\nexport interface CachedMCPTestResult {\n  result: MCPTestResult;\n  testedAt: number; // Unix timestamp ms\n}\n\n/**\n * Per-workspace MCP overrides.\n *\n * Stored per-workspace in <workspace>/.mux/mcp.local.jsonc (workspace-local and intended to be gitignored).\n *\n * Legacy note: older mux versions stored these overrides in ~/.mux/config.json under each workspace entry.\n * Newer versions migrate those values into the workspace-local file on first read/write.\n */\nexport interface WorkspaceMCPOverrides {\n  /**\n   * Server names to explicitly disable for this workspace.\n   * Overrides project-level enabled state.\n   */\n  disabledServers?: string[];\n\n  /**\n   * Server names to explicitly enable for this workspace.\n   * Overrides project-level disabled state.\n   */\n  enabledServers?: string[];\n\n  /**\n   * Per-server tool allowlist.\n   * Key: server name (from .mux/mcp.jsonc)\n   * Value: raw MCP tool names (NOT namespaced)\n   *\n   * If omitted for a server => expose all tools from that server.\n   * If present but empty => expose no tools from that server.\n   */\n  toolAllowlist?: Record<string, string[]>;\n}\n"]}