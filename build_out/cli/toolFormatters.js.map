{"version":3,"file":"toolFormatters.js","sourceRoot":"","sources":["../../src/cli/toolFormatters.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * CLI tool output formatters for `mux run`\n *\n * Provides clean, readable formatting for recognized tool calls,\n * with emoji prefixes and structured output similar to the frontend UI.\n */\n\nimport chalk from \"chalk\";\nimport type { ToolCallStartEvent, ToolCallEndEvent } from \"@/common/types/stream\";\nimport type {\n  BashToolArgs,\n  BashToolResult,\n  FileReadToolArgs,\n  FileReadToolResult,\n  FileEditReplaceStringToolArgs,\n  FileEditReplaceStringToolResult,\n  FileEditInsertToolArgs,\n  FileEditInsertToolResult,\n  TaskToolArgs,\n  TaskToolResult,\n  WebFetchToolArgs,\n  WebFetchToolResult,\n} from \"@/common/types/tools\";\n\n/** Tool formatters return formatted string or null to fall back to generic */\ntype ToolStartFormatter = (toolName: string, args: unknown) => string | null;\ntype ToolEndFormatter = (toolName: string, args: unknown, result: unknown) => string | null;\n\n/** Tools that should have their result on a new line (multi-line results) */\nconst MULTILINE_RESULT_TOOLS = new Set([\n  \"file_edit_replace_string\",\n  \"file_edit_replace_lines\",\n  \"file_edit_insert\",\n  \"bash\",\n  \"task\",\n  \"task_await\",\n  \"code_execution\",\n]);\n\n// ============================================================================\n// Utilities\n// ============================================================================\n\nconst TOOL_BLOCK_SEPARATOR = chalk.dim(\"‚îÄ\".repeat(40));\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return value !== null && typeof value === \"object\";\n}\n\nfunction formatFilePath(filePath: string): string {\n  return chalk.cyan(filePath);\n}\n\nfunction formatCommand(cmd: string): string {\n  // Truncate long commands\n  const maxLen = 80;\n  const truncated = cmd.length > maxLen ? cmd.slice(0, maxLen) + \"‚Ä¶\" : cmd;\n  return chalk.yellow(truncated);\n}\n\nfunction formatDiff(diff: string): string {\n  // Color diff lines for terminal output\n  return diff\n    .split(\"\\n\")\n    .map((line) => {\n      if (line.startsWith(\"+\") && !line.startsWith(\"+++\")) {\n        return chalk.green(line);\n      } else if (line.startsWith(\"-\") && !line.startsWith(\"---\")) {\n        return chalk.red(line);\n      } else if (line.startsWith(\"@@\")) {\n        return chalk.cyan(line);\n      }\n      return line;\n    })\n    .join(\"\\n\");\n}\n\nfunction formatDuration(ms: number): string {\n  if (ms < 1000) return `${ms}ms`;\n  if (ms < 60000) return `${(ms / 1000).toFixed(1)}s`;\n  return `${(ms / 60000).toFixed(1)}m`;\n}\n\nfunction formatBytes(bytes: number): string {\n  if (bytes < 1024) return `${bytes}B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)}KB`;\n  return `${(bytes / (1024 * 1024)).toFixed(1)}MB`;\n}\n\nfunction indent(text: string, spaces = 2): string {\n  const prefix = \" \".repeat(spaces);\n  return text\n    .split(\"\\n\")\n    .map((line) => prefix + line)\n    .join(\"\\n\");\n}\n\nfunction renderUnknown(value: unknown): string {\n  if (typeof value === \"string\") return value;\n  try {\n    return JSON.stringify(value, null, 2);\n  } catch {\n    return String(value);\n  }\n}\n\n// ============================================================================\n// Tool Start Formatters\n// ============================================================================\n\nfunction formatFileEditStart(_toolName: string, args: unknown): string | null {\n  const editArgs = args as FileEditReplaceStringToolArgs | FileEditInsertToolArgs;\n  if (!editArgs?.file_path) return null;\n\n  return `‚úèÔ∏è  ${formatFilePath(editArgs.file_path)}`;\n}\n\nfunction formatFileReadStart(_toolName: string, args: unknown): string | null {\n  const readArgs = args as FileReadToolArgs;\n  if (!readArgs?.file_path) return null;\n\n  let suffix = \"\";\n  if (readArgs.offset != null || readArgs.limit != null) {\n    const parts: string[] = [];\n    if (readArgs.offset != null) parts.push(`L${readArgs.offset}`);\n    if (readArgs.limit != null) parts.push(`+${readArgs.limit}`);\n    suffix = chalk.dim(` (${parts.join(\", \")})`);\n  }\n\n  return `üìñ ${formatFilePath(readArgs.file_path)}${suffix}`;\n}\n\nfunction formatBashStart(_toolName: string, args: unknown): string | null {\n  const bashArgs = args as BashToolArgs;\n  if (!bashArgs?.script) return null;\n\n  const bg = bashArgs.run_in_background ? chalk.dim(\" [background]\") : \"\";\n  const timeout = bashArgs.timeout_secs ? chalk.dim(` timeout:${bashArgs.timeout_secs}s`) : \"\";\n\n  return `üîß ${formatCommand(bashArgs.script)}${bg}${timeout}`;\n}\n\nfunction formatTaskStart(_toolName: string, args: unknown): string | null {\n  const taskArgs = args as TaskToolArgs;\n  if (!taskArgs?.title) return null;\n\n  const bg = taskArgs.run_in_background ? chalk.dim(\" [background]\") : \"\";\n  return `ü§ñ ${chalk.magenta(taskArgs.title)}${bg}`;\n}\n\nfunction formatWebFetchStart(_toolName: string, args: unknown): string | null {\n  const fetchArgs = args as WebFetchToolArgs;\n  if (!fetchArgs?.url) return null;\n\n  return `üåê ${chalk.blue(fetchArgs.url)}`;\n}\n\nfunction formatWebSearchStart(_toolName: string, args: unknown): string | null {\n  const searchArgs = args as { query?: string };\n  if (!searchArgs?.query) return null;\n\n  return `üîç ${chalk.blue(searchArgs.query)}`;\n}\n\nfunction formatTodoStart(_toolName: string, args: unknown): string | null {\n  const todoArgs = args as { todos?: Array<{ content: string; status: string }> };\n  if (!todoArgs?.todos) return null;\n\n  return `üìã ${chalk.dim(`${todoArgs.todos.length} items`)}`;\n}\n\nfunction formatNotifyStart(_toolName: string, args: unknown): string | null {\n  const notifyArgs = args as { title?: string };\n  if (!notifyArgs?.title) return null;\n\n  return `üîî ${chalk.yellow(notifyArgs.title)}`;\n}\n\nfunction formatStatusSetStart(_toolName: string, args: unknown): string | null {\n  const statusArgs = args as { emoji?: string; message?: string };\n  if (!statusArgs?.message) return null;\n\n  const emoji = statusArgs.emoji ?? \"üìå\";\n  return `${emoji} ${chalk.dim(statusArgs.message)}`;\n}\n\nfunction formatSetExitCodeStart(_toolName: string, args: unknown): string | null {\n  const exitArgs = args as { exit_code?: number };\n  if (exitArgs?.exit_code === undefined) return null;\n\n  const code = exitArgs.exit_code;\n  const color = code === 0 ? chalk.green : chalk.red;\n  return `üö™ exit ${color(code)}`;\n}\n\nfunction formatAgentSkillReadStart(_toolName: string, args: unknown): string | null {\n  const skillArgs = args as { name?: string };\n  if (!skillArgs?.name) return null;\n\n  return `üìö ${chalk.cyan(skillArgs.name)}`;\n}\n\nfunction formatCodeExecutionStart(_toolName: string, args: unknown): string | null {\n  const codeArgs = args as { code?: string };\n  if (!codeArgs?.code) return null;\n\n  // Show first line or truncated preview of code\n  const firstLine = codeArgs.code.split(\"\\n\")[0];\n  const maxLen = 60;\n  const preview = firstLine.length > maxLen ? firstLine.slice(0, maxLen) + \"‚Ä¶\" : firstLine;\n\n  return `üßÆ ${chalk.yellow(preview)}`;\n}\n\n// ============================================================================\n// Tool End Formatters\n// ============================================================================\n\nfunction formatFileEditEnd(_toolName: string, _args: unknown, result: unknown): string | null {\n  const editResult = result as FileEditReplaceStringToolResult | FileEditInsertToolResult;\n\n  if (editResult?.success === false) {\n    return `${chalk.red(\"‚úó\")} ${chalk.red(editResult.error || \"Edit failed\")}`;\n  }\n\n  if (editResult?.success && editResult.diff) {\n    return formatDiff(editResult.diff);\n  }\n\n  return chalk.green(\"‚úì\");\n}\n\nfunction formatFileReadEnd(_toolName: string, _args: unknown, result: unknown): string | null {\n  const readResult = result as FileReadToolResult;\n\n  if (readResult?.success === false) {\n    return `${chalk.red(\"‚úó\")} ${chalk.red(readResult.error || \"Read failed\")}`;\n  }\n\n  if (readResult?.success) {\n    const size = readResult.file_size ? chalk.dim(` (${formatBytes(readResult.file_size)})`) : \"\";\n    const lines = readResult.lines_read ? chalk.dim(` ${readResult.lines_read} lines`) : \"\";\n    return `${chalk.green(\"‚úì\")}${lines}${size}`;\n  }\n\n  return null;\n}\n\nfunction formatBashEnd(_toolName: string, _args: unknown, result: unknown): string | null {\n  if (!isRecord(result)) return null;\n  const bashResult = result as BashToolResult;\n\n  // Background process started\n  if (\"backgroundProcessId\" in bashResult) {\n    return `${chalk.blue(\"‚Üí\")} background: ${chalk.dim(bashResult.backgroundProcessId)}`;\n  }\n\n  const duration = bashResult.wall_duration_ms\n    ? chalk.dim(` (${formatDuration(bashResult.wall_duration_ms)})`)\n    : \"\";\n  const exitCode = bashResult.exitCode;\n  const exitStr = exitCode === 0 ? chalk.green(\"exit:0\") : chalk.red(`exit:${exitCode}`);\n\n  let output = `${exitStr}${duration}`;\n\n  // Show truncated output if present\n  if (bashResult.output) {\n    const lines = bashResult.output.split(\"\\n\");\n    const maxLines = 20;\n    const truncated = lines.length > maxLines;\n    const displayLines = truncated ? lines.slice(0, maxLines) : lines;\n    const outputText = displayLines.join(\"\\n\");\n\n    if (outputText.trim()) {\n      output += \"\\n\" + indent(chalk.dim(outputText));\n      if (truncated) {\n        output += \"\\n\" + indent(chalk.dim(`... ${lines.length - maxLines} more lines`));\n      }\n    }\n  }\n\n  // Show error if present (only on failure)\n  if (!bashResult.success && bashResult.error) {\n    output += \"\\n\" + indent(chalk.red(bashResult.error));\n  }\n\n  return output;\n}\n\nfunction formatTaskEnd(_toolName: string, _args: unknown, result: unknown): string | null {\n  if (!isRecord(result)) return null;\n  const taskResult = result as TaskToolResult;\n\n  // Prefer showing the report for completed tasks.\n  const status = (taskResult as { status?: unknown }).status;\n  const taskId = (taskResult as { taskId?: unknown }).taskId;\n  const reportMarkdown = (taskResult as { reportMarkdown?: unknown }).reportMarkdown;\n\n  if (status === \"completed\" && typeof reportMarkdown === \"string\") {\n    // Truncate long reports\n    const maxLen = 500;\n    const truncated =\n      reportMarkdown.length > maxLen ? reportMarkdown.slice(0, maxLen) + \"‚Ä¶\" : reportMarkdown;\n    const id = typeof taskId === \"string\" ? ` ${chalk.dim(taskId)}` : \"\";\n    return `${chalk.green(\"‚úì\")}${id}\\n${indent(chalk.dim(truncated))}`;\n  }\n\n  if ((status === \"queued\" || status === \"running\") && typeof taskId === \"string\") {\n    return `${chalk.blue(\"‚Üí\")} ${status}: ${chalk.dim(taskId)}`;\n  }\n\n  return null;\n}\n\nfunction formatWebFetchEnd(_toolName: string, _args: unknown, result: unknown): string | null {\n  const fetchResult = result as WebFetchToolResult;\n\n  if (fetchResult?.success === false) {\n    return `${chalk.red(\"‚úó\")} ${chalk.red(fetchResult.error ?? \"Fetch failed\")}`;\n  }\n\n  if (fetchResult?.success) {\n    const title = fetchResult.title ? chalk.dim(` \"${fetchResult.title}\"`) : \"\";\n    const len = fetchResult.length ? chalk.dim(` ${formatBytes(fetchResult.length)}`) : \"\";\n    return `${chalk.green(\"‚úì\")}${title}${len}`;\n  }\n\n  return null;\n}\n\nfunction formatCodeExecutionEnd(_toolName: string, _args: unknown, result: unknown): string | null {\n  if (result === undefined || result === null) return null;\n\n  // Code execution results can be complex - show truncated summary\n  const resultStr = typeof result === \"string\" ? result : renderUnknown(result);\n  const lines = resultStr.split(\"\\n\");\n  const maxLines = 10;\n  const truncated = lines.length > maxLines;\n  const displayLines = truncated ? lines.slice(0, maxLines) : lines;\n\n  let output = chalk.green(\"‚úì\");\n  if (displayLines.join(\"\").trim()) {\n    output += \"\\n\" + indent(chalk.dim(displayLines.join(\"\\n\")));\n    if (truncated) {\n      output += \"\\n\" + indent(chalk.dim(`... ${lines.length - maxLines} more lines`));\n    }\n  }\n  return output;\n}\n\n/** Simple success/error marker for inline tools that don't need detailed result formatting */\nfunction formatSimpleSuccessEnd(_toolName: string, _args: unknown, result: unknown): string | null {\n  // Check for error results\n  const resultObj = result as { success?: boolean; error?: string } | null | undefined;\n  if (resultObj?.success === false) {\n    return `${chalk.red(\"‚úó\")} ${chalk.red(resultObj.error ?? \"Failed\")}`;\n  }\n  return chalk.green(\"‚úì\");\n}\n\n// ============================================================================\n// Registry and Public API\n// ============================================================================\n\nconst startFormatters: Record<string, ToolStartFormatter> = {\n  file_edit_replace_string: formatFileEditStart,\n  file_edit_replace_lines: formatFileEditStart,\n  file_edit_insert: formatFileEditStart,\n  file_read: formatFileReadStart,\n  bash: formatBashStart,\n  task: formatTaskStart,\n  web_fetch: formatWebFetchStart,\n  web_search: formatWebSearchStart,\n  todo_write: formatTodoStart,\n  notify: formatNotifyStart,\n  status_set: formatStatusSetStart,\n  set_exit_code: formatSetExitCodeStart,\n  agent_skill_read: formatAgentSkillReadStart,\n  agent_skill_read_file: formatAgentSkillReadStart,\n  code_execution: formatCodeExecutionStart,\n};\n\nconst endFormatters: Record<string, ToolEndFormatter> = {\n  file_edit_replace_string: formatFileEditEnd,\n  file_edit_replace_lines: formatFileEditEnd,\n  file_edit_insert: formatFileEditEnd,\n  file_read: formatFileReadEnd,\n  bash: formatBashEnd,\n  task: formatTaskEnd,\n  task_await: formatTaskEnd,\n  web_fetch: formatWebFetchEnd,\n  code_execution: formatCodeExecutionEnd,\n  // Inline tools with simple success markers (prevents generic fallback)\n  web_search: formatSimpleSuccessEnd,\n  todo_write: formatSimpleSuccessEnd,\n  notify: formatSimpleSuccessEnd,\n  status_set: formatSimpleSuccessEnd,\n  set_exit_code: formatSimpleSuccessEnd,\n  agent_skill_read: formatSimpleSuccessEnd,\n  agent_skill_read_file: formatSimpleSuccessEnd,\n};\n\n/**\n * Format a tool-call-start event for CLI output.\n * Returns formatted string, or null to use generic fallback.\n */\nexport function formatToolStart(payload: ToolCallStartEvent): string | null {\n  const formatter = startFormatters[payload.toolName];\n  if (!formatter) return null;\n\n  try {\n    return formatter(payload.toolName, payload.args);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Format a tool-call-end event for CLI output.\n * Returns formatted string, or null to use generic fallback.\n */\nexport function formatToolEnd(payload: ToolCallEndEvent, startArgs?: unknown): string | null {\n  const formatter = endFormatters[payload.toolName];\n  if (!formatter) return null;\n\n  try {\n    return formatter(payload.toolName, startArgs, payload.result);\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Generic fallback formatter for unrecognized tools.\n */\nexport function formatGenericToolStart(payload: ToolCallStartEvent): string {\n  return [\n    TOOL_BLOCK_SEPARATOR,\n    `${chalk.bold(payload.toolName)} ${chalk.dim(`(${payload.toolCallId})`)}`,\n    chalk.dim(\"Args:\"),\n    indent(renderUnknown(payload.args)),\n    TOOL_BLOCK_SEPARATOR,\n  ].join(\"\\n\");\n}\n\n/**\n * Generic fallback formatter for unrecognized tool results.\n */\nexport function formatGenericToolEnd(payload: ToolCallEndEvent): string {\n  return [\n    TOOL_BLOCK_SEPARATOR,\n    `${chalk.bold(payload.toolName)} ${chalk.dim(\"result\")}`,\n    indent(renderUnknown(payload.result)),\n    TOOL_BLOCK_SEPARATOR,\n  ].join(\"\\n\");\n}\n\n/**\n * Check if a tool should have its result on a new line (multi-line output).\n * For single-line results (file_read, web_fetch, etc.), result appears inline.\n */\nexport function isMultilineResultTool(toolName: string): boolean {\n  return MULTILINE_RESULT_TOOLS.has(toolName);\n}\n"]}