{"version":3,"file":"router.js","sourceRoot":"","sources":["../../../src/node/orpc/router.ts"],"names":[],"mappings":"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","sourcesContent":["import { os } from \"@orpc/server\";\r\nimport * as schemas from \"@/common/orpc/schemas\";\r\nimport type { ORPCContext } from \"./context\";\r\nimport {\r\n  MUX_GATEWAY_ORIGIN,\r\n  MUX_GATEWAY_SESSION_EXPIRED_MESSAGE,\r\n} from \"@/common/constants/muxGatewayOAuth\";\r\nimport { Err, Ok } from \"@/common/types/result\";\r\nimport { resolveProviderCredentials } from \"@/node/utils/providerRequirements\";\r\nimport { generateWorkspaceIdentity } from \"@/node/services/workspaceTitleGenerator\";\r\nimport type {\r\n  UpdateStatus,\r\n  WorkspaceActivitySnapshot,\r\n  WorkspaceChatMessage,\r\n  WorkspaceStatsSnapshot,\r\n  FrontendWorkspaceMetadataSchemaType,\r\n} from \"@/common/orpc/types\";\r\nimport type { WorkspaceMetadata } from \"@/common/types/workspace\";\r\nimport { createAuthMiddleware } from \"./authMiddleware\";\r\nimport { createAsyncMessageQueue } from \"@/common/utils/asyncMessageQueue\";\r\nimport { createReplayBufferedStreamMessageRelay } from \"./replayBufferedStreamMessageRelay\";\r\n\r\nimport { createRuntime, checkRuntimeAvailability } from \"@/node/runtime/runtimeFactory\";\r\nimport { createRuntimeForWorkspace } from \"@/node/runtime/runtimeHelpers\";\r\nimport { hasNonEmptyPlanFile, readPlanFile } from \"@/node/utils/runtime/helpers\";\r\nimport { secretsToRecord } from \"@/common/types/secrets\";\r\nimport { roundToBase2 } from \"@/common/telemetry/utils\";\r\nimport { createAsyncEventQueue } from \"@/common/utils/asyncEventIterator\";\r\nimport {\r\n  DEFAULT_LAYOUT_PRESETS_CONFIG,\r\n  isLayoutPresetsConfigEmpty,\r\n  normalizeLayoutPresetsConfig,\r\n} from \"@/common/types/uiLayouts\";\r\nimport { normalizeAgentAiDefaults } from \"@/common/types/agentAiDefaults\";\r\nimport { isValidModelFormat, normalizeGatewayModel } from \"@/common/utils/ai/models\";\r\nimport {\r\n  DEFAULT_TASK_SETTINGS,\r\n  normalizeSubagentAiDefaults,\r\n  normalizeTaskSettings,\r\n} from \"@/common/types/tasks\";\r\nimport {\r\n  discoverAgentSkills,\r\n  discoverAgentSkillsDiagnostics,\r\n  readAgentSkill,\r\n} from \"@/node/services/agentSkills/agentSkillsService\";\r\nimport {\r\n  discoverAgentDefinitions,\r\n  readAgentDefinition,\r\n  resolveAgentFrontmatter,\r\n} from \"@/node/services/agentDefinitions/agentDefinitionsService\";\r\nimport { isAgentEffectivelyDisabled } from \"@/node/services/agentDefinitions/agentEnablement\";\r\nimport { isWorkspaceArchived } from \"@/common/utils/archive\";\r\nimport assert from \"node:assert/strict\";\r\nimport * as fsPromises from \"fs/promises\";\r\nimport * as path from \"node:path\";\r\n\r\nimport type { MuxMessage } from \"@/common/types/message\";\r\nimport { coerceThinkingLevel } from \"@/common/types/thinking\";\r\nimport { normalizeLegacyMuxMetadata } from \"@/node/utils/messages/legacy\";\r\nimport { log } from \"@/node/services/log\";\r\nimport {\r\n  readSubagentTranscriptArtifactsFile,\r\n  type SubagentTranscriptArtifactIndexEntry,\r\n} from \"@/node/services/subagentTranscriptArtifacts\";\r\n\r\n/**\r\n * Resolves runtime and discovery path for agent operations.\r\n * - When workspaceId is provided: uses workspace's runtime config (SSH, local, worktree)\r\n * - When only projectPath is provided: uses local runtime with project path\r\n * - When disableWorkspaceAgents is true: still uses workspace runtime but discovers from projectPath\r\n */\r\nasync function resolveAgentDiscoveryContext(\r\n  context: ORPCContext,\r\n  input: { projectPath?: string; workspaceId?: string; disableWorkspaceAgents?: boolean }\r\n): Promise<{\r\n  runtime: ReturnType<typeof createRuntime>;\r\n  discoveryPath: string;\r\n  metadata?: WorkspaceMetadata;\r\n}> {\r\n  if (!input.projectPath && !input.workspaceId) {\r\n    throw new Error(\"Either projectPath or workspaceId must be provided\");\r\n  }\r\n\r\n  if (input.workspaceId) {\r\n    const metadataResult = await context.aiService.getWorkspaceMetadata(input.workspaceId);\r\n    if (!metadataResult.success) {\r\n      throw new Error(metadataResult.error);\r\n    }\r\n    const metadata = metadataResult.data;\r\n    const runtime = createRuntimeForWorkspace(metadata);\r\n    // When workspace agents disabled, discover from project path instead of worktree\r\n    // (but still use the workspace's runtime for SSH compatibility)\r\n    const discoveryPath = input.disableWorkspaceAgents\r\n      ? metadata.projectPath\r\n      : runtime.getWorkspacePath(metadata.projectPath, metadata.name);\r\n    return { runtime, discoveryPath, metadata };\r\n  }\r\n\r\n  // No workspace - use local runtime with project path\r\n  const runtime = createRuntime(\r\n    { type: \"local\", srcBaseDir: context.config.srcDir },\r\n    { projectPath: input.projectPath! }\r\n  );\r\n  return { runtime, discoveryPath: input.projectPath! };\r\n}\r\n\r\nfunction isErrnoWithCode(error: unknown, code: string): boolean {\r\n  return Boolean(error && typeof error === \"object\" && \"code\" in error && error.code === code);\r\n}\r\n\r\nfunction isPathInsideDir(dirPath: string, filePath: string): boolean {\r\n  const resolvedDir = path.resolve(dirPath);\r\n  const resolvedFile = path.resolve(filePath);\r\n  const relative = path.relative(resolvedDir, resolvedFile);\r\n\r\n  return relative === \"\" || (!relative.startsWith(\"..\") && !path.isAbsolute(relative));\r\n}\r\n\r\nfunction normalizeMuxMessageFromDisk(value: unknown): MuxMessage | null {\r\n  if (!value || typeof value !== \"object\") {\r\n    return null;\r\n  }\r\n\r\n  // Older history may have createdAt serialized as a string; coerce back to Date for ORPC.\r\n  const obj = value as { createdAt?: unknown };\r\n  if (typeof obj.createdAt === \"string\") {\r\n    const parsed = new Date(obj.createdAt);\r\n    if (Number.isFinite(parsed.getTime())) {\r\n      obj.createdAt = parsed;\r\n    } else {\r\n      delete obj.createdAt;\r\n    }\r\n  }\r\n\r\n  return normalizeLegacyMuxMetadata(value as MuxMessage);\r\n}\r\n\r\nasync function readChatJsonlAllowMissing(params: {\r\n  chatPath: string;\r\n  logLabel: string;\r\n}): Promise<MuxMessage[] | null> {\r\n  try {\r\n    const data = await fsPromises.readFile(params.chatPath, \"utf-8\");\r\n    const lines = data.split(\"\\n\").filter((line) => line.trim());\r\n    const messages: MuxMessage[] = [];\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n      try {\r\n        const parsed = JSON.parse(lines[i]) as unknown;\r\n        const message = normalizeMuxMessageFromDisk(parsed);\r\n        if (message) {\r\n          messages.push(message);\r\n        }\r\n      } catch (parseError) {\r\n        log.warn(\r\n          `Skipping malformed JSON at line ${i + 1} in ${params.logLabel}:`,\r\n          parseError instanceof Error ? parseError.message : String(parseError),\r\n          \"\\nLine content:\",\r\n          lines[i].substring(0, 100) + (lines[i].length > 100 ? \"...\" : \"\")\r\n        );\r\n      }\r\n    }\r\n\r\n    return messages;\r\n  } catch (error: unknown) {\r\n    if (isErrnoWithCode(error, \"ENOENT\")) {\r\n      return null;\r\n    }\r\n\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function readPartialJsonBestEffort(partialPath: string): Promise<MuxMessage | null> {\r\n  try {\r\n    const raw = await fsPromises.readFile(partialPath, \"utf-8\");\r\n    const parsed = JSON.parse(raw) as unknown;\r\n    return normalizeMuxMessageFromDisk(parsed);\r\n  } catch (error: unknown) {\r\n    if (isErrnoWithCode(error, \"ENOENT\")) {\r\n      return null;\r\n    }\r\n\r\n    // Never fail transcript viewing because partial.json is corrupted.\r\n    log.warn(\"Failed to read partial.json for transcript\", {\r\n      partialPath,\r\n      error: error instanceof Error ? error.message : String(error),\r\n    });\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction mergePartialIntoHistory(messages: MuxMessage[], partial: MuxMessage | null): MuxMessage[] {\r\n  if (!partial) {\r\n    return messages;\r\n  }\r\n\r\n  const partialSeq = partial.metadata?.historySequence;\r\n  if (partialSeq === undefined) {\r\n    return [...messages, partial];\r\n  }\r\n\r\n  const existingIndex = messages.findIndex((m) => m.metadata?.historySequence === partialSeq);\r\n  if (existingIndex >= 0) {\r\n    const existing = messages[existingIndex];\r\n    const shouldReplace = (partial.parts?.length ?? 0) > (existing.parts?.length ?? 0);\r\n    if (!shouldReplace) {\r\n      return messages;\r\n    }\r\n\r\n    const next = [...messages];\r\n    next[existingIndex] = partial;\r\n    return next;\r\n  }\r\n\r\n  // Insert by historySequence to keep ordering stable.\r\n  const insertIndex = messages.findIndex((m) => {\r\n    const seq = m.metadata?.historySequence;\r\n    return typeof seq === \"number\" && seq > partialSeq;\r\n  });\r\n\r\n  if (insertIndex < 0) {\r\n    return [...messages, partial];\r\n  }\r\n\r\n  const next = [...messages];\r\n  next.splice(insertIndex, 0, partial);\r\n  return next;\r\n}\r\n\r\nasync function findSubagentTranscriptEntryByScanningSessions(params: {\r\n  sessionsDir: string;\r\n  taskId: string;\r\n}): Promise<{ workspaceId: string; entry: SubagentTranscriptArtifactIndexEntry } | null> {\r\n  let best: { workspaceId: string; entry: SubagentTranscriptArtifactIndexEntry } | null = null;\r\n\r\n  let dirents: Array<{ name: string; isDirectory: () => boolean }> = [];\r\n  try {\r\n    dirents = await fsPromises.readdir(params.sessionsDir, { withFileTypes: true });\r\n  } catch (error: unknown) {\r\n    if (isErrnoWithCode(error, \"ENOENT\")) {\r\n      return null;\r\n    }\r\n    throw error;\r\n  }\r\n\r\n  for (const dirent of dirents) {\r\n    if (!dirent.isDirectory()) {\r\n      continue;\r\n    }\r\n\r\n    const workspaceId = dirent.name;\r\n    if (!workspaceId) {\r\n      continue;\r\n    }\r\n\r\n    const sessionDir = path.join(params.sessionsDir, workspaceId);\r\n    const artifacts = await readSubagentTranscriptArtifactsFile(sessionDir);\r\n    const entry = artifacts.artifactsByChildTaskId[params.taskId];\r\n    if (!entry) {\r\n      continue;\r\n    }\r\n\r\n    if (!best || entry.updatedAtMs > best.entry.updatedAtMs) {\r\n      best = { workspaceId, entry };\r\n    }\r\n  }\r\n\r\n  return best;\r\n}\r\n\r\nexport const router = (authToken?: string) => {\r\n  const t = os.$context<ORPCContext>().use(createAuthMiddleware(authToken));\r\n\r\n  return t.router({\r\n    tokenizer: {\r\n      countTokens: t\r\n        .input(schemas.tokenizer.countTokens.input)\r\n        .output(schemas.tokenizer.countTokens.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.tokenizerService.countTokens(input.model, input.text);\r\n        }),\r\n      countTokensBatch: t\r\n        .input(schemas.tokenizer.countTokensBatch.input)\r\n        .output(schemas.tokenizer.countTokensBatch.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.tokenizerService.countTokensBatch(input.model, input.texts);\r\n        }),\r\n      calculateStats: t\r\n        .input(schemas.tokenizer.calculateStats.input)\r\n        .output(schemas.tokenizer.calculateStats.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.tokenizerService.calculateStats(\r\n            input.workspaceId,\r\n            input.messages,\r\n            input.model\r\n          );\r\n        }),\r\n    },\r\n    splashScreens: {\r\n      getViewedSplashScreens: t\r\n        .input(schemas.splashScreens.getViewedSplashScreens.input)\r\n        .output(schemas.splashScreens.getViewedSplashScreens.output)\r\n        .handler(({ context }) => {\r\n          const config = context.config.loadConfigOrDefault();\r\n          return config.viewedSplashScreens ?? [];\r\n        }),\r\n      markSplashScreenViewed: t\r\n        .input(schemas.splashScreens.markSplashScreenViewed.input)\r\n        .output(schemas.splashScreens.markSplashScreenViewed.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.config.editConfig((config) => {\r\n            const viewed = config.viewedSplashScreens ?? [];\r\n            if (!viewed.includes(input.splashId)) {\r\n              viewed.push(input.splashId);\r\n            }\r\n            return {\r\n              ...config,\r\n              viewedSplashScreens: viewed,\r\n            };\r\n          });\r\n        }),\r\n    },\r\n    server: {\r\n      getLaunchProject: t\r\n        .input(schemas.server.getLaunchProject.input)\r\n        .output(schemas.server.getLaunchProject.output)\r\n        .handler(async ({ context }) => {\r\n          return context.serverService.getLaunchProject();\r\n        }),\r\n      getSshHost: t\r\n        .input(schemas.server.getSshHost.input)\r\n        .output(schemas.server.getSshHost.output)\r\n        .handler(({ context }) => {\r\n          return context.serverService.getSshHost() ?? null;\r\n        }),\r\n      setSshHost: t\r\n        .input(schemas.server.setSshHost.input)\r\n        .output(schemas.server.setSshHost.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Update in-memory value\r\n          context.serverService.setSshHost(input.sshHost ?? undefined);\r\n          // Persist to config file\r\n          await context.config.editConfig((config) => ({\r\n            ...config,\r\n            serverSshHost: input.sshHost ?? undefined,\r\n          }));\r\n        }),\r\n      getApiServerStatus: t\r\n        .input(schemas.server.getApiServerStatus.input)\r\n        .output(schemas.server.getApiServerStatus.output)\r\n        .handler(({ context }) => {\r\n          const config = context.config.loadConfigOrDefault();\r\n          const configuredBindHost = config.apiServerBindHost ?? null;\r\n          const configuredServeWebUi = config.apiServerServeWebUi === true;\r\n          const configuredPort = config.apiServerPort ?? null;\r\n\r\n          const info = context.serverService.getServerInfo();\r\n\r\n          return {\r\n            running: info !== null,\r\n            baseUrl: info?.baseUrl ?? null,\r\n            bindHost: info?.bindHost ?? null,\r\n            port: info?.port ?? null,\r\n            networkBaseUrls: info?.networkBaseUrls ?? [],\r\n            token: info?.token ?? null,\r\n            configuredBindHost,\r\n            configuredPort,\r\n            configuredServeWebUi,\r\n          };\r\n        }),\r\n      setApiServerSettings: t\r\n        .input(schemas.server.setApiServerSettings.input)\r\n        .output(schemas.server.setApiServerSettings.output)\r\n        .handler(async ({ context, input }) => {\r\n          const prevConfig = context.config.loadConfigOrDefault();\r\n          const prevBindHost = prevConfig.apiServerBindHost;\r\n          const prevServeWebUi = prevConfig.apiServerServeWebUi;\r\n          const prevPort = prevConfig.apiServerPort;\r\n          const wasRunning = context.serverService.isServerRunning();\r\n\r\n          const bindHost = input.bindHost?.trim() ? input.bindHost.trim() : undefined;\r\n          const serveWebUi =\r\n            input.serveWebUi === undefined\r\n              ? prevServeWebUi\r\n              : input.serveWebUi === true\r\n                ? true\r\n                : undefined;\r\n          const port = input.port === null || input.port === 0 ? undefined : input.port;\r\n\r\n          if (wasRunning) {\r\n            await context.serverService.stopServer();\r\n          }\r\n\r\n          await context.config.editConfig((config) => {\r\n            config.apiServerServeWebUi = serveWebUi;\r\n            config.apiServerBindHost = bindHost;\r\n            config.apiServerPort = port;\r\n            return config;\r\n          });\r\n\r\n          if (process.env.MUX_NO_API_SERVER !== \"1\") {\r\n            const authToken = context.serverService.getApiAuthToken();\r\n            if (!authToken) {\r\n              throw new Error(\"API server auth token not initialized\");\r\n            }\r\n\r\n            const envPort = process.env.MUX_SERVER_PORT\r\n              ? Number.parseInt(process.env.MUX_SERVER_PORT, 10)\r\n              : undefined;\r\n            const portToUse = envPort ?? port ?? 0;\r\n            const hostToUse = bindHost ?? \"127.0.0.1\";\r\n\r\n            try {\r\n              await context.serverService.startServer({\r\n                muxHome: context.config.rootDir,\r\n                context,\r\n                authToken,\r\n                serveStatic: serveWebUi === true,\r\n                host: hostToUse,\r\n                port: portToUse,\r\n              });\r\n            } catch (error) {\r\n              await context.config.editConfig((config) => {\r\n                config.apiServerServeWebUi = prevServeWebUi;\r\n                config.apiServerBindHost = prevBindHost;\r\n                config.apiServerPort = prevPort;\r\n                return config;\r\n              });\r\n\r\n              if (wasRunning) {\r\n                const portToRestore = envPort ?? prevPort ?? 0;\r\n                const hostToRestore = prevBindHost ?? \"127.0.0.1\";\r\n\r\n                try {\r\n                  await context.serverService.startServer({\r\n                    muxHome: context.config.rootDir,\r\n                    context,\r\n                    serveStatic: prevServeWebUi === true,\r\n                    authToken,\r\n                    host: hostToRestore,\r\n                    port: portToRestore,\r\n                  });\r\n                } catch {\r\n                  // Best effort - we'll surface the original error.\r\n                }\r\n              }\r\n\r\n              throw error;\r\n            }\r\n          }\r\n\r\n          const nextConfig = context.config.loadConfigOrDefault();\r\n          const configuredBindHost = nextConfig.apiServerBindHost ?? null;\r\n          const configuredServeWebUi = nextConfig.apiServerServeWebUi === true;\r\n          const configuredPort = nextConfig.apiServerPort ?? null;\r\n\r\n          const info = context.serverService.getServerInfo();\r\n\r\n          return {\r\n            running: info !== null,\r\n            baseUrl: info?.baseUrl ?? null,\r\n            bindHost: info?.bindHost ?? null,\r\n            port: info?.port ?? null,\r\n            networkBaseUrls: info?.networkBaseUrls ?? [],\r\n            token: info?.token ?? null,\r\n            configuredBindHost,\r\n            configuredPort,\r\n            configuredServeWebUi,\r\n          };\r\n        }),\r\n    },\r\n    features: {\r\n      getStatsTabState: t\r\n        .input(schemas.features.getStatsTabState.input)\r\n        .output(schemas.features.getStatsTabState.output)\r\n        .handler(async ({ context }) => {\r\n          const state = await context.featureFlagService.getStatsTabState();\r\n          context.sessionTimingService.setStatsTabState(state);\r\n          return state;\r\n        }),\r\n      setStatsTabOverride: t\r\n        .input(schemas.features.setStatsTabOverride.input)\r\n        .output(schemas.features.setStatsTabOverride.output)\r\n        .handler(async ({ context, input }) => {\r\n          const state = await context.featureFlagService.setStatsTabOverride(input.override);\r\n          context.sessionTimingService.setStatsTabState(state);\r\n          return state;\r\n        }),\r\n    },\r\n    iconTheme: {\r\n      getActiveThemeId: t\r\n        .input(schemas.iconTheme.getActiveThemeId.input)\r\n        .output(schemas.iconTheme.getActiveThemeId.output)\r\n        .handler(async ({ context }) => {\r\n          return context.iconThemeService.getActiveThemeId();\r\n        }),\r\n      setActiveTheme: t\r\n        .input(schemas.iconTheme.setActiveTheme.input)\r\n        .output(schemas.iconTheme.setActiveTheme.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.iconThemeService.setActiveTheme(input.themeId);\r\n        }),\r\n      getInstalledThemes: t\r\n        .input(schemas.iconTheme.getInstalledThemes.input)\r\n        .output(schemas.iconTheme.getInstalledThemes.output)\r\n        .handler(async ({ context }) => {\r\n          return context.iconThemeService.getInstalledThemes();\r\n        }),\r\n      deleteTheme: t\r\n        .input(schemas.iconTheme.deleteTheme.input)\r\n        .output(schemas.iconTheme.deleteTheme.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.iconThemeService.deleteTheme(input.themeId);\r\n        }),\r\n      getActiveThemeDocument: t\r\n        .input(schemas.iconTheme.getActiveThemeDocument.input)\r\n        .output(schemas.iconTheme.getActiveThemeDocument.output)\r\n        .handler(async ({ context }) => {\r\n          return context.iconThemeService.getActiveThemeDocument();\r\n        }),\r\n      importVsix: t\r\n        .input(schemas.iconTheme.importVsix.input)\r\n        .output(schemas.iconTheme.importVsix.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.iconThemeService.importVsix(input.vsixBase64);\r\n        }),\r\n      getIconFile: t\r\n        .input(schemas.iconTheme.getIconFile.input)\r\n        .output(schemas.iconTheme.getIconFile.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.iconThemeService.getIconFile(input.themeId, input.iconPath);\r\n        }),\r\n    },\r\n    config: {\r\n      getConfig: t\r\n        .input(schemas.config.getConfig.input)\r\n        .output(schemas.config.getConfig.output)\r\n        .handler(({ context }) => {\r\n          const config = context.config.loadConfigOrDefault();\r\n          // Determine governor enrollment: requires both URL and token\r\n          const muxGovernorUrl = config.muxGovernorUrl ?? null;\r\n          const muxGovernorEnrolled = Boolean(config.muxGovernorUrl && config.muxGovernorToken);\r\n          return {\r\n            taskSettings: config.taskSettings ?? DEFAULT_TASK_SETTINGS,\r\n            muxGatewayEnabled: config.muxGatewayEnabled,\r\n            muxGatewayModels: config.muxGatewayModels,\r\n            defaultModel: config.defaultModel,\r\n            hiddenModels: config.hiddenModels,\r\n            preferredCompactionModel: config.preferredCompactionModel,\r\n            stopCoderWorkspaceOnArchive: config.stopCoderWorkspaceOnArchive !== false,\r\n            agentAiDefaults: config.agentAiDefaults ?? {},\r\n            // Legacy fields (downgrade compatibility)\r\n            subagentAiDefaults: config.subagentAiDefaults ?? {},\r\n            // Mux Governor enrollment status (safe fields only - token never exposed)\r\n            muxGovernorUrl,\r\n            muxGovernorEnrolled,\r\n          };\r\n        }),\r\n      updateAgentAiDefaults: t\r\n        .input(schemas.config.updateAgentAiDefaults.input)\r\n        .output(schemas.config.updateAgentAiDefaults.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.config.editConfig((config) => {\r\n            const normalized = normalizeAgentAiDefaults(input.agentAiDefaults);\r\n\r\n            const legacySubagentDefaultsRaw: Record<string, unknown> = {};\r\n            for (const [agentType, entry] of Object.entries(normalized)) {\r\n              if (agentType === \"plan\" || agentType === \"exec\" || agentType === \"compact\") {\r\n                continue;\r\n              }\r\n              legacySubagentDefaultsRaw[agentType] = entry;\r\n            }\r\n\r\n            const legacySubagentDefaults = normalizeSubagentAiDefaults(legacySubagentDefaultsRaw);\r\n\r\n            return {\r\n              ...config,\r\n              agentAiDefaults: Object.keys(normalized).length > 0 ? normalized : undefined,\r\n              // Legacy fields (downgrade compatibility)\r\n              subagentAiDefaults:\r\n                Object.keys(legacySubagentDefaults).length > 0 ? legacySubagentDefaults : undefined,\r\n            };\r\n          });\r\n        }),\r\n      updateMuxGatewayPrefs: t\r\n        .input(schemas.config.updateMuxGatewayPrefs.input)\r\n        .output(schemas.config.updateMuxGatewayPrefs.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.config.editConfig((config) => {\r\n            const nextModels = Array.from(new Set(input.muxGatewayModels));\r\n            nextModels.sort();\r\n\r\n            return {\r\n              ...config,\r\n              muxGatewayEnabled: input.muxGatewayEnabled ? undefined : false,\r\n              muxGatewayModels: nextModels.length > 0 ? nextModels : undefined,\r\n            };\r\n          });\r\n        }),\r\n      updateModelPreferences: t\r\n        .input(schemas.config.updateModelPreferences.input)\r\n        .output(schemas.config.updateModelPreferences.output)\r\n        .handler(async ({ context, input }) => {\r\n          const normalizeModelString = (value: string): string | undefined => {\r\n            const trimmed = value.trim();\r\n            if (!trimmed) {\r\n              return undefined;\r\n            }\r\n\r\n            // Reject malformed mux-gateway strings (\"mux-gateway:provider\" without \"/model\").\r\n            if (trimmed.startsWith(\"mux-gateway:\") && !trimmed.includes(\"/\")) {\r\n              return undefined;\r\n            }\r\n\r\n            const normalized = normalizeGatewayModel(trimmed);\r\n            if (!isValidModelFormat(normalized)) {\r\n              return undefined;\r\n            }\r\n\r\n            return normalized;\r\n          };\r\n\r\n          await context.config.editConfig((config) => {\r\n            const next = { ...config };\r\n\r\n            if (input.defaultModel !== undefined) {\r\n              next.defaultModel = normalizeModelString(input.defaultModel);\r\n            }\r\n\r\n            if (input.hiddenModels !== undefined) {\r\n              const seen = new Set<string>();\r\n              const normalizedHidden: string[] = [];\r\n\r\n              for (const modelString of input.hiddenModels) {\r\n                const normalized = normalizeModelString(modelString);\r\n                if (!normalized) continue;\r\n                if (seen.has(normalized)) continue;\r\n                seen.add(normalized);\r\n                normalizedHidden.push(normalized);\r\n              }\r\n\r\n              next.hiddenModels = normalizedHidden;\r\n            }\r\n\r\n            if (input.preferredCompactionModel !== undefined) {\r\n              next.preferredCompactionModel = normalizeModelString(input.preferredCompactionModel);\r\n            }\r\n\r\n            return next;\r\n          });\r\n        }),\r\n      updateCoderPrefs: t\r\n        .input(schemas.config.updateCoderPrefs.input)\r\n        .output(schemas.config.updateCoderPrefs.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.config.editConfig((config) => {\r\n            return {\r\n              ...config,\r\n              // Default ON: store `false` only.\r\n              stopCoderWorkspaceOnArchive: input.stopCoderWorkspaceOnArchive ? undefined : false,\r\n            };\r\n          });\r\n        }),\r\n      saveConfig: t\r\n        .input(schemas.config.saveConfig.input)\r\n        .output(schemas.config.saveConfig.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.config.editConfig((config) => {\r\n            const normalizedTaskSettings = normalizeTaskSettings(input.taskSettings);\r\n            const result = { ...config, taskSettings: normalizedTaskSettings };\r\n\r\n            if (input.agentAiDefaults !== undefined) {\r\n              const normalized = normalizeAgentAiDefaults(input.agentAiDefaults);\r\n              result.agentAiDefaults = Object.keys(normalized).length > 0 ? normalized : undefined;\r\n\r\n              if (input.subagentAiDefaults === undefined) {\r\n                const legacySubagentDefaultsRaw: Record<string, unknown> = {};\r\n                for (const [agentType, entry] of Object.entries(normalized)) {\r\n                  if (agentType === \"plan\" || agentType === \"exec\" || agentType === \"compact\") {\r\n                    continue;\r\n                  }\r\n                  legacySubagentDefaultsRaw[agentType] = entry;\r\n                }\r\n\r\n                const legacySubagentDefaults =\r\n                  normalizeSubagentAiDefaults(legacySubagentDefaultsRaw);\r\n                result.subagentAiDefaults =\r\n                  Object.keys(legacySubagentDefaults).length > 0\r\n                    ? legacySubagentDefaults\r\n                    : undefined;\r\n              }\r\n            }\r\n\r\n            if (input.subagentAiDefaults !== undefined) {\r\n              const normalizedDefaults = normalizeSubagentAiDefaults(input.subagentAiDefaults);\r\n              result.subagentAiDefaults =\r\n                Object.keys(normalizedDefaults).length > 0 ? normalizedDefaults : undefined;\r\n\r\n              // Downgrade compatibility: keep agentAiDefaults in sync with legacy subagentAiDefaults.\r\n              // Only mutate keys previously managed by subagentAiDefaults so we don't clobber other\r\n              // agent defaults (e.g., UI-selectable custom agents).\r\n              const previousLegacy = config.subagentAiDefaults ?? {};\r\n              const nextAgentAiDefaults: Record<string, unknown> = {\r\n                ...(result.agentAiDefaults ?? config.agentAiDefaults ?? {}),\r\n              };\r\n\r\n              for (const legacyAgentType of Object.keys(previousLegacy)) {\r\n                if (\r\n                  legacyAgentType === \"plan\" ||\r\n                  legacyAgentType === \"exec\" ||\r\n                  legacyAgentType === \"compact\"\r\n                ) {\r\n                  continue;\r\n                }\r\n                if (!(legacyAgentType in normalizedDefaults)) {\r\n                  delete nextAgentAiDefaults[legacyAgentType];\r\n                }\r\n              }\r\n\r\n              for (const [agentType, entry] of Object.entries(normalizedDefaults)) {\r\n                if (agentType === \"plan\" || agentType === \"exec\" || agentType === \"compact\")\r\n                  continue;\r\n                nextAgentAiDefaults[agentType] = entry;\r\n              }\r\n\r\n              const normalizedAgent = normalizeAgentAiDefaults(nextAgentAiDefaults);\r\n              result.agentAiDefaults =\r\n                Object.keys(normalizedAgent).length > 0 ? normalizedAgent : undefined;\r\n            }\r\n\r\n            return result;\r\n          });\r\n\r\n          // Re-evaluate task queue in case more slots opened up\r\n          await context.taskService.maybeStartQueuedTasks();\r\n        }),\r\n      unenrollMuxGovernor: t\r\n        .input(schemas.config.unenrollMuxGovernor.input)\r\n        .output(schemas.config.unenrollMuxGovernor.output)\r\n        .handler(async ({ context }) => {\r\n          await context.config.editConfig((config) => {\r\n            const { muxGovernorUrl: _url, muxGovernorToken: _token, ...rest } = config;\r\n            return rest;\r\n          });\r\n\r\n          await context.policyService.refreshNow();\r\n        }),\r\n    },\r\n    uiLayouts: {\r\n      getAll: t\r\n        .input(schemas.uiLayouts.getAll.input)\r\n        .output(schemas.uiLayouts.getAll.output)\r\n        .handler(({ context }) => {\r\n          const config = context.config.loadConfigOrDefault();\r\n          return config.layoutPresets ?? DEFAULT_LAYOUT_PRESETS_CONFIG;\r\n        }),\r\n      saveAll: t\r\n        .input(schemas.uiLayouts.saveAll.input)\r\n        .output(schemas.uiLayouts.saveAll.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.config.editConfig((config) => {\r\n            const normalized = normalizeLayoutPresetsConfig(input.layoutPresets);\r\n            return {\r\n              ...config,\r\n              layoutPresets: isLayoutPresetsConfigEmpty(normalized) ? undefined : normalized,\r\n            };\r\n          });\r\n        }),\r\n    },\r\n    agents: {\r\n      list: t\r\n        .input(schemas.agents.list.input)\r\n        .output(schemas.agents.list.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Wait for workspace init before discovery (SSH may not be ready yet)\r\n          if (input.workspaceId) {\r\n            await context.aiService.waitForInit(input.workspaceId);\r\n          }\r\n\r\n          const { runtime, discoveryPath, metadata } = await resolveAgentDiscoveryContext(\r\n            context,\r\n            input\r\n          );\r\n\r\n          // Agents can require a plan file before they're selectable (e.g., orchestrator).\r\n          // Fail closed: if plan state cannot be determined, treat it as missing.\r\n          let planReady = false;\r\n          if (input.workspaceId && metadata) {\r\n            try {\r\n              planReady = await hasNonEmptyPlanFile(\r\n                runtime,\r\n                metadata.name,\r\n                metadata.projectName,\r\n                input.workspaceId\r\n              );\r\n            } catch {\r\n              planReady = false;\r\n            }\r\n          }\r\n\r\n          const descriptors = await discoverAgentDefinitions(runtime, discoveryPath);\r\n\r\n          const cfg = context.config.loadConfigOrDefault();\r\n\r\n          const resolved = await Promise.all(\r\n            descriptors.map(async (descriptor) => {\r\n              try {\r\n                const resolvedFrontmatter = await resolveAgentFrontmatter(\r\n                  runtime,\r\n                  discoveryPath,\r\n                  descriptor.id\r\n                );\r\n\r\n                const effectivelyDisabled = isAgentEffectivelyDisabled({\r\n                  cfg,\r\n                  agentId: descriptor.id,\r\n                  resolvedFrontmatter,\r\n                });\r\n\r\n                // By default, disabled agents are omitted from discovery so they cannot be\r\n                // selected or cycled in the UI.\r\n                //\r\n                // Settings passes includeDisabled: true so users can opt in/out locally.\r\n                if (effectivelyDisabled && input.includeDisabled !== true) {\r\n                  return null;\r\n                }\r\n\r\n                // NOTE: hidden is opt-out. selectable is legacy opt-in.\r\n                const uiSelectableBase =\r\n                  typeof resolvedFrontmatter.ui?.hidden === \"boolean\"\r\n                    ? !resolvedFrontmatter.ui.hidden\r\n                    : typeof resolvedFrontmatter.ui?.selectable === \"boolean\"\r\n                      ? resolvedFrontmatter.ui.selectable\r\n                      : true;\r\n\r\n                const requiresPlan = resolvedFrontmatter.ui?.requires?.includes(\"plan\") ?? false;\r\n                const uiSelectable = requiresPlan && !planReady ? false : uiSelectableBase;\r\n\r\n                return {\r\n                  ...descriptor,\r\n                  name: resolvedFrontmatter.name,\r\n                  description: resolvedFrontmatter.description,\r\n                  uiSelectable,\r\n                  uiColor: resolvedFrontmatter.ui?.color,\r\n                  subagentRunnable: resolvedFrontmatter.subagent?.runnable ?? false,\r\n                  base: resolvedFrontmatter.base,\r\n                  aiDefaults: resolvedFrontmatter.ai,\r\n                  tools: resolvedFrontmatter.tools,\r\n                };\r\n              } catch {\r\n                return descriptor;\r\n              }\r\n            })\r\n          );\r\n\r\n          return resolved.filter((descriptor): descriptor is NonNullable<typeof descriptor> =>\r\n            Boolean(descriptor)\r\n          );\r\n        }),\r\n      get: t\r\n        .input(schemas.agents.get.input)\r\n        .output(schemas.agents.get.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Wait for workspace init before discovery (SSH may not be ready yet)\r\n          if (input.workspaceId) {\r\n            await context.aiService.waitForInit(input.workspaceId);\r\n          }\r\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\r\n          return readAgentDefinition(runtime, discoveryPath, input.agentId);\r\n        }),\r\n    },\r\n    agentSkills: {\r\n      list: t\r\n        .input(schemas.agentSkills.list.input)\r\n        .output(schemas.agentSkills.list.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Wait for workspace init before agent discovery (SSH may not be ready yet)\r\n          if (input.workspaceId) {\r\n            await context.aiService.waitForInit(input.workspaceId);\r\n          }\r\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\r\n          return discoverAgentSkills(runtime, discoveryPath);\r\n        }),\r\n      listDiagnostics: t\r\n        .input(schemas.agentSkills.listDiagnostics.input)\r\n        .output(schemas.agentSkills.listDiagnostics.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Wait for workspace init before agent discovery (SSH may not be ready yet)\r\n          if (input.workspaceId) {\r\n            await context.aiService.waitForInit(input.workspaceId);\r\n          }\r\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\r\n          return discoverAgentSkillsDiagnostics(runtime, discoveryPath);\r\n        }),\r\n      get: t\r\n        .input(schemas.agentSkills.get.input)\r\n        .output(schemas.agentSkills.get.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Wait for workspace init before agent discovery (SSH may not be ready yet)\r\n          if (input.workspaceId) {\r\n            await context.aiService.waitForInit(input.workspaceId);\r\n          }\r\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\r\n          const result = await readAgentSkill(runtime, discoveryPath, input.skillName);\r\n          return result.package;\r\n        }),\r\n    },\r\n    providers: {\r\n      list: t\r\n        .input(schemas.providers.list.input)\r\n        .output(schemas.providers.list.output)\r\n        .handler(({ context }) => context.providerService.list()),\r\n      getConfig: t\r\n        .input(schemas.providers.getConfig.input)\r\n        .output(schemas.providers.getConfig.output)\r\n        .handler(({ context }) => context.providerService.getConfig()),\r\n      setProviderConfig: t\r\n        .input(schemas.providers.setProviderConfig.input)\r\n        .output(schemas.providers.setProviderConfig.output)\r\n        .handler(({ context, input }) =>\r\n          context.providerService.setConfig(input.provider, input.keyPath, input.value)\r\n        ),\r\n      setModels: t\r\n        .input(schemas.providers.setModels.input)\r\n        .output(schemas.providers.setModels.output)\r\n        .handler(({ context, input }) =>\r\n          context.providerService.setModels(input.provider, input.models)\r\n        ),\r\n      setModelMetadata: t\r\n        .input(schemas.providers.setModelMetadata.input)\r\n        .output(schemas.providers.setModelMetadata.output)\r\n        .handler(({ context, input }) =>\r\n          context.providerService.setModelMetadata(input.provider, input.modelId, input.metadata)\r\n        ),\r\n      onConfigChanged: t\r\n        .input(schemas.providers.onConfigChanged.input)\r\n        .output(schemas.providers.onConfigChanged.output)\r\n        .handler(async function* ({ context, signal }) {\r\n          let resolveNext: (() => void) | null = null;\r\n          let pendingNotification = false;\r\n          let ended = false;\r\n\r\n          const push = () => {\r\n            if (ended) return;\r\n            if (resolveNext) {\r\n              // Listener is waiting - wake it up\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve();\r\n            } else {\r\n              // No listener waiting yet - queue the notification\r\n              pendingNotification = true;\r\n            }\r\n          };\r\n\r\n          const unsubscribe = context.providerService.onConfigChanged(push);\r\n\r\n          // Consumers often cancel this subscription while there are no pending provider changes.\r\n          // If we block on a never-resolving Promise, AbortSignal cancellation can't unwind the\r\n          // generator, and we leak EventEmitter listeners across tests.\r\n          const onAbort = () => {\r\n            if (ended) return;\r\n            ended = true;\r\n            // Wake up the iterator if it's currently waiting.\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve();\r\n            } else {\r\n              pendingNotification = true;\r\n            }\r\n          };\r\n\r\n          if (signal) {\r\n            if (signal.aborted) {\r\n              onAbort();\r\n            } else {\r\n              signal.addEventListener(\"abort\", onAbort, { once: true });\r\n            }\r\n          }\r\n\r\n          try {\r\n            while (!ended) {\r\n              // If notification arrived before we started waiting, yield immediately\r\n              if (pendingNotification) {\r\n                pendingNotification = false;\r\n                if (ended) break;\r\n                yield undefined;\r\n                continue;\r\n              }\r\n\r\n              // Wait for next notification (or abort)\r\n              await new Promise<void>((resolve) => {\r\n                resolveNext = resolve;\r\n              });\r\n\r\n              if (ended) break;\r\n              yield undefined;\r\n            }\r\n          } finally {\r\n            ended = true;\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            unsubscribe();\r\n          }\r\n        }),\r\n    },\r\n    policy: {\r\n      get: t\r\n        .input(schemas.policy.get.input)\r\n        .output(schemas.policy.get.output)\r\n        .handler(({ context }) => context.policyService.getPolicyGetResponse()),\r\n      onChanged: t\r\n        .input(schemas.policy.onChanged.input)\r\n        .output(schemas.policy.onChanged.output)\r\n        .handler(async function* ({ context, signal }) {\r\n          let resolveNext: (() => void) | null = null;\r\n          let pendingNotification = false;\r\n          let ended = false;\r\n\r\n          const push = () => {\r\n            if (ended) return;\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve();\r\n            } else {\r\n              pendingNotification = true;\r\n            }\r\n          };\r\n\r\n          const unsubscribe = context.policyService.onPolicyChanged(push);\r\n\r\n          const onAbort = () => {\r\n            if (ended) return;\r\n            ended = true;\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve();\r\n            } else {\r\n              pendingNotification = true;\r\n            }\r\n          };\r\n\r\n          if (signal) {\r\n            if (signal.aborted) {\r\n              onAbort();\r\n            } else {\r\n              signal.addEventListener(\"abort\", onAbort, { once: true });\r\n            }\r\n          }\r\n\r\n          try {\r\n            while (!ended) {\r\n              if (pendingNotification) {\r\n                pendingNotification = false;\r\n                if (ended) break;\r\n                yield undefined;\r\n                continue;\r\n              }\r\n\r\n              await new Promise<void>((resolve) => {\r\n                resolveNext = resolve;\r\n              });\r\n\r\n              if (ended) break;\r\n              yield undefined;\r\n            }\r\n          } finally {\r\n            ended = true;\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            unsubscribe();\r\n          }\r\n        }),\r\n      refreshNow: t\r\n        .input(schemas.policy.refreshNow.input)\r\n        .output(schemas.policy.refreshNow.output)\r\n        .handler(async ({ context }) => {\r\n          const result = await context.policyService.refreshNow();\r\n          if (!result.success) {\r\n            return Err(result.error);\r\n          }\r\n          return Ok(context.policyService.getPolicyGetResponse());\r\n        }),\r\n    },\r\n    muxGateway: {\r\n      getAccountStatus: t\r\n        .input(schemas.muxGateway.getAccountStatus.input)\r\n        .output(schemas.muxGateway.getAccountStatus.output)\r\n        .handler(async ({ context }) => {\r\n          const providersConfig = context.config.loadProvidersConfig() ?? {};\r\n          const muxConfig = (providersConfig[\"mux-gateway\"] ?? {}) as Record<string, unknown>;\r\n          const creds = resolveProviderCredentials(\"mux-gateway\", {\r\n            couponCode: typeof muxConfig.couponCode === \"string\" ? muxConfig.couponCode : undefined,\r\n            voucher: typeof muxConfig.voucher === \"string\" ? muxConfig.voucher : undefined,\r\n          });\r\n\r\n          if (!creds.isConfigured || !creds.couponCode) {\r\n            return Err(\"Mux Gateway is not logged in\");\r\n          }\r\n\r\n          let response: Awaited<ReturnType<typeof fetch>>;\r\n          try {\r\n            response = await fetch(`${MUX_GATEWAY_ORIGIN}/api/v1/balance`, {\r\n              headers: {\r\n                Accept: \"application/json\",\r\n                Authorization: `Bearer ${creds.couponCode}`,\r\n              },\r\n            });\r\n          } catch (error) {\r\n            const message = error instanceof Error ? error.message : String(error);\r\n            return Err(`Mux Gateway balance request failed: ${message}`);\r\n          }\r\n\r\n          if (response.status === 401) {\r\n            try {\r\n              // Best-effort auto-logout: clear local mux-gateway creds on session expiry.\r\n              context.providerService.setConfig(\"mux-gateway\", [\"couponCode\"], \"\");\r\n              context.providerService.setConfig(\"mux-gateway\", [\"voucher\"], \"\");\r\n            } catch {\r\n              // Ignore failures clearing local credentials\r\n            }\r\n\r\n            return Err(MUX_GATEWAY_SESSION_EXPIRED_MESSAGE);\r\n          }\r\n\r\n          if (!response.ok) {\r\n            let body = \"\";\r\n            try {\r\n              body = await response.text();\r\n            } catch {\r\n              // Ignore errors reading response body\r\n            }\r\n            const prefix = body.trim().slice(0, 200);\r\n            return Err(\r\n              `Mux Gateway balance request failed (HTTP ${response.status}): ${prefix || response.statusText\r\n              }`\r\n            );\r\n          }\r\n\r\n          let json: unknown;\r\n          try {\r\n            json = await response.json();\r\n          } catch (error) {\r\n            const message = error instanceof Error ? error.message : String(error);\r\n            return Err(`Mux Gateway balance response was not valid JSON: ${message}`);\r\n          }\r\n\r\n          const payload = json as {\r\n            remaining_microdollars?: unknown;\r\n            ai_gateway_concurrent_requests_per_user?: unknown;\r\n          };\r\n\r\n          const remaining = payload.remaining_microdollars;\r\n          const concurrency = payload.ai_gateway_concurrent_requests_per_user;\r\n\r\n          if (\r\n            typeof remaining !== \"number\" ||\r\n            !Number.isFinite(remaining) ||\r\n            !Number.isInteger(remaining) ||\r\n            remaining < 0 ||\r\n            typeof concurrency !== \"number\" ||\r\n            !Number.isFinite(concurrency) ||\r\n            !Number.isInteger(concurrency) ||\r\n            concurrency < 0\r\n          ) {\r\n            return Err(\"Mux Gateway returned an invalid balance payload\");\r\n          }\r\n\r\n          return Ok({\r\n            remaining_microdollars: remaining,\r\n            ai_gateway_concurrent_requests_per_user: concurrency,\r\n          });\r\n        }),\r\n    },\r\n\r\n    muxGatewayOauth: {\r\n      startDesktopFlow: t\r\n        .input(schemas.muxGatewayOauth.startDesktopFlow.input)\r\n        .output(schemas.muxGatewayOauth.startDesktopFlow.output)\r\n        .handler(({ context }) => {\r\n          return context.muxGatewayOauthService.startDesktopFlow();\r\n        }),\r\n      waitForDesktopFlow: t\r\n        .input(schemas.muxGatewayOauth.waitForDesktopFlow.input)\r\n        .output(schemas.muxGatewayOauth.waitForDesktopFlow.output)\r\n        .handler(({ context, input }) => {\r\n          return context.muxGatewayOauthService.waitForDesktopFlow(input.flowId, {\r\n            timeoutMs: input.timeoutMs,\r\n          });\r\n        }),\r\n      cancelDesktopFlow: t\r\n        .input(schemas.muxGatewayOauth.cancelDesktopFlow.input)\r\n        .output(schemas.muxGatewayOauth.cancelDesktopFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.muxGatewayOauthService.cancelDesktopFlow(input.flowId);\r\n        }),\r\n    },\r\n    copilotOauth: {\r\n      startDeviceFlow: t\r\n        .input(schemas.copilotOauth.startDeviceFlow.input)\r\n        .output(schemas.copilotOauth.startDeviceFlow.output)\r\n        .handler(({ context }) => {\r\n          return context.copilotOauthService.startDeviceFlow();\r\n        }),\r\n      waitForDeviceFlow: t\r\n        .input(schemas.copilotOauth.waitForDeviceFlow.input)\r\n        .output(schemas.copilotOauth.waitForDeviceFlow.output)\r\n        .handler(({ context, input }) => {\r\n          return context.copilotOauthService.waitForDeviceFlow(input.flowId, {\r\n            timeoutMs: input.timeoutMs,\r\n          });\r\n        }),\r\n      cancelDeviceFlow: t\r\n        .input(schemas.copilotOauth.cancelDeviceFlow.input)\r\n        .output(schemas.copilotOauth.cancelDeviceFlow.output)\r\n        .handler(({ context, input }) => {\r\n          context.copilotOauthService.cancelDeviceFlow(input.flowId);\r\n        }),\r\n    },\r\n    muxGovernorOauth: {\r\n      startDesktopFlow: t\r\n        .input(schemas.muxGovernorOauth.startDesktopFlow.input)\r\n        .output(schemas.muxGovernorOauth.startDesktopFlow.output)\r\n        .handler(({ context, input }) => {\r\n          return context.muxGovernorOauthService.startDesktopFlow({\r\n            governorOrigin: input.governorOrigin,\r\n          });\r\n        }),\r\n      waitForDesktopFlow: t\r\n        .input(schemas.muxGovernorOauth.waitForDesktopFlow.input)\r\n        .output(schemas.muxGovernorOauth.waitForDesktopFlow.output)\r\n        .handler(({ context, input }) => {\r\n          return context.muxGovernorOauthService.waitForDesktopFlow(input.flowId, {\r\n            timeoutMs: input.timeoutMs,\r\n          });\r\n        }),\r\n      cancelDesktopFlow: t\r\n        .input(schemas.muxGovernorOauth.cancelDesktopFlow.input)\r\n        .output(schemas.muxGovernorOauth.cancelDesktopFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.muxGovernorOauthService.cancelDesktopFlow(input.flowId);\r\n        }),\r\n    },\r\n    codexOauth: {\r\n      startDesktopFlow: t\r\n        .input(schemas.codexOauth.startDesktopFlow.input)\r\n        .output(schemas.codexOauth.startDesktopFlow.output)\r\n        .handler(({ context }) => {\r\n          return context.codexOauthService.startDesktopFlow();\r\n        }),\r\n      waitForDesktopFlow: t\r\n        .input(schemas.codexOauth.waitForDesktopFlow.input)\r\n        .output(schemas.codexOauth.waitForDesktopFlow.output)\r\n        .handler(({ context, input }) => {\r\n          return context.codexOauthService.waitForDesktopFlow(input.flowId, {\r\n            timeoutMs: input.timeoutMs,\r\n          });\r\n        }),\r\n      cancelDesktopFlow: t\r\n        .input(schemas.codexOauth.cancelDesktopFlow.input)\r\n        .output(schemas.codexOauth.cancelDesktopFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.codexOauthService.cancelDesktopFlow(input.flowId);\r\n        }),\r\n      startDeviceFlow: t\r\n        .input(schemas.codexOauth.startDeviceFlow.input)\r\n        .output(schemas.codexOauth.startDeviceFlow.output)\r\n        .handler(({ context }) => {\r\n          return context.codexOauthService.startDeviceFlow();\r\n        }),\r\n      waitForDeviceFlow: t\r\n        .input(schemas.codexOauth.waitForDeviceFlow.input)\r\n        .output(schemas.codexOauth.waitForDeviceFlow.output)\r\n        .handler(({ context, input }) => {\r\n          return context.codexOauthService.waitForDeviceFlow(input.flowId, {\r\n            timeoutMs: input.timeoutMs,\r\n          });\r\n        }),\r\n      cancelDeviceFlow: t\r\n        .input(schemas.codexOauth.cancelDeviceFlow.input)\r\n        .output(schemas.codexOauth.cancelDeviceFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.codexOauthService.cancelDeviceFlow(input.flowId);\r\n        }),\r\n      disconnect: t\r\n        .input(schemas.codexOauth.disconnect.input)\r\n        .output(schemas.codexOauth.disconnect.output)\r\n        .handler(({ context }) => {\r\n          return context.codexOauthService.disconnect();\r\n        }),\r\n    },\r\n    general: {\r\n      listDirectory: t\r\n        .input(schemas.general.listDirectory.input)\r\n        .output(schemas.general.listDirectory.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.projectService.listDirectory(input.path);\r\n        }),\r\n      createDirectory: t\r\n        .input(schemas.general.createDirectory.input)\r\n        .output(schemas.general.createDirectory.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.projectService.createDirectory(input.path);\r\n        }),\r\n      ping: t\r\n        .input(schemas.general.ping.input)\r\n        .output(schemas.general.ping.output)\r\n        .handler(({ input }) => {\r\n          return `Pong: ${input}`;\r\n        }),\r\n      tick: t\r\n        .input(schemas.general.tick.input)\r\n        .output(schemas.general.tick.output)\r\n        .handler(async function* ({ input }) {\r\n          for (let i = 1; i <= input.count; i++) {\r\n            yield { tick: i, timestamp: Date.now() };\r\n            if (i < input.count) {\r\n              await new Promise((r) => setTimeout(r, input.intervalMs));\r\n            }\r\n          }\r\n        }),\r\n      openInEditor: t\r\n        .input(schemas.general.openInEditor.input)\r\n        .output(schemas.general.openInEditor.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.editorService.openInEditor(\r\n            input.workspaceId,\r\n            input.targetPath,\r\n            input.editorConfig\r\n          );\r\n        }),\r\n    },\r\n    secrets: {\r\n      get: t\r\n        .input(schemas.secrets.get.input)\r\n        .output(schemas.secrets.get.output)\r\n        .handler(({ context, input }) => {\r\n          const projectPath =\r\n            typeof input.projectPath === \"string\" && input.projectPath.trim().length > 0\r\n              ? input.projectPath\r\n              : undefined;\r\n\r\n          return projectPath\r\n            ? context.config.getProjectSecrets(projectPath)\r\n            : context.config.getGlobalSecrets();\r\n        }),\r\n      update: t\r\n        .input(schemas.secrets.update.input)\r\n        .output(schemas.secrets.update.output)\r\n        .handler(async ({ context, input }) => {\r\n          const projectPath =\r\n            typeof input.projectPath === \"string\" && input.projectPath.trim().length > 0\r\n              ? input.projectPath\r\n              : undefined;\r\n\r\n          try {\r\n            if (projectPath) {\r\n              await context.config.updateProjectSecrets(projectPath, input.secrets);\r\n            } else {\r\n              await context.config.updateGlobalSecrets(input.secrets);\r\n            }\r\n\r\n            return Ok(undefined);\r\n          } catch (error) {\r\n            const message = error instanceof Error ? error.message : String(error);\r\n            return Err(message);\r\n          }\r\n        }),\r\n    },\r\n    mcp: {\r\n      list: t\r\n        .input(schemas.mcp.list.input)\r\n        .output(schemas.mcp.list.output)\r\n        .handler(async ({ context, input }) => {\r\n          const servers = await context.mcpConfigService.listServers(input.projectPath);\r\n\r\n          if (!context.policyService.isEnforced()) {\r\n            return servers;\r\n          }\r\n\r\n          const filtered: typeof servers = {};\r\n          for (const [name, info] of Object.entries(servers)) {\r\n            if (context.policyService.isMcpTransportAllowed(info.transport)) {\r\n              filtered[name] = info;\r\n            }\r\n          }\r\n\r\n          return filtered;\r\n        }),\r\n      add: t\r\n        .input(schemas.mcp.add.input)\r\n        .output(schemas.mcp.add.output)\r\n        .handler(async ({ context, input }) => {\r\n          const existing = await context.mcpConfigService.listServers();\r\n          const existingServer = existing[input.name];\r\n\r\n          const transport = input.transport ?? \"stdio\";\r\n          if (context.policyService.isEnforced()) {\r\n            if (!context.policyService.isMcpTransportAllowed(transport)) {\r\n              return { success: false, error: \"MCP transport is disabled by policy\" };\r\n            }\r\n          }\r\n\r\n          const hasHeaders = Boolean(input.headers && Object.keys(input.headers).length > 0);\r\n          const usesSecretHeaders = Boolean(\r\n            input.headers &&\r\n            Object.values(input.headers).some(\r\n              (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n            )\r\n          );\r\n\r\n          const action = (() => {\r\n            if (!existingServer) {\r\n              return \"add\";\r\n            }\r\n\r\n            if (\r\n              existingServer.transport !== \"stdio\" &&\r\n              transport !== \"stdio\" &&\r\n              existingServer.transport === transport &&\r\n              existingServer.url === input.url &&\r\n              JSON.stringify(existingServer.headers ?? {}) !== JSON.stringify(input.headers ?? {})\r\n            ) {\r\n              return \"set_headers\";\r\n            }\r\n\r\n            return \"edit\";\r\n          })();\r\n\r\n          const result = await context.mcpConfigService.addServer(input.name, {\r\n            transport,\r\n            command: input.command,\r\n            url: input.url,\r\n            headers: input.headers,\r\n          });\r\n\r\n          if (result.success) {\r\n            context.telemetryService.capture({\r\n              event: \"mcp_server_config_changed\",\r\n              properties: {\r\n                action,\r\n                transport,\r\n                has_headers: hasHeaders,\r\n                uses_secret_headers: usesSecretHeaders,\r\n              },\r\n            });\r\n          }\r\n\r\n          return result;\r\n        }),\r\n      remove: t\r\n        .input(schemas.mcp.remove.input)\r\n        .output(schemas.mcp.remove.output)\r\n        .handler(async ({ context, input }) => {\r\n          const existing = await context.mcpConfigService.listServers();\r\n          const server = existing[input.name];\r\n\r\n          if (context.policyService.isEnforced() && server) {\r\n            if (!context.policyService.isMcpTransportAllowed(server.transport)) {\r\n              return { success: false, error: \"MCP transport is disabled by policy\" };\r\n            }\r\n          }\r\n\r\n          const result = await context.mcpConfigService.removeServer(input.name);\r\n\r\n          if (result.success && server) {\r\n            const hasHeaders =\r\n              server.transport !== \"stdio\" &&\r\n              Boolean(server.headers && Object.keys(server.headers).length > 0);\r\n            const usesSecretHeaders =\r\n              server.transport !== \"stdio\" &&\r\n              Boolean(\r\n                server.headers &&\r\n                Object.values(server.headers).some(\r\n                  (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n                )\r\n              );\r\n\r\n            context.telemetryService.capture({\r\n              event: \"mcp_server_config_changed\",\r\n              properties: {\r\n                action: \"remove\",\r\n                transport: server.transport,\r\n                has_headers: hasHeaders,\r\n                uses_secret_headers: usesSecretHeaders,\r\n              },\r\n            });\r\n          }\r\n\r\n          return result;\r\n        }),\r\n      test: t\r\n        .input(schemas.mcp.test.input)\r\n        .output(schemas.mcp.test.output)\r\n        .handler(async ({ context, input }) => {\r\n          const start = Date.now();\r\n\r\n          const projectPathProvided =\r\n            typeof input.projectPath === \"string\" && input.projectPath.trim().length > 0;\r\n          const resolvedProjectPath = projectPathProvided\r\n            ? input.projectPath!\r\n            : context.config.rootDir;\r\n\r\n          const secrets = secretsToRecord(\r\n            projectPathProvided\r\n              ? context.config.getEffectiveSecrets(resolvedProjectPath)\r\n              : context.config.getGlobalSecrets()\r\n          );\r\n\r\n          const configuredTransport = input.name\r\n            ? (\r\n              await context.mcpConfigService.listServers(\r\n                projectPathProvided ? resolvedProjectPath : undefined\r\n              )\r\n            )[input.name]?.transport\r\n            : undefined;\r\n\r\n          const transport =\r\n            configuredTransport ?? (input.command ? \"stdio\" : (input.transport ?? \"auto\"));\r\n\r\n          if (context.policyService.isEnforced()) {\r\n            if (!context.policyService.isMcpTransportAllowed(transport)) {\r\n              return { success: false, error: \"MCP transport is disabled by policy\" };\r\n            }\r\n          }\r\n\r\n          const result = await context.mcpServerManager.test({\r\n            projectPath: resolvedProjectPath,\r\n            name: input.name,\r\n            command: input.command,\r\n            transport: input.transport,\r\n            url: input.url,\r\n            headers: input.headers,\r\n            projectSecrets: secrets,\r\n          });\r\n\r\n          const durationMs = Date.now() - start;\r\n\r\n          const categorizeError = (\r\n            error: string\r\n          ): \"timeout\" | \"connect\" | \"http_status\" | \"unknown\" => {\r\n            const lower = error.toLowerCase();\r\n            if (lower.includes(\"timed out\")) {\r\n              return \"timeout\";\r\n            }\r\n            if (\r\n              lower.includes(\"econnrefused\") ||\r\n              lower.includes(\"econnreset\") ||\r\n              lower.includes(\"enotfound\") ||\r\n              lower.includes(\"ehostunreach\")\r\n            ) {\r\n              return \"connect\";\r\n            }\r\n            if (/\\b(400|401|403|404|405|500|502|503)\\b/.test(lower)) {\r\n              return \"http_status\";\r\n            }\r\n            return \"unknown\";\r\n          };\r\n\r\n          context.telemetryService.capture({\r\n            event: \"mcp_server_tested\",\r\n            properties: {\r\n              transport,\r\n              success: result.success,\r\n              duration_ms_b2: roundToBase2(durationMs),\r\n              ...(result.success ? {} : { error_category: categorizeError(result.error) }),\r\n            },\r\n          });\r\n\r\n          return result;\r\n        }),\r\n      setEnabled: t\r\n        .input(schemas.mcp.setEnabled.input)\r\n        .output(schemas.mcp.setEnabled.output)\r\n        .handler(async ({ context, input }) => {\r\n          const existing = await context.mcpConfigService.listServers();\r\n          const server = existing[input.name];\r\n\r\n          if (context.policyService.isEnforced() && server) {\r\n            if (!context.policyService.isMcpTransportAllowed(server.transport)) {\r\n              return { success: false, error: \"MCP transport is disabled by policy\" };\r\n            }\r\n          }\r\n\r\n          const result = await context.mcpConfigService.setServerEnabled(input.name, input.enabled);\r\n\r\n          if (result.success && server) {\r\n            const hasHeaders =\r\n              server.transport !== \"stdio\" &&\r\n              Boolean(server.headers && Object.keys(server.headers).length > 0);\r\n            const usesSecretHeaders =\r\n              server.transport !== \"stdio\" &&\r\n              Boolean(\r\n                server.headers &&\r\n                Object.values(server.headers).some(\r\n                  (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n                )\r\n              );\r\n\r\n            context.telemetryService.capture({\r\n              event: \"mcp_server_config_changed\",\r\n              properties: {\r\n                action: input.enabled ? \"enable\" : \"disable\",\r\n                transport: server.transport,\r\n                has_headers: hasHeaders,\r\n                uses_secret_headers: usesSecretHeaders,\r\n              },\r\n            });\r\n          }\r\n\r\n          return result;\r\n        }),\r\n      setToolAllowlist: t\r\n        .input(schemas.mcp.setToolAllowlist.input)\r\n        .output(schemas.mcp.setToolAllowlist.output)\r\n        .handler(async ({ context, input }) => {\r\n          const existing = await context.mcpConfigService.listServers();\r\n          const server = existing[input.name];\r\n\r\n          if (context.policyService.isEnforced() && server) {\r\n            if (!context.policyService.isMcpTransportAllowed(server.transport)) {\r\n              return { success: false, error: \"MCP transport is disabled by policy\" };\r\n            }\r\n          }\r\n\r\n          const result = await context.mcpConfigService.setToolAllowlist(\r\n            input.name,\r\n            input.toolAllowlist\r\n          );\r\n\r\n          if (result.success && server) {\r\n            const hasHeaders =\r\n              server.transport !== \"stdio\" &&\r\n              Boolean(server.headers && Object.keys(server.headers).length > 0);\r\n            const usesSecretHeaders =\r\n              server.transport !== \"stdio\" &&\r\n              Boolean(\r\n                server.headers &&\r\n                Object.values(server.headers).some(\r\n                  (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n                )\r\n              );\r\n\r\n            context.telemetryService.capture({\r\n              event: \"mcp_server_config_changed\",\r\n              properties: {\r\n                action: \"set_tool_allowlist\",\r\n                transport: server.transport,\r\n                has_headers: hasHeaders,\r\n                uses_secret_headers: usesSecretHeaders,\r\n                tool_allowlist_size_b2: roundToBase2(input.toolAllowlist.length),\r\n              },\r\n            });\r\n          }\r\n\r\n          return result;\r\n        }),\r\n    },\r\n    mcpOauth: {\r\n      startDesktopFlow: t\r\n        .input(schemas.mcpOauth.startDesktopFlow.input)\r\n        .output(schemas.mcpOauth.startDesktopFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Global MCP settings can start OAuth without selecting a project.\r\n          // Use mux home as a stable fallback so existing flow codepaths remain unchanged.\r\n          const projectPath = input.projectPath ?? context.config.rootDir;\r\n\r\n          return context.mcpOauthService.startDesktopFlow({ ...input, projectPath });\r\n        }),\r\n      waitForDesktopFlow: t\r\n        .input(schemas.mcpOauth.waitForDesktopFlow.input)\r\n        .output(schemas.mcpOauth.waitForDesktopFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.mcpOauthService.waitForDesktopFlow(input.flowId, {\r\n            timeoutMs: input.timeoutMs,\r\n          });\r\n        }),\r\n      cancelDesktopFlow: t\r\n        .input(schemas.mcpOauth.cancelDesktopFlow.input)\r\n        .output(schemas.mcpOauth.cancelDesktopFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.mcpOauthService.cancelDesktopFlow(input.flowId);\r\n        }),\r\n      startServerFlow: t\r\n        .input(schemas.mcpOauth.startServerFlow.input)\r\n        .output(schemas.mcpOauth.startServerFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Global MCP settings can start OAuth without selecting a project.\r\n          // Use mux home as a stable fallback so existing flow codepaths remain unchanged.\r\n          const projectPath = input.projectPath ?? context.config.rootDir;\r\n\r\n          const headers = context.headers;\r\n\r\n          const origin = typeof headers?.origin === \"string\" ? headers.origin.trim() : \"\";\r\n          if (origin) {\r\n            try {\r\n              const redirectUri = new URL(\"/auth/mcp-oauth/callback\", origin).toString();\r\n              return context.mcpOauthService.startServerFlow({\r\n                ...input,\r\n                projectPath,\r\n                redirectUri,\r\n              });\r\n            } catch {\r\n              // Fall back to Host header.\r\n            }\r\n          }\r\n\r\n          const hostHeader = headers?.[\"x-forwarded-host\"] ?? headers?.host;\r\n          const host = typeof hostHeader === \"string\" ? hostHeader.split(\",\")[0]?.trim() : \"\";\r\n          if (!host) {\r\n            return Err(\"Missing Host header\");\r\n          }\r\n\r\n          const protoHeader = headers?.[\"x-forwarded-proto\"];\r\n          const forwardedProto =\r\n            typeof protoHeader === \"string\" ? protoHeader.split(\",\")[0]?.trim() : \"\";\r\n          const proto = forwardedProto.length ? forwardedProto : \"http\";\r\n\r\n          const redirectUri = `${proto}://${host}/auth/mcp-oauth/callback`;\r\n\r\n          return context.mcpOauthService.startServerFlow({\r\n            ...input,\r\n            projectPath,\r\n            redirectUri,\r\n          });\r\n        }),\r\n      waitForServerFlow: t\r\n        .input(schemas.mcpOauth.waitForServerFlow.input)\r\n        .output(schemas.mcpOauth.waitForServerFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.mcpOauthService.waitForServerFlow(input.flowId, {\r\n            timeoutMs: input.timeoutMs,\r\n          });\r\n        }),\r\n      cancelServerFlow: t\r\n        .input(schemas.mcpOauth.cancelServerFlow.input)\r\n        .output(schemas.mcpOauth.cancelServerFlow.output)\r\n        .handler(async ({ context, input }) => {\r\n          await context.mcpOauthService.cancelServerFlow(input.flowId);\r\n        }),\r\n      getAuthStatus: t\r\n        .input(schemas.mcpOauth.getAuthStatus.input)\r\n        .output(schemas.mcpOauth.getAuthStatus.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.mcpOauthService.getAuthStatus({ serverUrl: input.serverUrl });\r\n        }),\r\n      logout: t\r\n        .input(schemas.mcpOauth.logout.input)\r\n        .output(schemas.mcpOauth.logout.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.mcpOauthService.logout({ serverUrl: input.serverUrl });\r\n        }),\r\n    },\r\n    projects: {\r\n      list: t\r\n        .input(schemas.projects.list.input)\r\n        .output(schemas.projects.list.output)\r\n        .handler(({ context }) => {\r\n          return context.projectService.list();\r\n        }),\r\n      create: t\r\n        .input(schemas.projects.create.input)\r\n        .output(schemas.projects.create.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.projectService.create(input.projectPath);\r\n        }),\r\n      pickDirectory: t\r\n        .input(schemas.projects.pickDirectory.input)\r\n        .output(schemas.projects.pickDirectory.output)\r\n        .handler(async ({ context }) => {\r\n          return context.projectService.pickDirectory();\r\n        }),\r\n      getFileCompletions: t\r\n        .input(schemas.projects.getFileCompletions.input)\r\n        .output(schemas.projects.getFileCompletions.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.projectService.getFileCompletions(\r\n            input.projectPath,\r\n            input.query,\r\n            input.limit\r\n          );\r\n        }),\r\n      runtimeAvailability: t\r\n        .input(schemas.projects.runtimeAvailability.input)\r\n        .output(schemas.projects.runtimeAvailability.output)\r\n        .handler(async ({ input }) => {\r\n          return checkRuntimeAvailability(input.projectPath);\r\n        }),\r\n      listBranches: t\r\n        .input(schemas.projects.listBranches.input)\r\n        .output(schemas.projects.listBranches.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.projectService.listBranches(input.projectPath);\r\n        }),\r\n      gitInit: t\r\n        .input(schemas.projects.gitInit.input)\r\n        .output(schemas.projects.gitInit.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.projectService.gitInit(input.projectPath);\r\n        }),\r\n      remove: t\r\n        .input(schemas.projects.remove.input)\r\n        .output(schemas.projects.remove.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.projectService.remove(input.projectPath);\r\n        }),\r\n      secrets: {\r\n        get: t\r\n          .input(schemas.projects.secrets.get.input)\r\n          .output(schemas.projects.secrets.get.output)\r\n          .handler(({ context, input }) => {\r\n            return context.projectService.getSecrets(input.projectPath);\r\n          }),\r\n        update: t\r\n          .input(schemas.projects.secrets.update.input)\r\n          .output(schemas.projects.secrets.update.output)\r\n          .handler(async ({ context, input }) => {\r\n            return context.projectService.updateSecrets(input.projectPath, input.secrets);\r\n          }),\r\n      },\r\n      mcp: {\r\n        list: t\r\n          .input(schemas.projects.mcp.list.input)\r\n          .output(schemas.projects.mcp.list.output)\r\n          .handler(async ({ context, input }) => {\r\n            const servers = await context.mcpConfigService.listServers(input.projectPath);\r\n\r\n            if (!context.policyService.isEnforced()) {\r\n              return servers;\r\n            }\r\n\r\n            const filtered: typeof servers = {};\r\n            for (const [name, info] of Object.entries(servers)) {\r\n              if (context.policyService.isMcpTransportAllowed(info.transport)) {\r\n                filtered[name] = info;\r\n              }\r\n            }\r\n\r\n            return filtered;\r\n          }),\r\n        add: t\r\n          .input(schemas.projects.mcp.add.input)\r\n          .output(schemas.projects.mcp.add.output)\r\n          .handler(async ({ context, input }) => {\r\n            const existing = await context.mcpConfigService.listServers();\r\n            const existingServer = existing[input.name];\r\n\r\n            const transport = input.transport ?? \"stdio\";\r\n            if (context.policyService.isEnforced()) {\r\n              if (!context.policyService.isMcpTransportAllowed(transport)) {\r\n                return { success: false, error: \"MCP transport is disabled by policy\" };\r\n              }\r\n            }\r\n            const hasHeaders = Boolean(input.headers && Object.keys(input.headers).length > 0);\r\n            const usesSecretHeaders = Boolean(\r\n              input.headers &&\r\n              Object.values(input.headers).some(\r\n                (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n              )\r\n            );\r\n\r\n            const action = (() => {\r\n              if (!existingServer) {\r\n                return \"add\";\r\n              }\r\n\r\n              if (\r\n                existingServer.transport !== \"stdio\" &&\r\n                transport !== \"stdio\" &&\r\n                existingServer.transport === transport &&\r\n                existingServer.url === input.url &&\r\n                JSON.stringify(existingServer.headers ?? {}) !== JSON.stringify(input.headers ?? {})\r\n              ) {\r\n                return \"set_headers\";\r\n              }\r\n\r\n              return \"edit\";\r\n            })();\r\n\r\n            const result = await context.mcpConfigService.addServer(input.name, {\r\n              transport,\r\n              command: input.command,\r\n              url: input.url,\r\n              headers: input.headers,\r\n            });\r\n\r\n            if (result.success) {\r\n              context.telemetryService.capture({\r\n                event: \"mcp_server_config_changed\",\r\n                properties: {\r\n                  action,\r\n                  transport,\r\n                  has_headers: hasHeaders,\r\n                  uses_secret_headers: usesSecretHeaders,\r\n                },\r\n              });\r\n            }\r\n\r\n            return result;\r\n          }),\r\n        remove: t\r\n          .input(schemas.projects.mcp.remove.input)\r\n          .output(schemas.projects.mcp.remove.output)\r\n          .handler(async ({ context, input }) => {\r\n            const existing = await context.mcpConfigService.listServers();\r\n            const server = existing[input.name];\r\n\r\n            if (context.policyService.isEnforced() && server) {\r\n              if (!context.policyService.isMcpTransportAllowed(server.transport)) {\r\n                return { success: false, error: \"MCP transport is disabled by policy\" };\r\n              }\r\n            }\r\n\r\n            const result = await context.mcpConfigService.removeServer(input.name);\r\n\r\n            if (result.success && server) {\r\n              const hasHeaders =\r\n                server.transport !== \"stdio\" &&\r\n                Boolean(server.headers && Object.keys(server.headers).length > 0);\r\n              const usesSecretHeaders =\r\n                server.transport !== \"stdio\" &&\r\n                Boolean(\r\n                  server.headers &&\r\n                  Object.values(server.headers).some(\r\n                    (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n                  )\r\n                );\r\n\r\n              context.telemetryService.capture({\r\n                event: \"mcp_server_config_changed\",\r\n                properties: {\r\n                  action: \"remove\",\r\n                  transport: server.transport,\r\n                  has_headers: hasHeaders,\r\n                  uses_secret_headers: usesSecretHeaders,\r\n                },\r\n              });\r\n            }\r\n\r\n            return result;\r\n          }),\r\n        test: t\r\n          .input(schemas.projects.mcp.test.input)\r\n          .output(schemas.projects.mcp.test.output)\r\n          .handler(async ({ context, input }) => {\r\n            const start = Date.now();\r\n            const secrets = secretsToRecord(context.config.getEffectiveSecrets(input.projectPath));\r\n\r\n            const configuredTransport = input.name\r\n              ? (await context.mcpConfigService.listServers(input.projectPath))[input.name]\r\n                ?.transport\r\n              : undefined;\r\n\r\n            const transport =\r\n              configuredTransport ?? (input.command ? \"stdio\" : (input.transport ?? \"auto\"));\r\n\r\n            if (context.policyService.isEnforced()) {\r\n              if (!context.policyService.isMcpTransportAllowed(transport)) {\r\n                return { success: false, error: \"MCP transport is disabled by policy\" };\r\n              }\r\n            }\r\n\r\n            const result = await context.mcpServerManager.test({\r\n              projectPath: input.projectPath,\r\n              name: input.name,\r\n              command: input.command,\r\n              transport: input.transport,\r\n              url: input.url,\r\n              headers: input.headers,\r\n              projectSecrets: secrets,\r\n            });\r\n\r\n            const durationMs = Date.now() - start;\r\n\r\n            const categorizeError = (\r\n              error: string\r\n            ): \"timeout\" | \"connect\" | \"http_status\" | \"unknown\" => {\r\n              const lower = error.toLowerCase();\r\n              if (lower.includes(\"timed out\")) {\r\n                return \"timeout\";\r\n              }\r\n              if (\r\n                lower.includes(\"econnrefused\") ||\r\n                lower.includes(\"econnreset\") ||\r\n                lower.includes(\"enotfound\") ||\r\n                lower.includes(\"ehostunreach\")\r\n              ) {\r\n                return \"connect\";\r\n              }\r\n              if (/\\b(400|401|403|404|405|500|502|503)\\b/.test(lower)) {\r\n                return \"http_status\";\r\n              }\r\n              return \"unknown\";\r\n            };\r\n\r\n            context.telemetryService.capture({\r\n              event: \"mcp_server_tested\",\r\n              properties: {\r\n                transport,\r\n                success: result.success,\r\n                duration_ms_b2: roundToBase2(durationMs),\r\n                ...(result.success ? {} : { error_category: categorizeError(result.error) }),\r\n              },\r\n            });\r\n\r\n            return result;\r\n          }),\r\n        setEnabled: t\r\n          .input(schemas.projects.mcp.setEnabled.input)\r\n          .output(schemas.projects.mcp.setEnabled.output)\r\n          .handler(async ({ context, input }) => {\r\n            const existing = await context.mcpConfigService.listServers();\r\n            const server = existing[input.name];\r\n\r\n            if (context.policyService.isEnforced() && server) {\r\n              if (!context.policyService.isMcpTransportAllowed(server.transport)) {\r\n                return { success: false, error: \"MCP transport is disabled by policy\" };\r\n              }\r\n            }\r\n\r\n            const result = await context.mcpConfigService.setServerEnabled(\r\n              input.name,\r\n              input.enabled\r\n            );\r\n\r\n            if (result.success && server) {\r\n              const hasHeaders =\r\n                server.transport !== \"stdio\" &&\r\n                Boolean(server.headers && Object.keys(server.headers).length > 0);\r\n              const usesSecretHeaders =\r\n                server.transport !== \"stdio\" &&\r\n                Boolean(\r\n                  server.headers &&\r\n                  Object.values(server.headers).some(\r\n                    (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n                  )\r\n                );\r\n\r\n              context.telemetryService.capture({\r\n                event: \"mcp_server_config_changed\",\r\n                properties: {\r\n                  action: input.enabled ? \"enable\" : \"disable\",\r\n                  transport: server.transport,\r\n                  has_headers: hasHeaders,\r\n                  uses_secret_headers: usesSecretHeaders,\r\n                },\r\n              });\r\n            }\r\n\r\n            return result;\r\n          }),\r\n        setToolAllowlist: t\r\n          .input(schemas.projects.mcp.setToolAllowlist.input)\r\n          .output(schemas.projects.mcp.setToolAllowlist.output)\r\n          .handler(async ({ context, input }) => {\r\n            const existing = await context.mcpConfigService.listServers();\r\n            const server = existing[input.name];\r\n\r\n            if (context.policyService.isEnforced() && server) {\r\n              if (!context.policyService.isMcpTransportAllowed(server.transport)) {\r\n                return { success: false, error: \"MCP transport is disabled by policy\" };\r\n              }\r\n            }\r\n\r\n            const result = await context.mcpConfigService.setToolAllowlist(\r\n              input.name,\r\n              input.toolAllowlist\r\n            );\r\n\r\n            if (result.success && server) {\r\n              const hasHeaders =\r\n                server.transport !== \"stdio\" &&\r\n                Boolean(server.headers && Object.keys(server.headers).length > 0);\r\n              const usesSecretHeaders =\r\n                server.transport !== \"stdio\" &&\r\n                Boolean(\r\n                  server.headers &&\r\n                  Object.values(server.headers).some(\r\n                    (v) => typeof v === \"object\" && v !== null && \"secret\" in v\r\n                  )\r\n                );\r\n\r\n              context.telemetryService.capture({\r\n                event: \"mcp_server_config_changed\",\r\n                properties: {\r\n                  action: \"set_tool_allowlist\",\r\n                  transport: server.transport,\r\n                  has_headers: hasHeaders,\r\n                  uses_secret_headers: usesSecretHeaders,\r\n                  tool_allowlist_size_b2: roundToBase2(input.toolAllowlist.length),\r\n                },\r\n              });\r\n            }\r\n\r\n            return result;\r\n          }),\r\n      },\r\n      mcpOauth: {\r\n        startDesktopFlow: t\r\n          .input(schemas.projects.mcpOauth.startDesktopFlow.input)\r\n          .output(schemas.projects.mcpOauth.startDesktopFlow.output)\r\n          .handler(async ({ context, input }) => {\r\n            return context.mcpOauthService.startDesktopFlow(input);\r\n          }),\r\n        waitForDesktopFlow: t\r\n          .input(schemas.projects.mcpOauth.waitForDesktopFlow.input)\r\n          .output(schemas.projects.mcpOauth.waitForDesktopFlow.output)\r\n          .handler(async ({ context, input }) => {\r\n            return context.mcpOauthService.waitForDesktopFlow(input.flowId, {\r\n              timeoutMs: input.timeoutMs,\r\n            });\r\n          }),\r\n        cancelDesktopFlow: t\r\n          .input(schemas.projects.mcpOauth.cancelDesktopFlow.input)\r\n          .output(schemas.projects.mcpOauth.cancelDesktopFlow.output)\r\n          .handler(async ({ context, input }) => {\r\n            await context.mcpOauthService.cancelDesktopFlow(input.flowId);\r\n          }),\r\n        startServerFlow: t\r\n          .input(schemas.projects.mcpOauth.startServerFlow.input)\r\n          .output(schemas.projects.mcpOauth.startServerFlow.output)\r\n          .handler(async ({ context, input }) => {\r\n            const headers = context.headers;\r\n\r\n            const origin = typeof headers?.origin === \"string\" ? headers.origin.trim() : \"\";\r\n            if (origin) {\r\n              try {\r\n                const redirectUri = new URL(\"/auth/mcp-oauth/callback\", origin).toString();\r\n                return context.mcpOauthService.startServerFlow({ ...input, redirectUri });\r\n              } catch {\r\n                // Fall back to Host header.\r\n              }\r\n            }\r\n\r\n            const hostHeader = headers?.[\"x-forwarded-host\"] ?? headers?.host;\r\n            const host = typeof hostHeader === \"string\" ? hostHeader.split(\",\")[0]?.trim() : \"\";\r\n            if (!host) {\r\n              return Err(\"Missing Host header\");\r\n            }\r\n\r\n            const protoHeader = headers?.[\"x-forwarded-proto\"];\r\n            const forwardedProto =\r\n              typeof protoHeader === \"string\" ? protoHeader.split(\",\")[0]?.trim() : \"\";\r\n            const proto = forwardedProto.length ? forwardedProto : \"http\";\r\n\r\n            const redirectUri = `${proto}://${host}/auth/mcp-oauth/callback`;\r\n\r\n            return context.mcpOauthService.startServerFlow({ ...input, redirectUri });\r\n          }),\r\n        waitForServerFlow: t\r\n          .input(schemas.projects.mcpOauth.waitForServerFlow.input)\r\n          .output(schemas.projects.mcpOauth.waitForServerFlow.output)\r\n          .handler(async ({ context, input }) => {\r\n            return context.mcpOauthService.waitForServerFlow(input.flowId, {\r\n              timeoutMs: input.timeoutMs,\r\n            });\r\n          }),\r\n        cancelServerFlow: t\r\n          .input(schemas.projects.mcpOauth.cancelServerFlow.input)\r\n          .output(schemas.projects.mcpOauth.cancelServerFlow.output)\r\n          .handler(async ({ context, input }) => {\r\n            await context.mcpOauthService.cancelServerFlow(input.flowId);\r\n          }),\r\n        getAuthStatus: t\r\n          .input(schemas.projects.mcpOauth.getAuthStatus.input)\r\n          .output(schemas.projects.mcpOauth.getAuthStatus.output)\r\n          .handler(async ({ context, input }) => {\r\n            const servers = await context.mcpConfigService.listServers(input.projectPath);\r\n            const server = servers[input.serverName];\r\n\r\n            if (!server || server.transport === \"stdio\") {\r\n              return { isLoggedIn: false, hasRefreshToken: false };\r\n            }\r\n\r\n            return context.mcpOauthService.getAuthStatus({ serverUrl: server.url });\r\n          }),\r\n        logout: t\r\n          .input(schemas.projects.mcpOauth.logout.input)\r\n          .output(schemas.projects.mcpOauth.logout.output)\r\n          .handler(async ({ context, input }) => {\r\n            const servers = await context.mcpConfigService.listServers(input.projectPath);\r\n            const server = servers[input.serverName];\r\n\r\n            if (!server || server.transport === \"stdio\") {\r\n              return Ok(undefined);\r\n            }\r\n\r\n            return context.mcpOauthService.logout({ serverUrl: server.url });\r\n          }),\r\n      },\r\n      idleCompaction: {\r\n        get: t\r\n          .input(schemas.projects.idleCompaction.get.input)\r\n          .output(schemas.projects.idleCompaction.get.output)\r\n          .handler(({ context, input }) => ({\r\n            hours: context.projectService.getIdleCompactionHours(input.projectPath),\r\n          })),\r\n        set: t\r\n          .input(schemas.projects.idleCompaction.set.input)\r\n          .output(schemas.projects.idleCompaction.set.output)\r\n          .handler(({ context, input }) =>\r\n            context.projectService.setIdleCompactionHours(input.projectPath, input.hours)\r\n          ),\r\n      },\r\n      sections: {\r\n        list: t\r\n          .input(schemas.projects.sections.list.input)\r\n          .output(schemas.projects.sections.list.output)\r\n          .handler(({ context, input }) => context.projectService.listSections(input.projectPath)),\r\n        create: t\r\n          .input(schemas.projects.sections.create.input)\r\n          .output(schemas.projects.sections.create.output)\r\n          .handler(({ context, input }) =>\r\n            context.projectService.createSection(input.projectPath, input.name, input.color)\r\n          ),\r\n        update: t\r\n          .input(schemas.projects.sections.update.input)\r\n          .output(schemas.projects.sections.update.output)\r\n          .handler(({ context, input }) =>\r\n            context.projectService.updateSection(input.projectPath, input.sectionId, {\r\n              name: input.name,\r\n              color: input.color,\r\n            })\r\n          ),\r\n        remove: t\r\n          .input(schemas.projects.sections.remove.input)\r\n          .output(schemas.projects.sections.remove.output)\r\n          .handler(({ context, input }) =>\r\n            context.projectService.removeSection(input.projectPath, input.sectionId)\r\n          ),\r\n        reorder: t\r\n          .input(schemas.projects.sections.reorder.input)\r\n          .output(schemas.projects.sections.reorder.output)\r\n          .handler(({ context, input }) =>\r\n            context.projectService.reorderSections(input.projectPath, input.sectionIds)\r\n          ),\r\n        assignWorkspace: t\r\n          .input(schemas.projects.sections.assignWorkspace.input)\r\n          .output(schemas.projects.sections.assignWorkspace.output)\r\n          .handler(async ({ context, input }) => {\r\n            const result = await context.projectService.assignWorkspaceToSection(\r\n              input.projectPath,\r\n              input.workspaceId,\r\n              input.sectionId\r\n            );\r\n            if (result.success) {\r\n              // Emit metadata update so frontend receives the sectionId change\r\n              await context.workspaceService.refreshAndEmitMetadata(input.workspaceId);\r\n            }\r\n            return result;\r\n          }),\r\n      },\r\n    },\r\n    nameGeneration: {\r\n      generate: t\r\n        .input(schemas.nameGeneration.generate.input)\r\n        .output(schemas.nameGeneration.generate.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Frontend provides ordered candidate list with gateway prefs applied.\r\n          // Backend tries candidates in order with retry on API errors.\r\n          const result = await generateWorkspaceIdentity(\r\n            input.message,\r\n            input.candidates,\r\n            context.aiService\r\n          );\r\n          if (!result.success) {\r\n            return result;\r\n          }\r\n          return {\r\n            success: true,\r\n            data: {\r\n              name: result.data.name,\r\n              title: result.data.title,\r\n              modelUsed: result.data.modelUsed,\r\n            },\r\n          };\r\n        }),\r\n    },\r\n    coder: {\r\n      getInfo: t\r\n        .input(schemas.coder.getInfo.input)\r\n        .output(schemas.coder.getInfo.output)\r\n        .handler(async ({ context }) => {\r\n          return context.coderService.getCoderInfo();\r\n        }),\r\n      listTemplates: t\r\n        .input(schemas.coder.listTemplates.input)\r\n        .output(schemas.coder.listTemplates.output)\r\n        .handler(async ({ context }) => {\r\n          return context.coderService.listTemplates();\r\n        }),\r\n      listPresets: t\r\n        .input(schemas.coder.listPresets.input)\r\n        .output(schemas.coder.listPresets.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.coderService.listPresets(input.template, input.org);\r\n        }),\r\n      listWorkspaces: t\r\n        .input(schemas.coder.listWorkspaces.input)\r\n        .output(schemas.coder.listWorkspaces.output)\r\n        .handler(async ({ context }) => {\r\n          return context.coderService.listWorkspaces();\r\n        }),\r\n    },\r\n    workspace: {\r\n      list: t\r\n        .input(schemas.workspace.list.input)\r\n        .output(schemas.workspace.list.output)\r\n        .handler(async ({ context, input }) => {\r\n          const allWorkspaces = await context.workspaceService.list();\r\n          // Filter by archived status (derived from timestamps via shared utility)\r\n          if (input?.archived) {\r\n            return allWorkspaces.filter((w) => isWorkspaceArchived(w.archivedAt, w.unarchivedAt));\r\n          }\r\n          // Default: return non-archived workspaces\r\n          return allWorkspaces.filter((w) => !isWorkspaceArchived(w.archivedAt, w.unarchivedAt));\r\n        }),\r\n      create: t\r\n        .input(schemas.workspace.create.input)\r\n        .output(schemas.workspace.create.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.create(\r\n            input.projectPath,\r\n            input.branchName,\r\n            input.trunkBranch,\r\n            input.title,\r\n            input.runtimeConfig,\r\n            input.sectionId\r\n          );\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return { success: true, metadata: result.data.metadata };\r\n        }),\r\n      remove: t\r\n        .input(schemas.workspace.remove.input)\r\n        .output(schemas.workspace.remove.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.remove(\r\n            input.workspaceId,\r\n            input.options?.force\r\n          );\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return { success: true };\r\n        }),\r\n      updateAgentAISettings: t\r\n        .input(schemas.workspace.updateAgentAISettings.input)\r\n        .output(schemas.workspace.updateAgentAISettings.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.updateAgentAISettings(\r\n            input.workspaceId,\r\n            input.agentId,\r\n            input.aiSettings\r\n          );\r\n        }),\r\n      rename: t\r\n        .input(schemas.workspace.rename.input)\r\n        .output(schemas.workspace.rename.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.rename(input.workspaceId, input.newName);\r\n        }),\r\n      updateModeAISettings: t\r\n        .input(schemas.workspace.updateModeAISettings.input)\r\n        .output(schemas.workspace.updateModeAISettings.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.updateModeAISettings(\r\n            input.workspaceId,\r\n            input.mode,\r\n            input.aiSettings\r\n          );\r\n        }),\r\n      updateTitle: t\r\n        .input(schemas.workspace.updateTitle.input)\r\n        .output(schemas.workspace.updateTitle.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.updateTitle(input.workspaceId, input.title);\r\n        }),\r\n      archive: t\r\n        .input(schemas.workspace.archive.input)\r\n        .output(schemas.workspace.archive.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.archive(input.workspaceId);\r\n        }),\r\n      unarchive: t\r\n        .input(schemas.workspace.unarchive.input)\r\n        .output(schemas.workspace.unarchive.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.unarchive(input.workspaceId);\r\n        }),\r\n      archiveMergedInProject: t\r\n        .input(schemas.workspace.archiveMergedInProject.input)\r\n        .output(schemas.workspace.archiveMergedInProject.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.archiveMergedInProject(input.projectPath);\r\n        }),\r\n      fork: t\r\n        .input(schemas.workspace.fork.input)\r\n        .output(schemas.workspace.fork.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.fork(\r\n            input.sourceWorkspaceId,\r\n            input.newName\r\n          );\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return {\r\n            success: true,\r\n            metadata: result.data.metadata,\r\n            projectPath: result.data.projectPath,\r\n          };\r\n        }),\r\n      sendMessage: t\r\n        .input(schemas.workspace.sendMessage.input)\r\n        .output(schemas.workspace.sendMessage.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.sendMessage(\r\n            input.workspaceId,\r\n            input.message,\r\n            input.options\r\n          );\r\n\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n\r\n          return { success: true, data: {} };\r\n        }),\r\n      answerAskUserQuestion: t\r\n        .input(schemas.workspace.answerAskUserQuestion.input)\r\n        .output(schemas.workspace.answerAskUserQuestion.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.answerAskUserQuestion(\r\n            input.workspaceId,\r\n            input.toolCallId,\r\n            input.answers\r\n          );\r\n\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n\r\n          return { success: true, data: undefined };\r\n        }),\r\n      resumeStream: t\r\n        .input(schemas.workspace.resumeStream.input)\r\n        .output(schemas.workspace.resumeStream.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.resumeStream(\r\n            input.workspaceId,\r\n            input.options\r\n          );\r\n          if (!result.success) {\r\n            const error =\r\n              typeof result.error === \"string\"\r\n                ? { type: \"unknown\" as const, raw: result.error }\r\n                : result.error;\r\n            return { success: false, error };\r\n          }\r\n          return { success: true, data: undefined };\r\n        }),\r\n      interruptStream: t\r\n        .input(schemas.workspace.interruptStream.input)\r\n        .output(schemas.workspace.interruptStream.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.interruptStream(\r\n            input.workspaceId,\r\n            input.options\r\n          );\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return { success: true, data: undefined };\r\n        }),\r\n      clearQueue: t\r\n        .input(schemas.workspace.clearQueue.input)\r\n        .output(schemas.workspace.clearQueue.output)\r\n        .handler(({ context, input }) => {\r\n          const result = context.workspaceService.clearQueue(input.workspaceId);\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return { success: true, data: undefined };\r\n        }),\r\n      truncateHistory: t\r\n        .input(schemas.workspace.truncateHistory.input)\r\n        .output(schemas.workspace.truncateHistory.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.truncateHistory(\r\n            input.workspaceId,\r\n            input.percentage\r\n          );\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return { success: true, data: undefined };\r\n        }),\r\n      replaceChatHistory: t\r\n        .input(schemas.workspace.replaceChatHistory.input)\r\n        .output(schemas.workspace.replaceChatHistory.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.replaceHistory(\r\n            input.workspaceId,\r\n            input.summaryMessage,\r\n            { mode: input.mode, deletePlanFile: input.deletePlanFile }\r\n          );\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return { success: true, data: undefined };\r\n        }),\r\n      getDevcontainerInfo: t\r\n        .input(schemas.workspace.getDevcontainerInfo.input)\r\n        .output(schemas.workspace.getDevcontainerInfo.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.getDevcontainerInfo(input.workspaceId);\r\n        }),\r\n      getInfo: t\r\n        .input(schemas.workspace.getInfo.input)\r\n        .output(schemas.workspace.getInfo.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.getInfo(input.workspaceId);\r\n        }),\r\n      getLastLlmRequest: t\r\n        .input(schemas.workspace.getLastLlmRequest.input)\r\n        .output(schemas.workspace.getLastLlmRequest.output)\r\n        .handler(({ context, input }) => {\r\n          return context.aiService.debugGetLastLlmRequest(input.workspaceId);\r\n        }),\r\n      getFullReplay: t\r\n        .input(schemas.workspace.getFullReplay.input)\r\n        .output(schemas.workspace.getFullReplay.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.getFullReplay(input.workspaceId);\r\n        }),\r\n      getSubagentTranscript: t\r\n        .input(schemas.workspace.getSubagentTranscript.input)\r\n        .output(schemas.workspace.getSubagentTranscript.output)\r\n        .handler(async ({ context, input }) => {\r\n          const taskId = input.taskId.trim();\r\n          assert(taskId.length > 0, \"workspace.getSubagentTranscript: taskId must be non-empty\");\r\n\r\n          const requestingWorkspaceIdTrimmed = input.workspaceId?.trim();\r\n          const requestingWorkspaceId =\r\n            requestingWorkspaceIdTrimmed && requestingWorkspaceIdTrimmed.length > 0\r\n              ? requestingWorkspaceIdTrimmed\r\n              : null;\r\n\r\n          const tryLoadFromWorkspace = async (\r\n            workspaceId: string\r\n          ): Promise<{\r\n            workspaceId: string;\r\n            entry: SubagentTranscriptArtifactIndexEntry;\r\n          } | null> => {\r\n            const sessionDir = context.config.getSessionDir(workspaceId);\r\n            const artifacts = await readSubagentTranscriptArtifactsFile(sessionDir);\r\n            const entry = artifacts.artifactsByChildTaskId[taskId] ?? null;\r\n            return entry ? { workspaceId, entry } : null;\r\n          };\r\n\r\n          const tryLoadFromDescendantWorkspaces = async (\r\n            ancestorWorkspaceId: string\r\n          ): Promise<{\r\n            workspaceId: string;\r\n            entry: SubagentTranscriptArtifactIndexEntry;\r\n          } | null> => {\r\n            // If a grandchild task has already been cleaned up, its transcript is archived into the\r\n            // immediate parent workspace's session dir. Until that parent workspace is cleaned up and\r\n            // its artifacts are rolled up, the requesting workspace won't have the transcript index.\r\n            const descendants = context.taskService.listDescendantAgentTasks(ancestorWorkspaceId);\r\n\r\n            // Prefer shallower tasks first so we find the owning parent quickly.\r\n            descendants.sort((a, b) => a.depth - b.depth);\r\n\r\n            for (const descendant of descendants) {\r\n              const loaded = await tryLoadFromWorkspace(descendant.taskId);\r\n              if (loaded) return loaded;\r\n            }\r\n\r\n            return null;\r\n          };\r\n\r\n          // Auth: allow if the task is a descendant OR if we have an on-disk transcript artifact entry.\r\n          // The descendant check is best-effort: if it throws (corrupt config), we fall back to the\r\n          // artifact existence check to keep the UI usable.\r\n          let isDescendant = false;\r\n          if (requestingWorkspaceId) {\r\n            try {\r\n              isDescendant = await context.taskService.isDescendantAgentTask(\r\n                requestingWorkspaceId,\r\n                taskId\r\n              );\r\n            } catch (error: unknown) {\r\n              log.warn(\"workspace.getSubagentTranscript: descendant check failed\", {\r\n                requestingWorkspaceId,\r\n                taskId,\r\n                error: error instanceof Error ? error.message : String(error),\r\n              });\r\n            }\r\n          }\r\n\r\n          const readTranscriptFromPaths = async (params: {\r\n            workspaceId: string;\r\n            chatPath?: string;\r\n            partialPath?: string;\r\n            logLabel: string;\r\n          }): Promise<MuxMessage[]> => {\r\n            const workspaceSessionDir = context.config.getSessionDir(params.workspaceId);\r\n\r\n            // Defense-in-depth: refuse path traversal from a corrupted index file.\r\n            if (params.chatPath && !isPathInsideDir(workspaceSessionDir, params.chatPath)) {\r\n              throw new Error(\"Refusing to read transcript outside workspace session dir\");\r\n            }\r\n            if (params.partialPath && !isPathInsideDir(workspaceSessionDir, params.partialPath)) {\r\n              throw new Error(\"Refusing to read partial outside workspace session dir\");\r\n            }\r\n\r\n            const partial = params.partialPath\r\n              ? await readPartialJsonBestEffort(params.partialPath)\r\n              : null;\r\n            const messages = params.chatPath\r\n              ? await readChatJsonlAllowMissing({\r\n                chatPath: params.chatPath,\r\n                logLabel: params.logLabel,\r\n              })\r\n              : null;\r\n\r\n            // If we only archived partial.json (e.g. interrupted stream), still allow viewing.\r\n            if (!messages && !partial) {\r\n              throw new Error(`Transcript not found (missing ${params.logLabel})`);\r\n            }\r\n\r\n            return mergePartialIntoHistory(messages ?? [], partial);\r\n          };\r\n\r\n          let resolved: {\r\n            workspaceId: string;\r\n            entry: SubagentTranscriptArtifactIndexEntry;\r\n          } | null = null;\r\n          let hasArtifactInRequestingTree = false;\r\n\r\n          if (requestingWorkspaceId !== null) {\r\n            resolved = await tryLoadFromWorkspace(requestingWorkspaceId);\r\n            if (resolved) {\r\n              hasArtifactInRequestingTree = true;\r\n            } else {\r\n              resolved = await tryLoadFromDescendantWorkspaces(requestingWorkspaceId);\r\n              hasArtifactInRequestingTree = resolved !== null;\r\n            }\r\n          } else {\r\n            resolved = await findSubagentTranscriptEntryByScanningSessions({\r\n              sessionsDir: context.config.sessionsDir,\r\n              taskId,\r\n            });\r\n          }\r\n\r\n          // If the transcript hasn't been archived yet (common while patch artifacts are pending),\r\n          // fall back to reading from the task's live session dir while it still exists.\r\n          if (!resolved) {\r\n            if (requestingWorkspaceId && isDescendant) {\r\n              const taskSessionDir = context.config.getSessionDir(taskId);\r\n              const messages = await readTranscriptFromPaths({\r\n                workspaceId: taskId,\r\n                chatPath: path.join(taskSessionDir, \"chat.jsonl\"),\r\n                partialPath: path.join(taskSessionDir, \"partial.json\"),\r\n                logLabel: `${taskId}/chat.jsonl`,\r\n              });\r\n\r\n              const metaResult = await context.aiService.getWorkspaceMetadata(taskId);\r\n              const model =\r\n                metaResult.success &&\r\n                  typeof metaResult.data.taskModelString === \"string\" &&\r\n                  metaResult.data.taskModelString.trim().length > 0\r\n                  ? metaResult.data.taskModelString.trim()\r\n                  : undefined;\r\n              const thinkingLevel = metaResult.success\r\n                ? coerceThinkingLevel(metaResult.data.taskThinkingLevel)\r\n                : undefined;\r\n\r\n              return { messages, model, thinkingLevel };\r\n            }\r\n\r\n            // Helpful error message for UI.\r\n            throw new Error(\r\n              requestingWorkspaceId\r\n                ? `No transcript found for task ${taskId} in workspace ${requestingWorkspaceId}`\r\n                : `No transcript found for task ${taskId}`\r\n            );\r\n          }\r\n\r\n          if (requestingWorkspaceId && !isDescendant && !hasArtifactInRequestingTree) {\r\n            throw new Error(\"Task is not a descendant of this workspace\");\r\n          }\r\n\r\n          const messages = await readTranscriptFromPaths({\r\n            workspaceId: resolved.workspaceId,\r\n            chatPath: resolved.entry.chatPath,\r\n            partialPath: resolved.entry.partialPath,\r\n            logLabel: `${resolved.workspaceId}/subagent-transcripts/${taskId}/chat.jsonl`,\r\n          });\r\n\r\n          const model =\r\n            typeof resolved.entry.model === \"string\" && resolved.entry.model.trim().length > 0\r\n              ? resolved.entry.model.trim()\r\n              : undefined;\r\n          const thinkingLevel = coerceThinkingLevel(resolved.entry.thinkingLevel);\r\n\r\n          return { messages, model, thinkingLevel };\r\n        }),\r\n      executeBash: t\r\n        .input(schemas.workspace.executeBash.input)\r\n        .output(schemas.workspace.executeBash.output)\r\n        .handler(async ({ context, input }) => {\r\n          const result = await context.workspaceService.executeBash(\r\n            input.workspaceId,\r\n            input.script,\r\n            input.options\r\n          );\r\n          if (!result.success) {\r\n            return { success: false, error: result.error };\r\n          }\r\n          return { success: true, data: result.data };\r\n        }),\r\n      getFileCompletions: t\r\n        .input(schemas.workspace.getFileCompletions.input)\r\n        .output(schemas.workspace.getFileCompletions.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.getFileCompletions(\r\n            input.workspaceId,\r\n            input.query,\r\n            input.limit\r\n          );\r\n        }),\r\n      onChat: t\r\n        .input(schemas.workspace.onChat.input)\r\n        .output(schemas.workspace.onChat.output)\r\n        .handler(async function* ({ context, input, signal }) {\r\n          const session = context.workspaceService.getOrCreateSession(input.workspaceId);\r\n          const { push, iterate, end } = createAsyncMessageQueue<WorkspaceChatMessage>();\r\n\r\n          const onAbort = () => {\r\n            // Ensure we tear down the async generator even if the client stops iterating without\r\n            // calling iterator.return(). This prevents orphaned heartbeat intervals.\r\n            end();\r\n          };\r\n\r\n          if (signal) {\r\n            if (signal.aborted) {\r\n              onAbort();\r\n            } else {\r\n              signal.addEventListener(\"abort\", onAbort, { once: true });\r\n            }\r\n          }\r\n\r\n          // 1. Subscribe to new events (including those triggered by replay)\r\n          //\r\n          // IMPORTANT: We subscribe before replay so we can receive stream replay (`replayStream()`)\r\n          // and init replay events (which do not set `replay: true`).\r\n          //\r\n          // Live stream deltas can overlap with replayed deltas on reconnect. Buffer live stream\r\n          // events during replay and flush after `caught-up`, skipping any deltas already delivered\r\n          // by replay.\r\n          const replayRelay = createReplayBufferedStreamMessageRelay(push);\r\n\r\n          const unsubscribe = session.onChatEvent(({ message }) => {\r\n            replayRelay.handleSessionMessage(message);\r\n          });\r\n\r\n          // 2. Replay history (sends caught-up at the end)\r\n          await session.replayHistory(({ message }) => {\r\n            push(message);\r\n          });\r\n\r\n          replayRelay.finishReplay();\r\n\r\n          // 3. Heartbeat to keep the connection alive during long operations (tool calls, subagents).\r\n          // Client uses this to detect stalled connections vs. intentionally idle streams.\r\n          const HEARTBEAT_INTERVAL_MS = 5_000;\r\n          const heartbeatInterval = setInterval(() => {\r\n            push({ type: \"heartbeat\" });\r\n          }, HEARTBEAT_INTERVAL_MS);\r\n\r\n          try {\r\n            yield* iterate();\r\n          } finally {\r\n            clearInterval(heartbeatInterval);\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            end();\r\n            unsubscribe();\r\n          }\r\n        }),\r\n      onMetadata: t\r\n        .input(schemas.workspace.onMetadata.input)\r\n        .output(schemas.workspace.onMetadata.output)\r\n        .handler(async function* ({ context, signal }) {\r\n          const service = context.workspaceService;\r\n\r\n          interface MetadataEvent {\r\n            workspaceId: string;\r\n            metadata: FrontendWorkspaceMetadataSchemaType | null;\r\n          }\r\n\r\n          let resolveNext: ((value: MetadataEvent | null) => void) | null = null;\r\n          const queue: MetadataEvent[] = [];\r\n          let ended = false;\r\n\r\n          const push = (event: MetadataEvent) => {\r\n            if (ended) return;\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(event);\r\n            } else {\r\n              queue.push(event);\r\n            }\r\n          };\r\n\r\n          const onMetadata = (event: MetadataEvent) => {\r\n            push(event);\r\n          };\r\n\r\n          service.on(\"metadata\", onMetadata);\r\n\r\n          const onAbort = () => {\r\n            if (ended) return;\r\n            ended = true;\r\n\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(null);\r\n            }\r\n          };\r\n\r\n          if (signal) {\r\n            if (signal.aborted) {\r\n              onAbort();\r\n            } else {\r\n              signal.addEventListener(\"abort\", onAbort, { once: true });\r\n            }\r\n          }\r\n\r\n          try {\r\n            while (!ended) {\r\n              if (queue.length > 0) {\r\n                yield queue.shift()!;\r\n                continue;\r\n              }\r\n\r\n              const event = await new Promise<MetadataEvent | null>((resolve) => {\r\n                resolveNext = resolve;\r\n              });\r\n\r\n              if (event === null || ended) {\r\n                break;\r\n              }\r\n\r\n              yield event;\r\n            }\r\n          } finally {\r\n            ended = true;\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            service.off(\"metadata\", onMetadata);\r\n          }\r\n        }),\r\n      activity: {\r\n        list: t\r\n          .input(schemas.workspace.activity.list.input)\r\n          .output(schemas.workspace.activity.list.output)\r\n          .handler(async ({ context }) => {\r\n            return context.workspaceService.getActivityList();\r\n          }),\r\n        subscribe: t\r\n          .input(schemas.workspace.activity.subscribe.input)\r\n          .output(schemas.workspace.activity.subscribe.output)\r\n          .handler(async function* ({ context, signal }) {\r\n            const service = context.workspaceService;\r\n\r\n            interface ActivityEvent {\r\n              workspaceId: string;\r\n              activity: WorkspaceActivitySnapshot | null;\r\n            }\r\n\r\n            let resolveNext: ((value: ActivityEvent | null) => void) | null = null;\r\n            const queue: ActivityEvent[] = [];\r\n            let ended = false;\r\n\r\n            const push = (event: ActivityEvent) => {\r\n              if (ended) return;\r\n              if (resolveNext) {\r\n                const resolve = resolveNext;\r\n                resolveNext = null;\r\n                resolve(event);\r\n              } else {\r\n                queue.push(event);\r\n              }\r\n            };\r\n\r\n            const onActivity = (event: ActivityEvent) => {\r\n              push(event);\r\n            };\r\n\r\n            service.on(\"activity\", onActivity);\r\n\r\n            const onAbort = () => {\r\n              if (ended) return;\r\n              ended = true;\r\n\r\n              if (resolveNext) {\r\n                const resolve = resolveNext;\r\n                resolveNext = null;\r\n                resolve(null);\r\n              }\r\n            };\r\n\r\n            if (signal) {\r\n              if (signal.aborted) {\r\n                onAbort();\r\n              } else {\r\n                signal.addEventListener(\"abort\", onAbort, { once: true });\r\n              }\r\n            }\r\n\r\n            try {\r\n              while (!ended) {\r\n                if (queue.length > 0) {\r\n                  yield queue.shift()!;\r\n                  continue;\r\n                }\r\n\r\n                const event = await new Promise<ActivityEvent | null>((resolve) => {\r\n                  resolveNext = resolve;\r\n                });\r\n\r\n                if (event === null || ended) {\r\n                  break;\r\n                }\r\n\r\n                yield event;\r\n              }\r\n            } finally {\r\n              ended = true;\r\n              signal?.removeEventListener(\"abort\", onAbort);\r\n              service.off(\"activity\", onActivity);\r\n            }\r\n          }),\r\n      },\r\n      getPlanContent: t\r\n        .input(schemas.workspace.getPlanContent.input)\r\n        .output(schemas.workspace.getPlanContent.output)\r\n        .handler(async ({ context, input }) => {\r\n          // Get workspace metadata to determine runtime and paths\r\n          const metadata = await context.workspaceService.getInfo(input.workspaceId);\r\n          if (!metadata) {\r\n            return { success: false as const, error: `Workspace not found: ${input.workspaceId}` };\r\n          }\r\n\r\n          // Create runtime to read plan file (supports both local and SSH)\r\n          const runtime = createRuntimeForWorkspace(metadata);\r\n\r\n          const result = await readPlanFile(\r\n            runtime,\r\n            metadata.name,\r\n            metadata.projectName,\r\n            input.workspaceId\r\n          );\r\n\r\n          if (!result.exists) {\r\n            return { success: false as const, error: `Plan file not found at ${result.path}` };\r\n          }\r\n          return { success: true as const, data: { content: result.content, path: result.path } };\r\n        }),\r\n      backgroundBashes: {\r\n        subscribe: t\r\n          .input(schemas.workspace.backgroundBashes.subscribe.input)\r\n          .output(schemas.workspace.backgroundBashes.subscribe.output)\r\n          .handler(async function* ({ context, input, signal }) {\r\n            const service = context.workspaceService;\r\n            const { workspaceId } = input;\r\n\r\n            if (signal?.aborted) {\r\n              return;\r\n            }\r\n\r\n            const getState = async () => ({\r\n              processes: await service.listBackgroundProcesses(workspaceId),\r\n              foregroundToolCallIds: service.getForegroundToolCallIds(workspaceId),\r\n            });\r\n\r\n            const queue = createAsyncEventQueue<Awaited<ReturnType<typeof getState>>>();\r\n\r\n            const onAbort = () => {\r\n              queue.end();\r\n            };\r\n\r\n            if (signal) {\r\n              signal.addEventListener(\"abort\", onAbort, { once: true });\r\n            }\r\n\r\n            const onChange = (changedWorkspaceId: string) => {\r\n              if (changedWorkspaceId === workspaceId) {\r\n                void getState().then(queue.push);\r\n              }\r\n            };\r\n\r\n            service.onBackgroundBashChange(onChange);\r\n\r\n            try {\r\n              // Emit initial state immediately\r\n              yield await getState();\r\n              yield* queue.iterate();\r\n            } finally {\r\n              signal?.removeEventListener(\"abort\", onAbort);\r\n              queue.end();\r\n              service.offBackgroundBashChange(onChange);\r\n            }\r\n          }),\r\n        terminate: t\r\n          .input(schemas.workspace.backgroundBashes.terminate.input)\r\n          .output(schemas.workspace.backgroundBashes.terminate.output)\r\n          .handler(async ({ context, input }) => {\r\n            const result = await context.workspaceService.terminateBackgroundProcess(\r\n              input.workspaceId,\r\n              input.processId\r\n            );\r\n            if (!result.success) {\r\n              return { success: false, error: result.error };\r\n            }\r\n            return { success: true, data: undefined };\r\n          }),\r\n        sendToBackground: t\r\n          .input(schemas.workspace.backgroundBashes.sendToBackground.input)\r\n          .output(schemas.workspace.backgroundBashes.sendToBackground.output)\r\n          .handler(({ context, input }) => {\r\n            const result = context.workspaceService.sendToBackground(input.toolCallId);\r\n            if (!result.success) {\r\n              return { success: false, error: result.error };\r\n            }\r\n            return { success: true, data: undefined };\r\n          }),\r\n        getOutput: t\r\n          .input(schemas.workspace.backgroundBashes.getOutput.input)\r\n          .output(schemas.workspace.backgroundBashes.getOutput.output)\r\n          .handler(async ({ context, input }) => {\r\n            const result = await context.workspaceService.getBackgroundProcessOutput(\r\n              input.workspaceId,\r\n              input.processId,\r\n              { fromOffset: input.fromOffset, tailBytes: input.tailBytes }\r\n            );\r\n            if (!result.success) {\r\n              return { success: false, error: result.error };\r\n            }\r\n            return { success: true, data: result.data };\r\n          }),\r\n      },\r\n      getPostCompactionState: t\r\n        .input(schemas.workspace.getPostCompactionState.input)\r\n        .output(schemas.workspace.getPostCompactionState.output)\r\n        .handler(({ context, input }) => {\r\n          return context.workspaceService.getPostCompactionState(input.workspaceId);\r\n        }),\r\n      setPostCompactionExclusion: t\r\n        .input(schemas.workspace.setPostCompactionExclusion.input)\r\n        .output(schemas.workspace.setPostCompactionExclusion.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.workspaceService.setPostCompactionExclusion(\r\n            input.workspaceId,\r\n            input.itemId,\r\n            input.excluded\r\n          );\r\n        }),\r\n      getSessionUsage: t\r\n        .input(schemas.workspace.getSessionUsage.input)\r\n        .output(schemas.workspace.getSessionUsage.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.sessionUsageService.getSessionUsage(input.workspaceId);\r\n        }),\r\n      getSessionUsageBatch: t\r\n        .input(schemas.workspace.getSessionUsageBatch.input)\r\n        .output(schemas.workspace.getSessionUsageBatch.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.sessionUsageService.getSessionUsageBatch(input.workspaceIds);\r\n        }),\r\n      stats: {\r\n        subscribe: t\r\n          .input(schemas.workspace.stats.subscribe.input)\r\n          .output(schemas.workspace.stats.subscribe.output)\r\n          .handler(async function* ({ context, input, signal }) {\r\n            const workspaceId = input.workspaceId;\r\n\r\n            if (signal?.aborted) {\r\n              return;\r\n            }\r\n\r\n            context.sessionTimingService.addSubscriber(workspaceId);\r\n\r\n            const queue = (() => {\r\n              // Coalesce snapshots: keep only the most recent snapshot to avoid an\r\n              // unbounded queue under high-frequency stream deltas.\r\n              let buffered: WorkspaceStatsSnapshot | undefined;\r\n              let hasBuffered = false;\r\n              let resolveNext: ((value: WorkspaceStatsSnapshot | null) => void) | null = null;\r\n              let ended = false;\r\n\r\n              const push = (value: WorkspaceStatsSnapshot) => {\r\n                if (ended) return;\r\n\r\n                if (resolveNext) {\r\n                  const resolve = resolveNext;\r\n                  resolveNext = null;\r\n                  resolve(value);\r\n                  return;\r\n                }\r\n\r\n                buffered = value;\r\n                hasBuffered = true;\r\n              };\r\n\r\n              async function* iterate(): AsyncGenerator<WorkspaceStatsSnapshot> {\r\n                while (true) {\r\n                  if (ended) {\r\n                    return;\r\n                  }\r\n\r\n                  if (hasBuffered) {\r\n                    const value = buffered;\r\n                    buffered = undefined;\r\n                    hasBuffered = false;\r\n                    if (value !== undefined) {\r\n                      yield value;\r\n                    }\r\n                    continue;\r\n                  }\r\n\r\n                  const next = await new Promise<WorkspaceStatsSnapshot | null>((resolve) => {\r\n                    resolveNext = resolve;\r\n                  });\r\n\r\n                  if (ended || next === null) {\r\n                    return;\r\n                  }\r\n\r\n                  yield next;\r\n                }\r\n              }\r\n\r\n              const end = () => {\r\n                ended = true;\r\n                if (resolveNext) {\r\n                  const resolve = resolveNext;\r\n                  resolveNext = null;\r\n                  resolve(null);\r\n                }\r\n              };\r\n\r\n              return { push, iterate, end };\r\n            })();\r\n\r\n            // Snapshot computation is async; without coalescing, we can build an unbounded\r\n            // backlog when token deltas arrive quickly.\r\n            const SNAPSHOT_THROTTLE_MS = 100;\r\n\r\n            let lastPushedAtMs = 0;\r\n            let inFlight = false;\r\n            let pendingTimer: ReturnType<typeof setTimeout> | undefined;\r\n            let pendingSnapshot = false;\r\n            let closed = false;\r\n\r\n            const onAbort = () => {\r\n              closed = true;\r\n\r\n              if (pendingTimer) {\r\n                clearTimeout(pendingTimer);\r\n                pendingTimer = undefined;\r\n              }\r\n\r\n              queue.end();\r\n            };\r\n\r\n            if (signal) {\r\n              signal.addEventListener(\"abort\", onAbort, { once: true });\r\n            }\r\n\r\n            const pushSnapshot = async () => {\r\n              if (closed) return;\r\n              if (inFlight) return;\r\n              if (!pendingSnapshot) return;\r\n\r\n              pendingSnapshot = false;\r\n              inFlight = true;\r\n\r\n              try {\r\n                const snapshot = await context.sessionTimingService.getSnapshot(workspaceId);\r\n                if (closed) return;\r\n\r\n                lastPushedAtMs = snapshot.generatedAt;\r\n                queue.push(snapshot);\r\n              } finally {\r\n                inFlight = false;\r\n\r\n                if (!closed && pendingSnapshot) {\r\n                  scheduleSnapshot();\r\n                }\r\n              }\r\n            };\r\n\r\n            const runPushSnapshot = () => {\r\n              void pushSnapshot().catch(() => {\r\n                // Defensive: a failed snapshot fetch should never brick the subscription.\r\n              });\r\n            };\r\n\r\n            const scheduleSnapshot = () => {\r\n              pendingSnapshot = true;\r\n\r\n              if (closed) {\r\n                return;\r\n              }\r\n\r\n              if (inFlight) {\r\n                return;\r\n              }\r\n\r\n              if (pendingTimer) {\r\n                return;\r\n              }\r\n\r\n              const now = Date.now();\r\n              const timeSinceLastPush = now - lastPushedAtMs;\r\n\r\n              if (timeSinceLastPush >= SNAPSHOT_THROTTLE_MS) {\r\n                runPushSnapshot();\r\n                return;\r\n              }\r\n\r\n              const remaining = SNAPSHOT_THROTTLE_MS - timeSinceLastPush;\r\n              pendingTimer = setTimeout(() => {\r\n                pendingTimer = undefined;\r\n                runPushSnapshot();\r\n              }, remaining);\r\n\r\n              // Avoid keeping Node (or Jest workers) alive due to a leaked throttle timer.\r\n              pendingTimer.unref?.();\r\n            };\r\n\r\n            const onChange = (changedWorkspaceId: string) => {\r\n              if (changedWorkspaceId !== workspaceId) {\r\n                return;\r\n              }\r\n              scheduleSnapshot();\r\n            };\r\n\r\n            // Subscribe before awaiting the initial snapshot so we don't miss a\r\n            // stats-change event that happens while getSnapshot() is in-flight.\r\n            //\r\n            // Treat the initial snapshot fetch as inFlight to prevent scheduleSnapshot()\r\n            // from starting a concurrent fetch that could push a newer snapshot before\r\n            // the initial one.\r\n            inFlight = true;\r\n            context.sessionTimingService.onStatsChange(onChange);\r\n\r\n            try {\r\n              const initial = await context.sessionTimingService.getSnapshot(workspaceId);\r\n              lastPushedAtMs = initial.generatedAt;\r\n              queue.push(initial);\r\n            } finally {\r\n              inFlight = false;\r\n\r\n              if (!closed && pendingSnapshot) {\r\n                scheduleSnapshot();\r\n              }\r\n            }\r\n\r\n            try {\r\n              yield* queue.iterate();\r\n            } finally {\r\n              closed = true;\r\n              signal?.removeEventListener(\"abort\", onAbort);\r\n              if (pendingTimer) {\r\n                clearTimeout(pendingTimer);\r\n              }\r\n\r\n              queue.end();\r\n              context.sessionTimingService.offStatsChange(onChange);\r\n              context.sessionTimingService.removeSubscriber(workspaceId);\r\n            }\r\n          }),\r\n        clear: t\r\n          .input(schemas.workspace.stats.clear.input)\r\n          .output(schemas.workspace.stats.clear.output)\r\n          .handler(async ({ context, input }) => {\r\n            try {\r\n              await context.sessionTimingService.clearTimingFile(input.workspaceId);\r\n              return { success: true, data: undefined };\r\n            } catch (error) {\r\n              const message = error instanceof Error ? error.message : String(error);\r\n              return { success: false, error: message };\r\n            }\r\n          }),\r\n      },\r\n      mcp: {\r\n        get: t\r\n          .input(schemas.workspace.mcp.get.input)\r\n          .output(schemas.workspace.mcp.get.output)\r\n          .handler(async ({ context, input }) => {\r\n            const policy = context.policyService.getEffectivePolicy();\r\n            const mcpDisabledByPolicy =\r\n              context.policyService.isEnforced() &&\r\n              policy?.mcp.allowUserDefined.stdio === false &&\r\n              policy.mcp.allowUserDefined.remote === false;\r\n\r\n            if (mcpDisabledByPolicy) {\r\n              return {};\r\n            }\r\n\r\n            try {\r\n              return await context.workspaceMcpOverridesService.getOverridesForWorkspace(\r\n                input.workspaceId\r\n              );\r\n            } catch {\r\n              // Defensive: overrides must never brick workspace UI.\r\n              return {};\r\n            }\r\n          }),\r\n        set: t\r\n          .input(schemas.workspace.mcp.set.input)\r\n          .output(schemas.workspace.mcp.set.output)\r\n          .handler(async ({ context, input }) => {\r\n            try {\r\n              await context.workspaceMcpOverridesService.setOverridesForWorkspace(\r\n                input.workspaceId,\r\n                input.overrides\r\n              );\r\n              return { success: true, data: undefined };\r\n            } catch (error) {\r\n              const message = error instanceof Error ? error.message : String(error);\r\n              return { success: false, error: message };\r\n            }\r\n          }),\r\n      },\r\n    },\r\n    tasks: {\r\n      create: t\r\n        .input(schemas.tasks.create.input)\r\n        .output(schemas.tasks.create.output)\r\n        .handler(({ context, input }) => {\r\n          const thinkingLevel =\r\n            input.thinkingLevel === \"off\" ||\r\n              input.thinkingLevel === \"low\" ||\r\n              input.thinkingLevel === \"medium\" ||\r\n              input.thinkingLevel === \"high\" ||\r\n              input.thinkingLevel === \"xhigh\"\r\n              ? input.thinkingLevel\r\n              : undefined;\r\n\r\n          return context.taskService.create({\r\n            parentWorkspaceId: input.parentWorkspaceId,\r\n            kind: input.kind,\r\n            agentId: input.agentId,\r\n            agentType: input.agentType,\r\n            prompt: input.prompt,\r\n            title: input.title,\r\n            modelString: input.modelString,\r\n            thinkingLevel,\r\n          });\r\n        }),\r\n    },\r\n    window: {\r\n      setTitle: t\r\n        .input(schemas.window.setTitle.input)\r\n        .output(schemas.window.setTitle.output)\r\n        .handler(({ context, input }) => {\r\n          return context.windowService.setTitle(input.title);\r\n        }),\r\n    },\r\n    terminal: {\r\n      create: t\r\n        .input(schemas.terminal.create.input)\r\n        .output(schemas.terminal.create.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.terminalService.create(input);\r\n        }),\r\n      close: t\r\n        .input(schemas.terminal.close.input)\r\n        .output(schemas.terminal.close.output)\r\n        .handler(({ context, input }) => {\r\n          return context.terminalService.close(input.sessionId);\r\n        }),\r\n      resize: t\r\n        .input(schemas.terminal.resize.input)\r\n        .output(schemas.terminal.resize.output)\r\n        .handler(({ context, input }) => {\r\n          return context.terminalService.resize(input);\r\n        }),\r\n      sendInput: t\r\n        .input(schemas.terminal.sendInput.input)\r\n        .output(schemas.terminal.sendInput.output)\r\n        .handler(({ context, input }) => {\r\n          context.terminalService.sendInput(input.sessionId, input.data);\r\n        }),\r\n      onOutput: t\r\n        .input(schemas.terminal.onOutput.input)\r\n        .output(schemas.terminal.onOutput.output)\r\n        .handler(async function* ({ context, input, signal }) {\r\n          if (signal?.aborted) {\r\n            return;\r\n          }\r\n\r\n          let resolveNext: ((value: string | null) => void) | null = null;\r\n          const queue: string[] = [];\r\n          let ended = false;\r\n\r\n          const push = (data: string) => {\r\n            if (ended) return;\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(data);\r\n            } else {\r\n              queue.push(data);\r\n            }\r\n          };\r\n\r\n          const unsubscribe = context.terminalService.onOutput(input.sessionId, push);\r\n\r\n          const onAbort = () => {\r\n            if (ended) return;\r\n            ended = true;\r\n\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(null);\r\n            }\r\n          };\r\n\r\n          if (signal) {\r\n            signal.addEventListener(\"abort\", onAbort, { once: true });\r\n          }\r\n\r\n          try {\r\n            while (!ended) {\r\n              if (queue.length > 0) {\r\n                yield queue.shift()!;\r\n                continue;\r\n              }\r\n\r\n              const data = await new Promise<string | null>((resolve) => {\r\n                resolveNext = resolve;\r\n              });\r\n\r\n              if (data === null || ended) {\r\n                break;\r\n              }\r\n\r\n              yield data;\r\n            }\r\n          } finally {\r\n            ended = true;\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            unsubscribe();\r\n          }\r\n        }),\r\n      attach: t\r\n        .input(schemas.terminal.attach.input)\r\n        .output(schemas.terminal.attach.output)\r\n        .handler(async function* ({ context, input, signal }) {\r\n          if (signal?.aborted) {\r\n            return;\r\n          }\r\n\r\n          type AttachMessage =\r\n            | { type: \"screenState\"; data: string }\r\n            | { type: \"output\"; data: string };\r\n\r\n          let resolveNext: ((value: AttachMessage | null) => void) | null = null;\r\n          const queue: AttachMessage[] = [];\r\n          let ended = false;\r\n\r\n          const push = (msg: AttachMessage) => {\r\n            if (ended) return;\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(msg);\r\n            } else {\r\n              queue.push(msg);\r\n            }\r\n          };\r\n\r\n          // CRITICAL: Subscribe to output FIRST, BEFORE capturing screen state.\r\n          // This ensures any output that arrives during/after getScreenState() is queued.\r\n          const unsubscribe = context.terminalService.onOutput(input.sessionId, (data) => {\r\n            push({ type: \"output\", data });\r\n          });\r\n\r\n          const onAbort = () => {\r\n            if (ended) return;\r\n            ended = true;\r\n\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(null);\r\n            }\r\n          };\r\n\r\n          if (signal) {\r\n            signal.addEventListener(\"abort\", onAbort, { once: true });\r\n          }\r\n\r\n          try {\r\n            // Capture screen state AFTER subscription is set up - guarantees no missed output\r\n            const screenState = context.terminalService.getScreenState(input.sessionId);\r\n\r\n            // First message is always the screen state (may be empty for new sessions)\r\n            yield { type: \"screenState\" as const, data: screenState };\r\n\r\n            // Now yield any queued output and continue with live stream\r\n            while (!ended) {\r\n              if (queue.length > 0) {\r\n                yield queue.shift()!;\r\n                continue;\r\n              }\r\n\r\n              const msg = await new Promise<AttachMessage | null>((resolve) => {\r\n                resolveNext = resolve;\r\n              });\r\n\r\n              if (msg === null || ended) {\r\n                break;\r\n              }\r\n\r\n              yield msg;\r\n            }\r\n          } finally {\r\n            ended = true;\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            unsubscribe();\r\n          }\r\n        }),\r\n      onExit: t\r\n        .input(schemas.terminal.onExit.input)\r\n        .output(schemas.terminal.onExit.output)\r\n        .handler(async function* ({ context, input, signal }) {\r\n          if (signal?.aborted) {\r\n            return;\r\n          }\r\n\r\n          let resolveNext: ((value: number | null) => void) | null = null;\r\n          const queue: number[] = [];\r\n          let ended = false;\r\n\r\n          const push = (code: number) => {\r\n            if (ended) return;\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(code);\r\n            } else {\r\n              queue.push(code);\r\n            }\r\n          };\r\n\r\n          const unsubscribe = context.terminalService.onExit(input.sessionId, push);\r\n\r\n          const onAbort = () => {\r\n            if (ended) return;\r\n            ended = true;\r\n\r\n            if (resolveNext) {\r\n              const resolve = resolveNext;\r\n              resolveNext = null;\r\n              resolve(null);\r\n            }\r\n          };\r\n\r\n          if (signal) {\r\n            signal.addEventListener(\"abort\", onAbort, { once: true });\r\n          }\r\n\r\n          try {\r\n            while (!ended) {\r\n              if (queue.length > 0) {\r\n                yield queue.shift()!;\r\n                // Terminal only exits once, so we can finish the stream\r\n                break;\r\n              }\r\n\r\n              const code = await new Promise<number | null>((resolve) => {\r\n                resolveNext = resolve;\r\n              });\r\n\r\n              if (code === null || ended) {\r\n                break;\r\n              }\r\n\r\n              yield code;\r\n              break;\r\n            }\r\n          } finally {\r\n            ended = true;\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            unsubscribe();\r\n          }\r\n        }),\r\n      openWindow: t\r\n        .input(schemas.terminal.openWindow.input)\r\n        .output(schemas.terminal.openWindow.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.terminalService.openWindow(input.workspaceId, input.sessionId);\r\n        }),\r\n      closeWindow: t\r\n        .input(schemas.terminal.closeWindow.input)\r\n        .output(schemas.terminal.closeWindow.output)\r\n        .handler(({ context, input }) => {\r\n          return context.terminalService.closeWindow(input.workspaceId);\r\n        }),\r\n      listSessions: t\r\n        .input(schemas.terminal.listSessions.input)\r\n        .output(schemas.terminal.listSessions.output)\r\n        .handler(({ context, input }) => {\r\n          return context.terminalService.getWorkspaceSessionIds(input.workspaceId);\r\n        }),\r\n      openNative: t\r\n        .input(schemas.terminal.openNative.input)\r\n        .output(schemas.terminal.openNative.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.terminalService.openNative(input.workspaceId);\r\n        }),\r\n    },\r\n    update: {\r\n      check: t\r\n        .input(schemas.update.check.input)\r\n        .output(schemas.update.check.output)\r\n        .handler(async ({ context }) => {\r\n          return context.updateService.check();\r\n        }),\r\n      download: t\r\n        .input(schemas.update.download.input)\r\n        .output(schemas.update.download.output)\r\n        .handler(async ({ context }) => {\r\n          return context.updateService.download();\r\n        }),\r\n      install: t\r\n        .input(schemas.update.install.input)\r\n        .output(schemas.update.install.output)\r\n        .handler(({ context }) => {\r\n          return context.updateService.install();\r\n        }),\r\n      onStatus: t\r\n        .input(schemas.update.onStatus.input)\r\n        .output(schemas.update.onStatus.output)\r\n        .handler(async function* ({ context, signal }) {\r\n          if (signal?.aborted) {\r\n            return;\r\n          }\r\n\r\n          const queue = createAsyncEventQueue<UpdateStatus>();\r\n          const unsubscribe = context.updateService.onStatus(queue.push);\r\n\r\n          const onAbort = () => {\r\n            queue.end();\r\n          };\r\n\r\n          if (signal) {\r\n            signal.addEventListener(\"abort\", onAbort, { once: true });\r\n          }\r\n\r\n          try {\r\n            yield* queue.iterate();\r\n          } finally {\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            queue.end();\r\n            unsubscribe();\r\n          }\r\n        }),\r\n    },\r\n    menu: {\r\n      onOpenSettings: t\r\n        .input(schemas.menu.onOpenSettings.input)\r\n        .output(schemas.menu.onOpenSettings.output)\r\n        .handler(async function* ({ context, signal }) {\r\n          if (signal?.aborted) {\r\n            return;\r\n          }\r\n\r\n          // Use a sentinel value to signal events since void/undefined can't be queued\r\n          const queue = createAsyncEventQueue<true>();\r\n          const unsubscribe = context.menuEventService.onOpenSettings(() => queue.push(true));\r\n\r\n          const onAbort = () => {\r\n            queue.end();\r\n          };\r\n\r\n          if (signal) {\r\n            signal.addEventListener(\"abort\", onAbort, { once: true });\r\n          }\r\n\r\n          try {\r\n            for await (const _ of queue.iterate()) {\r\n              yield undefined;\r\n            }\r\n          } finally {\r\n            signal?.removeEventListener(\"abort\", onAbort);\r\n            queue.end();\r\n            unsubscribe();\r\n          }\r\n        }),\r\n    },\r\n    voice: {\r\n      transcribe: t\r\n        .input(schemas.voice.transcribe.input)\r\n        .output(schemas.voice.transcribe.output)\r\n        .handler(async ({ context, input }) => {\r\n          return context.voiceService.transcribe(input.audioBase64);\r\n        }),\r\n    },\r\n    experiments: {\r\n      getAll: t\r\n        .input(schemas.experiments.getAll.input)\r\n        .output(schemas.experiments.getAll.output)\r\n        .handler(({ context }) => {\r\n          return context.experimentsService.getAll();\r\n        }),\r\n      reload: t\r\n        .input(schemas.experiments.reload.input)\r\n        .output(schemas.experiments.reload.output)\r\n        .handler(async ({ context }) => {\r\n          await context.experimentsService.refreshAll();\r\n        }),\r\n    },\r\n    debug: {\r\n      triggerStreamError: t\r\n        .input(schemas.debug.triggerStreamError.input)\r\n        .output(schemas.debug.triggerStreamError.output)\r\n        .handler(({ context, input }) => {\r\n          return context.workspaceService.debugTriggerStreamError(\r\n            input.workspaceId,\r\n            input.errorMessage\r\n          );\r\n        }),\r\n    },\r\n    telemetry: {\r\n      track: t\r\n        .input(schemas.telemetry.track.input)\r\n        .output(schemas.telemetry.track.output)\r\n        .handler(({ context, input }) => {\r\n          context.telemetryService.capture(input);\r\n        }),\r\n      status: t\r\n        .input(schemas.telemetry.status.input)\r\n        .output(schemas.telemetry.status.output)\r\n        .handler(({ context }) => {\r\n          return {\r\n            enabled: context.telemetryService.isEnabled(),\r\n            explicit: context.telemetryService.isExplicitlyDisabled(),\r\n          };\r\n        }),\r\n    },\r\n    signing: {\r\n      capabilities: t\r\n        .input(schemas.signing.capabilities.input)\r\n        .output(schemas.signing.capabilities.output)\r\n        .handler(async ({ context }) => {\r\n          return context.signingService.getCapabilities();\r\n        }),\r\n      signMessage: t\r\n        .input(schemas.signing.signMessage.input)\r\n        .output(schemas.signing.signMessage.output)\r\n        .handler(({ context, input }) => {\r\n          return context.signingService.signMessage(input.content);\r\n        }),\r\n      clearIdentityCache: t\r\n        .input(schemas.signing.clearIdentityCache.input)\r\n        .output(schemas.signing.clearIdentityCache.output)\r\n        .handler(({ context }) => {\r\n          context.signingService.clearIdentityCache();\r\n          return { success: true };\r\n        }),\r\n    },\r\n    modelPresets: {\r\n      list: t\r\n        .input(schemas.modelPresets.list.input)\r\n        .output(schemas.modelPresets.list.output)\r\n        .handler(({ context }) => context.modelPresetsService.listPresets()),\r\n      save: t\r\n        .input(schemas.modelPresets.save.input)\r\n        .output(schemas.modelPresets.save.output)\r\n        .handler(({ context, input }) =>\r\n          context.modelPresetsService.savePreset(input.name, input.models, input.description)\r\n        ),\r\n      get: t\r\n        .input(schemas.modelPresets.get.input)\r\n        .output(schemas.modelPresets.get.output)\r\n        .handler(async ({ context, input }) => {\r\n          const preset = await context.modelPresetsService.getPreset(input.id);\r\n          return preset ?? null;\r\n        }),\r\n      delete: t\r\n        .input(schemas.modelPresets.delete.input)\r\n        .output(schemas.modelPresets.delete.output)\r\n        .handler(({ context, input }) => context.modelPresetsService.deletePreset(input.id)),\r\n      update: t\r\n        .input(schemas.modelPresets.update.input)\r\n        .output(schemas.modelPresets.update.output)\r\n        .handler(({ context, input }) =>\r\n          context.modelPresetsService.updatePreset(input.id, {\r\n            name: input.name,\r\n            description: input.description,\r\n            models: input.models,\r\n          })\r\n        ),\r\n      export: t\r\n        .input(schemas.modelPresets.export.input)\r\n        .output(schemas.modelPresets.export.output)\r\n        .handler(({ context, input }) =>\r\n          context.modelPresetsService.exportPresets(input.ids)\r\n        ),\r\n      import: t\r\n        .input(schemas.modelPresets.import.input)\r\n        .output(schemas.modelPresets.import.output)\r\n        .handler(({ context, input }) =>\r\n          context.modelPresetsService.importPresets(input.json)\r\n        ),\r\n    },\r\n    modelHealth: {\r\n      checkModel: t\r\n        .input(schemas.modelHealth.checkModel.input)\r\n        .output(schemas.modelHealth.checkModel.output)\r\n        .handler(({ context, input }) =>\r\n          context.modelHealthService.checkModel(input.provider, input.modelId, input.metadata)\r\n        ),\r\n      checkAll: t\r\n        .input(schemas.modelHealth.checkAll.input)\r\n        .output(schemas.modelHealth.checkAll.output)\r\n        .handler(({ context, input }) =>\r\n          context.modelHealthService.checkAllModels(input.models)\r\n        ),\r\n      getLastResults: t\r\n        .input(schemas.modelHealth.getLastResults.input)\r\n        .output(schemas.modelHealth.getLastResults.output)\r\n        .handler(({ context }) => context.modelHealthService.getLastResults()),\r\n    },\r\n  });\r\n};\r\n\r\nexport type AppRouter = ReturnType<typeof router>;\r\n"]}