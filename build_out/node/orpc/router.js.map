{"version":3,"file":"router.js","sourceRoot":"","sources":["../../../src/node/orpc/router.ts"],"names":[],"mappings":"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","sourcesContent":["import { os } from \"@orpc/server\";\nimport * as schemas from \"@/common/orpc/schemas\";\nimport type { ORPCContext } from \"./context\";\nimport {\n  MUX_GATEWAY_ORIGIN,\n  MUX_GATEWAY_SESSION_EXPIRED_MESSAGE,\n} from \"@/common/constants/muxGatewayOAuth\";\nimport { Err, Ok } from \"@/common/types/result\";\nimport { resolveProviderCredentials } from \"@/node/utils/providerRequirements\";\nimport { generateWorkspaceIdentity } from \"@/node/services/workspaceTitleGenerator\";\nimport type {\n  UpdateStatus,\n  WorkspaceActivitySnapshot,\n  WorkspaceChatMessage,\n  WorkspaceStatsSnapshot,\n  FrontendWorkspaceMetadataSchemaType,\n} from \"@/common/orpc/types\";\nimport type { WorkspaceMetadata } from \"@/common/types/workspace\";\nimport { createAuthMiddleware } from \"./authMiddleware\";\nimport { createAsyncMessageQueue } from \"@/common/utils/asyncMessageQueue\";\nimport { createReplayBufferedStreamMessageRelay } from \"./replayBufferedStreamMessageRelay\";\n\nimport { createRuntime, checkRuntimeAvailability } from \"@/node/runtime/runtimeFactory\";\nimport { createRuntimeForWorkspace } from \"@/node/runtime/runtimeHelpers\";\nimport { hasNonEmptyPlanFile, readPlanFile } from \"@/node/utils/runtime/helpers\";\nimport { secretsToRecord } from \"@/common/types/secrets\";\nimport { roundToBase2 } from \"@/common/telemetry/utils\";\nimport { createAsyncEventQueue } from \"@/common/utils/asyncEventIterator\";\nimport {\n  DEFAULT_LAYOUT_PRESETS_CONFIG,\n  isLayoutPresetsConfigEmpty,\n  normalizeLayoutPresetsConfig,\n} from \"@/common/types/uiLayouts\";\nimport { normalizeAgentAiDefaults } from \"@/common/types/agentAiDefaults\";\nimport { isValidModelFormat, normalizeGatewayModel } from \"@/common/utils/ai/models\";\nimport {\n  DEFAULT_TASK_SETTINGS,\n  normalizeSubagentAiDefaults,\n  normalizeTaskSettings,\n} from \"@/common/types/tasks\";\nimport {\n  discoverAgentSkills,\n  discoverAgentSkillsDiagnostics,\n  readAgentSkill,\n} from \"@/node/services/agentSkills/agentSkillsService\";\nimport {\n  discoverAgentDefinitions,\n  readAgentDefinition,\n  resolveAgentFrontmatter,\n} from \"@/node/services/agentDefinitions/agentDefinitionsService\";\nimport { isAgentEffectivelyDisabled } from \"@/node/services/agentDefinitions/agentEnablement\";\nimport { isWorkspaceArchived } from \"@/common/utils/archive\";\nimport assert from \"node:assert/strict\";\nimport * as fsPromises from \"fs/promises\";\nimport * as path from \"node:path\";\n\nimport type { MuxMessage } from \"@/common/types/message\";\nimport { coerceThinkingLevel } from \"@/common/types/thinking\";\nimport { normalizeLegacyMuxMetadata } from \"@/node/utils/messages/legacy\";\nimport { log } from \"@/node/services/log\";\nimport {\n  readSubagentTranscriptArtifactsFile,\n  type SubagentTranscriptArtifactIndexEntry,\n} from \"@/node/services/subagentTranscriptArtifacts\";\n\n/**\n * Resolves runtime and discovery path for agent operations.\n * - When workspaceId is provided: uses workspace's runtime config (SSH, local, worktree)\n * - When only projectPath is provided: uses local runtime with project path\n * - When disableWorkspaceAgents is true: still uses workspace runtime but discovers from projectPath\n */\nasync function resolveAgentDiscoveryContext(\n  context: ORPCContext,\n  input: { projectPath?: string; workspaceId?: string; disableWorkspaceAgents?: boolean }\n): Promise<{\n  runtime: ReturnType<typeof createRuntime>;\n  discoveryPath: string;\n  metadata?: WorkspaceMetadata;\n}> {\n  if (!input.projectPath && !input.workspaceId) {\n    throw new Error(\"Either projectPath or workspaceId must be provided\");\n  }\n\n  if (input.workspaceId) {\n    const metadataResult = await context.aiService.getWorkspaceMetadata(input.workspaceId);\n    if (!metadataResult.success) {\n      throw new Error(metadataResult.error);\n    }\n    const metadata = metadataResult.data;\n    const runtime = createRuntimeForWorkspace(metadata);\n    // When workspace agents disabled, discover from project path instead of worktree\n    // (but still use the workspace's runtime for SSH compatibility)\n    const discoveryPath = input.disableWorkspaceAgents\n      ? metadata.projectPath\n      : runtime.getWorkspacePath(metadata.projectPath, metadata.name);\n    return { runtime, discoveryPath, metadata };\n  }\n\n  // No workspace - use local runtime with project path\n  const runtime = createRuntime(\n    { type: \"local\", srcBaseDir: context.config.srcDir },\n    { projectPath: input.projectPath! }\n  );\n  return { runtime, discoveryPath: input.projectPath! };\n}\n\nfunction isErrnoWithCode(error: unknown, code: string): boolean {\n  return Boolean(error && typeof error === \"object\" && \"code\" in error && error.code === code);\n}\n\nfunction isPathInsideDir(dirPath: string, filePath: string): boolean {\n  const resolvedDir = path.resolve(dirPath);\n  const resolvedFile = path.resolve(filePath);\n  const relative = path.relative(resolvedDir, resolvedFile);\n\n  return relative === \"\" || (!relative.startsWith(\"..\") && !path.isAbsolute(relative));\n}\n\nfunction normalizeMuxMessageFromDisk(value: unknown): MuxMessage | null {\n  if (!value || typeof value !== \"object\") {\n    return null;\n  }\n\n  // Older history may have createdAt serialized as a string; coerce back to Date for ORPC.\n  const obj = value as { createdAt?: unknown };\n  if (typeof obj.createdAt === \"string\") {\n    const parsed = new Date(obj.createdAt);\n    if (Number.isFinite(parsed.getTime())) {\n      obj.createdAt = parsed;\n    } else {\n      delete obj.createdAt;\n    }\n  }\n\n  return normalizeLegacyMuxMetadata(value as MuxMessage);\n}\n\nasync function readChatJsonlAllowMissing(params: {\n  chatPath: string;\n  logLabel: string;\n}): Promise<MuxMessage[] | null> {\n  try {\n    const data = await fsPromises.readFile(params.chatPath, \"utf-8\");\n    const lines = data.split(\"\\n\").filter((line) => line.trim());\n    const messages: MuxMessage[] = [];\n\n    for (let i = 0; i < lines.length; i++) {\n      try {\n        const parsed = JSON.parse(lines[i]) as unknown;\n        const message = normalizeMuxMessageFromDisk(parsed);\n        if (message) {\n          messages.push(message);\n        }\n      } catch (parseError) {\n        log.warn(\n          `Skipping malformed JSON at line ${i + 1} in ${params.logLabel}:`,\n          parseError instanceof Error ? parseError.message : String(parseError),\n          \"\\nLine content:\",\n          lines[i].substring(0, 100) + (lines[i].length > 100 ? \"...\" : \"\")\n        );\n      }\n    }\n\n    return messages;\n  } catch (error: unknown) {\n    if (isErrnoWithCode(error, \"ENOENT\")) {\n      return null;\n    }\n\n    throw error;\n  }\n}\n\nasync function readPartialJsonBestEffort(partialPath: string): Promise<MuxMessage | null> {\n  try {\n    const raw = await fsPromises.readFile(partialPath, \"utf-8\");\n    const parsed = JSON.parse(raw) as unknown;\n    return normalizeMuxMessageFromDisk(parsed);\n  } catch (error: unknown) {\n    if (isErrnoWithCode(error, \"ENOENT\")) {\n      return null;\n    }\n\n    // Never fail transcript viewing because partial.json is corrupted.\n    log.warn(\"Failed to read partial.json for transcript\", {\n      partialPath,\n      error: error instanceof Error ? error.message : String(error),\n    });\n    return null;\n  }\n}\n\nfunction mergePartialIntoHistory(messages: MuxMessage[], partial: MuxMessage | null): MuxMessage[] {\n  if (!partial) {\n    return messages;\n  }\n\n  const partialSeq = partial.metadata?.historySequence;\n  if (partialSeq === undefined) {\n    return [...messages, partial];\n  }\n\n  const existingIndex = messages.findIndex((m) => m.metadata?.historySequence === partialSeq);\n  if (existingIndex >= 0) {\n    const existing = messages[existingIndex];\n    const shouldReplace = (partial.parts?.length ?? 0) > (existing.parts?.length ?? 0);\n    if (!shouldReplace) {\n      return messages;\n    }\n\n    const next = [...messages];\n    next[existingIndex] = partial;\n    return next;\n  }\n\n  // Insert by historySequence to keep ordering stable.\n  const insertIndex = messages.findIndex((m) => {\n    const seq = m.metadata?.historySequence;\n    return typeof seq === \"number\" && seq > partialSeq;\n  });\n\n  if (insertIndex < 0) {\n    return [...messages, partial];\n  }\n\n  const next = [...messages];\n  next.splice(insertIndex, 0, partial);\n  return next;\n}\n\nasync function findSubagentTranscriptEntryByScanningSessions(params: {\n  sessionsDir: string;\n  taskId: string;\n}): Promise<{ workspaceId: string; entry: SubagentTranscriptArtifactIndexEntry } | null> {\n  let best: { workspaceId: string; entry: SubagentTranscriptArtifactIndexEntry } | null = null;\n\n  let dirents: Array<{ name: string; isDirectory: () => boolean }> = [];\n  try {\n    dirents = await fsPromises.readdir(params.sessionsDir, { withFileTypes: true });\n  } catch (error: unknown) {\n    if (isErrnoWithCode(error, \"ENOENT\")) {\n      return null;\n    }\n    throw error;\n  }\n\n  for (const dirent of dirents) {\n    if (!dirent.isDirectory()) {\n      continue;\n    }\n\n    const workspaceId = dirent.name;\n    if (!workspaceId) {\n      continue;\n    }\n\n    const sessionDir = path.join(params.sessionsDir, workspaceId);\n    const artifacts = await readSubagentTranscriptArtifactsFile(sessionDir);\n    const entry = artifacts.artifactsByChildTaskId[params.taskId];\n    if (!entry) {\n      continue;\n    }\n\n    if (!best || entry.updatedAtMs > best.entry.updatedAtMs) {\n      best = { workspaceId, entry };\n    }\n  }\n\n  return best;\n}\n\nexport const router = (authToken?: string) => {\n  const t = os.$context<ORPCContext>().use(createAuthMiddleware(authToken));\n\n  return t.router({\n    tokenizer: {\n      countTokens: t\n        .input(schemas.tokenizer.countTokens.input)\n        .output(schemas.tokenizer.countTokens.output)\n        .handler(async ({ context, input }) => {\n          return context.tokenizerService.countTokens(input.model, input.text);\n        }),\n      countTokensBatch: t\n        .input(schemas.tokenizer.countTokensBatch.input)\n        .output(schemas.tokenizer.countTokensBatch.output)\n        .handler(async ({ context, input }) => {\n          return context.tokenizerService.countTokensBatch(input.model, input.texts);\n        }),\n      calculateStats: t\n        .input(schemas.tokenizer.calculateStats.input)\n        .output(schemas.tokenizer.calculateStats.output)\n        .handler(async ({ context, input }) => {\n          return context.tokenizerService.calculateStats(\n            input.workspaceId,\n            input.messages,\n            input.model\n          );\n        }),\n    },\n    splashScreens: {\n      getViewedSplashScreens: t\n        .input(schemas.splashScreens.getViewedSplashScreens.input)\n        .output(schemas.splashScreens.getViewedSplashScreens.output)\n        .handler(({ context }) => {\n          const config = context.config.loadConfigOrDefault();\n          return config.viewedSplashScreens ?? [];\n        }),\n      markSplashScreenViewed: t\n        .input(schemas.splashScreens.markSplashScreenViewed.input)\n        .output(schemas.splashScreens.markSplashScreenViewed.output)\n        .handler(async ({ context, input }) => {\n          await context.config.editConfig((config) => {\n            const viewed = config.viewedSplashScreens ?? [];\n            if (!viewed.includes(input.splashId)) {\n              viewed.push(input.splashId);\n            }\n            return {\n              ...config,\n              viewedSplashScreens: viewed,\n            };\n          });\n        }),\n    },\n    server: {\n      getLaunchProject: t\n        .input(schemas.server.getLaunchProject.input)\n        .output(schemas.server.getLaunchProject.output)\n        .handler(async ({ context }) => {\n          return context.serverService.getLaunchProject();\n        }),\n      getSshHost: t\n        .input(schemas.server.getSshHost.input)\n        .output(schemas.server.getSshHost.output)\n        .handler(({ context }) => {\n          return context.serverService.getSshHost() ?? null;\n        }),\n      setSshHost: t\n        .input(schemas.server.setSshHost.input)\n        .output(schemas.server.setSshHost.output)\n        .handler(async ({ context, input }) => {\n          // Update in-memory value\n          context.serverService.setSshHost(input.sshHost ?? undefined);\n          // Persist to config file\n          await context.config.editConfig((config) => ({\n            ...config,\n            serverSshHost: input.sshHost ?? undefined,\n          }));\n        }),\n      getApiServerStatus: t\n        .input(schemas.server.getApiServerStatus.input)\n        .output(schemas.server.getApiServerStatus.output)\n        .handler(({ context }) => {\n          const config = context.config.loadConfigOrDefault();\n          const configuredBindHost = config.apiServerBindHost ?? null;\n          const configuredServeWebUi = config.apiServerServeWebUi === true;\n          const configuredPort = config.apiServerPort ?? null;\n\n          const info = context.serverService.getServerInfo();\n\n          return {\n            running: info !== null,\n            baseUrl: info?.baseUrl ?? null,\n            bindHost: info?.bindHost ?? null,\n            port: info?.port ?? null,\n            networkBaseUrls: info?.networkBaseUrls ?? [],\n            token: info?.token ?? null,\n            configuredBindHost,\n            configuredPort,\n            configuredServeWebUi,\n          };\n        }),\n      setApiServerSettings: t\n        .input(schemas.server.setApiServerSettings.input)\n        .output(schemas.server.setApiServerSettings.output)\n        .handler(async ({ context, input }) => {\n          const prevConfig = context.config.loadConfigOrDefault();\n          const prevBindHost = prevConfig.apiServerBindHost;\n          const prevServeWebUi = prevConfig.apiServerServeWebUi;\n          const prevPort = prevConfig.apiServerPort;\n          const wasRunning = context.serverService.isServerRunning();\n\n          const bindHost = input.bindHost?.trim() ? input.bindHost.trim() : undefined;\n          const serveWebUi =\n            input.serveWebUi === undefined\n              ? prevServeWebUi\n              : input.serveWebUi === true\n                ? true\n                : undefined;\n          const port = input.port === null || input.port === 0 ? undefined : input.port;\n\n          if (wasRunning) {\n            await context.serverService.stopServer();\n          }\n\n          await context.config.editConfig((config) => {\n            config.apiServerServeWebUi = serveWebUi;\n            config.apiServerBindHost = bindHost;\n            config.apiServerPort = port;\n            return config;\n          });\n\n          if (process.env.MUX_NO_API_SERVER !== \"1\") {\n            const authToken = context.serverService.getApiAuthToken();\n            if (!authToken) {\n              throw new Error(\"API server auth token not initialized\");\n            }\n\n            const envPort = process.env.MUX_SERVER_PORT\n              ? Number.parseInt(process.env.MUX_SERVER_PORT, 10)\n              : undefined;\n            const portToUse = envPort ?? port ?? 0;\n            const hostToUse = bindHost ?? \"127.0.0.1\";\n\n            try {\n              await context.serverService.startServer({\n                muxHome: context.config.rootDir,\n                context,\n                authToken,\n                serveStatic: serveWebUi === true,\n                host: hostToUse,\n                port: portToUse,\n              });\n            } catch (error) {\n              await context.config.editConfig((config) => {\n                config.apiServerServeWebUi = prevServeWebUi;\n                config.apiServerBindHost = prevBindHost;\n                config.apiServerPort = prevPort;\n                return config;\n              });\n\n              if (wasRunning) {\n                const portToRestore = envPort ?? prevPort ?? 0;\n                const hostToRestore = prevBindHost ?? \"127.0.0.1\";\n\n                try {\n                  await context.serverService.startServer({\n                    muxHome: context.config.rootDir,\n                    context,\n                    serveStatic: prevServeWebUi === true,\n                    authToken,\n                    host: hostToRestore,\n                    port: portToRestore,\n                  });\n                } catch {\n                  // Best effort - we'll surface the original error.\n                }\n              }\n\n              throw error;\n            }\n          }\n\n          const nextConfig = context.config.loadConfigOrDefault();\n          const configuredBindHost = nextConfig.apiServerBindHost ?? null;\n          const configuredServeWebUi = nextConfig.apiServerServeWebUi === true;\n          const configuredPort = nextConfig.apiServerPort ?? null;\n\n          const info = context.serverService.getServerInfo();\n\n          return {\n            running: info !== null,\n            baseUrl: info?.baseUrl ?? null,\n            bindHost: info?.bindHost ?? null,\n            port: info?.port ?? null,\n            networkBaseUrls: info?.networkBaseUrls ?? [],\n            token: info?.token ?? null,\n            configuredBindHost,\n            configuredPort,\n            configuredServeWebUi,\n          };\n        }),\n    },\n    features: {\n      getStatsTabState: t\n        .input(schemas.features.getStatsTabState.input)\n        .output(schemas.features.getStatsTabState.output)\n        .handler(async ({ context }) => {\n          const state = await context.featureFlagService.getStatsTabState();\n          context.sessionTimingService.setStatsTabState(state);\n          return state;\n        }),\n      setStatsTabOverride: t\n        .input(schemas.features.setStatsTabOverride.input)\n        .output(schemas.features.setStatsTabOverride.output)\n        .handler(async ({ context, input }) => {\n          const state = await context.featureFlagService.setStatsTabOverride(input.override);\n          context.sessionTimingService.setStatsTabState(state);\n          return state;\n        }),\n    },\n    iconTheme: {\n      getActiveThemeId: t\n        .input(schemas.iconTheme.getActiveThemeId.input)\n        .output(schemas.iconTheme.getActiveThemeId.output)\n        .handler(async ({ context }) => {\n          return context.iconThemeService.getActiveThemeId();\n        }),\n      setActiveTheme: t\n        .input(schemas.iconTheme.setActiveTheme.input)\n        .output(schemas.iconTheme.setActiveTheme.output)\n        .handler(async ({ context, input }) => {\n          await context.iconThemeService.setActiveTheme(input.themeId);\n        }),\n      getInstalledThemes: t\n        .input(schemas.iconTheme.getInstalledThemes.input)\n        .output(schemas.iconTheme.getInstalledThemes.output)\n        .handler(async ({ context }) => {\n          return context.iconThemeService.getInstalledThemes();\n        }),\n      deleteTheme: t\n        .input(schemas.iconTheme.deleteTheme.input)\n        .output(schemas.iconTheme.deleteTheme.output)\n        .handler(async ({ context, input }) => {\n          return context.iconThemeService.deleteTheme(input.themeId);\n        }),\n      getActiveThemeDocument: t\n        .input(schemas.iconTheme.getActiveThemeDocument.input)\n        .output(schemas.iconTheme.getActiveThemeDocument.output)\n        .handler(async ({ context }) => {\n          return context.iconThemeService.getActiveThemeDocument();\n        }),\n      importVsix: t\n        .input(schemas.iconTheme.importVsix.input)\n        .output(schemas.iconTheme.importVsix.output)\n        .handler(async ({ context, input }) => {\n          return context.iconThemeService.importVsix(input.vsixBase64);\n        }),\n      getIconFile: t\n        .input(schemas.iconTheme.getIconFile.input)\n        .output(schemas.iconTheme.getIconFile.output)\n        .handler(async ({ context, input }) => {\n          return context.iconThemeService.getIconFile(input.themeId, input.iconPath);\n        }),\n    },\n    config: {\n      getConfig: t\n        .input(schemas.config.getConfig.input)\n        .output(schemas.config.getConfig.output)\n        .handler(({ context }) => {\n          const config = context.config.loadConfigOrDefault();\n          // Determine governor enrollment: requires both URL and token\n          const muxGovernorUrl = config.muxGovernorUrl ?? null;\n          const muxGovernorEnrolled = Boolean(config.muxGovernorUrl && config.muxGovernorToken);\n          return {\n            taskSettings: config.taskSettings ?? DEFAULT_TASK_SETTINGS,\n            muxGatewayEnabled: config.muxGatewayEnabled,\n            muxGatewayModels: config.muxGatewayModels,\n            defaultModel: config.defaultModel,\n            hiddenModels: config.hiddenModels,\n            preferredCompactionModel: config.preferredCompactionModel,\n            stopCoderWorkspaceOnArchive: config.stopCoderWorkspaceOnArchive !== false,\n            agentAiDefaults: config.agentAiDefaults ?? {},\n            // Legacy fields (downgrade compatibility)\n            subagentAiDefaults: config.subagentAiDefaults ?? {},\n            // Mux Governor enrollment status (safe fields only - token never exposed)\n            muxGovernorUrl,\n            muxGovernorEnrolled,\n          };\n        }),\n      updateAgentAiDefaults: t\n        .input(schemas.config.updateAgentAiDefaults.input)\n        .output(schemas.config.updateAgentAiDefaults.output)\n        .handler(async ({ context, input }) => {\n          await context.config.editConfig((config) => {\n            const normalized = normalizeAgentAiDefaults(input.agentAiDefaults);\n\n            const legacySubagentDefaultsRaw: Record<string, unknown> = {};\n            for (const [agentType, entry] of Object.entries(normalized)) {\n              if (agentType === \"plan\" || agentType === \"exec\" || agentType === \"compact\") {\n                continue;\n              }\n              legacySubagentDefaultsRaw[agentType] = entry;\n            }\n\n            const legacySubagentDefaults = normalizeSubagentAiDefaults(legacySubagentDefaultsRaw);\n\n            return {\n              ...config,\n              agentAiDefaults: Object.keys(normalized).length > 0 ? normalized : undefined,\n              // Legacy fields (downgrade compatibility)\n              subagentAiDefaults:\n                Object.keys(legacySubagentDefaults).length > 0 ? legacySubagentDefaults : undefined,\n            };\n          });\n        }),\n      updateMuxGatewayPrefs: t\n        .input(schemas.config.updateMuxGatewayPrefs.input)\n        .output(schemas.config.updateMuxGatewayPrefs.output)\n        .handler(async ({ context, input }) => {\n          await context.config.editConfig((config) => {\n            const nextModels = Array.from(new Set(input.muxGatewayModels));\n            nextModels.sort();\n\n            return {\n              ...config,\n              muxGatewayEnabled: input.muxGatewayEnabled ? undefined : false,\n              muxGatewayModels: nextModels.length > 0 ? nextModels : undefined,\n            };\n          });\n        }),\n      updateModelPreferences: t\n        .input(schemas.config.updateModelPreferences.input)\n        .output(schemas.config.updateModelPreferences.output)\n        .handler(async ({ context, input }) => {\n          const normalizeModelString = (value: string): string | undefined => {\n            const trimmed = value.trim();\n            if (!trimmed) {\n              return undefined;\n            }\n\n            // Reject malformed mux-gateway strings (\"mux-gateway:provider\" without \"/model\").\n            if (trimmed.startsWith(\"mux-gateway:\") && !trimmed.includes(\"/\")) {\n              return undefined;\n            }\n\n            const normalized = normalizeGatewayModel(trimmed);\n            if (!isValidModelFormat(normalized)) {\n              return undefined;\n            }\n\n            return normalized;\n          };\n\n          await context.config.editConfig((config) => {\n            const next = { ...config };\n\n            if (input.defaultModel !== undefined) {\n              next.defaultModel = normalizeModelString(input.defaultModel);\n            }\n\n            if (input.hiddenModels !== undefined) {\n              const seen = new Set<string>();\n              const normalizedHidden: string[] = [];\n\n              for (const modelString of input.hiddenModels) {\n                const normalized = normalizeModelString(modelString);\n                if (!normalized) continue;\n                if (seen.has(normalized)) continue;\n                seen.add(normalized);\n                normalizedHidden.push(normalized);\n              }\n\n              next.hiddenModels = normalizedHidden;\n            }\n\n            if (input.preferredCompactionModel !== undefined) {\n              next.preferredCompactionModel = normalizeModelString(input.preferredCompactionModel);\n            }\n\n            return next;\n          });\n        }),\n      updateCoderPrefs: t\n        .input(schemas.config.updateCoderPrefs.input)\n        .output(schemas.config.updateCoderPrefs.output)\n        .handler(async ({ context, input }) => {\n          await context.config.editConfig((config) => {\n            return {\n              ...config,\n              // Default ON: store `false` only.\n              stopCoderWorkspaceOnArchive: input.stopCoderWorkspaceOnArchive ? undefined : false,\n            };\n          });\n        }),\n      saveConfig: t\n        .input(schemas.config.saveConfig.input)\n        .output(schemas.config.saveConfig.output)\n        .handler(async ({ context, input }) => {\n          await context.config.editConfig((config) => {\n            const normalizedTaskSettings = normalizeTaskSettings(input.taskSettings);\n            const result = { ...config, taskSettings: normalizedTaskSettings };\n\n            if (input.agentAiDefaults !== undefined) {\n              const normalized = normalizeAgentAiDefaults(input.agentAiDefaults);\n              result.agentAiDefaults = Object.keys(normalized).length > 0 ? normalized : undefined;\n\n              if (input.subagentAiDefaults === undefined) {\n                const legacySubagentDefaultsRaw: Record<string, unknown> = {};\n                for (const [agentType, entry] of Object.entries(normalized)) {\n                  if (agentType === \"plan\" || agentType === \"exec\" || agentType === \"compact\") {\n                    continue;\n                  }\n                  legacySubagentDefaultsRaw[agentType] = entry;\n                }\n\n                const legacySubagentDefaults =\n                  normalizeSubagentAiDefaults(legacySubagentDefaultsRaw);\n                result.subagentAiDefaults =\n                  Object.keys(legacySubagentDefaults).length > 0\n                    ? legacySubagentDefaults\n                    : undefined;\n              }\n            }\n\n            if (input.subagentAiDefaults !== undefined) {\n              const normalizedDefaults = normalizeSubagentAiDefaults(input.subagentAiDefaults);\n              result.subagentAiDefaults =\n                Object.keys(normalizedDefaults).length > 0 ? normalizedDefaults : undefined;\n\n              // Downgrade compatibility: keep agentAiDefaults in sync with legacy subagentAiDefaults.\n              // Only mutate keys previously managed by subagentAiDefaults so we don't clobber other\n              // agent defaults (e.g., UI-selectable custom agents).\n              const previousLegacy = config.subagentAiDefaults ?? {};\n              const nextAgentAiDefaults: Record<string, unknown> = {\n                ...(result.agentAiDefaults ?? config.agentAiDefaults ?? {}),\n              };\n\n              for (const legacyAgentType of Object.keys(previousLegacy)) {\n                if (\n                  legacyAgentType === \"plan\" ||\n                  legacyAgentType === \"exec\" ||\n                  legacyAgentType === \"compact\"\n                ) {\n                  continue;\n                }\n                if (!(legacyAgentType in normalizedDefaults)) {\n                  delete nextAgentAiDefaults[legacyAgentType];\n                }\n              }\n\n              for (const [agentType, entry] of Object.entries(normalizedDefaults)) {\n                if (agentType === \"plan\" || agentType === \"exec\" || agentType === \"compact\")\n                  continue;\n                nextAgentAiDefaults[agentType] = entry;\n              }\n\n              const normalizedAgent = normalizeAgentAiDefaults(nextAgentAiDefaults);\n              result.agentAiDefaults =\n                Object.keys(normalizedAgent).length > 0 ? normalizedAgent : undefined;\n            }\n\n            return result;\n          });\n\n          // Re-evaluate task queue in case more slots opened up\n          await context.taskService.maybeStartQueuedTasks();\n        }),\n      unenrollMuxGovernor: t\n        .input(schemas.config.unenrollMuxGovernor.input)\n        .output(schemas.config.unenrollMuxGovernor.output)\n        .handler(async ({ context }) => {\n          await context.config.editConfig((config) => {\n            const { muxGovernorUrl: _url, muxGovernorToken: _token, ...rest } = config;\n            return rest;\n          });\n\n          await context.policyService.refreshNow();\n        }),\n    },\n    uiLayouts: {\n      getAll: t\n        .input(schemas.uiLayouts.getAll.input)\n        .output(schemas.uiLayouts.getAll.output)\n        .handler(({ context }) => {\n          const config = context.config.loadConfigOrDefault();\n          return config.layoutPresets ?? DEFAULT_LAYOUT_PRESETS_CONFIG;\n        }),\n      saveAll: t\n        .input(schemas.uiLayouts.saveAll.input)\n        .output(schemas.uiLayouts.saveAll.output)\n        .handler(async ({ context, input }) => {\n          await context.config.editConfig((config) => {\n            const normalized = normalizeLayoutPresetsConfig(input.layoutPresets);\n            return {\n              ...config,\n              layoutPresets: isLayoutPresetsConfigEmpty(normalized) ? undefined : normalized,\n            };\n          });\n        }),\n    },\n    agents: {\n      list: t\n        .input(schemas.agents.list.input)\n        .output(schemas.agents.list.output)\n        .handler(async ({ context, input }) => {\n          // Wait for workspace init before discovery (SSH may not be ready yet)\n          if (input.workspaceId) {\n            await context.aiService.waitForInit(input.workspaceId);\n          }\n\n          const { runtime, discoveryPath, metadata } = await resolveAgentDiscoveryContext(\n            context,\n            input\n          );\n\n          // Agents can require a plan file before they're selectable (e.g., orchestrator).\n          // Fail closed: if plan state cannot be determined, treat it as missing.\n          let planReady = false;\n          if (input.workspaceId && metadata) {\n            try {\n              planReady = await hasNonEmptyPlanFile(\n                runtime,\n                metadata.name,\n                metadata.projectName,\n                input.workspaceId\n              );\n            } catch {\n              planReady = false;\n            }\n          }\n\n          const descriptors = await discoverAgentDefinitions(runtime, discoveryPath);\n\n          const cfg = context.config.loadConfigOrDefault();\n\n          const resolved = await Promise.all(\n            descriptors.map(async (descriptor) => {\n              try {\n                const resolvedFrontmatter = await resolveAgentFrontmatter(\n                  runtime,\n                  discoveryPath,\n                  descriptor.id\n                );\n\n                const effectivelyDisabled = isAgentEffectivelyDisabled({\n                  cfg,\n                  agentId: descriptor.id,\n                  resolvedFrontmatter,\n                });\n\n                // By default, disabled agents are omitted from discovery so they cannot be\n                // selected or cycled in the UI.\n                //\n                // Settings passes includeDisabled: true so users can opt in/out locally.\n                if (effectivelyDisabled && input.includeDisabled !== true) {\n                  return null;\n                }\n\n                // NOTE: hidden is opt-out. selectable is legacy opt-in.\n                const uiSelectableBase =\n                  typeof resolvedFrontmatter.ui?.hidden === \"boolean\"\n                    ? !resolvedFrontmatter.ui.hidden\n                    : typeof resolvedFrontmatter.ui?.selectable === \"boolean\"\n                      ? resolvedFrontmatter.ui.selectable\n                      : true;\n\n                const requiresPlan = resolvedFrontmatter.ui?.requires?.includes(\"plan\") ?? false;\n                const uiSelectable = requiresPlan && !planReady ? false : uiSelectableBase;\n\n                return {\n                  ...descriptor,\n                  name: resolvedFrontmatter.name,\n                  description: resolvedFrontmatter.description,\n                  uiSelectable,\n                  uiColor: resolvedFrontmatter.ui?.color,\n                  subagentRunnable: resolvedFrontmatter.subagent?.runnable ?? false,\n                  base: resolvedFrontmatter.base,\n                  aiDefaults: resolvedFrontmatter.ai,\n                  tools: resolvedFrontmatter.tools,\n                };\n              } catch {\n                return descriptor;\n              }\n            })\n          );\n\n          return resolved.filter((descriptor): descriptor is NonNullable<typeof descriptor> =>\n            Boolean(descriptor)\n          );\n        }),\n      get: t\n        .input(schemas.agents.get.input)\n        .output(schemas.agents.get.output)\n        .handler(async ({ context, input }) => {\n          // Wait for workspace init before discovery (SSH may not be ready yet)\n          if (input.workspaceId) {\n            await context.aiService.waitForInit(input.workspaceId);\n          }\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\n          return readAgentDefinition(runtime, discoveryPath, input.agentId);\n        }),\n    },\n    agentSkills: {\n      list: t\n        .input(schemas.agentSkills.list.input)\n        .output(schemas.agentSkills.list.output)\n        .handler(async ({ context, input }) => {\n          // Wait for workspace init before agent discovery (SSH may not be ready yet)\n          if (input.workspaceId) {\n            await context.aiService.waitForInit(input.workspaceId);\n          }\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\n          return discoverAgentSkills(runtime, discoveryPath);\n        }),\n      listDiagnostics: t\n        .input(schemas.agentSkills.listDiagnostics.input)\n        .output(schemas.agentSkills.listDiagnostics.output)\n        .handler(async ({ context, input }) => {\n          // Wait for workspace init before agent discovery (SSH may not be ready yet)\n          if (input.workspaceId) {\n            await context.aiService.waitForInit(input.workspaceId);\n          }\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\n          return discoverAgentSkillsDiagnostics(runtime, discoveryPath);\n        }),\n      get: t\n        .input(schemas.agentSkills.get.input)\n        .output(schemas.agentSkills.get.output)\n        .handler(async ({ context, input }) => {\n          // Wait for workspace init before agent discovery (SSH may not be ready yet)\n          if (input.workspaceId) {\n            await context.aiService.waitForInit(input.workspaceId);\n          }\n          const { runtime, discoveryPath } = await resolveAgentDiscoveryContext(context, input);\n          const result = await readAgentSkill(runtime, discoveryPath, input.skillName);\n          return result.package;\n        }),\n    },\n    providers: {\n      list: t\n        .input(schemas.providers.list.input)\n        .output(schemas.providers.list.output)\n        .handler(({ context }) => context.providerService.list()),\n      getConfig: t\n        .input(schemas.providers.getConfig.input)\n        .output(schemas.providers.getConfig.output)\n        .handler(({ context }) => context.providerService.getConfig()),\n      setProviderConfig: t\n        .input(schemas.providers.setProviderConfig.input)\n        .output(schemas.providers.setProviderConfig.output)\n        .handler(({ context, input }) =>\n          context.providerService.setConfig(input.provider, input.keyPath, input.value)\n        ),\n      setModels: t\n        .input(schemas.providers.setModels.input)\n        .output(schemas.providers.setModels.output)\n        .handler(({ context, input }) =>\n          context.providerService.setModels(input.provider, input.models)\n        ),\n      setModelMetadata: t\n        .input(schemas.providers.setModelMetadata.input)\n        .output(schemas.providers.setModelMetadata.output)\n        .handler(({ context, input }) =>\n          context.providerService.setModelMetadata(input.provider, input.modelId, input.metadata)\n        ),\n      onConfigChanged: t\n        .input(schemas.providers.onConfigChanged.input)\n        .output(schemas.providers.onConfigChanged.output)\n        .handler(async function* ({ context, signal }) {\n          let resolveNext: (() => void) | null = null;\n          let pendingNotification = false;\n          let ended = false;\n\n          const push = () => {\n            if (ended) return;\n            if (resolveNext) {\n              // Listener is waiting - wake it up\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve();\n            } else {\n              // No listener waiting yet - queue the notification\n              pendingNotification = true;\n            }\n          };\n\n          const unsubscribe = context.providerService.onConfigChanged(push);\n\n          // Consumers often cancel this subscription while there are no pending provider changes.\n          // If we block on a never-resolving Promise, AbortSignal cancellation can't unwind the\n          // generator, and we leak EventEmitter listeners across tests.\n          const onAbort = () => {\n            if (ended) return;\n            ended = true;\n            // Wake up the iterator if it's currently waiting.\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve();\n            } else {\n              pendingNotification = true;\n            }\n          };\n\n          if (signal) {\n            if (signal.aborted) {\n              onAbort();\n            } else {\n              signal.addEventListener(\"abort\", onAbort, { once: true });\n            }\n          }\n\n          try {\n            while (!ended) {\n              // If notification arrived before we started waiting, yield immediately\n              if (pendingNotification) {\n                pendingNotification = false;\n                if (ended) break;\n                yield undefined;\n                continue;\n              }\n\n              // Wait for next notification (or abort)\n              await new Promise<void>((resolve) => {\n                resolveNext = resolve;\n              });\n\n              if (ended) break;\n              yield undefined;\n            }\n          } finally {\n            ended = true;\n            signal?.removeEventListener(\"abort\", onAbort);\n            unsubscribe();\n          }\n        }),\n    },\n    policy: {\n      get: t\n        .input(schemas.policy.get.input)\n        .output(schemas.policy.get.output)\n        .handler(({ context }) => context.policyService.getPolicyGetResponse()),\n      onChanged: t\n        .input(schemas.policy.onChanged.input)\n        .output(schemas.policy.onChanged.output)\n        .handler(async function* ({ context, signal }) {\n          let resolveNext: (() => void) | null = null;\n          let pendingNotification = false;\n          let ended = false;\n\n          const push = () => {\n            if (ended) return;\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve();\n            } else {\n              pendingNotification = true;\n            }\n          };\n\n          const unsubscribe = context.policyService.onPolicyChanged(push);\n\n          const onAbort = () => {\n            if (ended) return;\n            ended = true;\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve();\n            } else {\n              pendingNotification = true;\n            }\n          };\n\n          if (signal) {\n            if (signal.aborted) {\n              onAbort();\n            } else {\n              signal.addEventListener(\"abort\", onAbort, { once: true });\n            }\n          }\n\n          try {\n            while (!ended) {\n              if (pendingNotification) {\n                pendingNotification = false;\n                if (ended) break;\n                yield undefined;\n                continue;\n              }\n\n              await new Promise<void>((resolve) => {\n                resolveNext = resolve;\n              });\n\n              if (ended) break;\n              yield undefined;\n            }\n          } finally {\n            ended = true;\n            signal?.removeEventListener(\"abort\", onAbort);\n            unsubscribe();\n          }\n        }),\n      refreshNow: t\n        .input(schemas.policy.refreshNow.input)\n        .output(schemas.policy.refreshNow.output)\n        .handler(async ({ context }) => {\n          const result = await context.policyService.refreshNow();\n          if (!result.success) {\n            return Err(result.error);\n          }\n          return Ok(context.policyService.getPolicyGetResponse());\n        }),\n    },\n    muxGateway: {\n      getAccountStatus: t\n        .input(schemas.muxGateway.getAccountStatus.input)\n        .output(schemas.muxGateway.getAccountStatus.output)\n        .handler(async ({ context }) => {\n          const providersConfig = context.config.loadProvidersConfig() ?? {};\n          const muxConfig = (providersConfig[\"mux-gateway\"] ?? {}) as Record<string, unknown>;\n          const creds = resolveProviderCredentials(\"mux-gateway\", {\n            couponCode: typeof muxConfig.couponCode === \"string\" ? muxConfig.couponCode : undefined,\n            voucher: typeof muxConfig.voucher === \"string\" ? muxConfig.voucher : undefined,\n          });\n\n          if (!creds.isConfigured || !creds.couponCode) {\n            return Err(\"Mux Gateway is not logged in\");\n          }\n\n          let response: Awaited<ReturnType<typeof fetch>>;\n          try {\n            response = await fetch(`${MUX_GATEWAY_ORIGIN}/api/v1/balance`, {\n              headers: {\n                Accept: \"application/json\",\n                Authorization: `Bearer ${creds.couponCode}`,\n              },\n            });\n          } catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            return Err(`Mux Gateway balance request failed: ${message}`);\n          }\n\n          if (response.status === 401) {\n            try {\n              // Best-effort auto-logout: clear local mux-gateway creds on session expiry.\n              context.providerService.setConfig(\"mux-gateway\", [\"couponCode\"], \"\");\n              context.providerService.setConfig(\"mux-gateway\", [\"voucher\"], \"\");\n            } catch {\n              // Ignore failures clearing local credentials\n            }\n\n            return Err(MUX_GATEWAY_SESSION_EXPIRED_MESSAGE);\n          }\n\n          if (!response.ok) {\n            let body = \"\";\n            try {\n              body = await response.text();\n            } catch {\n              // Ignore errors reading response body\n            }\n            const prefix = body.trim().slice(0, 200);\n            return Err(\n              `Mux Gateway balance request failed (HTTP ${response.status}): ${prefix || response.statusText\n              }`\n            );\n          }\n\n          let json: unknown;\n          try {\n            json = await response.json();\n          } catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            return Err(`Mux Gateway balance response was not valid JSON: ${message}`);\n          }\n\n          const payload = json as {\n            remaining_microdollars?: unknown;\n            ai_gateway_concurrent_requests_per_user?: unknown;\n          };\n\n          const remaining = payload.remaining_microdollars;\n          const concurrency = payload.ai_gateway_concurrent_requests_per_user;\n\n          if (\n            typeof remaining !== \"number\" ||\n            !Number.isFinite(remaining) ||\n            !Number.isInteger(remaining) ||\n            remaining < 0 ||\n            typeof concurrency !== \"number\" ||\n            !Number.isFinite(concurrency) ||\n            !Number.isInteger(concurrency) ||\n            concurrency < 0\n          ) {\n            return Err(\"Mux Gateway returned an invalid balance payload\");\n          }\n\n          return Ok({\n            remaining_microdollars: remaining,\n            ai_gateway_concurrent_requests_per_user: concurrency,\n          });\n        }),\n    },\n\n    muxGatewayOauth: {\n      startDesktopFlow: t\n        .input(schemas.muxGatewayOauth.startDesktopFlow.input)\n        .output(schemas.muxGatewayOauth.startDesktopFlow.output)\n        .handler(({ context }) => {\n          return context.muxGatewayOauthService.startDesktopFlow();\n        }),\n      waitForDesktopFlow: t\n        .input(schemas.muxGatewayOauth.waitForDesktopFlow.input)\n        .output(schemas.muxGatewayOauth.waitForDesktopFlow.output)\n        .handler(({ context, input }) => {\n          return context.muxGatewayOauthService.waitForDesktopFlow(input.flowId, {\n            timeoutMs: input.timeoutMs,\n          });\n        }),\n      cancelDesktopFlow: t\n        .input(schemas.muxGatewayOauth.cancelDesktopFlow.input)\n        .output(schemas.muxGatewayOauth.cancelDesktopFlow.output)\n        .handler(async ({ context, input }) => {\n          await context.muxGatewayOauthService.cancelDesktopFlow(input.flowId);\n        }),\n    },\n    copilotOauth: {\n      startDeviceFlow: t\n        .input(schemas.copilotOauth.startDeviceFlow.input)\n        .output(schemas.copilotOauth.startDeviceFlow.output)\n        .handler(({ context }) => {\n          return context.copilotOauthService.startDeviceFlow();\n        }),\n      waitForDeviceFlow: t\n        .input(schemas.copilotOauth.waitForDeviceFlow.input)\n        .output(schemas.copilotOauth.waitForDeviceFlow.output)\n        .handler(({ context, input }) => {\n          return context.copilotOauthService.waitForDeviceFlow(input.flowId, {\n            timeoutMs: input.timeoutMs,\n          });\n        }),\n      cancelDeviceFlow: t\n        .input(schemas.copilotOauth.cancelDeviceFlow.input)\n        .output(schemas.copilotOauth.cancelDeviceFlow.output)\n        .handler(({ context, input }) => {\n          context.copilotOauthService.cancelDeviceFlow(input.flowId);\n        }),\n    },\n    muxGovernorOauth: {\n      startDesktopFlow: t\n        .input(schemas.muxGovernorOauth.startDesktopFlow.input)\n        .output(schemas.muxGovernorOauth.startDesktopFlow.output)\n        .handler(({ context, input }) => {\n          return context.muxGovernorOauthService.startDesktopFlow({\n            governorOrigin: input.governorOrigin,\n          });\n        }),\n      waitForDesktopFlow: t\n        .input(schemas.muxGovernorOauth.waitForDesktopFlow.input)\n        .output(schemas.muxGovernorOauth.waitForDesktopFlow.output)\n        .handler(({ context, input }) => {\n          return context.muxGovernorOauthService.waitForDesktopFlow(input.flowId, {\n            timeoutMs: input.timeoutMs,\n          });\n        }),\n      cancelDesktopFlow: t\n        .input(schemas.muxGovernorOauth.cancelDesktopFlow.input)\n        .output(schemas.muxGovernorOauth.cancelDesktopFlow.output)\n        .handler(async ({ context, input }) => {\n          await context.muxGovernorOauthService.cancelDesktopFlow(input.flowId);\n        }),\n    },\n    codexOauth: {\n      startDesktopFlow: t\n        .input(schemas.codexOauth.startDesktopFlow.input)\n        .output(schemas.codexOauth.startDesktopFlow.output)\n        .handler(({ context }) => {\n          return context.codexOauthService.startDesktopFlow();\n        }),\n      waitForDesktopFlow: t\n        .input(schemas.codexOauth.waitForDesktopFlow.input)\n        .output(schemas.codexOauth.waitForDesktopFlow.output)\n        .handler(({ context, input }) => {\n          return context.codexOauthService.waitForDesktopFlow(input.flowId, {\n            timeoutMs: input.timeoutMs,\n          });\n        }),\n      cancelDesktopFlow: t\n        .input(schemas.codexOauth.cancelDesktopFlow.input)\n        .output(schemas.codexOauth.cancelDesktopFlow.output)\n        .handler(async ({ context, input }) => {\n          await context.codexOauthService.cancelDesktopFlow(input.flowId);\n        }),\n      startDeviceFlow: t\n        .input(schemas.codexOauth.startDeviceFlow.input)\n        .output(schemas.codexOauth.startDeviceFlow.output)\n        .handler(({ context }) => {\n          return context.codexOauthService.startDeviceFlow();\n        }),\n      waitForDeviceFlow: t\n        .input(schemas.codexOauth.waitForDeviceFlow.input)\n        .output(schemas.codexOauth.waitForDeviceFlow.output)\n        .handler(({ context, input }) => {\n          return context.codexOauthService.waitForDeviceFlow(input.flowId, {\n            timeoutMs: input.timeoutMs,\n          });\n        }),\n      cancelDeviceFlow: t\n        .input(schemas.codexOauth.cancelDeviceFlow.input)\n        .output(schemas.codexOauth.cancelDeviceFlow.output)\n        .handler(async ({ context, input }) => {\n          await context.codexOauthService.cancelDeviceFlow(input.flowId);\n        }),\n      disconnect: t\n        .input(schemas.codexOauth.disconnect.input)\n        .output(schemas.codexOauth.disconnect.output)\n        .handler(({ context }) => {\n          return context.codexOauthService.disconnect();\n        }),\n    },\n    general: {\n      listDirectory: t\n        .input(schemas.general.listDirectory.input)\n        .output(schemas.general.listDirectory.output)\n        .handler(async ({ context, input }) => {\n          return context.projectService.listDirectory(input.path);\n        }),\n      createDirectory: t\n        .input(schemas.general.createDirectory.input)\n        .output(schemas.general.createDirectory.output)\n        .handler(async ({ context, input }) => {\n          return context.projectService.createDirectory(input.path);\n        }),\n      ping: t\n        .input(schemas.general.ping.input)\n        .output(schemas.general.ping.output)\n        .handler(({ input }) => {\n          return `Pong: ${input}`;\n        }),\n      tick: t\n        .input(schemas.general.tick.input)\n        .output(schemas.general.tick.output)\n        .handler(async function* ({ input }) {\n          for (let i = 1; i <= input.count; i++) {\n            yield { tick: i, timestamp: Date.now() };\n            if (i < input.count) {\n              await new Promise((r) => setTimeout(r, input.intervalMs));\n            }\n          }\n        }),\n      openInEditor: t\n        .input(schemas.general.openInEditor.input)\n        .output(schemas.general.openInEditor.output)\n        .handler(async ({ context, input }) => {\n          return context.editorService.openInEditor(\n            input.workspaceId,\n            input.targetPath,\n            input.editorConfig\n          );\n        }),\n    },\n    secrets: {\n      get: t\n        .input(schemas.secrets.get.input)\n        .output(schemas.secrets.get.output)\n        .handler(({ context, input }) => {\n          const projectPath =\n            typeof input.projectPath === \"string\" && input.projectPath.trim().length > 0\n              ? input.projectPath\n              : undefined;\n\n          return projectPath\n            ? context.config.getProjectSecrets(projectPath)\n            : context.config.getGlobalSecrets();\n        }),\n      update: t\n        .input(schemas.secrets.update.input)\n        .output(schemas.secrets.update.output)\n        .handler(async ({ context, input }) => {\n          const projectPath =\n            typeof input.projectPath === \"string\" && input.projectPath.trim().length > 0\n              ? input.projectPath\n              : undefined;\n\n          try {\n            if (projectPath) {\n              await context.config.updateProjectSecrets(projectPath, input.secrets);\n            } else {\n              await context.config.updateGlobalSecrets(input.secrets);\n            }\n\n            return Ok(undefined);\n          } catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            return Err(message);\n          }\n        }),\n    },\n    mcp: {\n      list: t\n        .input(schemas.mcp.list.input)\n        .output(schemas.mcp.list.output)\n        .handler(async ({ context, input }) => {\n          const servers = await context.mcpConfigService.listServers(input.projectPath);\n\n          if (!context.policyService.isEnforced()) {\n            return servers;\n          }\n\n          const filtered: typeof servers = {};\n          for (const [name, info] of Object.entries(servers)) {\n            if (context.policyService.isMcpTransportAllowed(info.transport)) {\n              filtered[name] = info;\n            }\n          }\n\n          return filtered;\n        }),\n      add: t\n        .input(schemas.mcp.add.input)\n        .output(schemas.mcp.add.output)\n        .handler(async ({ context, input }) => {\n          const existing = await context.mcpConfigService.listServers();\n          const existingServer = existing[input.name];\n\n          const transport = input.transport ?? \"stdio\";\n          if (context.policyService.isEnforced()) {\n            if (!context.policyService.isMcpTransportAllowed(transport)) {\n              return { success: false, error: \"MCP transport is disabled by policy\" };\n            }\n          }\n\n          const hasHeaders = Boolean(input.headers && Object.keys(input.headers).length > 0);\n          const usesSecretHeaders = Boolean(\n            input.headers &&\n            Object.values(input.headers).some(\n              (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n            )\n          );\n\n          const action = (() => {\n            if (!existingServer) {\n              return \"add\";\n            }\n\n            if (\n              existingServer.transport !== \"stdio\" &&\n              transport !== \"stdio\" &&\n              existingServer.transport === transport &&\n              existingServer.url === input.url &&\n              JSON.stringify(existingServer.headers ?? {}) !== JSON.stringify(input.headers ?? {})\n            ) {\n              return \"set_headers\";\n            }\n\n            return \"edit\";\n          })();\n\n          const result = await context.mcpConfigService.addServer(input.name, {\n            transport,\n            command: input.command,\n            url: input.url,\n            headers: input.headers,\n          });\n\n          if (result.success) {\n            context.telemetryService.capture({\n              event: \"mcp_server_config_changed\",\n              properties: {\n                action,\n                transport,\n                has_headers: hasHeaders,\n                uses_secret_headers: usesSecretHeaders,\n              },\n            });\n          }\n\n          return result;\n        }),\n      remove: t\n        .input(schemas.mcp.remove.input)\n        .output(schemas.mcp.remove.output)\n        .handler(async ({ context, input }) => {\n          const existing = await context.mcpConfigService.listServers();\n          const server = existing[input.name];\n\n          if (context.policyService.isEnforced() && server) {\n            if (!context.policyService.isMcpTransportAllowed(server.transport)) {\n              return { success: false, error: \"MCP transport is disabled by policy\" };\n            }\n          }\n\n          const result = await context.mcpConfigService.removeServer(input.name);\n\n          if (result.success && server) {\n            const hasHeaders =\n              server.transport !== \"stdio\" &&\n              Boolean(server.headers && Object.keys(server.headers).length > 0);\n            const usesSecretHeaders =\n              server.transport !== \"stdio\" &&\n              Boolean(\n                server.headers &&\n                Object.values(server.headers).some(\n                  (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n                )\n              );\n\n            context.telemetryService.capture({\n              event: \"mcp_server_config_changed\",\n              properties: {\n                action: \"remove\",\n                transport: server.transport,\n                has_headers: hasHeaders,\n                uses_secret_headers: usesSecretHeaders,\n              },\n            });\n          }\n\n          return result;\n        }),\n      test: t\n        .input(schemas.mcp.test.input)\n        .output(schemas.mcp.test.output)\n        .handler(async ({ context, input }) => {\n          const start = Date.now();\n\n          const projectPathProvided =\n            typeof input.projectPath === \"string\" && input.projectPath.trim().length > 0;\n          const resolvedProjectPath = projectPathProvided\n            ? input.projectPath!\n            : context.config.rootDir;\n\n          const secrets = secretsToRecord(\n            projectPathProvided\n              ? context.config.getEffectiveSecrets(resolvedProjectPath)\n              : context.config.getGlobalSecrets()\n          );\n\n          const configuredTransport = input.name\n            ? (\n              await context.mcpConfigService.listServers(\n                projectPathProvided ? resolvedProjectPath : undefined\n              )\n            )[input.name]?.transport\n            : undefined;\n\n          const transport =\n            configuredTransport ?? (input.command ? \"stdio\" : (input.transport ?? \"auto\"));\n\n          if (context.policyService.isEnforced()) {\n            if (!context.policyService.isMcpTransportAllowed(transport)) {\n              return { success: false, error: \"MCP transport is disabled by policy\" };\n            }\n          }\n\n          const result = await context.mcpServerManager.test({\n            projectPath: resolvedProjectPath,\n            name: input.name,\n            command: input.command,\n            transport: input.transport,\n            url: input.url,\n            headers: input.headers,\n            projectSecrets: secrets,\n          });\n\n          const durationMs = Date.now() - start;\n\n          const categorizeError = (\n            error: string\n          ): \"timeout\" | \"connect\" | \"http_status\" | \"unknown\" => {\n            const lower = error.toLowerCase();\n            if (lower.includes(\"timed out\")) {\n              return \"timeout\";\n            }\n            if (\n              lower.includes(\"econnrefused\") ||\n              lower.includes(\"econnreset\") ||\n              lower.includes(\"enotfound\") ||\n              lower.includes(\"ehostunreach\")\n            ) {\n              return \"connect\";\n            }\n            if (/\\b(400|401|403|404|405|500|502|503)\\b/.test(lower)) {\n              return \"http_status\";\n            }\n            return \"unknown\";\n          };\n\n          context.telemetryService.capture({\n            event: \"mcp_server_tested\",\n            properties: {\n              transport,\n              success: result.success,\n              duration_ms_b2: roundToBase2(durationMs),\n              ...(result.success ? {} : { error_category: categorizeError(result.error) }),\n            },\n          });\n\n          return result;\n        }),\n      setEnabled: t\n        .input(schemas.mcp.setEnabled.input)\n        .output(schemas.mcp.setEnabled.output)\n        .handler(async ({ context, input }) => {\n          const existing = await context.mcpConfigService.listServers();\n          const server = existing[input.name];\n\n          if (context.policyService.isEnforced() && server) {\n            if (!context.policyService.isMcpTransportAllowed(server.transport)) {\n              return { success: false, error: \"MCP transport is disabled by policy\" };\n            }\n          }\n\n          const result = await context.mcpConfigService.setServerEnabled(input.name, input.enabled);\n\n          if (result.success && server) {\n            const hasHeaders =\n              server.transport !== \"stdio\" &&\n              Boolean(server.headers && Object.keys(server.headers).length > 0);\n            const usesSecretHeaders =\n              server.transport !== \"stdio\" &&\n              Boolean(\n                server.headers &&\n                Object.values(server.headers).some(\n                  (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n                )\n              );\n\n            context.telemetryService.capture({\n              event: \"mcp_server_config_changed\",\n              properties: {\n                action: input.enabled ? \"enable\" : \"disable\",\n                transport: server.transport,\n                has_headers: hasHeaders,\n                uses_secret_headers: usesSecretHeaders,\n              },\n            });\n          }\n\n          return result;\n        }),\n      setToolAllowlist: t\n        .input(schemas.mcp.setToolAllowlist.input)\n        .output(schemas.mcp.setToolAllowlist.output)\n        .handler(async ({ context, input }) => {\n          const existing = await context.mcpConfigService.listServers();\n          const server = existing[input.name];\n\n          if (context.policyService.isEnforced() && server) {\n            if (!context.policyService.isMcpTransportAllowed(server.transport)) {\n              return { success: false, error: \"MCP transport is disabled by policy\" };\n            }\n          }\n\n          const result = await context.mcpConfigService.setToolAllowlist(\n            input.name,\n            input.toolAllowlist\n          );\n\n          if (result.success && server) {\n            const hasHeaders =\n              server.transport !== \"stdio\" &&\n              Boolean(server.headers && Object.keys(server.headers).length > 0);\n            const usesSecretHeaders =\n              server.transport !== \"stdio\" &&\n              Boolean(\n                server.headers &&\n                Object.values(server.headers).some(\n                  (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n                )\n              );\n\n            context.telemetryService.capture({\n              event: \"mcp_server_config_changed\",\n              properties: {\n                action: \"set_tool_allowlist\",\n                transport: server.transport,\n                has_headers: hasHeaders,\n                uses_secret_headers: usesSecretHeaders,\n                tool_allowlist_size_b2: roundToBase2(input.toolAllowlist.length),\n              },\n            });\n          }\n\n          return result;\n        }),\n    },\n    mcpOauth: {\n      startDesktopFlow: t\n        .input(schemas.mcpOauth.startDesktopFlow.input)\n        .output(schemas.mcpOauth.startDesktopFlow.output)\n        .handler(async ({ context, input }) => {\n          // Global MCP settings can start OAuth without selecting a project.\n          // Use mux home as a stable fallback so existing flow codepaths remain unchanged.\n          const projectPath = input.projectPath ?? context.config.rootDir;\n\n          return context.mcpOauthService.startDesktopFlow({ ...input, projectPath });\n        }),\n      waitForDesktopFlow: t\n        .input(schemas.mcpOauth.waitForDesktopFlow.input)\n        .output(schemas.mcpOauth.waitForDesktopFlow.output)\n        .handler(async ({ context, input }) => {\n          return context.mcpOauthService.waitForDesktopFlow(input.flowId, {\n            timeoutMs: input.timeoutMs,\n          });\n        }),\n      cancelDesktopFlow: t\n        .input(schemas.mcpOauth.cancelDesktopFlow.input)\n        .output(schemas.mcpOauth.cancelDesktopFlow.output)\n        .handler(async ({ context, input }) => {\n          await context.mcpOauthService.cancelDesktopFlow(input.flowId);\n        }),\n      startServerFlow: t\n        .input(schemas.mcpOauth.startServerFlow.input)\n        .output(schemas.mcpOauth.startServerFlow.output)\n        .handler(async ({ context, input }) => {\n          // Global MCP settings can start OAuth without selecting a project.\n          // Use mux home as a stable fallback so existing flow codepaths remain unchanged.\n          const projectPath = input.projectPath ?? context.config.rootDir;\n\n          const headers = context.headers;\n\n          const origin = typeof headers?.origin === \"string\" ? headers.origin.trim() : \"\";\n          if (origin) {\n            try {\n              const redirectUri = new URL(\"/auth/mcp-oauth/callback\", origin).toString();\n              return context.mcpOauthService.startServerFlow({\n                ...input,\n                projectPath,\n                redirectUri,\n              });\n            } catch {\n              // Fall back to Host header.\n            }\n          }\n\n          const hostHeader = headers?.[\"x-forwarded-host\"] ?? headers?.host;\n          const host = typeof hostHeader === \"string\" ? hostHeader.split(\",\")[0]?.trim() : \"\";\n          if (!host) {\n            return Err(\"Missing Host header\");\n          }\n\n          const protoHeader = headers?.[\"x-forwarded-proto\"];\n          const forwardedProto =\n            typeof protoHeader === \"string\" ? protoHeader.split(\",\")[0]?.trim() : \"\";\n          const proto = forwardedProto.length ? forwardedProto : \"http\";\n\n          const redirectUri = `${proto}://${host}/auth/mcp-oauth/callback`;\n\n          return context.mcpOauthService.startServerFlow({\n            ...input,\n            projectPath,\n            redirectUri,\n          });\n        }),\n      waitForServerFlow: t\n        .input(schemas.mcpOauth.waitForServerFlow.input)\n        .output(schemas.mcpOauth.waitForServerFlow.output)\n        .handler(async ({ context, input }) => {\n          return context.mcpOauthService.waitForServerFlow(input.flowId, {\n            timeoutMs: input.timeoutMs,\n          });\n        }),\n      cancelServerFlow: t\n        .input(schemas.mcpOauth.cancelServerFlow.input)\n        .output(schemas.mcpOauth.cancelServerFlow.output)\n        .handler(async ({ context, input }) => {\n          await context.mcpOauthService.cancelServerFlow(input.flowId);\n        }),\n      getAuthStatus: t\n        .input(schemas.mcpOauth.getAuthStatus.input)\n        .output(schemas.mcpOauth.getAuthStatus.output)\n        .handler(async ({ context, input }) => {\n          return context.mcpOauthService.getAuthStatus({ serverUrl: input.serverUrl });\n        }),\n      logout: t\n        .input(schemas.mcpOauth.logout.input)\n        .output(schemas.mcpOauth.logout.output)\n        .handler(async ({ context, input }) => {\n          return context.mcpOauthService.logout({ serverUrl: input.serverUrl });\n        }),\n    },\n    projects: {\n      list: t\n        .input(schemas.projects.list.input)\n        .output(schemas.projects.list.output)\n        .handler(({ context }) => {\n          return context.projectService.list();\n        }),\n      create: t\n        .input(schemas.projects.create.input)\n        .output(schemas.projects.create.output)\n        .handler(async ({ context, input }) => {\n          return context.projectService.create(input.projectPath);\n        }),\n      pickDirectory: t\n        .input(schemas.projects.pickDirectory.input)\n        .output(schemas.projects.pickDirectory.output)\n        .handler(async ({ context }) => {\n          return context.projectService.pickDirectory();\n        }),\n      getFileCompletions: t\n        .input(schemas.projects.getFileCompletions.input)\n        .output(schemas.projects.getFileCompletions.output)\n        .handler(async ({ context, input }) => {\n          return context.projectService.getFileCompletions(\n            input.projectPath,\n            input.query,\n            input.limit\n          );\n        }),\n      runtimeAvailability: t\n        .input(schemas.projects.runtimeAvailability.input)\n        .output(schemas.projects.runtimeAvailability.output)\n        .handler(async ({ input }) => {\n          return checkRuntimeAvailability(input.projectPath);\n        }),\n      listBranches: t\n        .input(schemas.projects.listBranches.input)\n        .output(schemas.projects.listBranches.output)\n        .handler(async ({ context, input }) => {\n          return context.projectService.listBranches(input.projectPath);\n        }),\n      gitInit: t\n        .input(schemas.projects.gitInit.input)\n        .output(schemas.projects.gitInit.output)\n        .handler(async ({ context, input }) => {\n          return context.projectService.gitInit(input.projectPath);\n        }),\n      remove: t\n        .input(schemas.projects.remove.input)\n        .output(schemas.projects.remove.output)\n        .handler(async ({ context, input }) => {\n          return context.projectService.remove(input.projectPath);\n        }),\n      secrets: {\n        get: t\n          .input(schemas.projects.secrets.get.input)\n          .output(schemas.projects.secrets.get.output)\n          .handler(({ context, input }) => {\n            return context.projectService.getSecrets(input.projectPath);\n          }),\n        update: t\n          .input(schemas.projects.secrets.update.input)\n          .output(schemas.projects.secrets.update.output)\n          .handler(async ({ context, input }) => {\n            return context.projectService.updateSecrets(input.projectPath, input.secrets);\n          }),\n      },\n      mcp: {\n        list: t\n          .input(schemas.projects.mcp.list.input)\n          .output(schemas.projects.mcp.list.output)\n          .handler(async ({ context, input }) => {\n            const servers = await context.mcpConfigService.listServers(input.projectPath);\n\n            if (!context.policyService.isEnforced()) {\n              return servers;\n            }\n\n            const filtered: typeof servers = {};\n            for (const [name, info] of Object.entries(servers)) {\n              if (context.policyService.isMcpTransportAllowed(info.transport)) {\n                filtered[name] = info;\n              }\n            }\n\n            return filtered;\n          }),\n        add: t\n          .input(schemas.projects.mcp.add.input)\n          .output(schemas.projects.mcp.add.output)\n          .handler(async ({ context, input }) => {\n            const existing = await context.mcpConfigService.listServers();\n            const existingServer = existing[input.name];\n\n            const transport = input.transport ?? \"stdio\";\n            if (context.policyService.isEnforced()) {\n              if (!context.policyService.isMcpTransportAllowed(transport)) {\n                return { success: false, error: \"MCP transport is disabled by policy\" };\n              }\n            }\n            const hasHeaders = Boolean(input.headers && Object.keys(input.headers).length > 0);\n            const usesSecretHeaders = Boolean(\n              input.headers &&\n              Object.values(input.headers).some(\n                (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n              )\n            );\n\n            const action = (() => {\n              if (!existingServer) {\n                return \"add\";\n              }\n\n              if (\n                existingServer.transport !== \"stdio\" &&\n                transport !== \"stdio\" &&\n                existingServer.transport === transport &&\n                existingServer.url === input.url &&\n                JSON.stringify(existingServer.headers ?? {}) !== JSON.stringify(input.headers ?? {})\n              ) {\n                return \"set_headers\";\n              }\n\n              return \"edit\";\n            })();\n\n            const result = await context.mcpConfigService.addServer(input.name, {\n              transport,\n              command: input.command,\n              url: input.url,\n              headers: input.headers,\n            });\n\n            if (result.success) {\n              context.telemetryService.capture({\n                event: \"mcp_server_config_changed\",\n                properties: {\n                  action,\n                  transport,\n                  has_headers: hasHeaders,\n                  uses_secret_headers: usesSecretHeaders,\n                },\n              });\n            }\n\n            return result;\n          }),\n        remove: t\n          .input(schemas.projects.mcp.remove.input)\n          .output(schemas.projects.mcp.remove.output)\n          .handler(async ({ context, input }) => {\n            const existing = await context.mcpConfigService.listServers();\n            const server = existing[input.name];\n\n            if (context.policyService.isEnforced() && server) {\n              if (!context.policyService.isMcpTransportAllowed(server.transport)) {\n                return { success: false, error: \"MCP transport is disabled by policy\" };\n              }\n            }\n\n            const result = await context.mcpConfigService.removeServer(input.name);\n\n            if (result.success && server) {\n              const hasHeaders =\n                server.transport !== \"stdio\" &&\n                Boolean(server.headers && Object.keys(server.headers).length > 0);\n              const usesSecretHeaders =\n                server.transport !== \"stdio\" &&\n                Boolean(\n                  server.headers &&\n                  Object.values(server.headers).some(\n                    (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n                  )\n                );\n\n              context.telemetryService.capture({\n                event: \"mcp_server_config_changed\",\n                properties: {\n                  action: \"remove\",\n                  transport: server.transport,\n                  has_headers: hasHeaders,\n                  uses_secret_headers: usesSecretHeaders,\n                },\n              });\n            }\n\n            return result;\n          }),\n        test: t\n          .input(schemas.projects.mcp.test.input)\n          .output(schemas.projects.mcp.test.output)\n          .handler(async ({ context, input }) => {\n            const start = Date.now();\n            const secrets = secretsToRecord(context.config.getEffectiveSecrets(input.projectPath));\n\n            const configuredTransport = input.name\n              ? (await context.mcpConfigService.listServers(input.projectPath))[input.name]\n                ?.transport\n              : undefined;\n\n            const transport =\n              configuredTransport ?? (input.command ? \"stdio\" : (input.transport ?? \"auto\"));\n\n            if (context.policyService.isEnforced()) {\n              if (!context.policyService.isMcpTransportAllowed(transport)) {\n                return { success: false, error: \"MCP transport is disabled by policy\" };\n              }\n            }\n\n            const result = await context.mcpServerManager.test({\n              projectPath: input.projectPath,\n              name: input.name,\n              command: input.command,\n              transport: input.transport,\n              url: input.url,\n              headers: input.headers,\n              projectSecrets: secrets,\n            });\n\n            const durationMs = Date.now() - start;\n\n            const categorizeError = (\n              error: string\n            ): \"timeout\" | \"connect\" | \"http_status\" | \"unknown\" => {\n              const lower = error.toLowerCase();\n              if (lower.includes(\"timed out\")) {\n                return \"timeout\";\n              }\n              if (\n                lower.includes(\"econnrefused\") ||\n                lower.includes(\"econnreset\") ||\n                lower.includes(\"enotfound\") ||\n                lower.includes(\"ehostunreach\")\n              ) {\n                return \"connect\";\n              }\n              if (/\\b(400|401|403|404|405|500|502|503)\\b/.test(lower)) {\n                return \"http_status\";\n              }\n              return \"unknown\";\n            };\n\n            context.telemetryService.capture({\n              event: \"mcp_server_tested\",\n              properties: {\n                transport,\n                success: result.success,\n                duration_ms_b2: roundToBase2(durationMs),\n                ...(result.success ? {} : { error_category: categorizeError(result.error) }),\n              },\n            });\n\n            return result;\n          }),\n        setEnabled: t\n          .input(schemas.projects.mcp.setEnabled.input)\n          .output(schemas.projects.mcp.setEnabled.output)\n          .handler(async ({ context, input }) => {\n            const existing = await context.mcpConfigService.listServers();\n            const server = existing[input.name];\n\n            if (context.policyService.isEnforced() && server) {\n              if (!context.policyService.isMcpTransportAllowed(server.transport)) {\n                return { success: false, error: \"MCP transport is disabled by policy\" };\n              }\n            }\n\n            const result = await context.mcpConfigService.setServerEnabled(\n              input.name,\n              input.enabled\n            );\n\n            if (result.success && server) {\n              const hasHeaders =\n                server.transport !== \"stdio\" &&\n                Boolean(server.headers && Object.keys(server.headers).length > 0);\n              const usesSecretHeaders =\n                server.transport !== \"stdio\" &&\n                Boolean(\n                  server.headers &&\n                  Object.values(server.headers).some(\n                    (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n                  )\n                );\n\n              context.telemetryService.capture({\n                event: \"mcp_server_config_changed\",\n                properties: {\n                  action: input.enabled ? \"enable\" : \"disable\",\n                  transport: server.transport,\n                  has_headers: hasHeaders,\n                  uses_secret_headers: usesSecretHeaders,\n                },\n              });\n            }\n\n            return result;\n          }),\n        setToolAllowlist: t\n          .input(schemas.projects.mcp.setToolAllowlist.input)\n          .output(schemas.projects.mcp.setToolAllowlist.output)\n          .handler(async ({ context, input }) => {\n            const existing = await context.mcpConfigService.listServers();\n            const server = existing[input.name];\n\n            if (context.policyService.isEnforced() && server) {\n              if (!context.policyService.isMcpTransportAllowed(server.transport)) {\n                return { success: false, error: \"MCP transport is disabled by policy\" };\n              }\n            }\n\n            const result = await context.mcpConfigService.setToolAllowlist(\n              input.name,\n              input.toolAllowlist\n            );\n\n            if (result.success && server) {\n              const hasHeaders =\n                server.transport !== \"stdio\" &&\n                Boolean(server.headers && Object.keys(server.headers).length > 0);\n              const usesSecretHeaders =\n                server.transport !== \"stdio\" &&\n                Boolean(\n                  server.headers &&\n                  Object.values(server.headers).some(\n                    (v) => typeof v === \"object\" && v !== null && \"secret\" in v\n                  )\n                );\n\n              context.telemetryService.capture({\n                event: \"mcp_server_config_changed\",\n                properties: {\n                  action: \"set_tool_allowlist\",\n                  transport: server.transport,\n                  has_headers: hasHeaders,\n                  uses_secret_headers: usesSecretHeaders,\n                  tool_allowlist_size_b2: roundToBase2(input.toolAllowlist.length),\n                },\n              });\n            }\n\n            return result;\n          }),\n      },\n      mcpOauth: {\n        startDesktopFlow: t\n          .input(schemas.projects.mcpOauth.startDesktopFlow.input)\n          .output(schemas.projects.mcpOauth.startDesktopFlow.output)\n          .handler(async ({ context, input }) => {\n            return context.mcpOauthService.startDesktopFlow(input);\n          }),\n        waitForDesktopFlow: t\n          .input(schemas.projects.mcpOauth.waitForDesktopFlow.input)\n          .output(schemas.projects.mcpOauth.waitForDesktopFlow.output)\n          .handler(async ({ context, input }) => {\n            return context.mcpOauthService.waitForDesktopFlow(input.flowId, {\n              timeoutMs: input.timeoutMs,\n            });\n          }),\n        cancelDesktopFlow: t\n          .input(schemas.projects.mcpOauth.cancelDesktopFlow.input)\n          .output(schemas.projects.mcpOauth.cancelDesktopFlow.output)\n          .handler(async ({ context, input }) => {\n            await context.mcpOauthService.cancelDesktopFlow(input.flowId);\n          }),\n        startServerFlow: t\n          .input(schemas.projects.mcpOauth.startServerFlow.input)\n          .output(schemas.projects.mcpOauth.startServerFlow.output)\n          .handler(async ({ context, input }) => {\n            const headers = context.headers;\n\n            const origin = typeof headers?.origin === \"string\" ? headers.origin.trim() : \"\";\n            if (origin) {\n              try {\n                const redirectUri = new URL(\"/auth/mcp-oauth/callback\", origin).toString();\n                return context.mcpOauthService.startServerFlow({ ...input, redirectUri });\n              } catch {\n                // Fall back to Host header.\n              }\n            }\n\n            const hostHeader = headers?.[\"x-forwarded-host\"] ?? headers?.host;\n            const host = typeof hostHeader === \"string\" ? hostHeader.split(\",\")[0]?.trim() : \"\";\n            if (!host) {\n              return Err(\"Missing Host header\");\n            }\n\n            const protoHeader = headers?.[\"x-forwarded-proto\"];\n            const forwardedProto =\n              typeof protoHeader === \"string\" ? protoHeader.split(\",\")[0]?.trim() : \"\";\n            const proto = forwardedProto.length ? forwardedProto : \"http\";\n\n            const redirectUri = `${proto}://${host}/auth/mcp-oauth/callback`;\n\n            return context.mcpOauthService.startServerFlow({ ...input, redirectUri });\n          }),\n        waitForServerFlow: t\n          .input(schemas.projects.mcpOauth.waitForServerFlow.input)\n          .output(schemas.projects.mcpOauth.waitForServerFlow.output)\n          .handler(async ({ context, input }) => {\n            return context.mcpOauthService.waitForServerFlow(input.flowId, {\n              timeoutMs: input.timeoutMs,\n            });\n          }),\n        cancelServerFlow: t\n          .input(schemas.projects.mcpOauth.cancelServerFlow.input)\n          .output(schemas.projects.mcpOauth.cancelServerFlow.output)\n          .handler(async ({ context, input }) => {\n            await context.mcpOauthService.cancelServerFlow(input.flowId);\n          }),\n        getAuthStatus: t\n          .input(schemas.projects.mcpOauth.getAuthStatus.input)\n          .output(schemas.projects.mcpOauth.getAuthStatus.output)\n          .handler(async ({ context, input }) => {\n            const servers = await context.mcpConfigService.listServers(input.projectPath);\n            const server = servers[input.serverName];\n\n            if (!server || server.transport === \"stdio\") {\n              return { isLoggedIn: false, hasRefreshToken: false };\n            }\n\n            return context.mcpOauthService.getAuthStatus({ serverUrl: server.url });\n          }),\n        logout: t\n          .input(schemas.projects.mcpOauth.logout.input)\n          .output(schemas.projects.mcpOauth.logout.output)\n          .handler(async ({ context, input }) => {\n            const servers = await context.mcpConfigService.listServers(input.projectPath);\n            const server = servers[input.serverName];\n\n            if (!server || server.transport === \"stdio\") {\n              return Ok(undefined);\n            }\n\n            return context.mcpOauthService.logout({ serverUrl: server.url });\n          }),\n      },\n      idleCompaction: {\n        get: t\n          .input(schemas.projects.idleCompaction.get.input)\n          .output(schemas.projects.idleCompaction.get.output)\n          .handler(({ context, input }) => ({\n            hours: context.projectService.getIdleCompactionHours(input.projectPath),\n          })),\n        set: t\n          .input(schemas.projects.idleCompaction.set.input)\n          .output(schemas.projects.idleCompaction.set.output)\n          .handler(({ context, input }) =>\n            context.projectService.setIdleCompactionHours(input.projectPath, input.hours)\n          ),\n      },\n      sections: {\n        list: t\n          .input(schemas.projects.sections.list.input)\n          .output(schemas.projects.sections.list.output)\n          .handler(({ context, input }) => context.projectService.listSections(input.projectPath)),\n        create: t\n          .input(schemas.projects.sections.create.input)\n          .output(schemas.projects.sections.create.output)\n          .handler(({ context, input }) =>\n            context.projectService.createSection(input.projectPath, input.name, input.color)\n          ),\n        update: t\n          .input(schemas.projects.sections.update.input)\n          .output(schemas.projects.sections.update.output)\n          .handler(({ context, input }) =>\n            context.projectService.updateSection(input.projectPath, input.sectionId, {\n              name: input.name,\n              color: input.color,\n            })\n          ),\n        remove: t\n          .input(schemas.projects.sections.remove.input)\n          .output(schemas.projects.sections.remove.output)\n          .handler(({ context, input }) =>\n            context.projectService.removeSection(input.projectPath, input.sectionId)\n          ),\n        reorder: t\n          .input(schemas.projects.sections.reorder.input)\n          .output(schemas.projects.sections.reorder.output)\n          .handler(({ context, input }) =>\n            context.projectService.reorderSections(input.projectPath, input.sectionIds)\n          ),\n        assignWorkspace: t\n          .input(schemas.projects.sections.assignWorkspace.input)\n          .output(schemas.projects.sections.assignWorkspace.output)\n          .handler(async ({ context, input }) => {\n            const result = await context.projectService.assignWorkspaceToSection(\n              input.projectPath,\n              input.workspaceId,\n              input.sectionId\n            );\n            if (result.success) {\n              // Emit metadata update so frontend receives the sectionId change\n              await context.workspaceService.refreshAndEmitMetadata(input.workspaceId);\n            }\n            return result;\n          }),\n      },\n    },\n    nameGeneration: {\n      generate: t\n        .input(schemas.nameGeneration.generate.input)\n        .output(schemas.nameGeneration.generate.output)\n        .handler(async ({ context, input }) => {\n          // Frontend provides ordered candidate list with gateway prefs applied.\n          // Backend tries candidates in order with retry on API errors.\n          const result = await generateWorkspaceIdentity(\n            input.message,\n            input.candidates,\n            context.aiService\n          );\n          if (!result.success) {\n            return result;\n          }\n          return {\n            success: true,\n            data: {\n              name: result.data.name,\n              title: result.data.title,\n              modelUsed: result.data.modelUsed,\n            },\n          };\n        }),\n    },\n    coder: {\n      getInfo: t\n        .input(schemas.coder.getInfo.input)\n        .output(schemas.coder.getInfo.output)\n        .handler(async ({ context }) => {\n          return context.coderService.getCoderInfo();\n        }),\n      listTemplates: t\n        .input(schemas.coder.listTemplates.input)\n        .output(schemas.coder.listTemplates.output)\n        .handler(async ({ context }) => {\n          return context.coderService.listTemplates();\n        }),\n      listPresets: t\n        .input(schemas.coder.listPresets.input)\n        .output(schemas.coder.listPresets.output)\n        .handler(async ({ context, input }) => {\n          return context.coderService.listPresets(input.template, input.org);\n        }),\n      listWorkspaces: t\n        .input(schemas.coder.listWorkspaces.input)\n        .output(schemas.coder.listWorkspaces.output)\n        .handler(async ({ context }) => {\n          return context.coderService.listWorkspaces();\n        }),\n    },\n    workspace: {\n      list: t\n        .input(schemas.workspace.list.input)\n        .output(schemas.workspace.list.output)\n        .handler(async ({ context, input }) => {\n          const allWorkspaces = await context.workspaceService.list();\n          // Filter by archived status (derived from timestamps via shared utility)\n          if (input?.archived) {\n            return allWorkspaces.filter((w) => isWorkspaceArchived(w.archivedAt, w.unarchivedAt));\n          }\n          // Default: return non-archived workspaces\n          return allWorkspaces.filter((w) => !isWorkspaceArchived(w.archivedAt, w.unarchivedAt));\n        }),\n      create: t\n        .input(schemas.workspace.create.input)\n        .output(schemas.workspace.create.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.create(\n            input.projectPath,\n            input.branchName,\n            input.trunkBranch,\n            input.title,\n            input.runtimeConfig,\n            input.sectionId\n          );\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return { success: true, metadata: result.data.metadata };\n        }),\n      remove: t\n        .input(schemas.workspace.remove.input)\n        .output(schemas.workspace.remove.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.remove(\n            input.workspaceId,\n            input.options?.force\n          );\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return { success: true };\n        }),\n      updateAgentAISettings: t\n        .input(schemas.workspace.updateAgentAISettings.input)\n        .output(schemas.workspace.updateAgentAISettings.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.updateAgentAISettings(\n            input.workspaceId,\n            input.agentId,\n            input.aiSettings\n          );\n        }),\n      rename: t\n        .input(schemas.workspace.rename.input)\n        .output(schemas.workspace.rename.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.rename(input.workspaceId, input.newName);\n        }),\n      updateModeAISettings: t\n        .input(schemas.workspace.updateModeAISettings.input)\n        .output(schemas.workspace.updateModeAISettings.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.updateModeAISettings(\n            input.workspaceId,\n            input.mode,\n            input.aiSettings\n          );\n        }),\n      updateTitle: t\n        .input(schemas.workspace.updateTitle.input)\n        .output(schemas.workspace.updateTitle.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.updateTitle(input.workspaceId, input.title);\n        }),\n      archive: t\n        .input(schemas.workspace.archive.input)\n        .output(schemas.workspace.archive.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.archive(input.workspaceId);\n        }),\n      unarchive: t\n        .input(schemas.workspace.unarchive.input)\n        .output(schemas.workspace.unarchive.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.unarchive(input.workspaceId);\n        }),\n      archiveMergedInProject: t\n        .input(schemas.workspace.archiveMergedInProject.input)\n        .output(schemas.workspace.archiveMergedInProject.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.archiveMergedInProject(input.projectPath);\n        }),\n      fork: t\n        .input(schemas.workspace.fork.input)\n        .output(schemas.workspace.fork.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.fork(\n            input.sourceWorkspaceId,\n            input.newName\n          );\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return {\n            success: true,\n            metadata: result.data.metadata,\n            projectPath: result.data.projectPath,\n          };\n        }),\n      sendMessage: t\n        .input(schemas.workspace.sendMessage.input)\n        .output(schemas.workspace.sendMessage.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.sendMessage(\n            input.workspaceId,\n            input.message,\n            input.options\n          );\n\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n\n          return { success: true, data: {} };\n        }),\n      answerAskUserQuestion: t\n        .input(schemas.workspace.answerAskUserQuestion.input)\n        .output(schemas.workspace.answerAskUserQuestion.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.answerAskUserQuestion(\n            input.workspaceId,\n            input.toolCallId,\n            input.answers\n          );\n\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n\n          return { success: true, data: undefined };\n        }),\n      resumeStream: t\n        .input(schemas.workspace.resumeStream.input)\n        .output(schemas.workspace.resumeStream.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.resumeStream(\n            input.workspaceId,\n            input.options\n          );\n          if (!result.success) {\n            const error =\n              typeof result.error === \"string\"\n                ? { type: \"unknown\" as const, raw: result.error }\n                : result.error;\n            return { success: false, error };\n          }\n          return { success: true, data: undefined };\n        }),\n      interruptStream: t\n        .input(schemas.workspace.interruptStream.input)\n        .output(schemas.workspace.interruptStream.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.interruptStream(\n            input.workspaceId,\n            input.options\n          );\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return { success: true, data: undefined };\n        }),\n      clearQueue: t\n        .input(schemas.workspace.clearQueue.input)\n        .output(schemas.workspace.clearQueue.output)\n        .handler(({ context, input }) => {\n          const result = context.workspaceService.clearQueue(input.workspaceId);\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return { success: true, data: undefined };\n        }),\n      truncateHistory: t\n        .input(schemas.workspace.truncateHistory.input)\n        .output(schemas.workspace.truncateHistory.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.truncateHistory(\n            input.workspaceId,\n            input.percentage\n          );\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return { success: true, data: undefined };\n        }),\n      replaceChatHistory: t\n        .input(schemas.workspace.replaceChatHistory.input)\n        .output(schemas.workspace.replaceChatHistory.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.replaceHistory(\n            input.workspaceId,\n            input.summaryMessage,\n            { mode: input.mode, deletePlanFile: input.deletePlanFile }\n          );\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return { success: true, data: undefined };\n        }),\n      getDevcontainerInfo: t\n        .input(schemas.workspace.getDevcontainerInfo.input)\n        .output(schemas.workspace.getDevcontainerInfo.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.getDevcontainerInfo(input.workspaceId);\n        }),\n      getInfo: t\n        .input(schemas.workspace.getInfo.input)\n        .output(schemas.workspace.getInfo.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.getInfo(input.workspaceId);\n        }),\n      getLastLlmRequest: t\n        .input(schemas.workspace.getLastLlmRequest.input)\n        .output(schemas.workspace.getLastLlmRequest.output)\n        .handler(({ context, input }) => {\n          return context.aiService.debugGetLastLlmRequest(input.workspaceId);\n        }),\n      getFullReplay: t\n        .input(schemas.workspace.getFullReplay.input)\n        .output(schemas.workspace.getFullReplay.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.getFullReplay(input.workspaceId);\n        }),\n      getSubagentTranscript: t\n        .input(schemas.workspace.getSubagentTranscript.input)\n        .output(schemas.workspace.getSubagentTranscript.output)\n        .handler(async ({ context, input }) => {\n          const taskId = input.taskId.trim();\n          assert(taskId.length > 0, \"workspace.getSubagentTranscript: taskId must be non-empty\");\n\n          const requestingWorkspaceIdTrimmed = input.workspaceId?.trim();\n          const requestingWorkspaceId =\n            requestingWorkspaceIdTrimmed && requestingWorkspaceIdTrimmed.length > 0\n              ? requestingWorkspaceIdTrimmed\n              : null;\n\n          const tryLoadFromWorkspace = async (\n            workspaceId: string\n          ): Promise<{\n            workspaceId: string;\n            entry: SubagentTranscriptArtifactIndexEntry;\n          } | null> => {\n            const sessionDir = context.config.getSessionDir(workspaceId);\n            const artifacts = await readSubagentTranscriptArtifactsFile(sessionDir);\n            const entry = artifacts.artifactsByChildTaskId[taskId] ?? null;\n            return entry ? { workspaceId, entry } : null;\n          };\n\n          const tryLoadFromDescendantWorkspaces = async (\n            ancestorWorkspaceId: string\n          ): Promise<{\n            workspaceId: string;\n            entry: SubagentTranscriptArtifactIndexEntry;\n          } | null> => {\n            // If a grandchild task has already been cleaned up, its transcript is archived into the\n            // immediate parent workspace's session dir. Until that parent workspace is cleaned up and\n            // its artifacts are rolled up, the requesting workspace won't have the transcript index.\n            const descendants = context.taskService.listDescendantAgentTasks(ancestorWorkspaceId);\n\n            // Prefer shallower tasks first so we find the owning parent quickly.\n            descendants.sort((a, b) => a.depth - b.depth);\n\n            for (const descendant of descendants) {\n              const loaded = await tryLoadFromWorkspace(descendant.taskId);\n              if (loaded) return loaded;\n            }\n\n            return null;\n          };\n\n          // Auth: allow if the task is a descendant OR if we have an on-disk transcript artifact entry.\n          // The descendant check is best-effort: if it throws (corrupt config), we fall back to the\n          // artifact existence check to keep the UI usable.\n          let isDescendant = false;\n          if (requestingWorkspaceId) {\n            try {\n              isDescendant = await context.taskService.isDescendantAgentTask(\n                requestingWorkspaceId,\n                taskId\n              );\n            } catch (error: unknown) {\n              log.warn(\"workspace.getSubagentTranscript: descendant check failed\", {\n                requestingWorkspaceId,\n                taskId,\n                error: error instanceof Error ? error.message : String(error),\n              });\n            }\n          }\n\n          const readTranscriptFromPaths = async (params: {\n            workspaceId: string;\n            chatPath?: string;\n            partialPath?: string;\n            logLabel: string;\n          }): Promise<MuxMessage[]> => {\n            const workspaceSessionDir = context.config.getSessionDir(params.workspaceId);\n\n            // Defense-in-depth: refuse path traversal from a corrupted index file.\n            if (params.chatPath && !isPathInsideDir(workspaceSessionDir, params.chatPath)) {\n              throw new Error(\"Refusing to read transcript outside workspace session dir\");\n            }\n            if (params.partialPath && !isPathInsideDir(workspaceSessionDir, params.partialPath)) {\n              throw new Error(\"Refusing to read partial outside workspace session dir\");\n            }\n\n            const partial = params.partialPath\n              ? await readPartialJsonBestEffort(params.partialPath)\n              : null;\n            const messages = params.chatPath\n              ? await readChatJsonlAllowMissing({\n                chatPath: params.chatPath,\n                logLabel: params.logLabel,\n              })\n              : null;\n\n            // If we only archived partial.json (e.g. interrupted stream), still allow viewing.\n            if (!messages && !partial) {\n              throw new Error(`Transcript not found (missing ${params.logLabel})`);\n            }\n\n            return mergePartialIntoHistory(messages ?? [], partial);\n          };\n\n          let resolved: {\n            workspaceId: string;\n            entry: SubagentTranscriptArtifactIndexEntry;\n          } | null = null;\n          let hasArtifactInRequestingTree = false;\n\n          if (requestingWorkspaceId !== null) {\n            resolved = await tryLoadFromWorkspace(requestingWorkspaceId);\n            if (resolved) {\n              hasArtifactInRequestingTree = true;\n            } else {\n              resolved = await tryLoadFromDescendantWorkspaces(requestingWorkspaceId);\n              hasArtifactInRequestingTree = resolved !== null;\n            }\n          } else {\n            resolved = await findSubagentTranscriptEntryByScanningSessions({\n              sessionsDir: context.config.sessionsDir,\n              taskId,\n            });\n          }\n\n          // If the transcript hasn't been archived yet (common while patch artifacts are pending),\n          // fall back to reading from the task's live session dir while it still exists.\n          if (!resolved) {\n            if (requestingWorkspaceId && isDescendant) {\n              const taskSessionDir = context.config.getSessionDir(taskId);\n              const messages = await readTranscriptFromPaths({\n                workspaceId: taskId,\n                chatPath: path.join(taskSessionDir, \"chat.jsonl\"),\n                partialPath: path.join(taskSessionDir, \"partial.json\"),\n                logLabel: `${taskId}/chat.jsonl`,\n              });\n\n              const metaResult = await context.aiService.getWorkspaceMetadata(taskId);\n              const model =\n                metaResult.success &&\n                  typeof metaResult.data.taskModelString === \"string\" &&\n                  metaResult.data.taskModelString.trim().length > 0\n                  ? metaResult.data.taskModelString.trim()\n                  : undefined;\n              const thinkingLevel = metaResult.success\n                ? coerceThinkingLevel(metaResult.data.taskThinkingLevel)\n                : undefined;\n\n              return { messages, model, thinkingLevel };\n            }\n\n            // Helpful error message for UI.\n            throw new Error(\n              requestingWorkspaceId\n                ? `No transcript found for task ${taskId} in workspace ${requestingWorkspaceId}`\n                : `No transcript found for task ${taskId}`\n            );\n          }\n\n          if (requestingWorkspaceId && !isDescendant && !hasArtifactInRequestingTree) {\n            throw new Error(\"Task is not a descendant of this workspace\");\n          }\n\n          const messages = await readTranscriptFromPaths({\n            workspaceId: resolved.workspaceId,\n            chatPath: resolved.entry.chatPath,\n            partialPath: resolved.entry.partialPath,\n            logLabel: `${resolved.workspaceId}/subagent-transcripts/${taskId}/chat.jsonl`,\n          });\n\n          const model =\n            typeof resolved.entry.model === \"string\" && resolved.entry.model.trim().length > 0\n              ? resolved.entry.model.trim()\n              : undefined;\n          const thinkingLevel = coerceThinkingLevel(resolved.entry.thinkingLevel);\n\n          return { messages, model, thinkingLevel };\n        }),\n      executeBash: t\n        .input(schemas.workspace.executeBash.input)\n        .output(schemas.workspace.executeBash.output)\n        .handler(async ({ context, input }) => {\n          const result = await context.workspaceService.executeBash(\n            input.workspaceId,\n            input.script,\n            input.options\n          );\n          if (!result.success) {\n            return { success: false, error: result.error };\n          }\n          return { success: true, data: result.data };\n        }),\n      getFileCompletions: t\n        .input(schemas.workspace.getFileCompletions.input)\n        .output(schemas.workspace.getFileCompletions.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.getFileCompletions(\n            input.workspaceId,\n            input.query,\n            input.limit\n          );\n        }),\n      onChat: t\n        .input(schemas.workspace.onChat.input)\n        .output(schemas.workspace.onChat.output)\n        .handler(async function* ({ context, input, signal }) {\n          const session = context.workspaceService.getOrCreateSession(input.workspaceId);\n          const { push, iterate, end } = createAsyncMessageQueue<WorkspaceChatMessage>();\n\n          const onAbort = () => {\n            // Ensure we tear down the async generator even if the client stops iterating without\n            // calling iterator.return(). This prevents orphaned heartbeat intervals.\n            end();\n          };\n\n          if (signal) {\n            if (signal.aborted) {\n              onAbort();\n            } else {\n              signal.addEventListener(\"abort\", onAbort, { once: true });\n            }\n          }\n\n          // 1. Subscribe to new events (including those triggered by replay)\n          //\n          // IMPORTANT: We subscribe before replay so we can receive stream replay (`replayStream()`)\n          // and init replay events (which do not set `replay: true`).\n          //\n          // Live stream deltas can overlap with replayed deltas on reconnect. Buffer live stream\n          // events during replay and flush after `caught-up`, skipping any deltas already delivered\n          // by replay.\n          const replayRelay = createReplayBufferedStreamMessageRelay(push);\n\n          const unsubscribe = session.onChatEvent(({ message }) => {\n            replayRelay.handleSessionMessage(message);\n          });\n\n          // 2. Replay history (sends caught-up at the end)\n          await session.replayHistory(({ message }) => {\n            push(message);\n          });\n\n          replayRelay.finishReplay();\n\n          // 3. Heartbeat to keep the connection alive during long operations (tool calls, subagents).\n          // Client uses this to detect stalled connections vs. intentionally idle streams.\n          const HEARTBEAT_INTERVAL_MS = 5_000;\n          const heartbeatInterval = setInterval(() => {\n            push({ type: \"heartbeat\" });\n          }, HEARTBEAT_INTERVAL_MS);\n\n          try {\n            yield* iterate();\n          } finally {\n            clearInterval(heartbeatInterval);\n            signal?.removeEventListener(\"abort\", onAbort);\n            end();\n            unsubscribe();\n          }\n        }),\n      onMetadata: t\n        .input(schemas.workspace.onMetadata.input)\n        .output(schemas.workspace.onMetadata.output)\n        .handler(async function* ({ context, signal }) {\n          const service = context.workspaceService;\n\n          interface MetadataEvent {\n            workspaceId: string;\n            metadata: FrontendWorkspaceMetadataSchemaType | null;\n          }\n\n          let resolveNext: ((value: MetadataEvent | null) => void) | null = null;\n          const queue: MetadataEvent[] = [];\n          let ended = false;\n\n          const push = (event: MetadataEvent) => {\n            if (ended) return;\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(event);\n            } else {\n              queue.push(event);\n            }\n          };\n\n          const onMetadata = (event: MetadataEvent) => {\n            push(event);\n          };\n\n          service.on(\"metadata\", onMetadata);\n\n          const onAbort = () => {\n            if (ended) return;\n            ended = true;\n\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(null);\n            }\n          };\n\n          if (signal) {\n            if (signal.aborted) {\n              onAbort();\n            } else {\n              signal.addEventListener(\"abort\", onAbort, { once: true });\n            }\n          }\n\n          try {\n            while (!ended) {\n              if (queue.length > 0) {\n                yield queue.shift()!;\n                continue;\n              }\n\n              const event = await new Promise<MetadataEvent | null>((resolve) => {\n                resolveNext = resolve;\n              });\n\n              if (event === null || ended) {\n                break;\n              }\n\n              yield event;\n            }\n          } finally {\n            ended = true;\n            signal?.removeEventListener(\"abort\", onAbort);\n            service.off(\"metadata\", onMetadata);\n          }\n        }),\n      activity: {\n        list: t\n          .input(schemas.workspace.activity.list.input)\n          .output(schemas.workspace.activity.list.output)\n          .handler(async ({ context }) => {\n            return context.workspaceService.getActivityList();\n          }),\n        subscribe: t\n          .input(schemas.workspace.activity.subscribe.input)\n          .output(schemas.workspace.activity.subscribe.output)\n          .handler(async function* ({ context, signal }) {\n            const service = context.workspaceService;\n\n            interface ActivityEvent {\n              workspaceId: string;\n              activity: WorkspaceActivitySnapshot | null;\n            }\n\n            let resolveNext: ((value: ActivityEvent | null) => void) | null = null;\n            const queue: ActivityEvent[] = [];\n            let ended = false;\n\n            const push = (event: ActivityEvent) => {\n              if (ended) return;\n              if (resolveNext) {\n                const resolve = resolveNext;\n                resolveNext = null;\n                resolve(event);\n              } else {\n                queue.push(event);\n              }\n            };\n\n            const onActivity = (event: ActivityEvent) => {\n              push(event);\n            };\n\n            service.on(\"activity\", onActivity);\n\n            const onAbort = () => {\n              if (ended) return;\n              ended = true;\n\n              if (resolveNext) {\n                const resolve = resolveNext;\n                resolveNext = null;\n                resolve(null);\n              }\n            };\n\n            if (signal) {\n              if (signal.aborted) {\n                onAbort();\n              } else {\n                signal.addEventListener(\"abort\", onAbort, { once: true });\n              }\n            }\n\n            try {\n              while (!ended) {\n                if (queue.length > 0) {\n                  yield queue.shift()!;\n                  continue;\n                }\n\n                const event = await new Promise<ActivityEvent | null>((resolve) => {\n                  resolveNext = resolve;\n                });\n\n                if (event === null || ended) {\n                  break;\n                }\n\n                yield event;\n              }\n            } finally {\n              ended = true;\n              signal?.removeEventListener(\"abort\", onAbort);\n              service.off(\"activity\", onActivity);\n            }\n          }),\n      },\n      getPlanContent: t\n        .input(schemas.workspace.getPlanContent.input)\n        .output(schemas.workspace.getPlanContent.output)\n        .handler(async ({ context, input }) => {\n          // Get workspace metadata to determine runtime and paths\n          const metadata = await context.workspaceService.getInfo(input.workspaceId);\n          if (!metadata) {\n            return { success: false as const, error: `Workspace not found: ${input.workspaceId}` };\n          }\n\n          // Create runtime to read plan file (supports both local and SSH)\n          const runtime = createRuntimeForWorkspace(metadata);\n\n          const result = await readPlanFile(\n            runtime,\n            metadata.name,\n            metadata.projectName,\n            input.workspaceId\n          );\n\n          if (!result.exists) {\n            return { success: false as const, error: `Plan file not found at ${result.path}` };\n          }\n          return { success: true as const, data: { content: result.content, path: result.path } };\n        }),\n      backgroundBashes: {\n        subscribe: t\n          .input(schemas.workspace.backgroundBashes.subscribe.input)\n          .output(schemas.workspace.backgroundBashes.subscribe.output)\n          .handler(async function* ({ context, input, signal }) {\n            const service = context.workspaceService;\n            const { workspaceId } = input;\n\n            if (signal?.aborted) {\n              return;\n            }\n\n            const getState = async () => ({\n              processes: await service.listBackgroundProcesses(workspaceId),\n              foregroundToolCallIds: service.getForegroundToolCallIds(workspaceId),\n            });\n\n            const queue = createAsyncEventQueue<Awaited<ReturnType<typeof getState>>>();\n\n            const onAbort = () => {\n              queue.end();\n            };\n\n            if (signal) {\n              signal.addEventListener(\"abort\", onAbort, { once: true });\n            }\n\n            const onChange = (changedWorkspaceId: string) => {\n              if (changedWorkspaceId === workspaceId) {\n                void getState().then(queue.push);\n              }\n            };\n\n            service.onBackgroundBashChange(onChange);\n\n            try {\n              // Emit initial state immediately\n              yield await getState();\n              yield* queue.iterate();\n            } finally {\n              signal?.removeEventListener(\"abort\", onAbort);\n              queue.end();\n              service.offBackgroundBashChange(onChange);\n            }\n          }),\n        terminate: t\n          .input(schemas.workspace.backgroundBashes.terminate.input)\n          .output(schemas.workspace.backgroundBashes.terminate.output)\n          .handler(async ({ context, input }) => {\n            const result = await context.workspaceService.terminateBackgroundProcess(\n              input.workspaceId,\n              input.processId\n            );\n            if (!result.success) {\n              return { success: false, error: result.error };\n            }\n            return { success: true, data: undefined };\n          }),\n        sendToBackground: t\n          .input(schemas.workspace.backgroundBashes.sendToBackground.input)\n          .output(schemas.workspace.backgroundBashes.sendToBackground.output)\n          .handler(({ context, input }) => {\n            const result = context.workspaceService.sendToBackground(input.toolCallId);\n            if (!result.success) {\n              return { success: false, error: result.error };\n            }\n            return { success: true, data: undefined };\n          }),\n        getOutput: t\n          .input(schemas.workspace.backgroundBashes.getOutput.input)\n          .output(schemas.workspace.backgroundBashes.getOutput.output)\n          .handler(async ({ context, input }) => {\n            const result = await context.workspaceService.getBackgroundProcessOutput(\n              input.workspaceId,\n              input.processId,\n              { fromOffset: input.fromOffset, tailBytes: input.tailBytes }\n            );\n            if (!result.success) {\n              return { success: false, error: result.error };\n            }\n            return { success: true, data: result.data };\n          }),\n      },\n      getPostCompactionState: t\n        .input(schemas.workspace.getPostCompactionState.input)\n        .output(schemas.workspace.getPostCompactionState.output)\n        .handler(({ context, input }) => {\n          return context.workspaceService.getPostCompactionState(input.workspaceId);\n        }),\n      setPostCompactionExclusion: t\n        .input(schemas.workspace.setPostCompactionExclusion.input)\n        .output(schemas.workspace.setPostCompactionExclusion.output)\n        .handler(async ({ context, input }) => {\n          return context.workspaceService.setPostCompactionExclusion(\n            input.workspaceId,\n            input.itemId,\n            input.excluded\n          );\n        }),\n      getSessionUsage: t\n        .input(schemas.workspace.getSessionUsage.input)\n        .output(schemas.workspace.getSessionUsage.output)\n        .handler(async ({ context, input }) => {\n          return context.sessionUsageService.getSessionUsage(input.workspaceId);\n        }),\n      getSessionUsageBatch: t\n        .input(schemas.workspace.getSessionUsageBatch.input)\n        .output(schemas.workspace.getSessionUsageBatch.output)\n        .handler(async ({ context, input }) => {\n          return context.sessionUsageService.getSessionUsageBatch(input.workspaceIds);\n        }),\n      stats: {\n        subscribe: t\n          .input(schemas.workspace.stats.subscribe.input)\n          .output(schemas.workspace.stats.subscribe.output)\n          .handler(async function* ({ context, input, signal }) {\n            const workspaceId = input.workspaceId;\n\n            if (signal?.aborted) {\n              return;\n            }\n\n            context.sessionTimingService.addSubscriber(workspaceId);\n\n            const queue = (() => {\n              // Coalesce snapshots: keep only the most recent snapshot to avoid an\n              // unbounded queue under high-frequency stream deltas.\n              let buffered: WorkspaceStatsSnapshot | undefined;\n              let hasBuffered = false;\n              let resolveNext: ((value: WorkspaceStatsSnapshot | null) => void) | null = null;\n              let ended = false;\n\n              const push = (value: WorkspaceStatsSnapshot) => {\n                if (ended) return;\n\n                if (resolveNext) {\n                  const resolve = resolveNext;\n                  resolveNext = null;\n                  resolve(value);\n                  return;\n                }\n\n                buffered = value;\n                hasBuffered = true;\n              };\n\n              async function* iterate(): AsyncGenerator<WorkspaceStatsSnapshot> {\n                while (true) {\n                  if (ended) {\n                    return;\n                  }\n\n                  if (hasBuffered) {\n                    const value = buffered;\n                    buffered = undefined;\n                    hasBuffered = false;\n                    if (value !== undefined) {\n                      yield value;\n                    }\n                    continue;\n                  }\n\n                  const next = await new Promise<WorkspaceStatsSnapshot | null>((resolve) => {\n                    resolveNext = resolve;\n                  });\n\n                  if (ended || next === null) {\n                    return;\n                  }\n\n                  yield next;\n                }\n              }\n\n              const end = () => {\n                ended = true;\n                if (resolveNext) {\n                  const resolve = resolveNext;\n                  resolveNext = null;\n                  resolve(null);\n                }\n              };\n\n              return { push, iterate, end };\n            })();\n\n            // Snapshot computation is async; without coalescing, we can build an unbounded\n            // backlog when token deltas arrive quickly.\n            const SNAPSHOT_THROTTLE_MS = 100;\n\n            let lastPushedAtMs = 0;\n            let inFlight = false;\n            let pendingTimer: ReturnType<typeof setTimeout> | undefined;\n            let pendingSnapshot = false;\n            let closed = false;\n\n            const onAbort = () => {\n              closed = true;\n\n              if (pendingTimer) {\n                clearTimeout(pendingTimer);\n                pendingTimer = undefined;\n              }\n\n              queue.end();\n            };\n\n            if (signal) {\n              signal.addEventListener(\"abort\", onAbort, { once: true });\n            }\n\n            const pushSnapshot = async () => {\n              if (closed) return;\n              if (inFlight) return;\n              if (!pendingSnapshot) return;\n\n              pendingSnapshot = false;\n              inFlight = true;\n\n              try {\n                const snapshot = await context.sessionTimingService.getSnapshot(workspaceId);\n                if (closed) return;\n\n                lastPushedAtMs = snapshot.generatedAt;\n                queue.push(snapshot);\n              } finally {\n                inFlight = false;\n\n                if (!closed && pendingSnapshot) {\n                  scheduleSnapshot();\n                }\n              }\n            };\n\n            const runPushSnapshot = () => {\n              void pushSnapshot().catch(() => {\n                // Defensive: a failed snapshot fetch should never brick the subscription.\n              });\n            };\n\n            const scheduleSnapshot = () => {\n              pendingSnapshot = true;\n\n              if (closed) {\n                return;\n              }\n\n              if (inFlight) {\n                return;\n              }\n\n              if (pendingTimer) {\n                return;\n              }\n\n              const now = Date.now();\n              const timeSinceLastPush = now - lastPushedAtMs;\n\n              if (timeSinceLastPush >= SNAPSHOT_THROTTLE_MS) {\n                runPushSnapshot();\n                return;\n              }\n\n              const remaining = SNAPSHOT_THROTTLE_MS - timeSinceLastPush;\n              pendingTimer = setTimeout(() => {\n                pendingTimer = undefined;\n                runPushSnapshot();\n              }, remaining);\n\n              // Avoid keeping Node (or Jest workers) alive due to a leaked throttle timer.\n              pendingTimer.unref?.();\n            };\n\n            const onChange = (changedWorkspaceId: string) => {\n              if (changedWorkspaceId !== workspaceId) {\n                return;\n              }\n              scheduleSnapshot();\n            };\n\n            // Subscribe before awaiting the initial snapshot so we don't miss a\n            // stats-change event that happens while getSnapshot() is in-flight.\n            //\n            // Treat the initial snapshot fetch as inFlight to prevent scheduleSnapshot()\n            // from starting a concurrent fetch that could push a newer snapshot before\n            // the initial one.\n            inFlight = true;\n            context.sessionTimingService.onStatsChange(onChange);\n\n            try {\n              const initial = await context.sessionTimingService.getSnapshot(workspaceId);\n              lastPushedAtMs = initial.generatedAt;\n              queue.push(initial);\n            } finally {\n              inFlight = false;\n\n              if (!closed && pendingSnapshot) {\n                scheduleSnapshot();\n              }\n            }\n\n            try {\n              yield* queue.iterate();\n            } finally {\n              closed = true;\n              signal?.removeEventListener(\"abort\", onAbort);\n              if (pendingTimer) {\n                clearTimeout(pendingTimer);\n              }\n\n              queue.end();\n              context.sessionTimingService.offStatsChange(onChange);\n              context.sessionTimingService.removeSubscriber(workspaceId);\n            }\n          }),\n        clear: t\n          .input(schemas.workspace.stats.clear.input)\n          .output(schemas.workspace.stats.clear.output)\n          .handler(async ({ context, input }) => {\n            try {\n              await context.sessionTimingService.clearTimingFile(input.workspaceId);\n              return { success: true, data: undefined };\n            } catch (error) {\n              const message = error instanceof Error ? error.message : String(error);\n              return { success: false, error: message };\n            }\n          }),\n      },\n      mcp: {\n        get: t\n          .input(schemas.workspace.mcp.get.input)\n          .output(schemas.workspace.mcp.get.output)\n          .handler(async ({ context, input }) => {\n            const policy = context.policyService.getEffectivePolicy();\n            const mcpDisabledByPolicy =\n              context.policyService.isEnforced() &&\n              policy?.mcp.allowUserDefined.stdio === false &&\n              policy.mcp.allowUserDefined.remote === false;\n\n            if (mcpDisabledByPolicy) {\n              return {};\n            }\n\n            try {\n              return await context.workspaceMcpOverridesService.getOverridesForWorkspace(\n                input.workspaceId\n              );\n            } catch {\n              // Defensive: overrides must never brick workspace UI.\n              return {};\n            }\n          }),\n        set: t\n          .input(schemas.workspace.mcp.set.input)\n          .output(schemas.workspace.mcp.set.output)\n          .handler(async ({ context, input }) => {\n            try {\n              await context.workspaceMcpOverridesService.setOverridesForWorkspace(\n                input.workspaceId,\n                input.overrides\n              );\n              return { success: true, data: undefined };\n            } catch (error) {\n              const message = error instanceof Error ? error.message : String(error);\n              return { success: false, error: message };\n            }\n          }),\n      },\n    },\n    tasks: {\n      create: t\n        .input(schemas.tasks.create.input)\n        .output(schemas.tasks.create.output)\n        .handler(({ context, input }) => {\n          const thinkingLevel =\n            input.thinkingLevel === \"off\" ||\n              input.thinkingLevel === \"low\" ||\n              input.thinkingLevel === \"medium\" ||\n              input.thinkingLevel === \"high\" ||\n              input.thinkingLevel === \"xhigh\"\n              ? input.thinkingLevel\n              : undefined;\n\n          return context.taskService.create({\n            parentWorkspaceId: input.parentWorkspaceId,\n            kind: input.kind,\n            agentId: input.agentId,\n            agentType: input.agentType,\n            prompt: input.prompt,\n            title: input.title,\n            modelString: input.modelString,\n            thinkingLevel,\n          });\n        }),\n    },\n    window: {\n      setTitle: t\n        .input(schemas.window.setTitle.input)\n        .output(schemas.window.setTitle.output)\n        .handler(({ context, input }) => {\n          return context.windowService.setTitle(input.title);\n        }),\n    },\n    terminal: {\n      create: t\n        .input(schemas.terminal.create.input)\n        .output(schemas.terminal.create.output)\n        .handler(async ({ context, input }) => {\n          return context.terminalService.create(input);\n        }),\n      close: t\n        .input(schemas.terminal.close.input)\n        .output(schemas.terminal.close.output)\n        .handler(({ context, input }) => {\n          return context.terminalService.close(input.sessionId);\n        }),\n      resize: t\n        .input(schemas.terminal.resize.input)\n        .output(schemas.terminal.resize.output)\n        .handler(({ context, input }) => {\n          return context.terminalService.resize(input);\n        }),\n      sendInput: t\n        .input(schemas.terminal.sendInput.input)\n        .output(schemas.terminal.sendInput.output)\n        .handler(({ context, input }) => {\n          context.terminalService.sendInput(input.sessionId, input.data);\n        }),\n      onOutput: t\n        .input(schemas.terminal.onOutput.input)\n        .output(schemas.terminal.onOutput.output)\n        .handler(async function* ({ context, input, signal }) {\n          if (signal?.aborted) {\n            return;\n          }\n\n          let resolveNext: ((value: string | null) => void) | null = null;\n          const queue: string[] = [];\n          let ended = false;\n\n          const push = (data: string) => {\n            if (ended) return;\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(data);\n            } else {\n              queue.push(data);\n            }\n          };\n\n          const unsubscribe = context.terminalService.onOutput(input.sessionId, push);\n\n          const onAbort = () => {\n            if (ended) return;\n            ended = true;\n\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(null);\n            }\n          };\n\n          if (signal) {\n            signal.addEventListener(\"abort\", onAbort, { once: true });\n          }\n\n          try {\n            while (!ended) {\n              if (queue.length > 0) {\n                yield queue.shift()!;\n                continue;\n              }\n\n              const data = await new Promise<string | null>((resolve) => {\n                resolveNext = resolve;\n              });\n\n              if (data === null || ended) {\n                break;\n              }\n\n              yield data;\n            }\n          } finally {\n            ended = true;\n            signal?.removeEventListener(\"abort\", onAbort);\n            unsubscribe();\n          }\n        }),\n      attach: t\n        .input(schemas.terminal.attach.input)\n        .output(schemas.terminal.attach.output)\n        .handler(async function* ({ context, input, signal }) {\n          if (signal?.aborted) {\n            return;\n          }\n\n          type AttachMessage =\n            | { type: \"screenState\"; data: string }\n            | { type: \"output\"; data: string };\n\n          let resolveNext: ((value: AttachMessage | null) => void) | null = null;\n          const queue: AttachMessage[] = [];\n          let ended = false;\n\n          const push = (msg: AttachMessage) => {\n            if (ended) return;\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(msg);\n            } else {\n              queue.push(msg);\n            }\n          };\n\n          // CRITICAL: Subscribe to output FIRST, BEFORE capturing screen state.\n          // This ensures any output that arrives during/after getScreenState() is queued.\n          const unsubscribe = context.terminalService.onOutput(input.sessionId, (data) => {\n            push({ type: \"output\", data });\n          });\n\n          const onAbort = () => {\n            if (ended) return;\n            ended = true;\n\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(null);\n            }\n          };\n\n          if (signal) {\n            signal.addEventListener(\"abort\", onAbort, { once: true });\n          }\n\n          try {\n            // Capture screen state AFTER subscription is set up - guarantees no missed output\n            const screenState = context.terminalService.getScreenState(input.sessionId);\n\n            // First message is always the screen state (may be empty for new sessions)\n            yield { type: \"screenState\" as const, data: screenState };\n\n            // Now yield any queued output and continue with live stream\n            while (!ended) {\n              if (queue.length > 0) {\n                yield queue.shift()!;\n                continue;\n              }\n\n              const msg = await new Promise<AttachMessage | null>((resolve) => {\n                resolveNext = resolve;\n              });\n\n              if (msg === null || ended) {\n                break;\n              }\n\n              yield msg;\n            }\n          } finally {\n            ended = true;\n            signal?.removeEventListener(\"abort\", onAbort);\n            unsubscribe();\n          }\n        }),\n      onExit: t\n        .input(schemas.terminal.onExit.input)\n        .output(schemas.terminal.onExit.output)\n        .handler(async function* ({ context, input, signal }) {\n          if (signal?.aborted) {\n            return;\n          }\n\n          let resolveNext: ((value: number | null) => void) | null = null;\n          const queue: number[] = [];\n          let ended = false;\n\n          const push = (code: number) => {\n            if (ended) return;\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(code);\n            } else {\n              queue.push(code);\n            }\n          };\n\n          const unsubscribe = context.terminalService.onExit(input.sessionId, push);\n\n          const onAbort = () => {\n            if (ended) return;\n            ended = true;\n\n            if (resolveNext) {\n              const resolve = resolveNext;\n              resolveNext = null;\n              resolve(null);\n            }\n          };\n\n          if (signal) {\n            signal.addEventListener(\"abort\", onAbort, { once: true });\n          }\n\n          try {\n            while (!ended) {\n              if (queue.length > 0) {\n                yield queue.shift()!;\n                // Terminal only exits once, so we can finish the stream\n                break;\n              }\n\n              const code = await new Promise<number | null>((resolve) => {\n                resolveNext = resolve;\n              });\n\n              if (code === null || ended) {\n                break;\n              }\n\n              yield code;\n              break;\n            }\n          } finally {\n            ended = true;\n            signal?.removeEventListener(\"abort\", onAbort);\n            unsubscribe();\n          }\n        }),\n      openWindow: t\n        .input(schemas.terminal.openWindow.input)\n        .output(schemas.terminal.openWindow.output)\n        .handler(async ({ context, input }) => {\n          return context.terminalService.openWindow(input.workspaceId, input.sessionId);\n        }),\n      closeWindow: t\n        .input(schemas.terminal.closeWindow.input)\n        .output(schemas.terminal.closeWindow.output)\n        .handler(({ context, input }) => {\n          return context.terminalService.closeWindow(input.workspaceId);\n        }),\n      listSessions: t\n        .input(schemas.terminal.listSessions.input)\n        .output(schemas.terminal.listSessions.output)\n        .handler(({ context, input }) => {\n          return context.terminalService.getWorkspaceSessionIds(input.workspaceId);\n        }),\n      openNative: t\n        .input(schemas.terminal.openNative.input)\n        .output(schemas.terminal.openNative.output)\n        .handler(async ({ context, input }) => {\n          return context.terminalService.openNative(input.workspaceId);\n        }),\n    },\n    update: {\n      check: t\n        .input(schemas.update.check.input)\n        .output(schemas.update.check.output)\n        .handler(async ({ context }) => {\n          return context.updateService.check();\n        }),\n      download: t\n        .input(schemas.update.download.input)\n        .output(schemas.update.download.output)\n        .handler(async ({ context }) => {\n          return context.updateService.download();\n        }),\n      install: t\n        .input(schemas.update.install.input)\n        .output(schemas.update.install.output)\n        .handler(({ context }) => {\n          return context.updateService.install();\n        }),\n      onStatus: t\n        .input(schemas.update.onStatus.input)\n        .output(schemas.update.onStatus.output)\n        .handler(async function* ({ context, signal }) {\n          if (signal?.aborted) {\n            return;\n          }\n\n          const queue = createAsyncEventQueue<UpdateStatus>();\n          const unsubscribe = context.updateService.onStatus(queue.push);\n\n          const onAbort = () => {\n            queue.end();\n          };\n\n          if (signal) {\n            signal.addEventListener(\"abort\", onAbort, { once: true });\n          }\n\n          try {\n            yield* queue.iterate();\n          } finally {\n            signal?.removeEventListener(\"abort\", onAbort);\n            queue.end();\n            unsubscribe();\n          }\n        }),\n    },\n    menu: {\n      onOpenSettings: t\n        .input(schemas.menu.onOpenSettings.input)\n        .output(schemas.menu.onOpenSettings.output)\n        .handler(async function* ({ context, signal }) {\n          if (signal?.aborted) {\n            return;\n          }\n\n          // Use a sentinel value to signal events since void/undefined can't be queued\n          const queue = createAsyncEventQueue<true>();\n          const unsubscribe = context.menuEventService.onOpenSettings(() => queue.push(true));\n\n          const onAbort = () => {\n            queue.end();\n          };\n\n          if (signal) {\n            signal.addEventListener(\"abort\", onAbort, { once: true });\n          }\n\n          try {\n            for await (const _ of queue.iterate()) {\n              yield undefined;\n            }\n          } finally {\n            signal?.removeEventListener(\"abort\", onAbort);\n            queue.end();\n            unsubscribe();\n          }\n        }),\n    },\n    voice: {\n      transcribe: t\n        .input(schemas.voice.transcribe.input)\n        .output(schemas.voice.transcribe.output)\n        .handler(async ({ context, input }) => {\n          return context.voiceService.transcribe(input.audioBase64);\n        }),\n    },\n    experiments: {\n      getAll: t\n        .input(schemas.experiments.getAll.input)\n        .output(schemas.experiments.getAll.output)\n        .handler(({ context }) => {\n          return context.experimentsService.getAll();\n        }),\n      reload: t\n        .input(schemas.experiments.reload.input)\n        .output(schemas.experiments.reload.output)\n        .handler(async ({ context }) => {\n          await context.experimentsService.refreshAll();\n        }),\n    },\n    debug: {\n      triggerStreamError: t\n        .input(schemas.debug.triggerStreamError.input)\n        .output(schemas.debug.triggerStreamError.output)\n        .handler(({ context, input }) => {\n          return context.workspaceService.debugTriggerStreamError(\n            input.workspaceId,\n            input.errorMessage\n          );\n        }),\n    },\n    telemetry: {\n      track: t\n        .input(schemas.telemetry.track.input)\n        .output(schemas.telemetry.track.output)\n        .handler(({ context, input }) => {\n          context.telemetryService.capture(input);\n        }),\n      status: t\n        .input(schemas.telemetry.status.input)\n        .output(schemas.telemetry.status.output)\n        .handler(({ context }) => {\n          return {\n            enabled: context.telemetryService.isEnabled(),\n            explicit: context.telemetryService.isExplicitlyDisabled(),\n          };\n        }),\n    },\n    signing: {\n      capabilities: t\n        .input(schemas.signing.capabilities.input)\n        .output(schemas.signing.capabilities.output)\n        .handler(async ({ context }) => {\n          return context.signingService.getCapabilities();\n        }),\n      signMessage: t\n        .input(schemas.signing.signMessage.input)\n        .output(schemas.signing.signMessage.output)\n        .handler(({ context, input }) => {\n          return context.signingService.signMessage(input.content);\n        }),\n      clearIdentityCache: t\n        .input(schemas.signing.clearIdentityCache.input)\n        .output(schemas.signing.clearIdentityCache.output)\n        .handler(({ context }) => {\n          context.signingService.clearIdentityCache();\n          return { success: true };\n        }),\n    },\n    modelPresets: {\n      list: t\n        .input(schemas.modelPresets.list.input)\n        .output(schemas.modelPresets.list.output)\n        .handler(({ context }) => context.modelPresetsService.listPresets()),\n      save: t\n        .input(schemas.modelPresets.save.input)\n        .output(schemas.modelPresets.save.output)\n        .handler(({ context, input }) =>\n          context.modelPresetsService.savePreset(input.name, input.models, input.description)\n        ),\n      get: t\n        .input(schemas.modelPresets.get.input)\n        .output(schemas.modelPresets.get.output)\n        .handler(async ({ context, input }) => {\n          const preset = await context.modelPresetsService.getPreset(input.id);\n          return preset ?? null;\n        }),\n      delete: t\n        .input(schemas.modelPresets.delete.input)\n        .output(schemas.modelPresets.delete.output)\n        .handler(({ context, input }) => context.modelPresetsService.deletePreset(input.id)),\n      update: t\n        .input(schemas.modelPresets.update.input)\n        .output(schemas.modelPresets.update.output)\n        .handler(({ context, input }) =>\n          context.modelPresetsService.updatePreset(input.id, {\n            name: input.name,\n            description: input.description,\n            models: input.models,\n          })\n        ),\n      export: t\n        .input(schemas.modelPresets.export.input)\n        .output(schemas.modelPresets.export.output)\n        .handler(({ context, input }) =>\n          context.modelPresetsService.exportPresets(input.ids)\n        ),\n      import: t\n        .input(schemas.modelPresets.import.input)\n        .output(schemas.modelPresets.import.output)\n        .handler(({ context, input }) =>\n          context.modelPresetsService.importPresets(input.json)\n        ),\n    },\n    modelHealth: {\n      checkModel: t\n        .input(schemas.modelHealth.checkModel.input)\n        .output(schemas.modelHealth.checkModel.output)\n        .handler(({ context, input }) =>\n          context.modelHealthService.checkModel(input.provider, input.modelId, input.metadata)\n        ),\n      checkAll: t\n        .input(schemas.modelHealth.checkAll.input)\n        .output(schemas.modelHealth.checkAll.output)\n        .handler(({ context, input }) =>\n          context.modelHealthService.checkAllModels(input.models)\n        ),\n      getLastResults: t\n        .input(schemas.modelHealth.getLastResults.input)\n        .output(schemas.modelHealth.getLastResults.output)\n        .handler(({ context }) => context.modelHealthService.getLastResults()),\n    },\n  });\n};\n\nexport type AppRouter = ReturnType<typeof router>;\n"]}