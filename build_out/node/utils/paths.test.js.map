{"version":3,"file":"paths.test.js","sourceRoot":"","sources":["../../../src/node/utils/paths.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { describe, test, expect } from \"bun:test\";\r\nimport { PlatformPaths } from \"./paths.main\";\r\nimport { toPosixPath } from \"./paths\";\r\nimport * as os from \"os\";\r\nimport * as path from \"path\";\r\n\r\ndescribe(\"PlatformPaths\", () => {\r\n  describe(\"basename\", () => {\r\n    test(\"extracts basename from path using current platform\", () => {\r\n      expect(PlatformPaths.basename(\"/home/user/project\")).toBe(\"project\");\r\n      expect(PlatformPaths.basename(\"/home/user/project/file.txt\")).toBe(\"file.txt\");\r\n    });\r\n\r\n    test(\"handles edge cases\", () => {\r\n      expect(PlatformPaths.basename(\"\")).toBe(\"\");\r\n      expect(PlatformPaths.basename(\"project\")).toBe(\"project\");\r\n    });\r\n  });\r\n\r\n  describe(\"parse\", () => {\r\n    test(\"parses absolute path on current platform\", () => {\r\n      const testPath = path.join(\"/\", \"home\", \"user\", \"projects\", \"mux\");\r\n      const result = PlatformPaths.parse(testPath);\r\n      expect(result.segments).toContain(\"home\");\r\n      expect(result.segments).toContain(\"user\");\r\n      expect(result.segments).toContain(\"projects\");\r\n      expect(result.basename).toBe(\"mux\");\r\n    });\r\n\r\n    test(\"parses relative path\", () => {\r\n      const result = PlatformPaths.parse(\"src/utils/paths.ts\");\r\n      expect(result.root).toBe(\"\");\r\n      expect(result.basename).toBe(\"paths.ts\");\r\n    });\r\n\r\n    test(\"handles edge cases\", () => {\r\n      expect(PlatformPaths.parse(\"\")).toEqual({ root: \"\", segments: [], basename: \"\" });\r\n      expect(PlatformPaths.parse(\"file.txt\").basename).toBe(\"file.txt\");\r\n    });\r\n  });\r\n\r\n  describe(\"abbreviate\", () => {\r\n    test(\"abbreviates path\", () => {\r\n      const testPath = path.join(\"/\", \"home\", \"user\", \"Projects\", \"coder\", \"mux\");\r\n      const result = PlatformPaths.abbreviate(testPath);\r\n\r\n      // Should end with the full basename\r\n      expect(result.endsWith(\"mux\")).toBe(true);\r\n\r\n      // Should be shorter than original (segments abbreviated)\r\n      expect(result.length).toBeLessThan(testPath.length);\r\n    });\r\n\r\n    test(\"handles short paths\", () => {\r\n      const testPath = path.join(\"/\", \"home\");\r\n      const result = PlatformPaths.abbreviate(testPath);\r\n      // Short paths should not be abbreviated much\r\n      expect(result).toContain(\"home\");\r\n    });\r\n\r\n    test(\"handles empty input\", () => {\r\n      expect(PlatformPaths.abbreviate(\"\")).toBe(\"\");\r\n    });\r\n  });\r\n\r\n  describe(\"splitAbbreviated\", () => {\r\n    test(\"splits abbreviated path\", () => {\r\n      const testPath = path.join(\"/\", \"h\", \"u\", \"P\", \"c\", \"mux\");\r\n      const result = PlatformPaths.splitAbbreviated(testPath);\r\n      expect(result.basename).toBe(\"mux\");\r\n      expect(result.dirPath.endsWith(path.sep)).toBe(true);\r\n    });\r\n\r\n    test(\"handles path without directory\", () => {\r\n      const result = PlatformPaths.splitAbbreviated(\"file.txt\");\r\n      expect(result.dirPath).toBe(\"\");\r\n      expect(result.basename).toBe(\"file.txt\");\r\n    });\r\n  });\r\n\r\n  describe(\"formatHome\", () => {\r\n    test(\"replaces home directory with tilde\", () => {\r\n      const home = os.homedir();\r\n      const testPath = path.join(home, \"projects\", \"mux\");\r\n      const result = PlatformPaths.formatHome(testPath);\r\n\r\n      const sep = PlatformPaths.separator;\r\n      expect(result).toBe(`~${sep}projects${sep}mux`);\r\n    });\r\n\r\n    test(\"leaves non-home paths unchanged\", () => {\r\n      const result = PlatformPaths.formatHome(\"/tmp/test\");\r\n      expect(result).toBe(\"/tmp/test\");\r\n    });\r\n  });\r\n\r\n  describe(\"expandHome\", () => {\r\n    test(\"expands tilde to home directory\", () => {\r\n      const home = os.homedir();\r\n      expect(PlatformPaths.expandHome(\"~\")).toBe(home);\r\n    });\r\n\r\n    test(\"expands tilde with path\", () => {\r\n      const home = os.homedir();\r\n      const sep = path.sep;\r\n      const result = PlatformPaths.expandHome(`~${sep}projects${sep}mux`);\r\n      expect(result).toBe(path.join(home, \"projects\", \"mux\"));\r\n    });\r\n\r\n    test(\"leaves absolute paths unchanged\", () => {\r\n      const testPath = path.join(\"/\", \"home\", \"user\", \"project\");\r\n      expect(PlatformPaths.expandHome(testPath)).toBe(testPath);\r\n    });\r\n    test(\"expands ~/.mux to MUX_ROOT when set\", () => {\r\n      const originalMuxRoot = process.env.MUX_ROOT;\r\n      const testMuxRoot = path.join(os.tmpdir(), \"mux-root-test\");\r\n      process.env.MUX_ROOT = testMuxRoot;\r\n\r\n      try {\r\n        const sep = path.sep;\r\n        const muxPath = `~${sep}.mux${sep}src${sep}project`;\r\n        expect(PlatformPaths.expandHome(muxPath)).toBe(path.join(testMuxRoot, \"src\", \"project\"));\r\n\r\n        // Other ~ paths should still resolve to the actual OS home directory.\r\n        const home = os.homedir();\r\n        const homePath = `~${sep}projects${sep}mux`;\r\n        expect(PlatformPaths.expandHome(homePath)).toBe(path.join(home, \"projects\", \"mux\"));\r\n      } finally {\r\n        if (originalMuxRoot === undefined) {\r\n          delete process.env.MUX_ROOT;\r\n        } else {\r\n          process.env.MUX_ROOT = originalMuxRoot;\r\n        }\r\n      }\r\n    });\r\n\r\n    test(\"handles empty input\", () => {\r\n      expect(PlatformPaths.expandHome(\"\")).toBe(\"\");\r\n    });\r\n  });\r\n\r\n  describe(\"getProjectName\", () => {\r\n    test(\"extracts project name from path\", () => {\r\n      const testPath = path.join(\"/\", \"home\", \"user\", \"projects\", \"mux\");\r\n      expect(PlatformPaths.getProjectName(testPath)).toBe(\"mux\");\r\n    });\r\n\r\n    test(\"handles relative paths\", () => {\r\n      expect(PlatformPaths.getProjectName(\"projects/mux\")).toBe(\"mux\");\r\n    });\r\n\r\n    test(\"returns 'unknown' for empty path\", () => {\r\n      expect(PlatformPaths.getProjectName(\"\")).toBe(\"unknown\");\r\n    });\r\n  });\r\n\r\n  describe(\"separator\", () => {\r\n    test(\"returns correct separator for platform\", () => {\r\n      const sep = PlatformPaths.separator;\r\n      // Should match the current platform's separator\r\n      expect(sep).toBe(path.sep);\r\n    });\r\n  });\r\n});\r\n\r\ndescribe(\"toPosixPath\", () => {\r\n  describe(\"on non-Windows platforms\", () => {\r\n    test(\"returns POSIX paths unchanged\", () => {\r\n      if (process.platform !== \"win32\") {\r\n        expect(toPosixPath(\"/home/user/project\")).toBe(\"/home/user/project\");\r\n        expect(toPosixPath(\"/tmp/mux-bashes\")).toBe(\"/tmp/mux-bashes\");\r\n      }\r\n    });\r\n\r\n    test(\"returns paths with spaces unchanged\", () => {\r\n      if (process.platform !== \"win32\") {\r\n        expect(toPosixPath(\"/home/user/my project\")).toBe(\"/home/user/my project\");\r\n      }\r\n    });\r\n\r\n    test(\"returns relative paths unchanged\", () => {\r\n      if (process.platform !== \"win32\") {\r\n        expect(toPosixPath(\"relative/path/file.txt\")).toBe(\"relative/path/file.txt\");\r\n      }\r\n    });\r\n\r\n    test(\"returns empty string unchanged\", () => {\r\n      if (process.platform !== \"win32\") {\r\n        expect(toPosixPath(\"\")).toBe(\"\");\r\n      }\r\n    });\r\n  });\r\n\r\n  describe(\"path format handling\", () => {\r\n    test(\"handles paths with special characters\", () => {\r\n      const input = \"/path/with spaces/and-dashes/under_scores\";\r\n      const result = toPosixPath(input);\r\n      expect(typeof result).toBe(\"string\");\r\n      if (process.platform !== \"win32\") {\r\n        expect(result).toBe(input);\r\n      }\r\n    });\r\n\r\n    test(\"handles deeply nested paths\", () => {\r\n      const input = \"/a/b/c/d/e/f/g/h/i/j/file.txt\";\r\n      const result = toPosixPath(input);\r\n      expect(typeof result).toBe(\"string\");\r\n      if (process.platform !== \"win32\") {\r\n        expect(result).toBe(input);\r\n      }\r\n    });\r\n  });\r\n\r\n  // Windows-specific behavior documentation\r\n  // These tests document expected behavior but can only truly verify on Windows CI\r\n  describe(\"Windows behavior (documented)\", () => {\r\n    test(\"converts Windows drive paths to POSIX format on Windows\", () => {\r\n      // On Windows with Git Bash/MSYS2, cygpath converts:\r\n      //   \"C:\\\\Users\\\\test\" → \"/c/Users/test\"\r\n      //   \"C:\\\\Program Files\\\\Git\" → \"/c/Program Files/Git\"\r\n      //   \"D:\\\\Projects\\\\mux\" → \"/d/Projects/mux\"\r\n      //\r\n      // On non-Windows, this is a no-op (returns input unchanged)\r\n      if (process.platform === \"win32\") {\r\n        // Real Windows test - only runs on Windows CI\r\n        const result = toPosixPath(\"C:\\\\Users\\\\test\");\r\n        expect(result).toMatch(/^\\/c\\/Users\\/test$/i);\r\n      }\r\n    });\r\n\r\n    test(\"falls back to original path if cygpath unavailable\", () => {\r\n      // If cygpath is not available (edge case), the function catches\r\n      // the error and returns the original path unchanged\r\n      // This prevents crashes if Git Bash is misconfigured\r\n      expect(true).toBe(true); // Cannot easily test without mocking execSync\r\n    });\r\n  });\r\n});\r\n"]}