{"version":3,"file":"paths.main.js","sourceRoot":"","sources":["../../../src/node/utils/paths.main.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Platform-aware path utilities for main process (Node) only.\n * Safe to use Node globals like process and environment variables.\n *\n * NOTE: Renderer should import from './paths' (renderer-safe subset)\n * and use IPC for any operations that require environment access.\n */\n\nimport { platform, env } from \"node:process\";\n\nexport interface PathComponents {\n  root: string; // \"/\" on Unix, \"C:\\\\\" on Windows, \"\" for relative paths\n  segments: string[]; // Directory segments (excluding basename)\n  basename: string; // Final path component\n}\n\n/**\n * Determine if current platform is Windows (main process)\n */\nfunction isWindowsPlatform(): boolean {\n  return platform === \"win32\";\n}\n\nfunction getSeparator(): string {\n  return isWindowsPlatform() ? \"\\\\\" : \"/\";\n}\n\nfunction getHomeDir(): string {\n  if (isWindowsPlatform()) {\n    return env.USERPROFILE ?? \"\";\n  }\n\n  return env.HOME ?? \"\";\n}\n\n/**\n * OS-aware path utilities that handle Windows and Unix paths correctly.\n * Main-process version includes environment-aware helpers.\n */\nexport class PlatformPaths {\n  /**\n   * Get the appropriate path separator for the current platform\n   */\n  static get separator(): string {\n    return getSeparator();\n  }\n\n  /**\n   * Extract basename from path (OS-aware)\n   */\n  static basename(filePath: string): string {\n    if (!filePath || typeof filePath !== \"string\") {\n      return filePath;\n    }\n\n    const lastSlash = isWindowsPlatform()\n      ? Math.max(filePath.lastIndexOf(\"/\"), filePath.lastIndexOf(\"\\\\\"))\n      : filePath.lastIndexOf(\"/\");\n    if (lastSlash === -1) {\n      return filePath;\n    }\n    return filePath.slice(lastSlash + 1);\n  }\n\n  /**\n   * Split path into components (OS-aware)\n   */\n  static parse(filePath: string): PathComponents {\n    if (!filePath || typeof filePath !== \"string\") {\n      return { root: \"\", segments: [], basename: filePath };\n    }\n\n    const original = filePath;\n    let root = \"\";\n    let dir = \"\";\n    let base = \"\";\n\n    // Determine basename and directory\n    const lastSlash = isWindowsPlatform()\n      ? Math.max(original.lastIndexOf(\"/\"), original.lastIndexOf(\"\\\\\"))\n      : original.lastIndexOf(\"/\");\n    if (lastSlash === -1) {\n      base = original;\n      dir = \"\";\n    } else {\n      base = original.slice(lastSlash + 1);\n      dir = original.slice(0, lastSlash);\n    }\n\n    // Determine root\n    if (isWindowsPlatform()) {\n      const driveMatch = /^[A-Za-z]:[\\\\/]/.exec(original);\n      if (driveMatch) {\n        root = driveMatch[0];\n        // Ensure dir does not include root\n        if (dir.startsWith(root)) {\n          dir = dir.slice(root.length);\n        }\n      } else if (original.startsWith(\"\\\\\\\\\")) {\n        // UNC paths - treat leading double-backslash as root\n        root = \"\\\\\\\\\";\n        if (dir.startsWith(root)) {\n          dir = dir.slice(root.length);\n        }\n      }\n      // Also treat Unix-style absolute paths as absolute even on Windows\n      if (!root && original.startsWith(\"/\")) {\n        root = \"/\";\n        if (dir.startsWith(root)) {\n          dir = dir.slice(root.length);\n        }\n      }\n    } else if (original.startsWith(\"/\")) {\n      root = \"/\";\n      if (dir.startsWith(root)) {\n        dir = dir.slice(root.length);\n      }\n    }\n\n    const separatorRegex = isWindowsPlatform() ? /[\\\\/]+/ : /\\/+/;\n    const segments = dir ? dir.split(separatorRegex).filter(Boolean) : [];\n\n    return {\n      root,\n      segments,\n      basename: base,\n    };\n  }\n\n  /**\n   * Format path for display with fish-style abbreviation (OS-aware)\n   * Abbreviates all directory components except the last one to their first letter\n   */\n  static abbreviate(filePath: string): string {\n    if (!filePath || typeof filePath !== \"string\") {\n      return filePath;\n    }\n\n    const { root, segments, basename } = this.parse(filePath);\n\n    // Abbreviate all segments to first character\n    const abbreviated = segments.map((seg) => (seg.length > 0 ? seg[0] : seg));\n\n    // Reconstruct path - handle root separately to avoid double separator\n    if (!root && abbreviated.length === 0) {\n      return basename;\n    }\n\n    const sep = isWindowsPlatform() ? (filePath.includes(\"\\\\\") ? \"\\\\\" : \"/\") : \"/\";\n    const joined = [...abbreviated, basename].filter(Boolean).join(sep);\n    if (!root) {\n      return joined;\n    }\n    const rootEndsWithSep = root.endsWith(\"\\\\\") || root.endsWith(\"/\");\n    return rootEndsWithSep ? root + joined : root + sep + joined;\n  }\n\n  /**\n   * Split an abbreviated path into directory path and basename\n   */\n  static splitAbbreviated(filePath: string): { dirPath: string; basename: string } {\n    if (!filePath || typeof filePath !== \"string\") {\n      return { dirPath: \"\", basename: filePath };\n    }\n\n    const sep = isWindowsPlatform() ? (filePath.includes(\"\\\\\") ? \"\\\\\" : \"/\") : \"/\";\n    const lastSlash = filePath.lastIndexOf(sep);\n    if (lastSlash === -1) {\n      return { dirPath: \"\", basename: filePath };\n    }\n    return {\n      dirPath: filePath.slice(0, lastSlash + 1),\n      basename: filePath.slice(lastSlash + 1),\n    };\n  }\n\n  /**\n   * Format home directory path for display (shows ~ on Unix, full path on Windows)\n   */\n  static formatHome(filePath: string): string {\n    if (!filePath || typeof filePath !== \"string\") {\n      return filePath;\n    }\n\n    const home = getHomeDir();\n    if (!home) {\n      return filePath;\n    }\n\n    // Replace home with tilde on all platforms for display purposes\n    if (filePath.startsWith(home)) {\n      return filePath.replace(home, \"~\");\n    }\n\n    return filePath;\n  }\n\n  /**\n   * Expand user home in path (cross-platform)\n   * Handles ~ on Unix and %USERPROFILE% on Windows\n   */\n  static expandHome(filePath: string): string {\n    if (!filePath || typeof filePath !== \"string\") {\n      return filePath;\n    }\n\n    // In tests and other isolated environments, mux can be configured to store all\n    // state under a custom root via MUX_ROOT. We also allow runtime config paths\n    // like \"~/.mux/src\" (portable, works for both local + SSH) to resolve to that\n    // root when MUX_ROOT is set.\n    const muxRoot = env.MUX_ROOT;\n    if (muxRoot) {\n      const normalizedMuxRoot = muxRoot.replace(/[\\\\/]+$/g, \"\");\n      const sep = getSeparator();\n      const prefixes = [\"~/.mux\", \"~\\\\.mux\"] as const;\n      for (const prefix of prefixes) {\n        if (filePath === prefix) {\n          return normalizedMuxRoot;\n        }\n\n        const slashPrefix = `${prefix}/`;\n        const backslashPrefix = `${prefix}\\\\`;\n        if (filePath.startsWith(slashPrefix) || filePath.startsWith(backslashPrefix)) {\n          const rest = filePath.slice(prefix.length + 1);\n          const normalizedRest = rest.replace(/[\\\\/]+/g, sep);\n          return normalizedMuxRoot + (normalizedRest ? sep + normalizedRest : \"\");\n        }\n      }\n    }\n\n    if (filePath === \"~\") {\n      return getHomeDir() || filePath;\n    }\n\n    // Handle Unix-style ~/path\n    if (filePath.startsWith(\"~/\") || filePath.startsWith(\"~\\\\\")) {\n      const home = getHomeDir();\n      if (!home) return filePath;\n      const sep = getSeparator();\n      const rest = filePath.slice(2);\n      return home + (rest ? sep + rest.replace(/[\\\\/]+/g, sep) : \"\");\n    }\n\n    // Handle Windows %USERPROFILE% environment variable\n    if (isWindowsPlatform() && filePath.includes(\"%USERPROFILE%\")) {\n      const home = getHomeDir();\n      if (!home) return filePath;\n      return filePath.replace(/%USERPROFILE%/g, home);\n    }\n\n    return filePath;\n  }\n\n  /**\n   * Get project name from path (OS-aware)\n   * Extracts the final directory name from a project path\n   */\n  static getProjectName(projectPath: string): string {\n    return this.basename(projectPath) || \"unknown\";\n  }\n}\n"]}