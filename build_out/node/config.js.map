{"version":3,"file":"config.js","sourceRoot":"","sources":["../../src/node/config.ts"],"names":[],"mappings":"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","sourcesContent":["import * as fs from \"fs\";\r\nimport * as path from \"path\";\r\nimport * as crypto from \"crypto\";\r\nimport * as jsonc from \"jsonc-parser\";\r\nimport writeFileAtomic from \"write-file-atomic\";\r\nimport { log } from \"@/node/services/log\";\r\nimport type { WorkspaceMetadata, FrontendWorkspaceMetadata } from \"@/common/types/workspace\";\r\nimport type { Secret, SecretsConfig } from \"@/common/types/secrets\";\r\nimport type {\r\n  Workspace,\r\n  ProjectConfig,\r\n  ProjectsConfig,\r\n  FeatureFlagOverride,\r\n  CustomModelConfig,\r\n} from \"@/common/types/project\";\r\nimport type { IconThemeConfig } from \"@/common/types/iconTheme\";\r\nimport {\r\n  DEFAULT_TASK_SETTINGS,\r\n  normalizeSubagentAiDefaults,\r\n  normalizeTaskSettings,\r\n} from \"@/common/types/tasks\";\r\nimport { isLayoutPresetsConfigEmpty, normalizeLayoutPresetsConfig } from \"@/common/types/uiLayouts\";\r\nimport { normalizeAgentAiDefaults } from \"@/common/types/agentAiDefaults\";\r\nimport { DEFAULT_RUNTIME_CONFIG } from \"@/common/constants/workspace\";\r\nimport { isIncompatibleRuntimeConfig } from \"@/common/utils/runtimeCompatibility\";\r\nimport { getMuxHome } from \"@/common/constants/paths\";\r\nimport { PlatformPaths } from \"@/common/utils/paths\";\r\nimport { isValidModelFormat, normalizeGatewayModel } from \"@/common/utils/ai/models\";\r\nimport { stripTrailingSlashes } from \"@/node/utils/pathUtils\";\r\nimport { getContainerName as getDockerContainerName } from \"@/node/runtime/DockerRuntime\";\r\n\r\n// Re-export project types from dedicated types file (for preload usage)\r\nexport type { Workspace, ProjectConfig, ProjectsConfig, CustomModelConfig };\r\n\r\nexport interface ProviderConfig {\r\n  apiKey?: string;\r\n  baseUrl?: string;\r\n  baseURL?: string;\r\n  headers?: Record<string, string>;\r\n  [key: string]: unknown;\r\n}\r\n\r\nfunction parseOptionalNonEmptyString(value: unknown): string | undefined {\r\n  if (typeof value !== \"string\") {\r\n    return undefined;\r\n  }\r\n\r\n  const trimmed = value.trim();\r\n  return trimmed ? trimmed : undefined;\r\n}\r\n\r\nfunction parseOptionalEnvBoolean(value: unknown): boolean | undefined {\r\n  if (typeof value !== \"string\") {\r\n    return undefined;\r\n  }\r\n\r\n  const normalized = value.trim().toLowerCase();\r\n  if (!normalized) {\r\n    return undefined;\r\n  }\r\n\r\n  if (normalized === \"1\" || normalized === \"true\" || normalized === \"yes\" || normalized === \"on\") {\r\n    return true;\r\n  }\r\n\r\n  if (normalized === \"0\" || normalized === \"false\" || normalized === \"no\" || normalized === \"off\") {\r\n    return false;\r\n  }\r\n\r\n  return undefined;\r\n}\r\nfunction parseOptionalBoolean(value: unknown): boolean | undefined {\r\n  return typeof value === \"boolean\" ? value : undefined;\r\n}\r\n\r\nfunction parseOptionalStringArray(value: unknown): string[] | undefined {\r\n  if (!Array.isArray(value)) {\r\n    return undefined;\r\n  }\r\n\r\n  return value.filter((item): item is string => typeof item === \"string\");\r\n}\r\nfunction normalizeOptionalModelString(value: unknown): string | undefined {\r\n  if (typeof value !== \"string\") {\r\n    return undefined;\r\n  }\r\n\r\n  const trimmed = value.trim();\r\n  if (!trimmed) {\r\n    return undefined;\r\n  }\r\n\r\n  // Reject malformed mux-gateway strings (\"mux-gateway:provider\" without \"/model\").\r\n  if (trimmed.startsWith(\"mux-gateway:\") && !trimmed.includes(\"/\")) {\r\n    return undefined;\r\n  }\r\n\r\n  const normalized = normalizeGatewayModel(trimmed);\r\n  if (!isValidModelFormat(normalized)) {\r\n    return undefined;\r\n  }\r\n\r\n  return normalized;\r\n}\r\n\r\nfunction normalizeOptionalModelStringArray(value: unknown): string[] | undefined {\r\n  if (!Array.isArray(value)) {\r\n    return undefined;\r\n  }\r\n\r\n  const out: string[] = [];\r\n  const seen = new Set<string>();\r\n\r\n  for (const item of value) {\r\n    const normalized = normalizeOptionalModelString(item);\r\n    if (!normalized) continue;\r\n    if (seen.has(normalized)) continue;\r\n    seen.add(normalized);\r\n    out.push(normalized);\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\nfunction parseOptionalPort(value: unknown): number | undefined {\r\n  if (typeof value !== \"number\" || !Number.isFinite(value) || !Number.isInteger(value)) {\r\n    return undefined;\r\n  }\r\n\r\n  if (value < 0 || value > 65535) {\r\n    return undefined;\r\n  }\r\n\r\n  return value;\r\n}\r\nexport type ProvidersConfig = Record<string, ProviderConfig>;\r\n\r\n/**\r\n * Config - Centralized configuration management\r\n *\r\n * Encapsulates all config paths and operations, making them dependency-injectable\r\n * and testable. Pass a custom rootDir for tests to avoid polluting ~/.mux\r\n */\r\nexport class Config {\r\n  readonly rootDir: string;\r\n  readonly sessionsDir: string;\r\n  readonly srcDir: string;\r\n  private readonly configFile: string;\r\n  private readonly providersFile: string;\r\n  private readonly secretsFile: string;\r\n\r\n  constructor(rootDir?: string) {\r\n    this.rootDir = rootDir ?? getMuxHome();\r\n    this.sessionsDir = path.join(this.rootDir, \"sessions\");\r\n    this.srcDir = path.join(this.rootDir, \"src\");\r\n    this.configFile = path.join(this.rootDir, \"config.json\");\r\n    this.providersFile = path.join(this.rootDir, \"providers.jsonc\");\r\n    this.secretsFile = path.join(this.rootDir, \"secrets.json\");\r\n  }\r\n\r\n  loadConfigOrDefault(): ProjectsConfig {\r\n    try {\r\n      if (fs.existsSync(this.configFile)) {\r\n        const data = fs.readFileSync(this.configFile, \"utf-8\");\r\n        const parsed = JSON.parse(data) as {\r\n          projects?: unknown;\r\n          apiServerBindHost?: unknown;\r\n          apiServerPort?: unknown;\r\n          apiServerServeWebUi?: unknown;\r\n          mdnsAdvertisementEnabled?: unknown;\r\n          mdnsServiceName?: unknown;\r\n          serverSshHost?: string;\r\n          viewedSplashScreens?: string[];\r\n          featureFlagOverrides?: Record<string, \"default\" | \"on\" | \"off\">;\r\n          layoutPresets?: unknown;\r\n          taskSettings?: unknown;\r\n          muxGatewayEnabled?: unknown;\r\n          muxGatewayModels?: unknown;\r\n          defaultModel?: unknown;\r\n          hiddenModels?: unknown;\r\n          preferredCompactionModel?: unknown;\r\n          agentAiDefaults?: unknown;\r\n          subagentAiDefaults?: unknown;\r\n          useSSH2Transport?: unknown;\r\n          muxGovernorUrl?: unknown;\r\n          muxGovernorToken?: unknown;\r\n          stopCoderWorkspaceOnArchive?: unknown;\r\n          customModelPrices?: unknown;\r\n        iconThemeConfig?: unknown;\r\n        };\r\n\r\n        // Config is stored as array of [path, config] pairs\r\n        if (parsed.projects && Array.isArray(parsed.projects)) {\r\n          const rawPairs = parsed.projects as Array<[string, ProjectConfig]>;\r\n          // Migrate: normalize project paths by stripping trailing slashes\r\n          // This fixes configs created with paths like \"/home/user/project/\"\r\n          // Also filter out any malformed entries (null/undefined paths)\r\n          const normalizedPairs = rawPairs\r\n            .filter(([projectPath]) => {\r\n              if (!projectPath || typeof projectPath !== \"string\") {\r\n                log.warn(\"Filtering out project with invalid path\", { projectPath });\r\n                return false;\r\n              }\r\n              return true;\r\n            })\r\n            .map(([projectPath, projectConfig]) => {\r\n              return [stripTrailingSlashes(projectPath), projectConfig] as [string, ProjectConfig];\r\n            });\r\n          const projectsMap = new Map<string, ProjectConfig>(normalizedPairs);\r\n\r\n          const taskSettings = normalizeTaskSettings(parsed.taskSettings);\r\n\r\n          const muxGatewayEnabled = parseOptionalBoolean(parsed.muxGatewayEnabled);\r\n          const muxGatewayModels = parseOptionalStringArray(parsed.muxGatewayModels);\r\n\r\n          const defaultModel = normalizeOptionalModelString(parsed.defaultModel);\r\n          const hiddenModels = normalizeOptionalModelStringArray(parsed.hiddenModels);\r\n          const preferredCompactionModel = normalizeOptionalModelString(\r\n            parsed.preferredCompactionModel\r\n          );\r\n          const legacySubagentAiDefaults = normalizeSubagentAiDefaults(parsed.subagentAiDefaults);\r\n\r\n          // Default ON: store `false` only so config.json stays minimal.\r\n          const stopCoderWorkspaceOnArchive =\r\n            parseOptionalBoolean(parsed.stopCoderWorkspaceOnArchive) === false ? false : undefined;\r\n\r\n          const agentAiDefaults =\r\n            parsed.agentAiDefaults !== undefined\r\n              ? normalizeAgentAiDefaults(parsed.agentAiDefaults)\r\n              : normalizeAgentAiDefaults(legacySubagentAiDefaults);\r\n\r\n          const layoutPresetsRaw = normalizeLayoutPresetsConfig(parsed.layoutPresets);\r\n          const layoutPresets = isLayoutPresetsConfigEmpty(layoutPresetsRaw)\r\n            ? undefined\r\n            : layoutPresetsRaw;\r\n\r\n          return {\r\n            projects: projectsMap,\r\n            apiServerBindHost: parseOptionalNonEmptyString(parsed.apiServerBindHost),\r\n            apiServerServeWebUi: parseOptionalBoolean(parsed.apiServerServeWebUi)\r\n              ? true\r\n              : undefined,\r\n            apiServerPort: parseOptionalPort(parsed.apiServerPort),\r\n            mdnsAdvertisementEnabled: parseOptionalBoolean(parsed.mdnsAdvertisementEnabled),\r\n            mdnsServiceName: parseOptionalNonEmptyString(parsed.mdnsServiceName),\r\n            serverSshHost: parsed.serverSshHost,\r\n            viewedSplashScreens: parsed.viewedSplashScreens,\r\n            layoutPresets,\r\n            taskSettings,\r\n            muxGatewayEnabled,\r\n            muxGatewayModels,\r\n            defaultModel,\r\n            hiddenModels,\r\n            preferredCompactionModel,\r\n            agentAiDefaults,\r\n            // Legacy fields are still parsed and returned for downgrade compatibility.\r\n            subagentAiDefaults: legacySubagentAiDefaults,\r\n            featureFlagOverrides: parsed.featureFlagOverrides,\r\n            useSSH2Transport: parseOptionalBoolean(parsed.useSSH2Transport),\r\n            muxGovernorUrl: parseOptionalNonEmptyString(parsed.muxGovernorUrl),\r\n            muxGovernorToken: parseOptionalNonEmptyString(parsed.muxGovernorToken),\r\n            stopCoderWorkspaceOnArchive,\r\n            customModelPrices: parsed.customModelPrices as Record<string, CustomModelConfig> | undefined,\r\n            iconThemeConfig: parsed.iconThemeConfig as IconThemeConfig | undefined,\r\n          };\r\n        }\r\n      }\r\n    } catch (error) {\r\n      log.error(\"Error loading config:\", error);\r\n    }\r\n\r\n    // Return default config\r\n    return {\r\n      projects: new Map(),\r\n      taskSettings: DEFAULT_TASK_SETTINGS,\r\n      agentAiDefaults: {},\r\n      subagentAiDefaults: {},\r\n    };\r\n  }\r\n\r\n  async saveConfig(config: ProjectsConfig): Promise<void> {\r\n    try {\r\n      if (!fs.existsSync(this.rootDir)) {\r\n        fs.mkdirSync(this.rootDir, { recursive: true });\r\n      }\r\n\r\n      const data: {\r\n        projects: Array<[string, ProjectConfig]>;\r\n        apiServerBindHost?: string;\r\n        apiServerPort?: number;\r\n        apiServerServeWebUi?: boolean;\r\n        mdnsAdvertisementEnabled?: boolean;\r\n        mdnsServiceName?: string;\r\n        serverSshHost?: string;\r\n        viewedSplashScreens?: string[];\r\n        layoutPresets?: ProjectsConfig[\"layoutPresets\"];\r\n        featureFlagOverrides?: ProjectsConfig[\"featureFlagOverrides\"];\r\n        taskSettings?: ProjectsConfig[\"taskSettings\"];\r\n        muxGatewayEnabled?: ProjectsConfig[\"muxGatewayEnabled\"];\r\n        muxGatewayModels?: ProjectsConfig[\"muxGatewayModels\"];\r\n        defaultModel?: ProjectsConfig[\"defaultModel\"];\r\n        hiddenModels?: ProjectsConfig[\"hiddenModels\"];\r\n        preferredCompactionModel?: ProjectsConfig[\"preferredCompactionModel\"];\r\n        agentAiDefaults?: ProjectsConfig[\"agentAiDefaults\"];\r\n        subagentAiDefaults?: ProjectsConfig[\"subagentAiDefaults\"];\r\n        useSSH2Transport?: boolean;\r\n        muxGovernorUrl?: string;\r\n        muxGovernorToken?: string;\r\n        stopCoderWorkspaceOnArchive?: boolean;\r\n        customModelPrices?: Record<string, CustomModelConfig>;\r\n        iconThemeConfig?: IconThemeConfig;\r\n      } = {\r\n        projects: Array.from(config.projects.entries()),\r\n        taskSettings: config.taskSettings ?? DEFAULT_TASK_SETTINGS,\r\n      };\r\n\r\n      const muxGatewayEnabled = parseOptionalBoolean(config.muxGatewayEnabled);\r\n      if (muxGatewayEnabled !== undefined) {\r\n        data.muxGatewayEnabled = muxGatewayEnabled;\r\n      }\r\n\r\n      const muxGatewayModels = parseOptionalStringArray(config.muxGatewayModels);\r\n      if (muxGatewayModels !== undefined) {\r\n        data.muxGatewayModels = muxGatewayModels;\r\n      }\r\n\r\n      const defaultModel = normalizeOptionalModelString(config.defaultModel);\r\n      if (defaultModel !== undefined) {\r\n        data.defaultModel = defaultModel;\r\n      }\r\n\r\n      const hiddenModels = normalizeOptionalModelStringArray(config.hiddenModels);\r\n      if (hiddenModels !== undefined) {\r\n        data.hiddenModels = hiddenModels;\r\n      }\r\n\r\n      const preferredCompactionModel = normalizeOptionalModelString(\r\n        config.preferredCompactionModel\r\n      );\r\n      if (preferredCompactionModel !== undefined) {\r\n        data.preferredCompactionModel = preferredCompactionModel;\r\n      }\r\n      const apiServerBindHost = parseOptionalNonEmptyString(config.apiServerBindHost);\r\n      if (apiServerBindHost) {\r\n        data.apiServerBindHost = apiServerBindHost;\r\n      }\r\n\r\n      const apiServerServeWebUi = parseOptionalBoolean(config.apiServerServeWebUi);\r\n      if (apiServerServeWebUi) {\r\n        data.apiServerServeWebUi = true;\r\n      }\r\n\r\n      const apiServerPort = parseOptionalPort(config.apiServerPort);\r\n      if (apiServerPort !== undefined) {\r\n        data.apiServerPort = apiServerPort;\r\n      }\r\n\r\n      const mdnsAdvertisementEnabled = parseOptionalBoolean(config.mdnsAdvertisementEnabled);\r\n      if (mdnsAdvertisementEnabled !== undefined) {\r\n        data.mdnsAdvertisementEnabled = mdnsAdvertisementEnabled;\r\n      }\r\n\r\n      const mdnsServiceName = parseOptionalNonEmptyString(config.mdnsServiceName);\r\n      if (mdnsServiceName) {\r\n        data.mdnsServiceName = mdnsServiceName;\r\n      }\r\n\r\n      if (config.serverSshHost) {\r\n        data.serverSshHost = config.serverSshHost;\r\n      }\r\n      if (config.featureFlagOverrides) {\r\n        data.featureFlagOverrides = config.featureFlagOverrides;\r\n      }\r\n      if (config.layoutPresets) {\r\n        const normalized = normalizeLayoutPresetsConfig(config.layoutPresets);\r\n        if (!isLayoutPresetsConfigEmpty(normalized)) {\r\n          data.layoutPresets = normalized;\r\n        }\r\n      }\r\n      if (config.viewedSplashScreens) {\r\n        data.viewedSplashScreens = config.viewedSplashScreens;\r\n      }\r\n      if (config.agentAiDefaults && Object.keys(config.agentAiDefaults).length > 0) {\r\n        data.agentAiDefaults = config.agentAiDefaults;\r\n\r\n        const legacySubagent: Record<string, unknown> = {};\r\n        for (const [id, entry] of Object.entries(config.agentAiDefaults)) {\r\n          if (id === \"plan\" || id === \"exec\" || id === \"compact\") continue;\r\n          legacySubagent[id] = entry;\r\n        }\r\n        if (Object.keys(legacySubagent).length > 0) {\r\n          data.subagentAiDefaults = legacySubagent as ProjectsConfig[\"subagentAiDefaults\"];\r\n        }\r\n      } else {\r\n        // Legacy only.\r\n        if (config.subagentAiDefaults && Object.keys(config.subagentAiDefaults).length > 0) {\r\n          data.subagentAiDefaults = config.subagentAiDefaults;\r\n        }\r\n      }\r\n\r\n      if (config.useSSH2Transport !== undefined) {\r\n        data.useSSH2Transport = config.useSSH2Transport;\r\n      }\r\n\r\n      const muxGovernorUrl = parseOptionalNonEmptyString(config.muxGovernorUrl);\r\n      if (muxGovernorUrl) {\r\n        data.muxGovernorUrl = muxGovernorUrl;\r\n      }\r\n\r\n      const muxGovernorToken = parseOptionalNonEmptyString(config.muxGovernorToken);\r\n      if (muxGovernorToken) {\r\n        data.muxGovernorToken = muxGovernorToken;\r\n      }\r\n\r\n      // Default ON: persist `false` only.\r\n      if (config.stopCoderWorkspaceOnArchive === false) {\r\n        data.stopCoderWorkspaceOnArchive = false;\r\n      }\r\n\r\n      if (config.customModelPrices) {\r\n        data.customModelPrices = config.customModelPrices;\r\n      }\r\n\r\n      if (config.iconThemeConfig) {\r\n        data.iconThemeConfig = config.iconThemeConfig;\r\n      }\r\n\r\n      await writeFileAtomic(this.configFile, JSON.stringify(data, null, 2), \"utf-8\");\r\n    } catch (error) {\r\n      log.error(\"Error saving config:\", error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Edit config atomically using a transformation function\r\n   * @param fn Function that takes current config and returns modified config\r\n   */\r\n  async editConfig(fn: (config: ProjectsConfig) => ProjectsConfig): Promise<void> {\r\n    const config = this.loadConfigOrDefault();\r\n    const newConfig = fn(config);\r\n    await this.saveConfig(newConfig);\r\n  }\r\n\r\n  /**\r\n   * Cross-client feature flag overrides (shared via ~/.mux/config.json).\r\n   */\r\n  getFeatureFlagOverride(flagKey: string): FeatureFlagOverride {\r\n    const config = this.loadConfigOrDefault();\r\n    const override = config.featureFlagOverrides?.[flagKey];\r\n    if (override === \"on\" || override === \"off\" || override === \"default\") {\r\n      return override;\r\n    }\r\n    return \"default\";\r\n  }\r\n\r\n  async setFeatureFlagOverride(flagKey: string, override: FeatureFlagOverride): Promise<void> {\r\n    await this.editConfig((config) => {\r\n      const next = { ...(config.featureFlagOverrides ?? {}) };\r\n      if (override === \"default\") {\r\n        delete next[flagKey];\r\n      } else {\r\n        next[flagKey] = override;\r\n      }\r\n\r\n      config.featureFlagOverrides = Object.keys(next).length > 0 ? next : undefined;\r\n      return config;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * mDNS advertisement enablement.\r\n   *\r\n   * - true: attempt to advertise (will warn if the API server is loopback-only)\r\n   * - false: never advertise\r\n   * - undefined: \"auto\" (advertise only when the API server is LAN-reachable)\r\n   */\r\n  getMdnsAdvertisementEnabled(): boolean | undefined {\r\n    const envOverride = parseOptionalEnvBoolean(process.env.MUX_MDNS_ADVERTISE);\r\n    if (envOverride !== undefined) {\r\n      return envOverride;\r\n    }\r\n\r\n    const config = this.loadConfigOrDefault();\r\n    return config.mdnsAdvertisementEnabled;\r\n  }\r\n\r\n  /** Optional DNS-SD service instance name override. */\r\n  getMdnsServiceName(): string | undefined {\r\n    const envName = parseOptionalNonEmptyString(process.env.MUX_MDNS_SERVICE_NAME);\r\n    if (envName) {\r\n      return envName;\r\n    }\r\n\r\n    const config = this.loadConfigOrDefault();\r\n    return config.mdnsServiceName;\r\n  }\r\n\r\n  /**\r\n   * Get the configured SSH hostname for this server (used for editor deep links in browser mode).\r\n   */\r\n  getServerSshHost(): string | undefined {\r\n    const config = this.loadConfigOrDefault();\r\n    return config.serverSshHost;\r\n  }\r\n\r\n  private getProjectName(projectPath: string): string {\r\n    return PlatformPaths.getProjectName(projectPath);\r\n  }\r\n\r\n  /**\r\n   * Generate a stable unique workspace ID.\r\n   * Uses 10 random hex characters for readability while maintaining uniqueness.\r\n   *\r\n   * Example: \"a1b2c3d4e5\"\r\n   */\r\n  generateStableId(): string {\r\n    // Generate 5 random bytes and convert to 10 hex chars\r\n    return crypto.randomBytes(5).toString(\"hex\");\r\n  }\r\n\r\n  /**\r\n   * DEPRECATED: Generate legacy workspace ID from project and workspace paths.\r\n   * This method is used only for legacy workspace migration to look up old workspaces.\r\n   * New workspaces use generateStableId() which returns a random stable ID.\r\n   *\r\n   * DO NOT use this method or its format to construct workspace IDs anywhere in the codebase.\r\n   * Workspace IDs are backend implementation details and must only come from backend operations.\r\n   */\r\n  generateLegacyId(projectPath: string, workspacePath: string): string {\r\n    const projectBasename = this.getProjectName(projectPath);\r\n    const workspaceBasename = PlatformPaths.basename(workspacePath);\r\n    return `${projectBasename}-${workspaceBasename}`;\r\n  }\r\n\r\n  /**\r\n   * Get the workspace directory path for a given directory name.\r\n   * The directory name is the workspace name (branch name).\r\n   */\r\n\r\n  /**\r\n   * Add paths to WorkspaceMetadata to create FrontendWorkspaceMetadata.\r\n   * Helper to avoid duplicating path computation logic.\r\n   */\r\n  private addPathsToMetadata(\r\n    metadata: WorkspaceMetadata,\r\n    workspacePath: string,\r\n    _projectPath: string\r\n  ): FrontendWorkspaceMetadata {\r\n    const result: FrontendWorkspaceMetadata = {\r\n      ...metadata,\r\n      namedWorkspacePath: workspacePath,\r\n    };\r\n\r\n    // Check for incompatible runtime configs (from newer mux versions)\r\n    if (isIncompatibleRuntimeConfig(metadata.runtimeConfig)) {\r\n      result.incompatibleRuntime =\r\n        \"This workspace was created with a newer version of mux. \" +\r\n        \"Please upgrade mux to use this workspace.\";\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Find a workspace path and project path by workspace ID\r\n   * @returns Object with workspace and project paths, or null if not found\r\n   */\r\n  findWorkspace(workspaceId: string): { workspacePath: string; projectPath: string } | null {\r\n    const config = this.loadConfigOrDefault();\r\n\r\n    for (const [projectPath, project] of config.projects) {\r\n      for (const workspace of project.workspaces) {\r\n        // NEW FORMAT: Check config first (primary source of truth after migration)\r\n        if (workspace.id === workspaceId) {\r\n          return { workspacePath: workspace.path, projectPath };\r\n        }\r\n\r\n        // LEGACY FORMAT: Fall back to metadata.json and legacy ID for unmigrated workspaces\r\n        if (!workspace.id) {\r\n          // Extract workspace basename (could be stable ID or legacy name)\r\n          const workspaceBasename =\r\n            workspace.path.split(\"/\").pop() ?? workspace.path.split(\"\\\\\").pop() ?? \"unknown\";\r\n\r\n          // Try loading metadata with basename as ID (works for old workspaces)\r\n          const metadataPath = path.join(this.getSessionDir(workspaceBasename), \"metadata.json\");\r\n          if (fs.existsSync(metadataPath)) {\r\n            try {\r\n              const data = fs.readFileSync(metadataPath, \"utf-8\");\r\n              const metadata = JSON.parse(data) as WorkspaceMetadata;\r\n              if (metadata.id === workspaceId) {\r\n                return { workspacePath: workspace.path, projectPath };\r\n              }\r\n            } catch {\r\n              // Ignore parse errors, try legacy ID\r\n            }\r\n          }\r\n\r\n          // Try legacy ID format as last resort\r\n          const legacyId = this.generateLegacyId(projectPath, workspace.path);\r\n          if (legacyId === workspaceId) {\r\n            return { workspacePath: workspace.path, projectPath };\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Workspace Path Architecture:\r\n   *\r\n   * Workspace paths are computed on-demand from projectPath + workspace name using\r\n   * config.getWorkspacePath(projectPath, directoryName). This ensures a single source of truth.\r\n   *\r\n   * - Worktree directory name: uses workspace.name (the branch name)\r\n   * - Workspace ID: stable random identifier for identity and sessions (not used for directories)\r\n   *\r\n   * Backend: Uses getWorkspacePath(metadata.projectPath, metadata.name) for workspace directory paths\r\n   * Frontend: Gets enriched metadata with paths via IPC (FrontendWorkspaceMetadata)\r\n   *\r\n   * WorkspaceMetadata.workspacePath is deprecated and will be removed. Use computed\r\n   * paths from getWorkspacePath() or getWorkspacePaths() instead.\r\n   */\r\n\r\n  /**\r\n   * Get the session directory for a specific workspace\r\n   */\r\n  getSessionDir(workspaceId: string): string {\r\n    return path.join(this.sessionsDir, workspaceId);\r\n  }\r\n\r\n  /**\r\n   * Get all workspace metadata by loading config and metadata files.\r\n   *\r\n   * Returns FrontendWorkspaceMetadata with paths already computed.\r\n   * This eliminates the need for separate \"enrichment\" - paths are computed\r\n   * once during the loop when we already have all the necessary data.\r\n   *\r\n   * NEW BEHAVIOR: Config is the primary source of truth\r\n   * - If workspace has id/name/createdAt in config, use those directly\r\n   * - If workspace only has path, fall back to reading metadata.json\r\n   * - Migrate old workspaces by copying metadata from files to config\r\n   *\r\n   * This centralizes workspace metadata in config.json and eliminates the need\r\n   * for scattered metadata.json files (kept for backward compat with older versions).\r\n   *\r\n   * GUARANTEE: Every workspace returned will have a createdAt timestamp.\r\n   * If missing from config or legacy metadata, a new timestamp is assigned and\r\n   * saved to config for subsequent loads.\r\n   */\r\n  async getAllWorkspaceMetadata(): Promise<FrontendWorkspaceMetadata[]> {\r\n    const config = this.loadConfigOrDefault();\r\n    const workspaceMetadata: FrontendWorkspaceMetadata[] = [];\r\n    let configModified = false;\r\n\r\n    for (const [projectPath, projectConfig] of config.projects) {\r\n      // Validate project path is not empty (defensive check for corrupted config)\r\n      if (!projectPath) {\r\n        log.warn(\"Skipping project with empty path in config\", {\r\n          workspaceCount: projectConfig.workspaces?.length ?? 0,\r\n        });\r\n        continue;\r\n      }\r\n\r\n      const projectName = this.getProjectName(projectPath);\r\n\r\n      for (const workspace of projectConfig.workspaces) {\r\n        // Extract workspace basename from path (could be stable ID or legacy name)\r\n        const workspaceBasename =\r\n          workspace.path.split(\"/\").pop() ?? workspace.path.split(\"\\\\\").pop() ?? \"unknown\";\r\n\r\n        try {\r\n          // NEW FORMAT: If workspace has metadata in config, use it directly\r\n          if (workspace.id && workspace.name) {\r\n            const metadata: WorkspaceMetadata = {\r\n              id: workspace.id,\r\n              name: workspace.name,\r\n              title: workspace.title,\r\n              projectName,\r\n              projectPath,\r\n              // GUARANTEE: All workspaces must have createdAt (assign now if missing)\r\n              createdAt: workspace.createdAt ?? new Date().toISOString(),\r\n              // GUARANTEE: All workspaces must have runtimeConfig (apply default if missing)\r\n              runtimeConfig: workspace.runtimeConfig ?? DEFAULT_RUNTIME_CONFIG,\r\n              aiSettings: workspace.aiSettings,\r\n              aiSettingsByAgent:\r\n                workspace.aiSettingsByAgent ??\r\n                (workspace.aiSettings\r\n                  ? {\r\n                    plan: workspace.aiSettings,\r\n                    exec: workspace.aiSettings,\r\n                  }\r\n                  : undefined),\r\n              parentWorkspaceId: workspace.parentWorkspaceId,\r\n              agentType: workspace.agentType,\r\n              taskStatus: workspace.taskStatus,\r\n              reportedAt: workspace.reportedAt,\r\n              taskModelString: workspace.taskModelString,\r\n              taskThinkingLevel: workspace.taskThinkingLevel,\r\n              taskPrompt: workspace.taskPrompt,\r\n              taskTrunkBranch: workspace.taskTrunkBranch,\r\n              archivedAt: workspace.archivedAt,\r\n              unarchivedAt: workspace.unarchivedAt,\r\n              sectionId: workspace.sectionId,\r\n            };\r\n\r\n            // Migrate missing createdAt to config for next load\r\n            if (!workspace.createdAt) {\r\n              workspace.createdAt = metadata.createdAt;\r\n              configModified = true;\r\n            }\r\n\r\n            // Migrate missing runtimeConfig to config for next load\r\n            if (!workspace.aiSettingsByAgent) {\r\n              const derived = workspace.aiSettings\r\n                ? {\r\n                  plan: workspace.aiSettings,\r\n                  exec: workspace.aiSettings,\r\n                }\r\n                : undefined;\r\n              if (derived) {\r\n                workspace.aiSettingsByAgent = derived;\r\n                configModified = true;\r\n              }\r\n            }\r\n\r\n            if (!workspace.runtimeConfig) {\r\n              workspace.runtimeConfig = metadata.runtimeConfig;\r\n              configModified = true;\r\n            }\r\n\r\n            // Populate containerName for Docker workspaces (computed from project path and workspace name)\r\n            if (\r\n              metadata.runtimeConfig?.type === \"docker\" &&\r\n              !metadata.runtimeConfig.containerName\r\n            ) {\r\n              metadata.runtimeConfig = {\r\n                ...metadata.runtimeConfig,\r\n                containerName: getDockerContainerName(projectPath, metadata.name),\r\n              };\r\n            }\r\n\r\n            workspaceMetadata.push(this.addPathsToMetadata(metadata, workspace.path, projectPath));\r\n            continue; // Skip metadata file lookup\r\n          }\r\n\r\n          // LEGACY FORMAT: Fall back to reading metadata.json\r\n          // Try legacy ID format first (project-workspace) - used by E2E tests and old workspaces\r\n          const legacyId = this.generateLegacyId(projectPath, workspace.path);\r\n          const metadataPath = path.join(this.getSessionDir(legacyId), \"metadata.json\");\r\n          let metadataFound = false;\r\n\r\n          if (fs.existsSync(metadataPath)) {\r\n            const data = fs.readFileSync(metadataPath, \"utf-8\");\r\n            const metadata = JSON.parse(data) as WorkspaceMetadata;\r\n\r\n            // Ensure required fields are present\r\n            if (!metadata.name) metadata.name = workspaceBasename;\r\n            if (!metadata.projectPath) metadata.projectPath = projectPath;\r\n            if (!metadata.projectName) metadata.projectName = projectName;\r\n\r\n            // GUARANTEE: All workspaces must have createdAt\r\n            metadata.createdAt ??= new Date().toISOString();\r\n\r\n            // GUARANTEE: All workspaces must have runtimeConfig\r\n            metadata.runtimeConfig ??= DEFAULT_RUNTIME_CONFIG;\r\n\r\n            // Preserve any config-only fields that may not exist in legacy metadata.json\r\n            metadata.aiSettingsByAgent ??=\r\n              workspace.aiSettingsByAgent ??\r\n              (workspace.aiSettings\r\n                ? {\r\n                  plan: workspace.aiSettings,\r\n                  exec: workspace.aiSettings,\r\n                }\r\n                : undefined);\r\n            metadata.aiSettings ??= workspace.aiSettings;\r\n\r\n            // Preserve tree/task metadata when present in config (metadata.json won't have it)\r\n            metadata.parentWorkspaceId ??= workspace.parentWorkspaceId;\r\n            metadata.agentType ??= workspace.agentType;\r\n            metadata.taskStatus ??= workspace.taskStatus;\r\n            metadata.reportedAt ??= workspace.reportedAt;\r\n            metadata.taskModelString ??= workspace.taskModelString;\r\n            metadata.taskThinkingLevel ??= workspace.taskThinkingLevel;\r\n            metadata.taskPrompt ??= workspace.taskPrompt;\r\n            metadata.taskTrunkBranch ??= workspace.taskTrunkBranch;\r\n            // Preserve archived timestamps from config\r\n            metadata.archivedAt ??= workspace.archivedAt;\r\n            metadata.unarchivedAt ??= workspace.unarchivedAt;\r\n            // Preserve section assignment from config\r\n            metadata.sectionId ??= workspace.sectionId;\r\n            if (!workspace.aiSettingsByAgent && metadata.aiSettingsByAgent) {\r\n              workspace.aiSettingsByAgent = metadata.aiSettingsByAgent;\r\n              configModified = true;\r\n            }\r\n\r\n            // Migrate to config for next load\r\n            workspace.id = metadata.id;\r\n            workspace.name = metadata.name;\r\n            workspace.createdAt = metadata.createdAt;\r\n            workspace.runtimeConfig = metadata.runtimeConfig;\r\n            configModified = true;\r\n\r\n            workspaceMetadata.push(this.addPathsToMetadata(metadata, workspace.path, projectPath));\r\n            metadataFound = true;\r\n          }\r\n\r\n          // No metadata found anywhere - create basic metadata\r\n          if (!metadataFound) {\r\n            const legacyId = this.generateLegacyId(projectPath, workspace.path);\r\n            const metadata: WorkspaceMetadata = {\r\n              id: legacyId,\r\n              name: workspaceBasename,\r\n              projectName,\r\n              projectPath,\r\n              // GUARANTEE: All workspaces must have createdAt\r\n              createdAt: new Date().toISOString(),\r\n              // GUARANTEE: All workspaces must have runtimeConfig\r\n              runtimeConfig: DEFAULT_RUNTIME_CONFIG,\r\n              aiSettings: workspace.aiSettings,\r\n              aiSettingsByAgent:\r\n                workspace.aiSettingsByAgent ??\r\n                (workspace.aiSettings\r\n                  ? {\r\n                    plan: workspace.aiSettings,\r\n                    exec: workspace.aiSettings,\r\n                  }\r\n                  : undefined),\r\n              parentWorkspaceId: workspace.parentWorkspaceId,\r\n              agentType: workspace.agentType,\r\n              taskStatus: workspace.taskStatus,\r\n              reportedAt: workspace.reportedAt,\r\n              taskModelString: workspace.taskModelString,\r\n              taskThinkingLevel: workspace.taskThinkingLevel,\r\n              taskPrompt: workspace.taskPrompt,\r\n              taskTrunkBranch: workspace.taskTrunkBranch,\r\n              archivedAt: workspace.archivedAt,\r\n              unarchivedAt: workspace.unarchivedAt,\r\n              sectionId: workspace.sectionId,\r\n            };\r\n\r\n            // Save to config for next load\r\n            workspace.id = metadata.id;\r\n            workspace.name = metadata.name;\r\n            workspace.createdAt = metadata.createdAt;\r\n            workspace.runtimeConfig = metadata.runtimeConfig;\r\n            configModified = true;\r\n\r\n            workspaceMetadata.push(this.addPathsToMetadata(metadata, workspace.path, projectPath));\r\n          }\r\n        } catch (error) {\r\n          log.error(`Failed to load/migrate workspace metadata:`, error);\r\n          // Fallback to basic metadata if migration fails\r\n          const legacyId = this.generateLegacyId(projectPath, workspace.path);\r\n          const metadata: WorkspaceMetadata = {\r\n            id: legacyId,\r\n            name: workspaceBasename,\r\n            projectName,\r\n            projectPath,\r\n            // GUARANTEE: All workspaces must have createdAt (even in error cases)\r\n            createdAt: new Date().toISOString(),\r\n            // GUARANTEE: All workspaces must have runtimeConfig (even in error cases)\r\n            runtimeConfig: DEFAULT_RUNTIME_CONFIG,\r\n            aiSettings: workspace.aiSettings,\r\n            aiSettingsByAgent:\r\n              workspace.aiSettingsByAgent ??\r\n              (workspace.aiSettings\r\n                ? {\r\n                  plan: workspace.aiSettings,\r\n                  exec: workspace.aiSettings,\r\n                }\r\n                : undefined),\r\n            parentWorkspaceId: workspace.parentWorkspaceId,\r\n            agentType: workspace.agentType,\r\n            taskStatus: workspace.taskStatus,\r\n            reportedAt: workspace.reportedAt,\r\n            taskModelString: workspace.taskModelString,\r\n            taskThinkingLevel: workspace.taskThinkingLevel,\r\n            taskPrompt: workspace.taskPrompt,\r\n            taskTrunkBranch: workspace.taskTrunkBranch,\r\n            sectionId: workspace.sectionId,\r\n          };\r\n          workspaceMetadata.push(this.addPathsToMetadata(metadata, workspace.path, projectPath));\r\n        }\r\n      }\r\n    }\r\n\r\n    // Save config if we migrated any workspaces\r\n    if (configModified) {\r\n      await this.saveConfig(config);\r\n    }\r\n\r\n    return workspaceMetadata;\r\n  }\r\n\r\n  /**\r\n   * Add a workspace to config.json (single source of truth for workspace metadata).\r\n   * Creates project entry if it doesn't exist.\r\n   *\r\n   * @param projectPath Absolute path to the project\r\n   * @param metadata Workspace metadata to save\r\n   */\r\n  async addWorkspace(\r\n    projectPath: string,\r\n    metadata: WorkspaceMetadata & { namedWorkspacePath?: string }\r\n  ): Promise<void> {\r\n    await this.editConfig((config) => {\r\n      let project = config.projects.get(projectPath);\r\n\r\n      if (!project) {\r\n        project = { workspaces: [] };\r\n        config.projects.set(projectPath, project);\r\n      }\r\n\r\n      // Check if workspace already exists (by ID)\r\n      const existingIndex = project.workspaces.findIndex((w) => w.id === metadata.id);\r\n\r\n      // Use provided namedWorkspacePath if available (runtime-aware),\r\n      // otherwise fall back to worktree-style path for legacy compatibility\r\n      const projectName = this.getProjectName(projectPath);\r\n      const workspacePath =\r\n        metadata.namedWorkspacePath ?? path.join(this.srcDir, projectName, metadata.name);\r\n      const workspaceEntry: Workspace = {\r\n        path: workspacePath,\r\n        id: metadata.id,\r\n        name: metadata.name,\r\n        title: metadata.title,\r\n        createdAt: metadata.createdAt,\r\n        aiSettingsByAgent: metadata.aiSettingsByAgent,\r\n        runtimeConfig: metadata.runtimeConfig,\r\n        aiSettings: metadata.aiSettings,\r\n        parentWorkspaceId: metadata.parentWorkspaceId,\r\n        agentType: metadata.agentType,\r\n        agentId: metadata.agentId,\r\n        taskStatus: metadata.taskStatus,\r\n        reportedAt: metadata.reportedAt,\r\n        taskModelString: metadata.taskModelString,\r\n        taskThinkingLevel: metadata.taskThinkingLevel,\r\n        taskPrompt: metadata.taskPrompt,\r\n        taskTrunkBranch: metadata.taskTrunkBranch,\r\n        archivedAt: metadata.archivedAt,\r\n        unarchivedAt: metadata.unarchivedAt,\r\n        sectionId: metadata.sectionId,\r\n      };\r\n\r\n      if (existingIndex >= 0) {\r\n        // Update existing workspace\r\n        project.workspaces[existingIndex] = workspaceEntry;\r\n      } else {\r\n        // Add new workspace\r\n        project.workspaces.push(workspaceEntry);\r\n      }\r\n\r\n      return config;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove a workspace from config.json\r\n   *\r\n   * @param workspaceId ID of the workspace to remove\r\n   */\r\n  async removeWorkspace(workspaceId: string): Promise<void> {\r\n    await this.editConfig((config) => {\r\n      let workspaceFound = false;\r\n\r\n      for (const [_projectPath, project] of config.projects) {\r\n        const index = project.workspaces.findIndex((w) => w.id === workspaceId);\r\n        if (index !== -1) {\r\n          project.workspaces.splice(index, 1);\r\n          workspaceFound = true;\r\n          // We don't break here in case duplicates exist (though they shouldn't)\r\n        }\r\n      }\r\n\r\n      if (!workspaceFound) {\r\n        log.warn(`Workspace ${workspaceId} not found in config during removal`);\r\n      }\r\n\r\n      return config;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update workspace metadata fields (e.g., regenerate missing title/branch)\r\n   * Used to fix incomplete metadata after errors or restarts\r\n   */\r\n  async updateWorkspaceMetadata(\r\n    workspaceId: string,\r\n    updates: Partial<Pick<WorkspaceMetadata, \"name\" | \"runtimeConfig\">>\r\n  ): Promise<void> {\r\n    await this.editConfig((config) => {\r\n      for (const [_projectPath, projectConfig] of config.projects) {\r\n        const workspace = projectConfig.workspaces.find((w) => w.id === workspaceId);\r\n        if (workspace) {\r\n          if (updates.name !== undefined) workspace.name = updates.name;\r\n          if (updates.runtimeConfig !== undefined) workspace.runtimeConfig = updates.runtimeConfig;\r\n          return config;\r\n        }\r\n      }\r\n      throw new Error(`Workspace ${workspaceId} not found in config`);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Load providers configuration from JSONC file\r\n   * Supports comments in JSONC format\r\n   */\r\n  loadProvidersConfig(): ProvidersConfig | null {\r\n    try {\r\n      if (fs.existsSync(this.providersFile)) {\r\n        const data = fs.readFileSync(this.providersFile, \"utf-8\");\r\n        return jsonc.parse(data) as ProvidersConfig;\r\n      }\r\n    } catch (error) {\r\n      log.error(\"Error loading providers config:\", error);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Save providers configuration to JSONC file\r\n   * @param config The providers configuration to save\r\n   */\r\n  saveProvidersConfig(config: ProvidersConfig): void {\r\n    try {\r\n      if (!fs.existsSync(this.rootDir)) {\r\n        fs.mkdirSync(this.rootDir, { recursive: true });\r\n      }\r\n\r\n      // Format with 2-space indentation for readability\r\n      const jsonString = JSON.stringify(config, null, 2);\r\n\r\n      // Add a comment header to the file\r\n      const contentWithComments = `// Providers configuration for mux\r\n// Configure your AI providers here\r\n// Example:\r\n// {\r\n//   \"anthropic\": {\r\n//     \"apiKey\": \"sk-ant-...\"\r\n//   },\r\n//   \"openai\": {\r\n//     \"apiKey\": \"sk-...\"\r\n//   },\r\n//   \"xai\": {\r\n//     \"apiKey\": \"sk-xai-...\"\r\n//   },\r\n//   \"ollama\": {\r\n//     \"baseUrl\": \"http://localhost:11434/api\"  // Optional - only needed for remote/custom URL\r\n//   }\r\n// }\r\n${jsonString}`;\r\n\r\n      writeFileAtomic.sync(this.providersFile, contentWithComments, {\r\n        encoding: \"utf-8\",\r\n        mode: 0o600,\r\n      });\r\n    } catch (error) {\r\n      log.error(\"Error saving providers config:\", error);\r\n      throw error; // Re-throw to let caller handle\r\n    }\r\n  }\r\n\r\n  private static readonly GLOBAL_SECRETS_KEY = \"__global__\";\r\n\r\n  private static normalizeSecretsProjectPath(projectPath: string): string {\r\n    return stripTrailingSlashes(projectPath);\r\n  }\r\n\r\n  private static isSecretValue(value: unknown): value is Secret[\"value\"] {\r\n    if (typeof value === \"string\") {\r\n      return true;\r\n    }\r\n\r\n    return (\r\n      typeof value === \"object\" &&\r\n      value !== null &&\r\n      \"secret\" in value &&\r\n      typeof (value as { secret?: unknown }).secret === \"string\"\r\n    );\r\n  }\r\n\r\n  private static isSecret(value: unknown): value is Secret {\r\n    return (\r\n      typeof value === \"object\" &&\r\n      value !== null &&\r\n      \"key\" in value &&\r\n      \"value\" in value &&\r\n      typeof (value as { key?: unknown }).key === \"string\" &&\r\n      Config.isSecretValue((value as { value?: unknown }).value)\r\n    );\r\n  }\r\n\r\n  private static parseSecretsArray(value: unknown): Secret[] {\r\n    if (!Array.isArray(value)) {\r\n      return [];\r\n    }\r\n\r\n    // Filter invalid entries to avoid crashes when iterating secrets.\r\n    return value.filter((entry): entry is Secret => Config.isSecret(entry));\r\n  }\r\n\r\n  private static mergeSecretsByKey(primary: Secret[], secondary: Secret[]): Secret[] {\r\n    // Merge-by-key (last writer wins).\r\n    const mergedByKey = new Map<string, Secret>();\r\n    for (const secret of primary) {\r\n      mergedByKey.set(secret.key, secret);\r\n    }\r\n    for (const secret of secondary) {\r\n      mergedByKey.set(secret.key, secret);\r\n    }\r\n    return Array.from(mergedByKey.values());\r\n  }\r\n\r\n  private static normalizeSecretsConfig(raw: unknown): SecretsConfig {\r\n    if (raw === null || typeof raw !== \"object\" || Array.isArray(raw)) {\r\n      return {};\r\n    }\r\n\r\n    const record = raw as Record<string, unknown>;\r\n    const normalized: SecretsConfig = {};\r\n\r\n    for (const [rawKey, rawValue] of Object.entries(record)) {\r\n      let key = rawKey;\r\n      if (rawKey !== Config.GLOBAL_SECRETS_KEY) {\r\n        const normalizedKey = Config.normalizeSecretsProjectPath(rawKey);\r\n        key = normalizedKey || rawKey;\r\n      }\r\n\r\n      const secrets = Config.parseSecretsArray(rawValue);\r\n\r\n      if (!Object.prototype.hasOwnProperty.call(normalized, key)) {\r\n        normalized[key] = secrets;\r\n        continue;\r\n      }\r\n\r\n      normalized[key] = Config.mergeSecretsByKey(normalized[key], secrets);\r\n    }\r\n\r\n    return normalized;\r\n  }\r\n\r\n  /**\r\n   * Load secrets configuration from JSON file\r\n   * Returns empty config if file doesn't exist\r\n   */\r\n  loadSecretsConfig(): SecretsConfig {\r\n    try {\r\n      if (fs.existsSync(this.secretsFile)) {\r\n        const data = fs.readFileSync(this.secretsFile, \"utf-8\");\r\n        const parsed = JSON.parse(data) as unknown;\r\n        return Config.normalizeSecretsConfig(parsed);\r\n      }\r\n    } catch (error) {\r\n      log.error(\"Error loading secrets config:\", error);\r\n    }\r\n\r\n    return {};\r\n  }\r\n\r\n  /**\r\n   * Save secrets configuration to JSON file\r\n   * @param config The secrets configuration to save\r\n   */\r\n  async saveSecretsConfig(config: SecretsConfig): Promise<void> {\r\n    try {\r\n      if (!fs.existsSync(this.rootDir)) {\r\n        fs.mkdirSync(this.rootDir, { recursive: true });\r\n      }\r\n\r\n      await writeFileAtomic(this.secretsFile, JSON.stringify(config, null, 2), {\r\n        encoding: \"utf-8\",\r\n        mode: 0o600,\r\n      });\r\n    } catch (error) {\r\n      log.error(\"Error saving secrets config:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get global secrets (not project-scoped).\r\n   *\r\n   * Stored in <muxHome>/secrets.json under a sentinel key for backwards compatibility.\r\n   */\r\n  getGlobalSecrets(): Secret[] {\r\n    const config = this.loadSecretsConfig();\r\n    return config[Config.GLOBAL_SECRETS_KEY] ?? [];\r\n  }\r\n\r\n  /** Update global secrets (not project-scoped). */\r\n  async updateGlobalSecrets(secrets: Secret[]): Promise<void> {\r\n    const config = this.loadSecretsConfig();\r\n    config[Config.GLOBAL_SECRETS_KEY] = secrets;\r\n    await this.saveSecretsConfig(config);\r\n  }\r\n\r\n  /**\r\n   * Get effective secrets for a project.\r\n   *\r\n   * Merges global + project secrets with project keys overriding global keys.\r\n   */\r\n  getEffectiveSecrets(projectPath: string): Secret[] {\r\n    const normalizedProjectPath = Config.normalizeSecretsProjectPath(projectPath) || projectPath;\r\n    const config = this.loadSecretsConfig();\r\n    const globalSecrets = config[Config.GLOBAL_SECRETS_KEY] ?? [];\r\n    const projectSecrets = config[normalizedProjectPath] ?? [];\r\n\r\n    // Merge-by-key (last writer wins).\r\n    const mergedByKey = new Map<string, Secret>();\r\n    for (const secret of globalSecrets) {\r\n      mergedByKey.set(secret.key, secret);\r\n    }\r\n    for (const secret of projectSecrets) {\r\n      mergedByKey.set(secret.key, secret);\r\n    }\r\n\r\n    return Array.from(mergedByKey.values());\r\n  }\r\n\r\n  /**\r\n   * Get secrets for a specific project.\r\n   *\r\n   * Note: this is project-only (does not include global secrets).\r\n   */\r\n  getProjectSecrets(projectPath: string): Secret[] {\r\n    const normalizedProjectPath = Config.normalizeSecretsProjectPath(projectPath) || projectPath;\r\n    const config = this.loadSecretsConfig();\r\n    return config[normalizedProjectPath] ?? [];\r\n  }\r\n\r\n  /**\r\n   * Update secrets for a specific project\r\n   * @param projectPath The path to the project\r\n   * @param secrets The secrets to save for the project\r\n   */\r\n  async updateProjectSecrets(projectPath: string, secrets: Secret[]): Promise<void> {\r\n    const normalizedProjectPath = Config.normalizeSecretsProjectPath(projectPath) || projectPath;\r\n    const config = this.loadSecretsConfig();\r\n    config[normalizedProjectPath] = secrets;\r\n    await this.saveSecretsConfig(config);\r\n  }\r\n}\r\n\r\n// Default instance for application use\r\nexport const defaultConfig = new Config();\r\n"]}