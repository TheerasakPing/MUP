{"version":3,"file":"modelHealthService.js","sourceRoot":"","sources":["../../../src/node/services/modelHealthService.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Model Health Check Service\n *\n * Validates model configurations by running a series of checks:\n * 1. Authentication  - Verify provider credentials are configured\n * 2. Model Exists    - Check if model ID is recognized (built-in) or custom\n * 3. Token Limits    - Validate configured limits are reasonable\n * 4. Pricing         - Sanity-check custom pricing values\n * 5. Connectivity    - Basic reachability check (provider base URL validation)\n */\n\nimport type { Config } from \"@/node/config\";\nimport { KNOWN_MODELS } from \"@/common/constants/knownModels\";\nimport { SUPPORTED_PROVIDERS, type ProviderName } from \"@/common/constants/providers\";\nimport {\n    resolveProviderCredentials,\n    type ProviderConfigRaw,\n} from \"@/node/utils/providerRequirements\";\nimport type { CustomModelMetadata } from \"@/common/orpc/schemas/api\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\n\n// ────────────────────────────────────────────────────────────────\n// Types\n// ────────────────────────────────────────────────────────────────\n\nexport type CheckStatus = \"pass\" | \"warn\" | \"fail\" | \"skip\";\nexport type OverallStatus = \"healthy\" | \"warning\" | \"error\";\n\nexport interface CheckResult {\n    status: CheckStatus;\n    message: string;\n    details?: string;\n}\n\nexport interface HealthCheckResult {\n    modelId: string;\n    provider: string;\n    timestamp: number;\n    status: OverallStatus;\n    checks: {\n        authentication: CheckResult;\n        modelExists: CheckResult;\n        tokenLimits: CheckResult;\n        pricing: CheckResult;\n        connectivity: CheckResult;\n    };\n}\n\n// ────────────────────────────────────────────────────────────────\n// Service\n// ────────────────────────────────────────────────────────────────\n\nexport class ModelHealthService {\n    private cache = new Map<string, HealthCheckResult>();\n\n    constructor(private readonly config: Config) { }\n\n    async checkModel(\n        provider: string,\n        modelId: string,\n        customMetadata?: CustomModelMetadata,\n    ): Promise<HealthCheckResult> {\n        const authentication = this.checkAuthentication(provider);\n        const modelExists = this.checkModelExists(provider, modelId);\n        const tokenLimits = this.checkTokenLimits(customMetadata);\n        const pricing = this.checkPricing(customMetadata);\n        const connectivity = this.checkConnectivity(provider);\n\n        const checks = { authentication, modelExists, tokenLimits, pricing, connectivity };\n\n        const statuses = Object.values(checks).map((c) => c.status);\n        let status: OverallStatus = \"healthy\";\n        if (statuses.some((s) => s === \"fail\")) status = \"error\";\n        else if (statuses.some((s) => s === \"warn\")) status = \"warning\";\n\n        const result: HealthCheckResult = {\n            modelId,\n            provider,\n            timestamp: Date.now(),\n            status,\n            checks,\n        };\n\n        this.cache.set(`${provider}:${modelId}`, result);\n        return result;\n    }\n\n    async checkAllModels(\n        models: Array<{ provider: string; modelId: string; metadata?: CustomModelMetadata }>,\n    ): Promise<HealthCheckResult[]> {\n        const results: HealthCheckResult[] = [];\n        for (const m of models) {\n            results.push(await this.checkModel(m.provider, m.modelId, m.metadata));\n        }\n        return results;\n    }\n\n    getLastResults(): HealthCheckResult[] {\n        return Array.from(this.cache.values());\n    }\n\n    // ────────────── Individual checks ──────────────\n\n    private checkAuthentication(provider: string): CheckResult {\n        try {\n            const rawConfig = this.loadProviderConfig(provider);\n            if (!rawConfig) {\n                return {\n                    status: \"warn\",\n                    message: \"No provider config found\",\n                    details: \"Provider section missing from providers.jsonc\",\n                };\n            }\n\n            if (!SUPPORTED_PROVIDERS.includes(provider as ProviderName)) {\n                const hasKey = typeof rawConfig.apiKey === \"string\" && rawConfig.apiKey.length > 0;\n                return hasKey\n                    ? { status: \"pass\", message: \"API key present (custom provider)\" }\n                    : { status: \"warn\", message: \"No API key found for custom provider\" };\n            }\n\n            const creds = resolveProviderCredentials(provider as ProviderName, rawConfig);\n            if (creds.isConfigured) {\n                return { status: \"pass\", message: \"Credentials configured\" };\n            }\n            return {\n                status: \"fail\",\n                message: `Missing ${creds.missingRequirement ?? \"credentials\"}`,\n                details: `Provider \"${provider}\" requires ${creds.missingRequirement ?? \"credentials\"} to be set`,\n            };\n        } catch {\n            return { status: \"fail\", message: \"Error checking authentication\" };\n        }\n    }\n\n    private checkModelExists(provider: string, modelId: string): CheckResult {\n        const fullId = `${provider}:${modelId}`;\n        const known = KNOWN_MODELS[fullId];\n        if (known) {\n            return { status: \"pass\", message: \"Built-in model recognized\" };\n        }\n\n        const knownByAlias = Object.values(KNOWN_MODELS).find(\n            (m) => m.provider === provider && m.aliases?.includes(modelId),\n        );\n        if (knownByAlias) {\n            return { status: \"pass\", message: `Known model (alias of ${knownByAlias.id})` };\n        }\n\n        return {\n            status: \"warn\",\n            message: \"Custom model — not in built-in registry\",\n            details:\n                \"Model may still work if the provider supports it. Verify by sending a test request.\",\n        };\n    }\n\n    private checkTokenLimits(customMetadata?: CustomModelMetadata): CheckResult {\n        if (!customMetadata?.maxInputTokens && !customMetadata?.maxOutputTokens) {\n            return { status: \"skip\", message: \"No custom token limits configured\" };\n        }\n\n        const warnings: string[] = [];\n\n        if (customMetadata.maxInputTokens && customMetadata.maxInputTokens < 1000) {\n            warnings.push(`Input token limit (${customMetadata.maxInputTokens}) seems very low`);\n        }\n        if (customMetadata.maxOutputTokens && customMetadata.maxOutputTokens < 100) {\n            warnings.push(`Output token limit (${customMetadata.maxOutputTokens}) seems very low`);\n        }\n        if (\n            customMetadata.maxInputTokens &&\n            customMetadata.maxOutputTokens &&\n            customMetadata.maxOutputTokens > customMetadata.maxInputTokens\n        ) {\n            warnings.push(\"Output limit exceeds input limit — this is unusual\");\n        }\n\n        if (warnings.length > 0) {\n            return {\n                status: \"warn\",\n                message: \"Token limit configuration may need review\",\n                details: warnings.join(\"; \"),\n            };\n        }\n        return { status: \"pass\", message: \"Token limits look reasonable\" };\n    }\n\n    private checkPricing(customMetadata?: CustomModelMetadata): CheckResult {\n        if (!customMetadata?.inputCostPerToken && !customMetadata?.outputCostPerToken) {\n            return { status: \"skip\", message: \"No custom pricing configured\" };\n        }\n\n        const warnings: string[] = [];\n\n        if (customMetadata.inputCostPerToken && customMetadata.inputCostPerToken < 0) {\n            warnings.push(\"Input cost per token is negative\");\n        }\n        if (customMetadata.outputCostPerToken && customMetadata.outputCostPerToken < 0) {\n            warnings.push(\"Output cost per token is negative\");\n        }\n        if (\n            customMetadata.inputCostPerToken &&\n            customMetadata.outputCostPerToken &&\n            customMetadata.inputCostPerToken > customMetadata.outputCostPerToken\n        ) {\n            warnings.push(\n                \"Input cost is higher than output cost — this is unusual for most providers\",\n            );\n        }\n\n        if (warnings.length > 0) {\n            return {\n                status: \"warn\",\n                message: \"Pricing configuration may need review\",\n                details: warnings.join(\"; \"),\n            };\n        }\n        return { status: \"pass\", message: \"Pricing looks reasonable\" };\n    }\n\n    private checkConnectivity(provider: string): CheckResult {\n        try {\n            const rawConfig = this.loadProviderConfig(provider);\n            if (!rawConfig) {\n                return { status: \"skip\", message: \"No provider config — skipping connectivity\" };\n            }\n\n            if (rawConfig.baseUrl || rawConfig.baseURL) {\n                const url = rawConfig.baseUrl ?? rawConfig.baseURL ?? \"\";\n                try {\n                    new URL(url);\n                    return { status: \"pass\", message: `Custom base URL configured: ${url}` };\n                } catch {\n                    return {\n                        status: \"fail\",\n                        message: \"Invalid base URL\",\n                        details: `\"${url}\" is not a valid URL`,\n                    };\n                }\n            }\n\n            return { status: \"pass\", message: \"Using default provider endpoint\" };\n        } catch {\n            return { status: \"warn\", message: \"Unable to check connectivity\" };\n        }\n    }\n\n    // ────────────── Helpers ──────────────\n\n    private loadProviderConfig(provider: string): ProviderConfigRaw | null {\n        try {\n            const providersFile = path.join(this.config.rootDir, \"providers.jsonc\");\n            if (!fs.existsSync(providersFile)) return null;\n\n            const raw = fs.readFileSync(providersFile, \"utf-8\");\n            const stripped = raw.replace(/\\/\\/.*$/gm, \"\").replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\");\n            const parsed = JSON.parse(stripped) as Record<string, unknown>;\n            const providerConfig = parsed[provider];\n            if (!providerConfig || typeof providerConfig !== \"object\") return null;\n\n            return providerConfig as ProviderConfigRaw;\n        } catch {\n            return null;\n        }\n    }\n}\n"]}