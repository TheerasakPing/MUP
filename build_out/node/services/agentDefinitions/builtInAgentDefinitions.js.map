{"version":3,"file":"builtInAgentDefinitions.js","sourceRoot":"","sources":["../../../../src/node/services/agentDefinitions/builtInAgentDefinitions.ts"],"names":[],"mappings":";;;;AACA,iFAA8E;AAC9E,mFAAwE;AAcxE,MAAM,gBAAgB,GAAoB;IACxC,EAAE,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,qDAAqB,CAAC,IAAI,EAAE;IACnD,EAAE,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,qDAAqB,CAAC,IAAI,EAAE;IACnD,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,qDAAqB,CAAC,GAAG,EAAE;IACjD,EAAE,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,qDAAqB,CAAC,OAAO,EAAE;IACzD,EAAE,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,qDAAqB,CAAC,OAAO,EAAE;IACzD,EAAE,EAAE,EAAE,cAAc,EAAE,OAAO,EAAE,qDAAqB,CAAC,YAAY,EAAE;IACnE,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,qDAAqB,CAAC,GAAG,EAAE;IACjD,EAAE,EAAE,EAAE,cAAc,EAAE,OAAO,EAAE,qDAAqB,CAAC,YAAY,EAAE;CACpE,CAAC;AAEF,IAAI,cAAc,GAAoC,IAAI,CAAC;AAE3D,SAAS,aAAa,GAA6B;IACjD,OAAO,gBAAgB,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;QAC/C,MAAM,MAAM,GAAG,IAAA,2DAA4B,EAAC;YAC1C,OAAO;YACP,QAAQ,EAAE,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC;SAC7C,CAAC,CAAC;QACH,OAAO;YACL,EAAE;YACF,KAAK,EAAE,UAAmB;YAC1B,WAAW,EAAE,MAAM,CAAC,WAAW;YAC/B,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE;SACzB,CAAC;IAAA,CACH,CAAC,CAAC;AAAA,CACJ;AAED,sCAAuE;IACrE,cAAc,KAAd,cAAc,GAAK,aAAa,EAAE,EAAC;IACnC,OAAO,cAAc,CAAC;AAAA,CACvB;AAED,0DAA0D;AAC1D,kCAA+C;IAC7C,cAAc,GAAG,IAAI,CAAC;AAAA,CACvB","sourcesContent":["import type { AgentDefinitionPackage, AgentId } from \"@/common/types/agentDefinition\";\r\nimport { parseAgentDefinitionMarkdown } from \"./parseAgentDefinitionMarkdown\";\r\nimport { BUILTIN_AGENT_CONTENT } from \"./builtInAgentContent.generated\";\r\n\r\n/**\r\n * Built-in agent definitions.\r\n *\r\n * Source of truth is the markdown files in src/node/builtinAgents/*.md.\r\n * Content is generated into builtInAgentContent.generated.ts via scripts/generate-builtin-agents.sh.\r\n */\r\n\r\ninterface BuiltInSource {\r\n  id: AgentId;\r\n  content: string;\r\n}\r\n\r\nconst BUILT_IN_SOURCES: BuiltInSource[] = [\r\n  { id: \"exec\", content: BUILTIN_AGENT_CONTENT.exec },\r\n  { id: \"plan\", content: BUILTIN_AGENT_CONTENT.plan },\r\n  { id: \"ask\", content: BUILTIN_AGENT_CONTENT.ask },\r\n  { id: \"compact\", content: BUILTIN_AGENT_CONTENT.compact },\r\n  { id: \"explore\", content: BUILTIN_AGENT_CONTENT.explore },\r\n  { id: \"system1_bash\", content: BUILTIN_AGENT_CONTENT.system1_bash },\r\n  { id: \"mux\", content: BUILTIN_AGENT_CONTENT.mux },\r\n  { id: \"orchestrator\", content: BUILTIN_AGENT_CONTENT.orchestrator },\r\n];\r\n\r\nlet cachedPackages: AgentDefinitionPackage[] | null = null;\r\n\r\nfunction parseBuiltIns(): AgentDefinitionPackage[] {\r\n  return BUILT_IN_SOURCES.map(({ id, content }) => {\r\n    const parsed = parseAgentDefinitionMarkdown({\r\n      content,\r\n      byteSize: Buffer.byteLength(content, \"utf8\"),\r\n    });\r\n    return {\r\n      id,\r\n      scope: \"built-in\" as const,\r\n      frontmatter: parsed.frontmatter,\r\n      body: parsed.body.trim(),\r\n    };\r\n  });\r\n}\r\n\r\nexport function getBuiltInAgentDefinitions(): AgentDefinitionPackage[] {\r\n  cachedPackages ??= parseBuiltIns();\r\n  return cachedPackages;\r\n}\r\n\r\n/** Exposed for testing - clears cached parsed packages */\r\nexport function clearBuiltInAgentCache(): void {\r\n  cachedPackages = null;\r\n}\r\n"]}