{"version":3,"file":"builtInAgentDefinitions.js","sourceRoot":"","sources":["../../../../src/node/services/agentDefinitions/builtInAgentDefinitions.ts"],"names":[],"mappings":";;;;AACA,iFAA8E;AAC9E,mFAAwE;AAcxE,MAAM,gBAAgB,GAAoB;IACxC,EAAE,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,qDAAqB,CAAC,IAAI,EAAE;IACnD,EAAE,EAAE,EAAE,MAAM,EAAE,OAAO,EAAE,qDAAqB,CAAC,IAAI,EAAE;IACnD,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,qDAAqB,CAAC,GAAG,EAAE;IACjD,EAAE,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,qDAAqB,CAAC,OAAO,EAAE;IACzD,EAAE,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,qDAAqB,CAAC,OAAO,EAAE;IACzD,EAAE,EAAE,EAAE,cAAc,EAAE,OAAO,EAAE,qDAAqB,CAAC,YAAY,EAAE;IACnE,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,qDAAqB,CAAC,GAAG,EAAE;IACjD,EAAE,EAAE,EAAE,cAAc,EAAE,OAAO,EAAE,qDAAqB,CAAC,YAAY,EAAE;CACpE,CAAC;AAEF,IAAI,cAAc,GAAoC,IAAI,CAAC;AAE3D,SAAS,aAAa,GAA6B;IACjD,OAAO,gBAAgB,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;QAC/C,MAAM,MAAM,GAAG,IAAA,2DAA4B,EAAC;YAC1C,OAAO;YACP,QAAQ,EAAE,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC;SAC7C,CAAC,CAAC;QACH,OAAO;YACL,EAAE;YACF,KAAK,EAAE,UAAmB;YAC1B,WAAW,EAAE,MAAM,CAAC,WAAW;YAC/B,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE;SACzB,CAAC;IAAA,CACH,CAAC,CAAC;AAAA,CACJ;AAED,sCAAuE;IACrE,cAAc,KAAd,cAAc,GAAK,aAAa,EAAE,EAAC;IACnC,OAAO,cAAc,CAAC;AAAA,CACvB;AAED,0DAA0D;AAC1D,kCAA+C;IAC7C,cAAc,GAAG,IAAI,CAAC;AAAA,CACvB","sourcesContent":["import type { AgentDefinitionPackage, AgentId } from \"@/common/types/agentDefinition\";\nimport { parseAgentDefinitionMarkdown } from \"./parseAgentDefinitionMarkdown\";\nimport { BUILTIN_AGENT_CONTENT } from \"./builtInAgentContent.generated\";\n\n/**\n * Built-in agent definitions.\n *\n * Source of truth is the markdown files in src/node/builtinAgents/*.md.\n * Content is generated into builtInAgentContent.generated.ts via scripts/generate-builtin-agents.sh.\n */\n\ninterface BuiltInSource {\n  id: AgentId;\n  content: string;\n}\n\nconst BUILT_IN_SOURCES: BuiltInSource[] = [\n  { id: \"exec\", content: BUILTIN_AGENT_CONTENT.exec },\n  { id: \"plan\", content: BUILTIN_AGENT_CONTENT.plan },\n  { id: \"ask\", content: BUILTIN_AGENT_CONTENT.ask },\n  { id: \"compact\", content: BUILTIN_AGENT_CONTENT.compact },\n  { id: \"explore\", content: BUILTIN_AGENT_CONTENT.explore },\n  { id: \"system1_bash\", content: BUILTIN_AGENT_CONTENT.system1_bash },\n  { id: \"mux\", content: BUILTIN_AGENT_CONTENT.mux },\n  { id: \"orchestrator\", content: BUILTIN_AGENT_CONTENT.orchestrator },\n];\n\nlet cachedPackages: AgentDefinitionPackage[] | null = null;\n\nfunction parseBuiltIns(): AgentDefinitionPackage[] {\n  return BUILT_IN_SOURCES.map(({ id, content }) => {\n    const parsed = parseAgentDefinitionMarkdown({\n      content,\n      byteSize: Buffer.byteLength(content, \"utf8\"),\n    });\n    return {\n      id,\n      scope: \"built-in\" as const,\n      frontmatter: parsed.frontmatter,\n      body: parsed.body.trim(),\n    };\n  });\n}\n\nexport function getBuiltInAgentDefinitions(): AgentDefinitionPackage[] {\n  cachedPackages ??= parseBuiltIns();\n  return cachedPackages;\n}\n\n/** Exposed for testing - clears cached parsed packages */\nexport function clearBuiltInAgentCache(): void {\n  cachedPackages = null;\n}\n"]}