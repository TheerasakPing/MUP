{"version":3,"file":"mockAiRouter.js","sourceRoot":"","sources":["../../../../src/node/services/mock/mockAiRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import { getCompactionFollowUpContent } from \"@/common/types/message\";\nimport type { CompactionFollowUpRequest, MuxMessage } from \"@/common/types/message\";\nimport type { StreamErrorType } from \"@/common/types/errors\";\nimport type { LanguageModelV2Usage } from \"@ai-sdk/provider\";\n\nexport interface MockAiRouterRequest {\n  messages: MuxMessage[];\n  latestUserMessage: MuxMessage;\n  latestUserText: string;\n}\n\nexport interface MockAiToolCall {\n  toolCallId: string;\n  toolName: string;\n  args: unknown;\n  result: unknown;\n}\n\nexport interface MockAiRouterReply {\n  assistantText: string;\n  /** Optional: stream-start mode (exec/plan/compact). */\n  mode?: \"plan\" | \"exec\" | \"compact\";\n  /** Optional: hold stream-start until released by the mock controller. */\n  waitForStreamStart?: boolean;\n  /** Optional: if present, the mock adapter will emit a usage-delta early in the stream. */\n  usage?: LanguageModelV2Usage;\n\n  /** Optional: mock tool calls to emit before assistant text streaming. */\n  toolCalls?: MockAiToolCall[];\n\n  /** Optional: mock reasoning stream (think step deltas). */\n  reasoningDeltas?: string[];\n\n  /** Optional: if present, the mock adapter will emit a stream-error and stop the stream. */\n  error?: {\n    message: string;\n    type: StreamErrorType;\n  };\n}\n\nexport interface MockAiRouterHandler {\n  match(request: MockAiRouterRequest): boolean;\n  respond(request: MockAiRouterRequest): MockAiRouterReply;\n}\n\nconst DEFAULT_FORCE_COMPACTION_INPUT_TOKENS = 160_000;\nconst FORCE_MARKER = \"[force]\";\nconst STREAM_START_WAIT_PATTERN = /\\[mock:wait-start(?:=|:)?([a-z0-9_-]+)?\\]/i;\nconst MOCK_MARKER_PREFIX = \"[mock:\";\n\n/** Marker to trigger the mock stream-start gate (holds stream until released). */\nexport const MOCK_STREAM_START_GATE_MARKER = \"[mock:wait-start]\";\n\n/** Build a message that triggers the mock stream-start gate. */\nexport function buildMockStreamStartGateMessage(text: string): string {\n  return `${MOCK_STREAM_START_GATE_MARKER} ${text}`.trim();\n}\n\nfunction normalizeText(text: string): string {\n  return text.trim().toLowerCase();\n}\n\nfunction shouldWaitForStreamStart(text: string): boolean {\n  return STREAM_START_WAIT_PATTERN.test(text);\n}\n\nfunction applyStreamStartGate(reply: MockAiRouterReply, latestUserText: string): MockAiRouterReply {\n  if (reply.waitForStreamStart !== undefined) {\n    return reply;\n  }\n  if (!shouldWaitForStreamStart(latestUserText)) {\n    return reply;\n  }\n  return { ...reply, waitForStreamStart: true };\n}\nfunction hasMockMarker(text: string, marker: string): boolean {\n  const normalized = normalizeText(text);\n  return normalized.includes(`${MOCK_MARKER_PREFIX}${marker.toLowerCase()}`);\n}\n\nfunction hasCompactionHistory(messages: MuxMessage[]): boolean {\n  return messages.some((message) => {\n    if (readCompactionRequest(message)) {\n      return true;\n    }\n    return Boolean(message.metadata?.compacted);\n  });\n}\nfunction readCompactionRequest(\n  message: MuxMessage\n): { followUpContent?: CompactionFollowUpRequest } | undefined {\n  const muxMeta = message.metadata?.muxMetadata;\n  if (!muxMeta || muxMeta.type !== \"compaction-request\") {\n    return undefined;\n  }\n  return { followUpContent: getCompactionFollowUpContent(muxMeta) };\n}\n\nfunction buildUsage(inputTokens: number, outputTokens: number): LanguageModelV2Usage {\n  return {\n    inputTokens,\n    outputTokens,\n    totalTokens: inputTokens + outputTokens,\n  };\n}\n\nfunction buildMockCompactionSummary(options: {\n  preCompactionMessages: MuxMessage[];\n  followUpContent?: CompactionFollowUpRequest;\n}): string {\n  const userCount = options.preCompactionMessages.filter((m) => m.role === \"user\").length;\n  const assistantCount = options.preCompactionMessages.filter((m) => m.role === \"assistant\").length;\n  const totalCount = options.preCompactionMessages.length;\n\n  const followUpText = options.followUpContent?.text?.trim();\n\n  return [\n    \"Mock compaction summary:\",\n    `Messages: ${totalCount} (user: ${userCount}, assistant: ${assistantCount})`,\n    ...(followUpText ? [`Continue with: ${followUpText}`] : []),\n  ].join(\"\\n\");\n}\n\nfunction buildDefaultReply(latestUserText: string): MockAiRouterReply {\n  const trimmed = latestUserText.trim();\n  return {\n    assistantText: trimmed.length > 0 ? `Mock response: ${trimmed}` : \"Mock response: <empty>\",\n  };\n}\n\nfunction buildForceCompactionReply(): MockAiRouterReply {\n  // Intentionally long to keep the stream alive long enough for UI force-compaction effects.\n  const assistantText = Array.from({ length: 120 }, () => \"Streaming response...\").join(\" \");\n\n  return {\n    assistantText,\n    usage: buildUsage(DEFAULT_FORCE_COMPACTION_INPUT_TOKENS, 1),\n  };\n}\n\nfunction buildListProgrammingLanguagesReply(): MockAiRouterReply {\n  return {\n    assistantText: [\n      \"Here are three programming languages:\",\n      \"1. Python\",\n      \"2. JavaScript\",\n      \"3. Rust\",\n    ].join(\"\\n\"),\n  };\n}\n\nfunction buildPermissionPlanReply(): MockAiRouterReply {\n  return {\n    assistantText: [\n      \"Plan summary:\",\n      \"1. Extract validation into verifyInputs().\",\n      \"2. Move formatting logic into buildResponse().\",\n      \"3. Keep handleRequest lean by delegating to helpers.\",\n    ].join(\"\\n\"),\n  };\n}\n\nfunction buildPermissionExecReply(): MockAiRouterReply {\n  return {\n    assistantText: [\n      \"Applied refactor plan:\",\n      \"- Updated src/utils/legacyFunction.ts\",\n      \"- Extracted verifyInputs and buildResponse helpers.\",\n    ].join(\"\\n\"),\n    toolCalls: [\n      {\n        toolCallId: \"tool-apply-refactor\",\n        toolName: \"bash\",\n        args: {\n          script:\n            'apply_patch <<\\'PATCH\\'\\n*** Begin Patch\\n*** Update File: src/utils/legacyFunction.ts\\n@@\\n-export function handleRequest(input: Request) {\\n-  if (!input.userId || !input.payload) {\\n-    throw new Error(\"Missing fields\");\\n-  }\\n-\\n-  const result = heavyFormatter(input.payload);\\n-  return {\\n-    id: input.userId,\\n-    details: result,\\n-  };\\n-}\\n+function verifyInputs(input: Request) {\\n+  if (!input.userId || !input.payload) {\\n+    throw new Error(\"Missing fields\");\\n+  }\\n+}\\n+\\n+function buildResponse(input: Request) {\\n+  const result = heavyFormatter(input.payload);\\n+  return { id: input.userId, details: result };\\n+}\\n+\\n+export function handleRequest(input: Request) {\\n+  verifyInputs(input);\\n+  return buildResponse(input);\\n+}\\n*** End Patch\\nPATCH',\n          timeout_secs: 10,\n          display_name: \"Apply refactor\",\n        },\n        result: {\n          success: true,\n          output: \"patch applied\\n\",\n          exitCode: 0,\n          wall_duration_ms: 180,\n        },\n      },\n    ],\n  };\n}\n\nfunction buildToolReadmeReply(): MockAiRouterReply {\n  return {\n    assistantText: [\n      \"Here's what README.md contains:\",\n      \"1\\tMock README content for tool flow test.\",\n    ].join(\"\\n\"),\n    toolCalls: [\n      {\n        toolCallId: \"tool-file-read-1\",\n        toolName: \"file_read\",\n        args: { filePath: \"README.md\" },\n        result: {\n          success: true,\n          file_size: 64,\n          modifiedTime: \"2024-01-01T00:00:00.000Z\",\n          lines_read: 1,\n          content: \"1\\tMock README content for tool flow test.\",\n          lease: \"lease-readme-v1\",\n        },\n      },\n    ],\n  };\n}\n\nfunction buildToolListDirectoryReply(): MockAiRouterReply {\n  return {\n    assistantText: [\"Directory listing:\", \"- README.md\", \"- package.json\", \"- src\"].join(\"\\n\"),\n    toolCalls: [\n      {\n        toolCallId: \"tool-bash-ls\",\n        toolName: \"bash\",\n        args: { script: \"ls -1\", timeout_secs: 10, display_name: \"List directory\" },\n        result: {\n          success: true,\n          output: \"README.md\\npackage.json\\nsrc\\n\",\n          exitCode: 0,\n          wall_duration_ms: 120,\n        },\n      },\n    ],\n  };\n}\n\nfunction buildToolCreateTestFileReply(): MockAiRouterReply {\n  return {\n    assistantText: \"Created test.txt with the contents 'hello'.\",\n    toolCalls: [\n      {\n        toolCallId: \"tool-bash-create-test-file\",\n        toolName: \"bash\",\n        args: {\n          script: \"printf 'hello' > test.txt\",\n          timeout_secs: 10,\n          display_name: \"Create test file\",\n        },\n        result: {\n          success: true,\n          output: \"\",\n          exitCode: 0,\n          wall_duration_ms: 90,\n        },\n      },\n    ],\n  };\n}\n\nfunction buildToolReadTestFileReply(): MockAiRouterReply {\n  return {\n    assistantText: [\"Here's what's inside test.txt:\", \"1\\thello\"].join(\"\\n\"),\n    toolCalls: [\n      {\n        toolCallId: \"tool-file-read-test-file\",\n        toolName: \"file_read\",\n        args: { filePath: \"test.txt\" },\n        result: {\n          success: true,\n          file_size: 6,\n          modifiedTime: \"2024-01-01T00:00:00.000Z\",\n          lines_read: 1,\n          content: \"1\\thello\",\n          lease: \"lease-test-txt\",\n        },\n      },\n    ],\n  };\n}\n\nfunction buildToolRecallTestFileReply(): MockAiRouterReply {\n  return {\n    assistantText: \"You just created test.txt and it contains the line 'hello'.\",\n  };\n}\n\nfunction buildToolNotifyReply(): MockAiRouterReply {\n  return {\n    assistantText: \"I've sent you a notification that the task is complete.\",\n    toolCalls: [\n      {\n        toolCallId: \"tool-notify-1\",\n        toolName: \"notify\",\n        args: {\n          title: \"Task Complete\",\n          message: \"Your requested task has been completed successfully.\",\n        },\n        result: {\n          success: true,\n          title: \"Task Complete\",\n          message: \"Your requested task has been completed successfully.\",\n          ui_only: {\n            notify: {\n              notifiedVia: \"electron\",\n            },\n          },\n        },\n      },\n    ],\n  };\n}\n\nfunction buildReasoningQuicksortReply(): MockAiRouterReply {\n  return {\n    assistantText: [\n      \"Quicksort works by picking a pivot, partitioning smaller and larger items around it, then recursing.\",\n      \"1. Choose a pivot (often the middle element for simplicity).\",\n      \"2. Partition: items < pivot move left, items > pivot move right.\",\n      \"3. Recursively quicksort the left and right partitions.\",\n      \"4. Base case: arrays of length 0 or 1 are already sorted.\",\n      \"This yields O(n log n) average time and in-place sorting when implemented carefully.\",\n    ].join(\"\\n\"),\n    reasoningDeltas: [\n      \"Assessing quicksort mechanics and choosing example array...\\n\",\n      \"Plan: explain pivot selection, partitioning, recursion, base case.\",\n    ],\n  };\n}\n\nfunction buildReviewBranchesReply(): MockAiRouterReply {\n  return {\n    assistantText: [\n      \"Here’s the current branch roster:\",\n      \"• `main` – release baseline\",\n      \"• `feature/login` – authentication refresh\",\n      \"• `demo-review` – sandbox you just created\",\n    ].join(\"\\n\"),\n  };\n}\n\nfunction buildReviewOpenDocErrorReply(): MockAiRouterReply {\n  return {\n    assistantText: \"\",\n    error: {\n      message: \"ENOENT: docs/onboarding.md not found\",\n      type: \"api\",\n    },\n  };\n}\n\nfunction buildReviewShowDocReply(): MockAiRouterReply {\n  return {\n    assistantText: [\n      \"Found it. Here’s the quick-start summary:\",\n      \"• Clone → bun install\",\n      \"• bun dev boots the desktop shell\",\n      \"• See docs/onboarding.md for the full checklist\",\n    ].join(\"\\n\"),\n  };\n}\n\nfunction buildModelStatusReply(): MockAiRouterReply {\n  return {\n    assistantText: \"Claude Sonnet 4.5 is now responding with standard reasoning capacity.\",\n  };\n}\n\nfunction buildRateLimitErrorReply(): MockAiRouterReply {\n  return {\n    assistantText: \"Processing your request...\",\n    error: {\n      message: \"Rate limit exceeded. Please retry after 60 seconds.\",\n      type: \"rate_limit\",\n    },\n  };\n}\n\nfunction buildApiErrorReply(): MockAiRouterReply {\n  return {\n    assistantText: \"\",\n    error: {\n      message: \"Internal server error occurred while processing the request.\",\n      type: \"server_error\",\n    },\n  };\n}\n\nfunction buildContextExceededReply(): MockAiRouterReply {\n  return {\n    assistantText: \"Streaming response before context limit.\",\n    error: {\n      message: \"Context length exceeded in mock stream.\",\n      type: \"context_exceeded\",\n    },\n  };\n}\nfunction buildNetworkErrorReply(): MockAiRouterReply {\n  return {\n    assistantText: \"\",\n    error: {\n      message: \"Network connection lost. Please check your internet connection.\",\n      type: \"network\",\n    },\n  };\n}\n\nconst defaultHandlers: MockAiRouterHandler[] = [\n  {\n    match: (request) => Boolean(readCompactionRequest(request.latestUserMessage)),\n    respond: (request) => {\n      const compactionRequest = readCompactionRequest(request.latestUserMessage);\n      const preCompactionMessages = request.messages.slice(0, -1);\n      return {\n        assistantText: buildMockCompactionSummary({\n          preCompactionMessages,\n          followUpContent: compactionRequest?.followUpContent,\n        }),\n        mode: \"compact\",\n      };\n    },\n  },\n  {\n    match: (request) => normalizeText(request.latestUserText).includes(FORCE_MARKER),\n    respond: () => buildForceCompactionReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"list-languages\") ||\n      normalizeText(request.latestUserText) === \"list 3 programming languages\" ||\n      normalizeText(request.latestUserText).includes(\"programming languages\"),\n    respond: () => buildListProgrammingLanguagesReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"permission:plan-refactor\") ||\n      normalizeText(request.latestUserText) === \"how should i refactor this function?\",\n    respond: () => buildPermissionPlanReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"permission:exec-refactor\") ||\n      normalizeText(request.latestUserText) === \"do it\",\n    respond: () => buildPermissionExecReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"tool:file-read\") ||\n      normalizeText(request.latestUserText) === \"what's in readme.md?\",\n    respond: () => buildToolReadmeReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"tool:list-directory\") ||\n      normalizeText(request.latestUserText) === \"what files are in the current directory?\",\n    respond: () => buildToolListDirectoryReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"tool:create-test-file\") ||\n      normalizeText(request.latestUserText).includes(\"create a file called test.txt\"),\n    respond: () => buildToolCreateTestFileReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"tool:read-test-file\") ||\n      normalizeText(request.latestUserText) === \"now read that file\",\n    respond: () => buildToolReadTestFileReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"tool:recall-test-file\") ||\n      normalizeText(request.latestUserText) === \"what did it contain?\",\n    respond: () => buildToolRecallTestFileReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"tool:notify\") ||\n      normalizeText(request.latestUserText) === \"notify me that the task is complete\",\n    respond: () => buildToolNotifyReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"reasoning:quicksort\") ||\n      normalizeText(request.latestUserText) === \"explain quicksort algorithm step by step\",\n    respond: () => buildReasoningQuicksortReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"review:branches\") ||\n      normalizeText(request.latestUserText) === \"let's summarize the current branches.\",\n    respond: () => buildReviewBranchesReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"review:open-doc\") ||\n      normalizeText(request.latestUserText) === \"open the onboarding doc.\",\n    respond: () => buildReviewOpenDocErrorReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"review:show-doc\") ||\n      normalizeText(request.latestUserText) === \"show the onboarding doc contents instead.\",\n    respond: () => buildReviewShowDocReply(),\n  },\n  {\n    match: (request) =>\n      !hasCompactionHistory(request.messages) &&\n      (hasMockMarker(request.latestUserText, \"error:context\") ||\n        normalizeText(request.latestUserText) === \"trigger context error\" ||\n        normalizeText(request.latestUserText) === \"trigger context exceeded error\"),\n    respond: () => buildContextExceededReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"model-status\") ||\n      normalizeText(request.latestUserText) ===\n        \"please confirm which model is currently active for this conversation.\",\n    respond: () => buildModelStatusReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"error:rate-limit\") ||\n      normalizeText(request.latestUserText) === \"trigger rate limit error\",\n    respond: () => buildRateLimitErrorReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"error:api\") ||\n      normalizeText(request.latestUserText) === \"trigger api error\",\n    respond: () => buildApiErrorReply(),\n  },\n  {\n    match: (request) =>\n      hasMockMarker(request.latestUserText, \"error:network\") ||\n      normalizeText(request.latestUserText) === \"trigger network error\",\n    respond: () => buildNetworkErrorReply(),\n  },\n  {\n    match: () => true,\n    respond: (request) => buildDefaultReply(request.latestUserText),\n  },\n];\n\n/**\n * Stream-agnostic, pattern-based mock LLM router.\n *\n * IMPORTANT: This module is intentionally *not* aware of stream event semantics\n * (stream-delta, stream-end, etc). It returns a high-level reply which is\n * converted to stream events by a dedicated adapter.\n */\nexport class MockAiRouter {\n  private readonly handlers: MockAiRouterHandler[];\n\n  constructor(handlers: MockAiRouterHandler[] = defaultHandlers) {\n    this.handlers = handlers;\n  }\n\n  route(request: MockAiRouterRequest): MockAiRouterReply {\n    for (const handler of this.handlers) {\n      if (handler.match(request)) {\n        return applyStreamStartGate(handler.respond(request), request.latestUserText);\n      }\n    }\n\n    return applyStreamStartGate(buildDefaultReply(request.latestUserText), request.latestUserText);\n  }\n}\n"]}