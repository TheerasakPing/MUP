{"version":3,"file":"mockAiRouter.js","sourceRoot":"","sources":["../../../../src/node/services/mock/mockAiRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import { getCompactionFollowUpContent } from \"@/common/types/message\";\r\nimport type { CompactionFollowUpRequest, MuxMessage } from \"@/common/types/message\";\r\nimport type { StreamErrorType } from \"@/common/types/errors\";\r\nimport type { LanguageModelV2Usage } from \"@ai-sdk/provider\";\r\n\r\nexport interface MockAiRouterRequest {\r\n  messages: MuxMessage[];\r\n  latestUserMessage: MuxMessage;\r\n  latestUserText: string;\r\n}\r\n\r\nexport interface MockAiToolCall {\r\n  toolCallId: string;\r\n  toolName: string;\r\n  args: unknown;\r\n  result: unknown;\r\n}\r\n\r\nexport interface MockAiRouterReply {\r\n  assistantText: string;\r\n  /** Optional: stream-start mode (exec/plan/compact). */\r\n  mode?: \"plan\" | \"exec\" | \"compact\";\r\n  /** Optional: hold stream-start until released by the mock controller. */\r\n  waitForStreamStart?: boolean;\r\n  /** Optional: if present, the mock adapter will emit a usage-delta early in the stream. */\r\n  usage?: LanguageModelV2Usage;\r\n\r\n  /** Optional: mock tool calls to emit before assistant text streaming. */\r\n  toolCalls?: MockAiToolCall[];\r\n\r\n  /** Optional: mock reasoning stream (think step deltas). */\r\n  reasoningDeltas?: string[];\r\n\r\n  /** Optional: if present, the mock adapter will emit a stream-error and stop the stream. */\r\n  error?: {\r\n    message: string;\r\n    type: StreamErrorType;\r\n  };\r\n}\r\n\r\nexport interface MockAiRouterHandler {\r\n  match(request: MockAiRouterRequest): boolean;\r\n  respond(request: MockAiRouterRequest): MockAiRouterReply;\r\n}\r\n\r\nconst DEFAULT_FORCE_COMPACTION_INPUT_TOKENS = 160_000;\r\nconst FORCE_MARKER = \"[force]\";\r\nconst STREAM_START_WAIT_PATTERN = /\\[mock:wait-start(?:=|:)?([a-z0-9_-]+)?\\]/i;\r\nconst MOCK_MARKER_PREFIX = \"[mock:\";\r\n\r\n/** Marker to trigger the mock stream-start gate (holds stream until released). */\r\nexport const MOCK_STREAM_START_GATE_MARKER = \"[mock:wait-start]\";\r\n\r\n/** Build a message that triggers the mock stream-start gate. */\r\nexport function buildMockStreamStartGateMessage(text: string): string {\r\n  return `${MOCK_STREAM_START_GATE_MARKER} ${text}`.trim();\r\n}\r\n\r\nfunction normalizeText(text: string): string {\r\n  return text.trim().toLowerCase();\r\n}\r\n\r\nfunction shouldWaitForStreamStart(text: string): boolean {\r\n  return STREAM_START_WAIT_PATTERN.test(text);\r\n}\r\n\r\nfunction applyStreamStartGate(reply: MockAiRouterReply, latestUserText: string): MockAiRouterReply {\r\n  if (reply.waitForStreamStart !== undefined) {\r\n    return reply;\r\n  }\r\n  if (!shouldWaitForStreamStart(latestUserText)) {\r\n    return reply;\r\n  }\r\n  return { ...reply, waitForStreamStart: true };\r\n}\r\nfunction hasMockMarker(text: string, marker: string): boolean {\r\n  const normalized = normalizeText(text);\r\n  return normalized.includes(`${MOCK_MARKER_PREFIX}${marker.toLowerCase()}`);\r\n}\r\n\r\nfunction hasCompactionHistory(messages: MuxMessage[]): boolean {\r\n  return messages.some((message) => {\r\n    if (readCompactionRequest(message)) {\r\n      return true;\r\n    }\r\n    return Boolean(message.metadata?.compacted);\r\n  });\r\n}\r\nfunction readCompactionRequest(\r\n  message: MuxMessage\r\n): { followUpContent?: CompactionFollowUpRequest } | undefined {\r\n  const muxMeta = message.metadata?.muxMetadata;\r\n  if (!muxMeta || muxMeta.type !== \"compaction-request\") {\r\n    return undefined;\r\n  }\r\n  return { followUpContent: getCompactionFollowUpContent(muxMeta) };\r\n}\r\n\r\nfunction buildUsage(inputTokens: number, outputTokens: number): LanguageModelV2Usage {\r\n  return {\r\n    inputTokens,\r\n    outputTokens,\r\n    totalTokens: inputTokens + outputTokens,\r\n  };\r\n}\r\n\r\nfunction buildMockCompactionSummary(options: {\r\n  preCompactionMessages: MuxMessage[];\r\n  followUpContent?: CompactionFollowUpRequest;\r\n}): string {\r\n  const userCount = options.preCompactionMessages.filter((m) => m.role === \"user\").length;\r\n  const assistantCount = options.preCompactionMessages.filter((m) => m.role === \"assistant\").length;\r\n  const totalCount = options.preCompactionMessages.length;\r\n\r\n  const followUpText = options.followUpContent?.text?.trim();\r\n\r\n  return [\r\n    \"Mock compaction summary:\",\r\n    `Messages: ${totalCount} (user: ${userCount}, assistant: ${assistantCount})`,\r\n    ...(followUpText ? [`Continue with: ${followUpText}`] : []),\r\n  ].join(\"\\n\");\r\n}\r\n\r\nfunction buildDefaultReply(latestUserText: string): MockAiRouterReply {\r\n  const trimmed = latestUserText.trim();\r\n  return {\r\n    assistantText: trimmed.length > 0 ? `Mock response: ${trimmed}` : \"Mock response: <empty>\",\r\n  };\r\n}\r\n\r\nfunction buildForceCompactionReply(): MockAiRouterReply {\r\n  // Intentionally long to keep the stream alive long enough for UI force-compaction effects.\r\n  const assistantText = Array.from({ length: 120 }, () => \"Streaming response...\").join(\" \");\r\n\r\n  return {\r\n    assistantText,\r\n    usage: buildUsage(DEFAULT_FORCE_COMPACTION_INPUT_TOKENS, 1),\r\n  };\r\n}\r\n\r\nfunction buildListProgrammingLanguagesReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\r\n      \"Here are three programming languages:\",\r\n      \"1. Python\",\r\n      \"2. JavaScript\",\r\n      \"3. Rust\",\r\n    ].join(\"\\n\"),\r\n  };\r\n}\r\n\r\nfunction buildPermissionPlanReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\r\n      \"Plan summary:\",\r\n      \"1. Extract validation into verifyInputs().\",\r\n      \"2. Move formatting logic into buildResponse().\",\r\n      \"3. Keep handleRequest lean by delegating to helpers.\",\r\n    ].join(\"\\n\"),\r\n  };\r\n}\r\n\r\nfunction buildPermissionExecReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\r\n      \"Applied refactor plan:\",\r\n      \"- Updated src/utils/legacyFunction.ts\",\r\n      \"- Extracted verifyInputs and buildResponse helpers.\",\r\n    ].join(\"\\n\"),\r\n    toolCalls: [\r\n      {\r\n        toolCallId: \"tool-apply-refactor\",\r\n        toolName: \"bash\",\r\n        args: {\r\n          script:\r\n            'apply_patch <<\\'PATCH\\'\\n*** Begin Patch\\n*** Update File: src/utils/legacyFunction.ts\\n@@\\n-export function handleRequest(input: Request) {\\n-  if (!input.userId || !input.payload) {\\n-    throw new Error(\"Missing fields\");\\n-  }\\n-\\n-  const result = heavyFormatter(input.payload);\\n-  return {\\n-    id: input.userId,\\n-    details: result,\\n-  };\\n-}\\n+function verifyInputs(input: Request) {\\n+  if (!input.userId || !input.payload) {\\n+    throw new Error(\"Missing fields\");\\n+  }\\n+}\\n+\\n+function buildResponse(input: Request) {\\n+  const result = heavyFormatter(input.payload);\\n+  return { id: input.userId, details: result };\\n+}\\n+\\n+export function handleRequest(input: Request) {\\n+  verifyInputs(input);\\n+  return buildResponse(input);\\n+}\\n*** End Patch\\nPATCH',\r\n          timeout_secs: 10,\r\n          display_name: \"Apply refactor\",\r\n        },\r\n        result: {\r\n          success: true,\r\n          output: \"patch applied\\n\",\r\n          exitCode: 0,\r\n          wall_duration_ms: 180,\r\n        },\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction buildToolReadmeReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\r\n      \"Here's what README.md contains:\",\r\n      \"1\\tMock README content for tool flow test.\",\r\n    ].join(\"\\n\"),\r\n    toolCalls: [\r\n      {\r\n        toolCallId: \"tool-file-read-1\",\r\n        toolName: \"file_read\",\r\n        args: { filePath: \"README.md\" },\r\n        result: {\r\n          success: true,\r\n          file_size: 64,\r\n          modifiedTime: \"2024-01-01T00:00:00.000Z\",\r\n          lines_read: 1,\r\n          content: \"1\\tMock README content for tool flow test.\",\r\n          lease: \"lease-readme-v1\",\r\n        },\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction buildToolListDirectoryReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\"Directory listing:\", \"- README.md\", \"- package.json\", \"- src\"].join(\"\\n\"),\r\n    toolCalls: [\r\n      {\r\n        toolCallId: \"tool-bash-ls\",\r\n        toolName: \"bash\",\r\n        args: { script: \"ls -1\", timeout_secs: 10, display_name: \"List directory\" },\r\n        result: {\r\n          success: true,\r\n          output: \"README.md\\npackage.json\\nsrc\\n\",\r\n          exitCode: 0,\r\n          wall_duration_ms: 120,\r\n        },\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction buildToolCreateTestFileReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"Created test.txt with the contents 'hello'.\",\r\n    toolCalls: [\r\n      {\r\n        toolCallId: \"tool-bash-create-test-file\",\r\n        toolName: \"bash\",\r\n        args: {\r\n          script: \"printf 'hello' > test.txt\",\r\n          timeout_secs: 10,\r\n          display_name: \"Create test file\",\r\n        },\r\n        result: {\r\n          success: true,\r\n          output: \"\",\r\n          exitCode: 0,\r\n          wall_duration_ms: 90,\r\n        },\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction buildToolReadTestFileReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\"Here's what's inside test.txt:\", \"1\\thello\"].join(\"\\n\"),\r\n    toolCalls: [\r\n      {\r\n        toolCallId: \"tool-file-read-test-file\",\r\n        toolName: \"file_read\",\r\n        args: { filePath: \"test.txt\" },\r\n        result: {\r\n          success: true,\r\n          file_size: 6,\r\n          modifiedTime: \"2024-01-01T00:00:00.000Z\",\r\n          lines_read: 1,\r\n          content: \"1\\thello\",\r\n          lease: \"lease-test-txt\",\r\n        },\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction buildToolRecallTestFileReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"You just created test.txt and it contains the line 'hello'.\",\r\n  };\r\n}\r\n\r\nfunction buildToolNotifyReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"I've sent you a notification that the task is complete.\",\r\n    toolCalls: [\r\n      {\r\n        toolCallId: \"tool-notify-1\",\r\n        toolName: \"notify\",\r\n        args: {\r\n          title: \"Task Complete\",\r\n          message: \"Your requested task has been completed successfully.\",\r\n        },\r\n        result: {\r\n          success: true,\r\n          title: \"Task Complete\",\r\n          message: \"Your requested task has been completed successfully.\",\r\n          ui_only: {\r\n            notify: {\r\n              notifiedVia: \"electron\",\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction buildReasoningQuicksortReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\r\n      \"Quicksort works by picking a pivot, partitioning smaller and larger items around it, then recursing.\",\r\n      \"1. Choose a pivot (often the middle element for simplicity).\",\r\n      \"2. Partition: items < pivot move left, items > pivot move right.\",\r\n      \"3. Recursively quicksort the left and right partitions.\",\r\n      \"4. Base case: arrays of length 0 or 1 are already sorted.\",\r\n      \"This yields O(n log n) average time and in-place sorting when implemented carefully.\",\r\n    ].join(\"\\n\"),\r\n    reasoningDeltas: [\r\n      \"Assessing quicksort mechanics and choosing example array...\\n\",\r\n      \"Plan: explain pivot selection, partitioning, recursion, base case.\",\r\n    ],\r\n  };\r\n}\r\n\r\nfunction buildReviewBranchesReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\r\n      \"Here’s the current branch roster:\",\r\n      \"• `main` – release baseline\",\r\n      \"• `feature/login` – authentication refresh\",\r\n      \"• `demo-review` – sandbox you just created\",\r\n    ].join(\"\\n\"),\r\n  };\r\n}\r\n\r\nfunction buildReviewOpenDocErrorReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"\",\r\n    error: {\r\n      message: \"ENOENT: docs/onboarding.md not found\",\r\n      type: \"api\",\r\n    },\r\n  };\r\n}\r\n\r\nfunction buildReviewShowDocReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: [\r\n      \"Found it. Here’s the quick-start summary:\",\r\n      \"• Clone → bun install\",\r\n      \"• bun dev boots the desktop shell\",\r\n      \"• See docs/onboarding.md for the full checklist\",\r\n    ].join(\"\\n\"),\r\n  };\r\n}\r\n\r\nfunction buildModelStatusReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"Claude Sonnet 4.5 is now responding with standard reasoning capacity.\",\r\n  };\r\n}\r\n\r\nfunction buildRateLimitErrorReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"Processing your request...\",\r\n    error: {\r\n      message: \"Rate limit exceeded. Please retry after 60 seconds.\",\r\n      type: \"rate_limit\",\r\n    },\r\n  };\r\n}\r\n\r\nfunction buildApiErrorReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"\",\r\n    error: {\r\n      message: \"Internal server error occurred while processing the request.\",\r\n      type: \"server_error\",\r\n    },\r\n  };\r\n}\r\n\r\nfunction buildContextExceededReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"Streaming response before context limit.\",\r\n    error: {\r\n      message: \"Context length exceeded in mock stream.\",\r\n      type: \"context_exceeded\",\r\n    },\r\n  };\r\n}\r\nfunction buildNetworkErrorReply(): MockAiRouterReply {\r\n  return {\r\n    assistantText: \"\",\r\n    error: {\r\n      message: \"Network connection lost. Please check your internet connection.\",\r\n      type: \"network\",\r\n    },\r\n  };\r\n}\r\n\r\nconst defaultHandlers: MockAiRouterHandler[] = [\r\n  {\r\n    match: (request) => Boolean(readCompactionRequest(request.latestUserMessage)),\r\n    respond: (request) => {\r\n      const compactionRequest = readCompactionRequest(request.latestUserMessage);\r\n      const preCompactionMessages = request.messages.slice(0, -1);\r\n      return {\r\n        assistantText: buildMockCompactionSummary({\r\n          preCompactionMessages,\r\n          followUpContent: compactionRequest?.followUpContent,\r\n        }),\r\n        mode: \"compact\",\r\n      };\r\n    },\r\n  },\r\n  {\r\n    match: (request) => normalizeText(request.latestUserText).includes(FORCE_MARKER),\r\n    respond: () => buildForceCompactionReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"list-languages\") ||\r\n      normalizeText(request.latestUserText) === \"list 3 programming languages\" ||\r\n      normalizeText(request.latestUserText).includes(\"programming languages\"),\r\n    respond: () => buildListProgrammingLanguagesReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"permission:plan-refactor\") ||\r\n      normalizeText(request.latestUserText) === \"how should i refactor this function?\",\r\n    respond: () => buildPermissionPlanReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"permission:exec-refactor\") ||\r\n      normalizeText(request.latestUserText) === \"do it\",\r\n    respond: () => buildPermissionExecReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"tool:file-read\") ||\r\n      normalizeText(request.latestUserText) === \"what's in readme.md?\",\r\n    respond: () => buildToolReadmeReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"tool:list-directory\") ||\r\n      normalizeText(request.latestUserText) === \"what files are in the current directory?\",\r\n    respond: () => buildToolListDirectoryReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"tool:create-test-file\") ||\r\n      normalizeText(request.latestUserText).includes(\"create a file called test.txt\"),\r\n    respond: () => buildToolCreateTestFileReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"tool:read-test-file\") ||\r\n      normalizeText(request.latestUserText) === \"now read that file\",\r\n    respond: () => buildToolReadTestFileReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"tool:recall-test-file\") ||\r\n      normalizeText(request.latestUserText) === \"what did it contain?\",\r\n    respond: () => buildToolRecallTestFileReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"tool:notify\") ||\r\n      normalizeText(request.latestUserText) === \"notify me that the task is complete\",\r\n    respond: () => buildToolNotifyReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"reasoning:quicksort\") ||\r\n      normalizeText(request.latestUserText) === \"explain quicksort algorithm step by step\",\r\n    respond: () => buildReasoningQuicksortReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"review:branches\") ||\r\n      normalizeText(request.latestUserText) === \"let's summarize the current branches.\",\r\n    respond: () => buildReviewBranchesReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"review:open-doc\") ||\r\n      normalizeText(request.latestUserText) === \"open the onboarding doc.\",\r\n    respond: () => buildReviewOpenDocErrorReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"review:show-doc\") ||\r\n      normalizeText(request.latestUserText) === \"show the onboarding doc contents instead.\",\r\n    respond: () => buildReviewShowDocReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      !hasCompactionHistory(request.messages) &&\r\n      (hasMockMarker(request.latestUserText, \"error:context\") ||\r\n        normalizeText(request.latestUserText) === \"trigger context error\" ||\r\n        normalizeText(request.latestUserText) === \"trigger context exceeded error\"),\r\n    respond: () => buildContextExceededReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"model-status\") ||\r\n      normalizeText(request.latestUserText) ===\r\n        \"please confirm which model is currently active for this conversation.\",\r\n    respond: () => buildModelStatusReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"error:rate-limit\") ||\r\n      normalizeText(request.latestUserText) === \"trigger rate limit error\",\r\n    respond: () => buildRateLimitErrorReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"error:api\") ||\r\n      normalizeText(request.latestUserText) === \"trigger api error\",\r\n    respond: () => buildApiErrorReply(),\r\n  },\r\n  {\r\n    match: (request) =>\r\n      hasMockMarker(request.latestUserText, \"error:network\") ||\r\n      normalizeText(request.latestUserText) === \"trigger network error\",\r\n    respond: () => buildNetworkErrorReply(),\r\n  },\r\n  {\r\n    match: () => true,\r\n    respond: (request) => buildDefaultReply(request.latestUserText),\r\n  },\r\n];\r\n\r\n/**\r\n * Stream-agnostic, pattern-based mock LLM router.\r\n *\r\n * IMPORTANT: This module is intentionally *not* aware of stream event semantics\r\n * (stream-delta, stream-end, etc). It returns a high-level reply which is\r\n * converted to stream events by a dedicated adapter.\r\n */\r\nexport class MockAiRouter {\r\n  private readonly handlers: MockAiRouterHandler[];\r\n\r\n  constructor(handlers: MockAiRouterHandler[] = defaultHandlers) {\r\n    this.handlers = handlers;\r\n  }\r\n\r\n  route(request: MockAiRouterRequest): MockAiRouterReply {\r\n    for (const handler of this.handlers) {\r\n      if (handler.match(request)) {\r\n        return applyStreamStartGate(handler.respond(request), request.latestUserText);\r\n      }\r\n    }\r\n\r\n    return applyStreamStartGate(buildDefaultReply(request.latestUserText), request.latestUserText);\r\n  }\r\n}\r\n"]}