{"version":3,"file":"bash_background_terminate.js","sourceRoot":"","sources":["../../../../src/node/services/tools/bash_background_terminate.ts"],"names":[],"mappings":";;;AAAA,2BAA0B;AAG1B,0EAAwE;AAExE;;GAEG;AACI,MAAM,iCAAiC,GAAgB,CAAC,MAAyB,EAAE,EAAE,CAAC;IAC3F,OAAO,IAAA,SAAI,EAAC;QACV,WAAW,EAAE,kCAAgB,CAAC,yBAAyB,CAAC,WAAW;QACnE,WAAW,EAAE,kCAAgB,CAAC,yBAAyB,CAAC,MAAM;QAC9D,OAAO,EAAE,KAAK,EAAE,EAAE,UAAU,EAAE,EAA0C,EAAE,CAAC;YACzE,IAAI,CAAC,MAAM,CAAC,wBAAwB,EAAE,CAAC;gBACrC,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,0CAA0C;iBAClD,CAAC;YACJ,CAAC;YAED,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;gBACxB,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,4BAA4B;iBACpC,CAAC;YACJ,CAAC;YAED,8DAA8D;YAC9D,MAAM,OAAO,GAAG,MAAM,MAAM,CAAC,wBAAwB,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;YAC7E,IAAI,OAAO,EAAE,WAAW,KAAK,MAAM,CAAC,WAAW,EAAE,CAAC;gBAChD,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,sBAAsB,UAAU,EAAE;iBAC1C,CAAC;YACJ,CAAC;YAED,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,wBAAwB,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;YAC3E,IAAI,MAAM,CAAC,OAAO,EAAE,CAAC;gBACnB,OAAO;oBACL,OAAO,EAAE,IAAI;oBACb,OAAO,EAAE,WAAW,UAAU,aAAa;oBAC3C,YAAY,EAAE,OAAO,CAAC,WAAW;iBAClC,CAAC;YACJ,CAAC;YAED,OAAO,MAAM,CAAC;QAAA,CACf;KACF,CAAC,CAAC;AAAA,CACJ,CAAC;AAxCW,QAAA,iCAAiC,GAAjC,iCAAiC,CAwC5C","sourcesContent":["import { tool } from \"ai\";\r\nimport type { BashBackgroundTerminateResult } from \"@/common/types/tools\";\r\nimport type { ToolConfiguration, ToolFactory } from \"@/common/utils/tools/tools\";\r\nimport { TOOL_DEFINITIONS } from \"@/common/utils/tools/toolDefinitions\";\r\n\r\n/**\r\n * Tool for terminating background processes\r\n */\r\nexport const createBashBackgroundTerminateTool: ToolFactory = (config: ToolConfiguration) => {\r\n  return tool({\r\n    description: TOOL_DEFINITIONS.bash_background_terminate.description,\r\n    inputSchema: TOOL_DEFINITIONS.bash_background_terminate.schema,\r\n    execute: async ({ process_id }): Promise<BashBackgroundTerminateResult> => {\r\n      if (!config.backgroundProcessManager) {\r\n        return {\r\n          success: false,\r\n          error: \"Background process manager not available\",\r\n        };\r\n      }\r\n\r\n      if (!config.workspaceId) {\r\n        return {\r\n          success: false,\r\n          error: \"Workspace ID not available\",\r\n        };\r\n      }\r\n\r\n      // Verify process belongs to this workspace before terminating\r\n      const process = await config.backgroundProcessManager.getProcess(process_id);\r\n      if (process?.workspaceId !== config.workspaceId) {\r\n        return {\r\n          success: false,\r\n          error: `Process not found: ${process_id}`,\r\n        };\r\n      }\r\n\r\n      const result = await config.backgroundProcessManager.terminate(process_id);\r\n      if (result.success) {\r\n        return {\r\n          success: true,\r\n          message: `Process ${process_id} terminated`,\r\n          display_name: process.displayName,\r\n        };\r\n      }\r\n\r\n      return result;\r\n    },\r\n  });\r\n};\r\n"]}