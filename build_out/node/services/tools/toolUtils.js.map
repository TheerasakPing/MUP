{"version":3,"file":"toolUtils.js","sourceRoot":"","sources":["../../../../src/node/services/tools/toolUtils.ts"],"names":[],"mappings":";;;;;;;;;AAAA,gEAAwC;AAOxC,4BAAmC,MAAyB,EAAE,QAAgB,EAAU;IACtF,IAAA,gBAAM,EAAC,MAAM,CAAC,WAAW,EAAE,GAAG,QAAQ,uBAAuB,CAAC,CAAC;IAC/D,OAAO,MAAM,CAAC,WAAW,CAAC;AAAA,CAC3B;AAED,4BAAmC,MAAyB,EAAE,QAAgB,EAAe;IAC3F,IAAA,gBAAM,EAAC,MAAM,CAAC,WAAW,EAAE,GAAG,QAAQ,uBAAuB,CAAC,CAAC;IAC/D,OAAO,MAAM,CAAC,WAAW,CAAC;AAAA,CAC3B;AAED,yBACE,MAA0B,EAC1B,KAAc,EACd,QAAgB,EACP;IACT,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IACvC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QACpB,MAAM,IAAI,KAAK,CAAC,GAAG,QAAQ,mCAAmC,MAAM,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;IACxF,CAAC;IACD,OAAO,MAAM,CAAC,IAAI,CAAC;AAAA,CACpB;AAED,uBAA8B,MAAyB,EAAY;IACjE,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;AAAA,CACpC","sourcesContent":["import assert from \"node:assert/strict\";\n\nimport type { z } from \"zod\";\n\nimport type { ToolConfiguration } from \"@/common/utils/tools/tools\";\nimport type { TaskService } from \"@/node/services/taskService\";\n\nexport function requireWorkspaceId(config: ToolConfiguration, toolName: string): string {\n  assert(config.workspaceId, `${toolName} requires workspaceId`);\n  return config.workspaceId;\n}\n\nexport function requireTaskService(config: ToolConfiguration, toolName: string): TaskService {\n  assert(config.taskService, `${toolName} requires taskService`);\n  return config.taskService;\n}\n\nexport function parseToolResult<TSchema>(\n  schema: z.ZodType<TSchema>,\n  value: unknown,\n  toolName: string\n): TSchema {\n  const parsed = schema.safeParse(value);\n  if (!parsed.success) {\n    throw new Error(`${toolName} tool result validation failed: ${parsed.error.message}`);\n  }\n  return parsed.data;\n}\n\nexport function dedupeStrings(values: readonly string[]): string[] {\n  return Array.from(new Set(values));\n}\n"]}