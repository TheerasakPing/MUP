{"version":3,"file":"bash_background_list.js","sourceRoot":"","sources":["../../../../src/node/services/tools/bash_background_list.ts"],"names":[],"mappings":";;;AAAA,2BAA0B;AAG1B,0EAAwE;AAExE;;GAEG;AACI,MAAM,4BAA4B,GAAgB,CAAC,MAAyB,EAAE,EAAE,CAAC;IACtF,OAAO,IAAA,SAAI,EAAC;QACV,WAAW,EAAE,kCAAgB,CAAC,oBAAoB,CAAC,WAAW;QAC9D,WAAW,EAAE,kCAAgB,CAAC,oBAAoB,CAAC,MAAM;QACzD,OAAO,EAAE,KAAK,IAAuC,EAAE,CAAC;YACtD,IAAI,CAAC,MAAM,CAAC,wBAAwB,EAAE,CAAC;gBACrC,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,0CAA0C;iBAClD,CAAC;YACJ,CAAC;YAED,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;gBACxB,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,4BAA4B;iBACpC,CAAC;YACJ,CAAC;YAED,MAAM,SAAS,GAAG,MAAM,MAAM,CAAC,wBAAwB,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YACjF,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAEvB,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,SAAS,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC/B,UAAU,EAAE,CAAC,CAAC,EAAE;oBAChB,MAAM,EAAE,CAAC,CAAC,MAAM;oBAChB,MAAM,EAAE,CAAC,CAAC,MAAM;oBAChB,SAAS,EAAE,CAAC,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS;oBAClF,QAAQ,EAAE,CAAC,CAAC,QAAQ;oBACpB,YAAY,EAAE,CAAC,CAAC,WAAW;iBAC5B,CAAC,CAAC;aACJ,CAAC;QAAA,CACH;KACF,CAAC,CAAC;AAAA,CACJ,CAAC;AAnCW,QAAA,4BAA4B,GAA5B,4BAA4B,CAmCvC","sourcesContent":["import { tool } from \"ai\";\nimport type { BashBackgroundListResult } from \"@/common/types/tools\";\nimport type { ToolConfiguration, ToolFactory } from \"@/common/utils/tools/tools\";\nimport { TOOL_DEFINITIONS } from \"@/common/utils/tools/toolDefinitions\";\n\n/**\n * Tool for listing background processes in the current workspace\n */\nexport const createBashBackgroundListTool: ToolFactory = (config: ToolConfiguration) => {\n  return tool({\n    description: TOOL_DEFINITIONS.bash_background_list.description,\n    inputSchema: TOOL_DEFINITIONS.bash_background_list.schema,\n    execute: async (): Promise<BashBackgroundListResult> => {\n      if (!config.backgroundProcessManager) {\n        return {\n          success: false,\n          error: \"Background process manager not available\",\n        };\n      }\n\n      if (!config.workspaceId) {\n        return {\n          success: false,\n          error: \"Workspace ID not available\",\n        };\n      }\n\n      const processes = await config.backgroundProcessManager.list(config.workspaceId);\n      const now = Date.now();\n\n      return {\n        success: true,\n        processes: processes.map((p) => ({\n          process_id: p.id,\n          status: p.status,\n          script: p.script,\n          uptime_ms: p.exitTime !== undefined ? p.exitTime - p.startTime : now - p.startTime,\n          exitCode: p.exitCode,\n          display_name: p.displayName,\n        })),\n      };\n    },\n  });\n};\n"]}