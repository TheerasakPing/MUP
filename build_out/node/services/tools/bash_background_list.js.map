{"version":3,"file":"bash_background_list.js","sourceRoot":"","sources":["../../../../src/node/services/tools/bash_background_list.ts"],"names":[],"mappings":";;;AAAA,2BAA0B;AAG1B,0EAAwE;AAExE;;GAEG;AACI,MAAM,4BAA4B,GAAgB,CAAC,MAAyB,EAAE,EAAE,CAAC;IACtF,OAAO,IAAA,SAAI,EAAC;QACV,WAAW,EAAE,kCAAgB,CAAC,oBAAoB,CAAC,WAAW;QAC9D,WAAW,EAAE,kCAAgB,CAAC,oBAAoB,CAAC,MAAM;QACzD,OAAO,EAAE,KAAK,IAAuC,EAAE,CAAC;YACtD,IAAI,CAAC,MAAM,CAAC,wBAAwB,EAAE,CAAC;gBACrC,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,0CAA0C;iBAClD,CAAC;YACJ,CAAC;YAED,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;gBACxB,OAAO;oBACL,OAAO,EAAE,KAAK;oBACd,KAAK,EAAE,4BAA4B;iBACpC,CAAC;YACJ,CAAC;YAED,MAAM,SAAS,GAAG,MAAM,MAAM,CAAC,wBAAwB,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;YACjF,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAEvB,OAAO;gBACL,OAAO,EAAE,IAAI;gBACb,SAAS,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBAC/B,UAAU,EAAE,CAAC,CAAC,EAAE;oBAChB,MAAM,EAAE,CAAC,CAAC,MAAM;oBAChB,MAAM,EAAE,CAAC,CAAC,MAAM;oBAChB,SAAS,EAAE,CAAC,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,SAAS;oBAClF,QAAQ,EAAE,CAAC,CAAC,QAAQ;oBACpB,YAAY,EAAE,CAAC,CAAC,WAAW;iBAC5B,CAAC,CAAC;aACJ,CAAC;QAAA,CACH;KACF,CAAC,CAAC;AAAA,CACJ,CAAC;AAnCW,QAAA,4BAA4B,GAA5B,4BAA4B,CAmCvC","sourcesContent":["import { tool } from \"ai\";\r\nimport type { BashBackgroundListResult } from \"@/common/types/tools\";\r\nimport type { ToolConfiguration, ToolFactory } from \"@/common/utils/tools/tools\";\r\nimport { TOOL_DEFINITIONS } from \"@/common/utils/tools/toolDefinitions\";\r\n\r\n/**\r\n * Tool for listing background processes in the current workspace\r\n */\r\nexport const createBashBackgroundListTool: ToolFactory = (config: ToolConfiguration) => {\r\n  return tool({\r\n    description: TOOL_DEFINITIONS.bash_background_list.description,\r\n    inputSchema: TOOL_DEFINITIONS.bash_background_list.schema,\r\n    execute: async (): Promise<BashBackgroundListResult> => {\r\n      if (!config.backgroundProcessManager) {\r\n        return {\r\n          success: false,\r\n          error: \"Background process manager not available\",\r\n        };\r\n      }\r\n\r\n      if (!config.workspaceId) {\r\n        return {\r\n          success: false,\r\n          error: \"Workspace ID not available\",\r\n        };\r\n      }\r\n\r\n      const processes = await config.backgroundProcessManager.list(config.workspaceId);\r\n      const now = Date.now();\r\n\r\n      return {\r\n        success: true,\r\n        processes: processes.map((p) => ({\r\n          process_id: p.id,\r\n          status: p.status,\r\n          script: p.script,\r\n          uptime_ms: p.exitTime !== undefined ? p.exitTime - p.startTime : now - p.startTime,\r\n          exitCode: p.exitCode,\r\n          display_name: p.displayName,\r\n        })),\r\n      };\r\n    },\r\n  });\r\n};\r\n"]}