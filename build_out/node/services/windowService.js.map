{"version":3,"file":"windowService.js","sourceRoot":"","sources":["../../../src/node/services/windowService.ts"],"names":[],"mappings":";;;AACA,6CAA0C;AAE1C;IACU,UAAU,GAAyB,IAAI,CAAC;IAEhD,aAAa,CAAC,MAAqB,EAAE;QACnC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;IAAA,CAC1B;IAED,eAAe,GAAS;QACtB,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO;QACT,CAAC;QAED,MAAM,WAAW,GACf,OAAQ,UAA8C,CAAC,WAAW,KAAK,UAAU;YAC/E,CAAC,CAAE,UAA6C,CAAC,WAAW,EAAE;YAC9D,CAAC,CAAC,KAAK,CAAC;QAEZ,IAAI,WAAW,EAAE,CAAC;YAChB,OAAO;QACT,CAAC;QAED,IAAI,CAAC;YACH,IACE,OAAQ,UAA8C,CAAC,WAAW,KAAK,UAAU;gBAChF,UAA6C,CAAC,WAAW,EAAE;gBAC5D,OAAQ,UAAuC,CAAC,OAAO,KAAK,UAAU,EACtE,CAAC;gBACA,UAAsC,CAAC,OAAO,EAAE,CAAC;YACpD,CAAC;YAED,IAAI,OAAQ,UAAoC,CAAC,IAAI,KAAK,UAAU,EAAE,CAAC;gBACpE,UAAmC,CAAC,IAAI,EAAE,CAAC;YAC9C,CAAC;YAED,IAAI,OAAQ,UAAqC,CAAC,KAAK,KAAK,UAAU,EAAE,CAAC;gBACtE,UAAoC,CAAC,KAAK,EAAE,CAAC;YAChD,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,SAAG,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC,CAAC;QAC5D,CAAC;IAAA,CACF;IAED,IAAI,CAAC,OAAe,EAAE,GAAG,IAAe,EAAQ;QAC9C,MAAM,WAAW,GACf,IAAI,CAAC,UAAU;YACf,OAAQ,IAAI,CAAC,UAA8C,CAAC,WAAW,KAAK,UAAU;YACpF,CAAC,CAAE,IAAI,CAAC,UAA6C,CAAC,WAAW,EAAE;YACnE,CAAC,CAAC,KAAK,CAAC;QAEZ,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,EAAE,CAAC;YACpC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;YACnD,OAAO;QACT,CAAC;QAED,SAAG,CAAC,KAAK,CACP,mEAAmE,EACnE,OAAO,EACP,GAAG,IAAI,CACR,CAAC;IAAA,CACH;IAED,QAAQ,CAAC,KAAa,EAAQ;QAC5B,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,EAAE,CAAC;YACtD,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC;aAAM,CAAC;YACN,SAAG,CAAC,KAAK,CAAC,uEAAuE,CAAC,CAAC;QACrF,CAAC;IAAA,CACF;CACF","sourcesContent":["import type { BrowserWindow } from \"electron\";\r\nimport { log } from \"@/node/services/log\";\r\n\r\nexport class WindowService {\r\n  private mainWindow: BrowserWindow | null = null;\r\n\r\n  setMainWindow(window: BrowserWindow) {\r\n    this.mainWindow = window;\r\n  }\r\n\r\n  focusMainWindow(): void {\r\n    const mainWindow = this.mainWindow;\r\n    if (!mainWindow) {\r\n      return;\r\n    }\r\n\r\n    const isDestroyed =\r\n      typeof (mainWindow as { isDestroyed?: () => boolean }).isDestroyed === \"function\"\r\n        ? (mainWindow as { isDestroyed: () => boolean }).isDestroyed()\r\n        : false;\r\n\r\n    if (isDestroyed) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (\r\n        typeof (mainWindow as { isMinimized?: () => boolean }).isMinimized === \"function\" &&\r\n        (mainWindow as { isMinimized: () => boolean }).isMinimized() &&\r\n        typeof (mainWindow as { restore?: () => void }).restore === \"function\"\r\n      ) {\r\n        (mainWindow as { restore: () => void }).restore();\r\n      }\r\n\r\n      if (typeof (mainWindow as { show?: () => void }).show === \"function\") {\r\n        (mainWindow as { show: () => void }).show();\r\n      }\r\n\r\n      if (typeof (mainWindow as { focus?: () => void }).focus === \"function\") {\r\n        (mainWindow as { focus: () => void }).focus();\r\n      }\r\n    } catch (error) {\r\n      log.debug(\"WindowService: focusMainWindow failed\", error);\r\n    }\r\n  }\r\n\r\n  send(channel: string, ...args: unknown[]): void {\r\n    const isDestroyed =\r\n      this.mainWindow &&\r\n      typeof (this.mainWindow as { isDestroyed?: () => boolean }).isDestroyed === \"function\"\r\n        ? (this.mainWindow as { isDestroyed: () => boolean }).isDestroyed()\r\n        : false;\r\n\r\n    if (this.mainWindow && !isDestroyed) {\r\n      this.mainWindow.webContents.send(channel, ...args);\r\n      return;\r\n    }\r\n\r\n    log.debug(\r\n      \"WindowService: send called but mainWindow is not set or destroyed\",\r\n      channel,\r\n      ...args\r\n    );\r\n  }\r\n\r\n  setTitle(title: string): void {\r\n    if (this.mainWindow && !this.mainWindow.isDestroyed()) {\r\n      this.mainWindow.setTitle(title);\r\n    } else {\r\n      log.debug(\"WindowService: setTitle called but mainWindow is not set or destroyed\");\r\n    }\r\n  }\r\n}\r\n"]}