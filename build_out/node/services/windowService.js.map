{"version":3,"file":"windowService.js","sourceRoot":"","sources":["../../../src/node/services/windowService.ts"],"names":[],"mappings":";;;AACA,6CAA0C;AAE1C;IACU,UAAU,GAAyB,IAAI,CAAC;IAEhD,aAAa,CAAC,MAAqB,EAAE;QACnC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;IAAA,CAC1B;IAED,eAAe,GAAS;QACtB,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,CAAC,UAAU,EAAE,CAAC;YAChB,OAAO;QACT,CAAC;QAED,MAAM,WAAW,GACf,OAAQ,UAA8C,CAAC,WAAW,KAAK,UAAU;YAC/E,CAAC,CAAE,UAA6C,CAAC,WAAW,EAAE;YAC9D,CAAC,CAAC,KAAK,CAAC;QAEZ,IAAI,WAAW,EAAE,CAAC;YAChB,OAAO;QACT,CAAC;QAED,IAAI,CAAC;YACH,IACE,OAAQ,UAA8C,CAAC,WAAW,KAAK,UAAU;gBAChF,UAA6C,CAAC,WAAW,EAAE;gBAC5D,OAAQ,UAAuC,CAAC,OAAO,KAAK,UAAU,EACtE,CAAC;gBACA,UAAsC,CAAC,OAAO,EAAE,CAAC;YACpD,CAAC;YAED,IAAI,OAAQ,UAAoC,CAAC,IAAI,KAAK,UAAU,EAAE,CAAC;gBACpE,UAAmC,CAAC,IAAI,EAAE,CAAC;YAC9C,CAAC;YAED,IAAI,OAAQ,UAAqC,CAAC,KAAK,KAAK,UAAU,EAAE,CAAC;gBACtE,UAAoC,CAAC,KAAK,EAAE,CAAC;YAChD,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,SAAG,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC,CAAC;QAC5D,CAAC;IAAA,CACF;IAED,IAAI,CAAC,OAAe,EAAE,GAAG,IAAe,EAAQ;QAC9C,MAAM,WAAW,GACf,IAAI,CAAC,UAAU;YACf,OAAQ,IAAI,CAAC,UAA8C,CAAC,WAAW,KAAK,UAAU;YACpF,CAAC,CAAE,IAAI,CAAC,UAA6C,CAAC,WAAW,EAAE;YACnE,CAAC,CAAC,KAAK,CAAC;QAEZ,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,EAAE,CAAC;YACpC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;YACnD,OAAO;QACT,CAAC;QAED,SAAG,CAAC,KAAK,CACP,mEAAmE,EACnE,OAAO,EACP,GAAG,IAAI,CACR,CAAC;IAAA,CACH;IAED,QAAQ,CAAC,KAAa,EAAQ;QAC5B,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,EAAE,CAAC;YACtD,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC;aAAM,CAAC;YACN,SAAG,CAAC,KAAK,CAAC,uEAAuE,CAAC,CAAC;QACrF,CAAC;IAAA,CACF;CACF","sourcesContent":["import type { BrowserWindow } from \"electron\";\nimport { log } from \"@/node/services/log\";\n\nexport class WindowService {\n  private mainWindow: BrowserWindow | null = null;\n\n  setMainWindow(window: BrowserWindow) {\n    this.mainWindow = window;\n  }\n\n  focusMainWindow(): void {\n    const mainWindow = this.mainWindow;\n    if (!mainWindow) {\n      return;\n    }\n\n    const isDestroyed =\n      typeof (mainWindow as { isDestroyed?: () => boolean }).isDestroyed === \"function\"\n        ? (mainWindow as { isDestroyed: () => boolean }).isDestroyed()\n        : false;\n\n    if (isDestroyed) {\n      return;\n    }\n\n    try {\n      if (\n        typeof (mainWindow as { isMinimized?: () => boolean }).isMinimized === \"function\" &&\n        (mainWindow as { isMinimized: () => boolean }).isMinimized() &&\n        typeof (mainWindow as { restore?: () => void }).restore === \"function\"\n      ) {\n        (mainWindow as { restore: () => void }).restore();\n      }\n\n      if (typeof (mainWindow as { show?: () => void }).show === \"function\") {\n        (mainWindow as { show: () => void }).show();\n      }\n\n      if (typeof (mainWindow as { focus?: () => void }).focus === \"function\") {\n        (mainWindow as { focus: () => void }).focus();\n      }\n    } catch (error) {\n      log.debug(\"WindowService: focusMainWindow failed\", error);\n    }\n  }\n\n  send(channel: string, ...args: unknown[]): void {\n    const isDestroyed =\n      this.mainWindow &&\n      typeof (this.mainWindow as { isDestroyed?: () => boolean }).isDestroyed === \"function\"\n        ? (this.mainWindow as { isDestroyed: () => boolean }).isDestroyed()\n        : false;\n\n    if (this.mainWindow && !isDestroyed) {\n      this.mainWindow.webContents.send(channel, ...args);\n      return;\n    }\n\n    log.debug(\n      \"WindowService: send called but mainWindow is not set or destroyed\",\n      channel,\n      ...args\n    );\n  }\n\n  setTitle(title: string): void {\n    if (this.mainWindow && !this.mainWindow.isDestroyed()) {\n      this.mainWindow.setTitle(title);\n    } else {\n      log.debug(\"WindowService: setTitle called but mainWindow is not set or destroyed\");\n    }\n  }\n}\n"]}