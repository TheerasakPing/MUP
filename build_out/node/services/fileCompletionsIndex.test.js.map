{"version":3,"file":"fileCompletionsIndex.test.js","sourceRoot":"","sources":["../../../src/node/services/fileCompletionsIndex.test.ts"],"names":[],"mappings":";;AAAA,uCAAgD;AAEhD,iEAA0F;AAE1F,IAAA,mBAAQ,EAAC,uBAAuB,EAAE,GAAG,EAAE,CAAC;IACtC,MAAM,KAAK,GAAG;QACZ,WAAW;QACX,YAAY;QACZ,YAAY;QACZ,2BAA2B;QAC3B,eAAe;KAChB,CAAC;IAEF,MAAM,KAAK,GAAG,IAAA,gDAAyB,EAAC,KAAK,CAAC,CAAC;IAE/C,IAAA,aAAE,EAAC,+CAA+C,EAAE,GAAG,EAAE,CAAC;QACxD,IAAA,iBAAM,EAAC,IAAA,4CAAqB,EAAC,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,WAAW,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC,CAAC;IAAA,CAChG,CAAC,CAAC;IAEH,IAAA,aAAE,EAAC,4CAA4C,EAAE,GAAG,EAAE,CAAC;QACrD,IAAA,iBAAM,EAAC,IAAA,4CAAqB,EAAC,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC;YACvD,YAAY;YACZ,2BAA2B;YAC3B,YAAY;SACb,CAAC,CAAC;IAAA,CACJ,CAAC,CAAC;IACH,IAAA,aAAE,EAAC,uCAAuC,EAAE,GAAG,EAAE,CAAC;QAChD,IAAA,iBAAM,EAAC,IAAA,4CAAqB,EAAC,KAAK,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;IAAA,CAC3E,CAAC,CAAC;IAEH,IAAA,aAAE,EAAC,sCAAsC,EAAE,GAAG,EAAE,CAAC;QAC/C,IAAA,iBAAM,EAAC,IAAA,4CAAqB,EAAC,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;IAAA,CACzE,CAAC,CAAC;IAEH,IAAA,aAAE,EAAC,0CAA0C,EAAE,GAAG,EAAE,CAAC;QACnD,IAAA,iBAAM,EAAC,IAAA,4CAAqB,EAAC,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,2BAA2B,CAAC,CAAC,CAAC;IAAA,CACzF,CAAC,CAAC;IAEH,IAAA,aAAE,EAAC,0CAA0C,EAAE,GAAG,EAAE,CAAC;QACnD,IAAA,iBAAM,EAAC,IAAA,4CAAqB,EAAC,KAAK,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;IAAA,CAC5E,CAAC,CAAC;AAAA,CACJ,CAAC,CAAC","sourcesContent":["import { describe, expect, it } from \"bun:test\";\n\nimport { buildFileCompletionsIndex, searchFileCompletions } from \"./fileCompletionsIndex\";\n\ndescribe(\"searchFileCompletions\", () => {\n  const files = [\n    \"README.md\",\n    \"src/foo.ts\",\n    \"src/bar.ts\",\n    \"src/components/Button.tsx\",\n    \"docs/guide.md\",\n  ];\n\n  const index = buildFileCompletionsIndex(files);\n\n  it(\"returns shallow paths first for empty queries\", () => {\n    expect(searchFileCompletions(index, \"\", 3)).toEqual([\"README.md\", \"src/bar.ts\", \"src/foo.ts\"]);\n  });\n\n  it(\"supports prefix matches on directory paths\", () => {\n    expect(searchFileCompletions(index, \"src/\", 10)).toEqual([\n      \"src/bar.ts\",\n      \"src/components/Button.tsx\",\n      \"src/foo.ts\",\n    ]);\n  });\n  it(\"supports prefix matches on full paths\", () => {\n    expect(searchFileCompletions(index, \"src/f\", 10)).toEqual([\"src/foo.ts\"]);\n  });\n\n  it(\"supports prefix matches on basenames\", () => {\n    expect(searchFileCompletions(index, \"foo\", 10)).toEqual([\"src/foo.ts\"]);\n  });\n\n  it(\"falls back to segment/substring matching\", () => {\n    expect(searchFileCompletions(index, \"comp\", 10)).toEqual([\"src/components/Button.tsx\"]);\n  });\n\n  it(\"normalizes Windows-style path separators\", () => {\n    expect(searchFileCompletions(index, \"src\\\\b\", 10)).toEqual([\"src/bar.ts\"]);\n  });\n});\n"]}