{"version":3,"file":"SSHTransport.js","sourceRoot":"","sources":["../../../../src/node/runtime/transports/SSHTransport.ts"],"names":[],"mappings":"","sourcesContent":["import type { SpawnResult } from \"../RemoteRuntime\";\nimport type { SSHConnectionConfig } from \"../sshConnectionPool\";\n\nexport type SSHTransportConfig = SSHConnectionConfig;\n\nexport interface PtyHandle {\n  write(data: string): void;\n  resize(cols: number, rows: number): void;\n  kill(): void;\n  onData(handler: (data: string) => void): { dispose: () => void };\n  onExit(handler: (event: { exitCode: number; signal?: number }) => void): { dispose: () => void };\n}\n\nexport interface SpawnOptions {\n  forcePTY?: boolean;\n  timeout?: number;\n  abortSignal?: AbortSignal;\n}\n\nexport interface PtySessionParams {\n  workspacePath: string;\n  cols: number;\n  rows: number;\n}\n\nexport interface SSHTransport {\n  /** Spawn a command on the remote host, returning a ChildProcess-compatible object. */\n  spawnRemoteProcess(command: string, options: SpawnOptions): Promise<SpawnResult>;\n\n  /** Determine if an exit code represents a connection-level failure for this transport. */\n  isConnectionFailure(exitCode: number, stderr: string): boolean;\n\n  /** Mark connection as healthy (after successful command). */\n  markHealthy(): void;\n\n  /** Report connection failure (triggers backoff). */\n  reportFailure(error: string): void;\n\n  /** Pre-flight connection check with backoff enforcement. */\n  acquireConnection(options?: {\n    abortSignal?: AbortSignal;\n    timeoutMs?: number;\n    onWait?: (waitMs: number) => void;\n  }): Promise<void>;\n\n  /** Get underlying config (for PTY terminal spawning). */\n  getConfig(): SSHTransportConfig;\n\n  /** Create interactive PTY session for the transport. */\n  createPtySession(params: PtySessionParams): Promise<PtyHandle>;\n}\n"]}