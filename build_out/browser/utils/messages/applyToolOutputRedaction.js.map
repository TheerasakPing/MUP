{"version":3,"file":"applyToolOutputRedaction.js","sourceRoot":"","sources":["../../../../src/browser/utils/messages/applyToolOutputRedaction.ts"],"names":[],"mappings":";;;AAKA,4EAA8E;AAE9E,kCAAyC,QAAsB,EAAgB;IAC7E,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC;QAC3B,IAAI,GAAG,CAAC,IAAI,KAAK,WAAW;YAAE,OAAO,GAAG,CAAC;QAEzC,MAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;YACvC,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc;gBAAE,OAAO,IAAI,CAAC;YAC9C,IAAI,IAAI,CAAC,KAAK,KAAK,kBAAkB;gBAAE,OAAO,IAAI,CAAC;YAEnD,OAAO;gBACL,GAAG,IAAI;gBACP,MAAM,EAAE,IAAA,wCAAqB,EAAC,IAAI,CAAC,MAAM,CAAC;aAC3C,CAAC;QAAA,CACH,CAAC,CAAC;QAEH,OAAO;YACL,GAAG,GAAG;YACN,KAAK,EAAE,QAAQ;SACK,CAAC;IAAA,CACxB,CAAC,CAAC;AAAA,CACJ","sourcesContent":["/**\r\n * Strip UI-only tool output before sending to providers.\r\n * Produces a cloned array safe for sending to providers without touching persisted history/UI.\r\n */\r\nimport type { MuxMessage } from \"@/common/types/message\";\r\nimport { stripToolOutputUiOnly } from \"@/common/utils/tools/toolOutputUiOnly\";\r\n\r\nexport function applyToolOutputRedaction(messages: MuxMessage[]): MuxMessage[] {\r\n  return messages.map((msg) => {\r\n    if (msg.role !== \"assistant\") return msg;\r\n\r\n    const newParts = msg.parts.map((part) => {\r\n      if (part.type !== \"dynamic-tool\") return part;\r\n      if (part.state !== \"output-available\") return part;\r\n\r\n      return {\r\n        ...part,\r\n        output: stripToolOutputUiOnly(part.output),\r\n      };\r\n    });\r\n\r\n    return {\r\n      ...msg,\r\n      parts: newParts,\r\n    } satisfies MuxMessage;\r\n  });\r\n}\r\n"]}