{"version":3,"file":"applyToolOutputRedaction.js","sourceRoot":"","sources":["../../../../src/browser/utils/messages/applyToolOutputRedaction.ts"],"names":[],"mappings":";;;AAKA,4EAA8E;AAE9E,kCAAyC,QAAsB,EAAgB;IAC7E,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC;QAC3B,IAAI,GAAG,CAAC,IAAI,KAAK,WAAW;YAAE,OAAO,GAAG,CAAC;QAEzC,MAAM,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;YACvC,IAAI,IAAI,CAAC,IAAI,KAAK,cAAc;gBAAE,OAAO,IAAI,CAAC;YAC9C,IAAI,IAAI,CAAC,KAAK,KAAK,kBAAkB;gBAAE,OAAO,IAAI,CAAC;YAEnD,OAAO;gBACL,GAAG,IAAI;gBACP,MAAM,EAAE,IAAA,wCAAqB,EAAC,IAAI,CAAC,MAAM,CAAC;aAC3C,CAAC;QAAA,CACH,CAAC,CAAC;QAEH,OAAO;YACL,GAAG,GAAG;YACN,KAAK,EAAE,QAAQ;SACK,CAAC;IAAA,CACxB,CAAC,CAAC;AAAA,CACJ","sourcesContent":["/**\n * Strip UI-only tool output before sending to providers.\n * Produces a cloned array safe for sending to providers without touching persisted history/UI.\n */\nimport type { MuxMessage } from \"@/common/types/message\";\nimport { stripToolOutputUiOnly } from \"@/common/utils/tools/toolOutputUiOnly\";\n\nexport function applyToolOutputRedaction(messages: MuxMessage[]): MuxMessage[] {\n  return messages.map((msg) => {\n    if (msg.role !== \"assistant\") return msg;\n\n    const newParts = msg.parts.map((part) => {\n      if (part.type !== \"dynamic-tool\") return part;\n      if (part.state !== \"output-available\") return part;\n\n      return {\n        ...part,\n        output: stripToolOutputUiOnly(part.output),\n      };\n    });\n\n    return {\n      ...msg,\n      parts: newParts,\n    } satisfies MuxMessage;\n  });\n}\n"]}