// src/desktop/preload.ts
var import_electron = require("electron");
var pendingDeepLinks = [];
var deepLinkSubscribers = new Set;
import_electron.ipcRenderer.on("mux:deep-link", (_event, payload) => {
  if (deepLinkSubscribers.size === 0) {
    pendingDeepLinks.push(payload);
  }
  for (const subscriber of deepLinkSubscribers) {
    try {
      subscriber(payload);
    } catch (error) {
      console.debug("[deep-link] Renderer subscriber threw:", error);
    }
  }
});
window.addEventListener("message", (event) => {
  if (event.data === "start-orpc-client" && event.ports?.[0]) {
    import_electron.ipcRenderer.postMessage("start-orpc-server", null, [...event.ports]);
  }
});
import_electron.contextBridge.exposeInMainWorld("api", {
  platform: process.platform,
  versions: {
    node: process.versions.node,
    chrome: process.versions.chrome,
    electron: process.versions.electron
  },
  isE2E: process.env.MUX_E2E === "1",
  enableTelemetryInDev: process.env.MUX_ENABLE_TELEMETRY_IN_DEV === "1",
  debugLlmRequest: process.env.MUX_DEBUG_LLM_REQUEST === "1",
  muxMdUrlOverride: process.env.MUX_MD_URL_OVERRIDE,
  getIsRosetta: () => import_electron.ipcRenderer.invoke("mux:get-is-rosetta"),
  getApiServerUrl: () => import_electron.ipcRenderer.invoke("mux:get-api-server-url"),
  getIsWindowsWslShell: () => import_electron.ipcRenderer.invoke("mux:get-is-windows-wsl-shell"),
  onNotificationClicked: (callback) => {
    const listener = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("mux:notification-clicked", listener);
    return () => {
      import_electron.ipcRenderer.off("mux:notification-clicked", listener);
    };
  },
  consumePendingDeepLinks: () => pendingDeepLinks.splice(0, pendingDeepLinks.length),
  onDeepLink: (callback) => {
    deepLinkSubscribers.add(callback);
    return () => {
      deepLinkSubscribers.delete(callback);
    };
  }
});

//# debugId=B44A3A7B0366792F64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2Rlc2t0b3AvcHJlbG9hZC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsKICAgICIvKipcbiAqIEVsZWN0cm9uIFByZWxvYWQgU2NyaXB0XG4gKlxuICogVGhpcyBzY3JpcHQgYnJpZGdlcyB0aGUgcmVuZGVyZXIgcHJvY2VzcyB3aXRoIHRoZSBtYWluIHByb2Nlc3MgdmlhIE9SUEMgb3ZlciBNZXNzYWdlUG9ydC5cbiAqXG4gKiBLZXkgcmVzcG9uc2liaWxpdGllczpcbiAqIDEpIEZvcndhcmQgTWVzc2FnZVBvcnQgZnJvbSByZW5kZXJlciB0byBtYWluIHByb2Nlc3MgZm9yIE9SUEMgdHJhbnNwb3J0IHNldHVwXG4gKiAyKSBFeHBvc2UgbWluaW1hbCBwbGF0Zm9ybSBpbmZvIHRvIHJlbmRlcmVyIHZpYSBjb250ZXh0QnJpZGdlXG4gKlxuICogVGhlIE9SUEMgY29ubmVjdGlvbiBmbG93OlxuICogLSBSZW5kZXJlciBjcmVhdGVzIE1lc3NhZ2VDaGFubmVsLCBwb3N0cyBcInN0YXJ0LW9ycGMtY2xpZW50XCIgd2l0aCBzZXJ2ZXJQb3J0XG4gKiAtIFByZWxvYWQgaW50ZXJjZXB0cywgZm9yd2FyZHMgc2VydmVyUG9ydCB0byBtYWluIHZpYSBpcGNSZW5kZXJlci5wb3N0TWVzc2FnZVxuICogLSBNYWluIHByb2Nlc3MgdXBncmFkZXMgdGhlIHBvcnQgd2l0aCBSUENIYW5kbGVyIGZvciBiaWRpcmVjdGlvbmFsIFJQQ1xuICpcbiAqIEJ1aWxkOiBgYnVuIGJ1aWxkIHNyYy9kZXNrdG9wL3ByZWxvYWQudHMgLS1mb3JtYXQ9Y2pzIC0tdGFyZ2V0PW5vZGUgLS1leHRlcm5hbD1lbGVjdHJvbmBcbiAqL1xuXG5pbXBvcnQgeyBjb250ZXh0QnJpZGdlLCBpcGNSZW5kZXJlciB9IGZyb20gXCJlbGVjdHJvblwiO1xuaW1wb3J0IHR5cGUgeyBNdXhEZWVwTGlua1BheWxvYWQgfSBmcm9tIFwiQC9jb21tb24vdHlwZXMvZGVlcExpbmtcIjtcblxuLy8gbXV4Oi8vIGRlZXAgbGlua3MgY2FuIGFycml2ZSBiZWZvcmUgdGhlIFJlYWN0IGFwcCBzdWJzY3JpYmVzLlxuLy8gQnVmZmVyIHRoZW0gaGVyZSBzbyB0aGUgcmVuZGVyZXIgY2FuIGNvbnN1bWUgdGhlbSBvbiBtb3VudC5cbmNvbnN0IHBlbmRpbmdEZWVwTGlua3M6IE11eERlZXBMaW5rUGF5bG9hZFtdID0gW107XG5jb25zdCBkZWVwTGlua1N1YnNjcmliZXJzID0gbmV3IFNldDwocGF5bG9hZDogTXV4RGVlcExpbmtQYXlsb2FkKSA9PiB2b2lkPigpO1xuXG5pcGNSZW5kZXJlci5vbihcIm11eDpkZWVwLWxpbmtcIiwgKF9ldmVudDogdW5rbm93biwgcGF5bG9hZDogTXV4RGVlcExpbmtQYXlsb2FkKSA9PiB7XG4gIGlmIChkZWVwTGlua1N1YnNjcmliZXJzLnNpemUgPT09IDApIHtcbiAgICBwZW5kaW5nRGVlcExpbmtzLnB1c2gocGF5bG9hZCk7XG4gIH1cblxuICBmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2YgZGVlcExpbmtTdWJzY3JpYmVycykge1xuICAgIHRyeSB7XG4gICAgICBzdWJzY3JpYmVyKHBheWxvYWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBCZXN0LWVmZm9ydDogYSByZW5kZXJlciBidWcgc2hvdWxkbid0IGJyZWFrIGRlZXAgbGluayBkZWxpdmVyeS5cbiAgICAgIGNvbnNvbGUuZGVidWcoXCJbZGVlcC1saW5rXSBSZW5kZXJlciBzdWJzY3JpYmVyIHRocmV3OlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG59KTtcblxuLy8gRm9yd2FyZCBPUlBDIE1lc3NhZ2VQb3J0IGZyb20gcmVuZGVyZXIgdG8gbWFpbiBwcm9jZXNzXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC5kYXRhID09PSBcInN0YXJ0LW9ycGMtY2xpZW50XCIgJiYgZXZlbnQucG9ydHM/LlswXSkge1xuICAgIGlwY1JlbmRlcmVyLnBvc3RNZXNzYWdlKFwic3RhcnQtb3JwYy1zZXJ2ZXJcIiwgbnVsbCwgWy4uLmV2ZW50LnBvcnRzXSk7XG4gIH1cbn0pO1xuXG5jb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKFwiYXBpXCIsIHtcbiAgcGxhdGZvcm06IHByb2Nlc3MucGxhdGZvcm0sXG4gIHZlcnNpb25zOiB7XG4gICAgbm9kZTogcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLFxuICAgIGNocm9tZTogcHJvY2Vzcy52ZXJzaW9ucy5jaHJvbWUsXG4gICAgZWxlY3Ryb246IHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24sXG4gIH0sXG4gIGlzRTJFOiBwcm9jZXNzLmVudi5NVVhfRTJFID09PSBcIjFcIixcbiAgZW5hYmxlVGVsZW1ldHJ5SW5EZXY6IHByb2Nlc3MuZW52Lk1VWF9FTkFCTEVfVEVMRU1FVFJZX0lOX0RFViA9PT0gXCIxXCIsXG4gIC8vIE5vdGU6IFdoZW4gZGVidWdnaW5nIExMTSByZXF1ZXN0cywgd2UgYWxzbyB3YW50IHRvIHNlZSBzeW50aGV0aWMvcmVxdWVzdC1vbmx5XG4gIC8vIG1lc3NhZ2VzIGluIHRoZSBjaGF0IGhpc3Rvcnkgc28gdGhlIFVJIG1hdGNoZXMgd2hhdCB3YXMgc2VudCB0byB0aGUgcHJvdmlkZXIuXG4gIGRlYnVnTGxtUmVxdWVzdDogcHJvY2Vzcy5lbnYuTVVYX0RFQlVHX0xMTV9SRVFVRVNUID09PSBcIjFcIixcbiAgLy8gQWxsb3cgdGVzdGluZyBhZ2FpbnN0IGEgbXV4Lm1kIHN0YWdpbmcvbG9jYWwgZGVwbG95bWVudCB3aXRob3V0IHJlYnVpbGRpbmcgdGhlIHJlbmRlcmVyLlxuICBtdXhNZFVybE92ZXJyaWRlOiBwcm9jZXNzLmVudi5NVVhfTURfVVJMX09WRVJSSURFLFxuICAvLyBOT1RFOiBUaGlzIGlzIGludGVudGlvbmFsbHkgYXN5bmMgc28gdGhlIHByZWxvYWQgc2NyaXB0IGRvZXMgbm90IHJlbHkgb24gTm9kZSBidWlsdGluc1xuICAvLyBsaWtlIGBjaGlsZF9wcm9jZXNzYCAod2hpY2ggY2FuIGJyZWFrIGluIGhhcmRlbmVkL3NhbmRib3hlZCBlbnZpcm9ubWVudHMpLlxuICBnZXRJc1Jvc2V0dGE6ICgpID0+IGlwY1JlbmRlcmVyLmludm9rZShcIm11eDpnZXQtaXMtcm9zZXR0YVwiKSxcbiAgZ2V0QXBpU2VydmVyVXJsOiAoKSA9PiBpcGNSZW5kZXJlci5pbnZva2UoXCJtdXg6Z2V0LWFwaS1zZXJ2ZXItdXJsXCIpIGFzIFByb21pc2U8c3RyaW5nIHwgbnVsbD4sXG4gIGdldElzV2luZG93c1dzbFNoZWxsOiAoKSA9PiBpcGNSZW5kZXJlci5pbnZva2UoXCJtdXg6Z2V0LWlzLXdpbmRvd3Mtd3NsLXNoZWxsXCIpLFxuICAvLyBSZWdpc3RlciBhIGNhbGxiYWNrIGZvciBub3RpZmljYXRpb24gY2xpY2tzIChuYXZpZ2F0ZXMgdG8gd29ya3NwYWNlKVxuICAvLyBSZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uLlxuICBvbk5vdGlmaWNhdGlvbkNsaWNrZWQ6IChjYWxsYmFjazogKGRhdGE6IHsgd29ya3NwYWNlSWQ6IHN0cmluZyB9KSA9PiB2b2lkKSA9PiB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSAoX2V2ZW50OiB1bmtub3duLCBkYXRhOiB7IHdvcmtzcGFjZUlkOiBzdHJpbmcgfSkgPT4gY2FsbGJhY2soZGF0YSk7XG4gICAgaXBjUmVuZGVyZXIub24oXCJtdXg6bm90aWZpY2F0aW9uLWNsaWNrZWRcIiwgbGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpcGNSZW5kZXJlci5vZmYoXCJtdXg6bm90aWZpY2F0aW9uLWNsaWNrZWRcIiwgbGlzdGVuZXIpO1xuICAgIH07XG4gIH0sXG4gIGNvbnN1bWVQZW5kaW5nRGVlcExpbmtzOiAoKSA9PiBwZW5kaW5nRGVlcExpbmtzLnNwbGljZSgwLCBwZW5kaW5nRGVlcExpbmtzLmxlbmd0aCksXG4gIG9uRGVlcExpbms6IChjYWxsYmFjazogKHBheWxvYWQ6IE11eERlZXBMaW5rUGF5bG9hZCkgPT4gdm9pZCkgPT4ge1xuICAgIGRlZXBMaW5rU3Vic2NyaWJlcnMuYWRkKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZGVlcExpbmtTdWJzY3JpYmVycy5kZWxldGUoY2FsbGJhY2spO1xuICAgIH07XG4gIH0sXG59KTtcbiIKICBdLAogICJtYXBwaW5ncyI6ICI7QUFpQjJDLElBQTNDO0FBS0EsSUFBTSxtQkFBeUMsQ0FBQztBQUNoRCxJQUFNLHNCQUFzQixJQUFJO0FBRWhDLDRCQUFZLEdBQUcsaUJBQWlCLENBQUMsUUFBaUIsWUFBZ0M7QUFBQSxFQUNoRixJQUFJLG9CQUFvQixTQUFTLEdBQUc7QUFBQSxJQUNsQyxpQkFBaUIsS0FBSyxPQUFPO0FBQUEsRUFDL0I7QUFBQSxFQUVBLFdBQVcsY0FBYyxxQkFBcUI7QUFBQSxJQUM1QyxJQUFJO0FBQUEsTUFDRixXQUFXLE9BQU87QUFBQSxNQUNsQixPQUFPLE9BQU87QUFBQSxNQUVkLFFBQVEsTUFBTSwwQ0FBMEMsS0FBSztBQUFBO0FBQUEsRUFFakU7QUFBQSxDQUNEO0FBR0QsT0FBTyxpQkFBaUIsV0FBVyxDQUFDLFVBQVU7QUFBQSxFQUM1QyxJQUFJLE1BQU0sU0FBUyx1QkFBdUIsTUFBTSxRQUFRLElBQUk7QUFBQSxJQUMxRCw0QkFBWSxZQUFZLHFCQUFxQixNQUFNLENBQUMsR0FBRyxNQUFNLEtBQUssQ0FBQztBQUFBLEVBQ3JFO0FBQUEsQ0FDRDtBQUVELDhCQUFjLGtCQUFrQixPQUFPO0FBQUEsRUFDckMsVUFBVSxRQUFRO0FBQUEsRUFDbEIsVUFBVTtBQUFBLElBQ1IsTUFBTSxRQUFRLFNBQVM7QUFBQSxJQUN2QixRQUFRLFFBQVEsU0FBUztBQUFBLElBQ3pCLFVBQVUsUUFBUSxTQUFTO0FBQUEsRUFDN0I7QUFBQSxFQUNBLE9BQU8sUUFBUSxJQUFJLFlBQVk7QUFBQSxFQUMvQixzQkFBc0IsUUFBUSxJQUFJLGdDQUFnQztBQUFBLEVBR2xFLGlCQUFpQixRQUFRLElBQUksMEJBQTBCO0FBQUEsRUFFdkQsa0JBQWtCLFFBQVEsSUFBSTtBQUFBLEVBRzlCLGNBQWMsTUFBTSw0QkFBWSxPQUFPLG9CQUFvQjtBQUFBLEVBQzNELGlCQUFpQixNQUFNLDRCQUFZLE9BQU8sd0JBQXdCO0FBQUEsRUFDbEUsc0JBQXNCLE1BQU0sNEJBQVksT0FBTyw4QkFBOEI7QUFBQSxFQUc3RSx1QkFBdUIsQ0FBQyxhQUFzRDtBQUFBLElBQzVFLE1BQU0sV0FBVyxDQUFDLFFBQWlCLFNBQWtDLFNBQVMsSUFBSTtBQUFBLElBQ2xGLDRCQUFZLEdBQUcsNEJBQTRCLFFBQVE7QUFBQSxJQUNuRCxPQUFPLE1BQU07QUFBQSxNQUNYLDRCQUFZLElBQUksNEJBQTRCLFFBQVE7QUFBQTtBQUFBO0FBQUEsRUFHeEQseUJBQXlCLE1BQU0saUJBQWlCLE9BQU8sR0FBRyxpQkFBaUIsTUFBTTtBQUFBLEVBQ2pGLFlBQVksQ0FBQyxhQUFvRDtBQUFBLElBQy9ELG9CQUFvQixJQUFJLFFBQVE7QUFBQSxJQUNoQyxPQUFPLE1BQU07QUFBQSxNQUNYLG9CQUFvQixPQUFPLFFBQVE7QUFBQTtBQUFBO0FBR3pDLENBQUM7IiwKICAiZGVidWdJZCI6ICJCNDRBM0E3QjAzNjY3OTJGNjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
