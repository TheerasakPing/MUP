// src/desktop/preload.ts
var import_electron = require("electron");
var pendingDeepLinks = [];
var deepLinkSubscribers = new Set;
import_electron.ipcRenderer.on("mux:deep-link", (_event, payload) => {
  if (deepLinkSubscribers.size === 0) {
    pendingDeepLinks.push(payload);
  }
  for (const subscriber of deepLinkSubscribers) {
    try {
      subscriber(payload);
    } catch (error) {
      console.debug("[deep-link] Renderer subscriber threw:", error);
    }
  }
});
window.addEventListener("message", (event) => {
  if (event.data === "start-orpc-client" && event.ports?.[0]) {
    import_electron.ipcRenderer.postMessage("start-orpc-server", null, [...event.ports]);
  }
});
import_electron.contextBridge.exposeInMainWorld("api", {
  platform: process.platform,
  versions: {
    node: process.versions.node,
    chrome: process.versions.chrome,
    electron: process.versions.electron
  },
  isE2E: process.env.MUX_E2E === "1",
  enableTelemetryInDev: process.env.MUX_ENABLE_TELEMETRY_IN_DEV === "1",
  debugLlmRequest: process.env.MUX_DEBUG_LLM_REQUEST === "1",
  muxMdUrlOverride: process.env.MUX_MD_URL_OVERRIDE,
  getIsRosetta: () => import_electron.ipcRenderer.invoke("mux:get-is-rosetta"),
  getApiServerUrl: () => import_electron.ipcRenderer.invoke("mux:get-api-server-url"),
  getIsWindowsWslShell: () => import_electron.ipcRenderer.invoke("mux:get-is-windows-wsl-shell"),
  onNotificationClicked: (callback) => {
    const listener = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("mux:notification-clicked", listener);
    return () => {
      import_electron.ipcRenderer.off("mux:notification-clicked", listener);
    };
  },
  consumePendingDeepLinks: () => pendingDeepLinks.splice(0, pendingDeepLinks.length),
  onDeepLink: (callback) => {
    deepLinkSubscribers.add(callback);
    return () => {
      deepLinkSubscribers.delete(callback);
    };
  }
});

//# debugId=B44A3A7B0366792F64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjXFxkZXNrdG9wXFxwcmVsb2FkLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgIi8qKlxuICogRWxlY3Ryb24gUHJlbG9hZCBTY3JpcHRcbiAqXG4gKiBUaGlzIHNjcmlwdCBicmlkZ2VzIHRoZSByZW5kZXJlciBwcm9jZXNzIHdpdGggdGhlIG1haW4gcHJvY2VzcyB2aWEgT1JQQyBvdmVyIE1lc3NhZ2VQb3J0LlxuICpcbiAqIEtleSByZXNwb25zaWJpbGl0aWVzOlxuICogMSkgRm9yd2FyZCBNZXNzYWdlUG9ydCBmcm9tIHJlbmRlcmVyIHRvIG1haW4gcHJvY2VzcyBmb3IgT1JQQyB0cmFuc3BvcnQgc2V0dXBcbiAqIDIpIEV4cG9zZSBtaW5pbWFsIHBsYXRmb3JtIGluZm8gdG8gcmVuZGVyZXIgdmlhIGNvbnRleHRCcmlkZ2VcbiAqXG4gKiBUaGUgT1JQQyBjb25uZWN0aW9uIGZsb3c6XG4gKiAtIFJlbmRlcmVyIGNyZWF0ZXMgTWVzc2FnZUNoYW5uZWwsIHBvc3RzIFwic3RhcnQtb3JwYy1jbGllbnRcIiB3aXRoIHNlcnZlclBvcnRcbiAqIC0gUHJlbG9hZCBpbnRlcmNlcHRzLCBmb3J3YXJkcyBzZXJ2ZXJQb3J0IHRvIG1haW4gdmlhIGlwY1JlbmRlcmVyLnBvc3RNZXNzYWdlXG4gKiAtIE1haW4gcHJvY2VzcyB1cGdyYWRlcyB0aGUgcG9ydCB3aXRoIFJQQ0hhbmRsZXIgZm9yIGJpZGlyZWN0aW9uYWwgUlBDXG4gKlxuICogQnVpbGQ6IGBidW4gYnVpbGQgc3JjL2Rlc2t0b3AvcHJlbG9hZC50cyAtLWZvcm1hdD1janMgLS10YXJnZXQ9bm9kZSAtLWV4dGVybmFsPWVsZWN0cm9uYFxuICovXG5cbmltcG9ydCB7IGNvbnRleHRCcmlkZ2UsIGlwY1JlbmRlcmVyIH0gZnJvbSBcImVsZWN0cm9uXCI7XG5pbXBvcnQgdHlwZSB7IE11eERlZXBMaW5rUGF5bG9hZCB9IGZyb20gXCJAL2NvbW1vbi90eXBlcy9kZWVwTGlua1wiO1xuXG4vLyBtdXg6Ly8gZGVlcCBsaW5rcyBjYW4gYXJyaXZlIGJlZm9yZSB0aGUgUmVhY3QgYXBwIHN1YnNjcmliZXMuXG4vLyBCdWZmZXIgdGhlbSBoZXJlIHNvIHRoZSByZW5kZXJlciBjYW4gY29uc3VtZSB0aGVtIG9uIG1vdW50LlxuY29uc3QgcGVuZGluZ0RlZXBMaW5rczogTXV4RGVlcExpbmtQYXlsb2FkW10gPSBbXTtcbmNvbnN0IGRlZXBMaW5rU3Vic2NyaWJlcnMgPSBuZXcgU2V0PChwYXlsb2FkOiBNdXhEZWVwTGlua1BheWxvYWQpID0+IHZvaWQ+KCk7XG5cbmlwY1JlbmRlcmVyLm9uKFwibXV4OmRlZXAtbGlua1wiLCAoX2V2ZW50OiB1bmtub3duLCBwYXlsb2FkOiBNdXhEZWVwTGlua1BheWxvYWQpID0+IHtcbiAgaWYgKGRlZXBMaW5rU3Vic2NyaWJlcnMuc2l6ZSA9PT0gMCkge1xuICAgIHBlbmRpbmdEZWVwTGlua3MucHVzaChwYXlsb2FkKTtcbiAgfVxuXG4gIGZvciAoY29uc3Qgc3Vic2NyaWJlciBvZiBkZWVwTGlua1N1YnNjcmliZXJzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHN1YnNjcmliZXIocGF5bG9hZCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIEJlc3QtZWZmb3J0OiBhIHJlbmRlcmVyIGJ1ZyBzaG91bGRuJ3QgYnJlYWsgZGVlcCBsaW5rIGRlbGl2ZXJ5LlxuICAgICAgY29uc29sZS5kZWJ1ZyhcIltkZWVwLWxpbmtdIFJlbmRlcmVyIHN1YnNjcmliZXIgdGhyZXc6XCIsIGVycm9yKTtcbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBGb3J3YXJkIE9SUEMgTWVzc2FnZVBvcnQgZnJvbSByZW5kZXJlciB0byBtYWluIHByb2Nlc3NcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LmRhdGEgPT09IFwic3RhcnQtb3JwYy1jbGllbnRcIiAmJiBldmVudC5wb3J0cz8uWzBdKSB7XG4gICAgaXBjUmVuZGVyZXIucG9zdE1lc3NhZ2UoXCJzdGFydC1vcnBjLXNlcnZlclwiLCBudWxsLCBbLi4uZXZlbnQucG9ydHNdKTtcbiAgfVxufSk7XG5cbmNvbnRleHRCcmlkZ2UuZXhwb3NlSW5NYWluV29ybGQoXCJhcGlcIiwge1xuICBwbGF0Zm9ybTogcHJvY2Vzcy5wbGF0Zm9ybSxcbiAgdmVyc2lvbnM6IHtcbiAgICBub2RlOiBwcm9jZXNzLnZlcnNpb25zLm5vZGUsXG4gICAgY2hyb21lOiBwcm9jZXNzLnZlcnNpb25zLmNocm9tZSxcbiAgICBlbGVjdHJvbjogcHJvY2Vzcy52ZXJzaW9ucy5lbGVjdHJvbixcbiAgfSxcbiAgaXNFMkU6IHByb2Nlc3MuZW52Lk1VWF9FMkUgPT09IFwiMVwiLFxuICBlbmFibGVUZWxlbWV0cnlJbkRldjogcHJvY2Vzcy5lbnYuTVVYX0VOQUJMRV9URUxFTUVUUllfSU5fREVWID09PSBcIjFcIixcbiAgLy8gTm90ZTogV2hlbiBkZWJ1Z2dpbmcgTExNIHJlcXVlc3RzLCB3ZSBhbHNvIHdhbnQgdG8gc2VlIHN5bnRoZXRpYy9yZXF1ZXN0LW9ubHlcbiAgLy8gbWVzc2FnZXMgaW4gdGhlIGNoYXQgaGlzdG9yeSBzbyB0aGUgVUkgbWF0Y2hlcyB3aGF0IHdhcyBzZW50IHRvIHRoZSBwcm92aWRlci5cbiAgZGVidWdMbG1SZXF1ZXN0OiBwcm9jZXNzLmVudi5NVVhfREVCVUdfTExNX1JFUVVFU1QgPT09IFwiMVwiLFxuICAvLyBBbGxvdyB0ZXN0aW5nIGFnYWluc3QgYSBtdXgubWQgc3RhZ2luZy9sb2NhbCBkZXBsb3ltZW50IHdpdGhvdXQgcmVidWlsZGluZyB0aGUgcmVuZGVyZXIuXG4gIG11eE1kVXJsT3ZlcnJpZGU6IHByb2Nlc3MuZW52Lk1VWF9NRF9VUkxfT1ZFUlJJREUsXG4gIC8vIE5PVEU6IFRoaXMgaXMgaW50ZW50aW9uYWxseSBhc3luYyBzbyB0aGUgcHJlbG9hZCBzY3JpcHQgZG9lcyBub3QgcmVseSBvbiBOb2RlIGJ1aWx0aW5zXG4gIC8vIGxpa2UgYGNoaWxkX3Byb2Nlc3NgICh3aGljaCBjYW4gYnJlYWsgaW4gaGFyZGVuZWQvc2FuZGJveGVkIGVudmlyb25tZW50cykuXG4gIGdldElzUm9zZXR0YTogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKFwibXV4OmdldC1pcy1yb3NldHRhXCIpLFxuICBnZXRBcGlTZXJ2ZXJVcmw6ICgpID0+IGlwY1JlbmRlcmVyLmludm9rZShcIm11eDpnZXQtYXBpLXNlcnZlci11cmxcIikgYXMgUHJvbWlzZTxzdHJpbmcgfCBudWxsPixcbiAgZ2V0SXNXaW5kb3dzV3NsU2hlbGw6ICgpID0+IGlwY1JlbmRlcmVyLmludm9rZShcIm11eDpnZXQtaXMtd2luZG93cy13c2wtc2hlbGxcIiksXG4gIC8vIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZm9yIG5vdGlmaWNhdGlvbiBjbGlja3MgKG5hdmlnYXRlcyB0byB3b3Jrc3BhY2UpXG4gIC8vIFJldHVybnMgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24uXG4gIG9uTm90aWZpY2F0aW9uQ2xpY2tlZDogKGNhbGxiYWNrOiAoZGF0YTogeyB3b3Jrc3BhY2VJZDogc3RyaW5nIH0pID0+IHZvaWQpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IChfZXZlbnQ6IHVua25vd24sIGRhdGE6IHsgd29ya3NwYWNlSWQ6IHN0cmluZyB9KSA9PiBjYWxsYmFjayhkYXRhKTtcbiAgICBpcGNSZW5kZXJlci5vbihcIm11eDpub3RpZmljYXRpb24tY2xpY2tlZFwiLCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlwY1JlbmRlcmVyLm9mZihcIm11eDpub3RpZmljYXRpb24tY2xpY2tlZFwiLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgfSxcbiAgY29uc3VtZVBlbmRpbmdEZWVwTGlua3M6ICgpID0+IHBlbmRpbmdEZWVwTGlua3Muc3BsaWNlKDAsIHBlbmRpbmdEZWVwTGlua3MubGVuZ3RoKSxcbiAgb25EZWVwTGluazogKGNhbGxiYWNrOiAocGF5bG9hZDogTXV4RGVlcExpbmtQYXlsb2FkKSA9PiB2b2lkKSA9PiB7XG4gICAgZGVlcExpbmtTdWJzY3JpYmVycy5hZGQoY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkZWVwTGlua1N1YnNjcmliZXJzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfSxcbn0pO1xuIgogIF0sCiAgIm1hcHBpbmdzIjogIjtBQWlCMkMsSUFBM0M7QUFLQSxJQUFNLG1CQUF5QyxDQUFDO0FBQ2hELElBQU0sc0JBQXNCLElBQUk7QUFFaEMsNEJBQVksR0FBRyxpQkFBaUIsQ0FBQyxRQUFpQixZQUFnQztBQUFBLEVBQ2hGLElBQUksb0JBQW9CLFNBQVMsR0FBRztBQUFBLElBQ2xDLGlCQUFpQixLQUFLLE9BQU87QUFBQSxFQUMvQjtBQUFBLEVBRUEsV0FBVyxjQUFjLHFCQUFxQjtBQUFBLElBQzVDLElBQUk7QUFBQSxNQUNGLFdBQVcsT0FBTztBQUFBLE1BQ2xCLE9BQU8sT0FBTztBQUFBLE1BRWQsUUFBUSxNQUFNLDBDQUEwQyxLQUFLO0FBQUE7QUFBQSxFQUVqRTtBQUFBLENBQ0Q7QUFHRCxPQUFPLGlCQUFpQixXQUFXLENBQUMsVUFBVTtBQUFBLEVBQzVDLElBQUksTUFBTSxTQUFTLHVCQUF1QixNQUFNLFFBQVEsSUFBSTtBQUFBLElBQzFELDRCQUFZLFlBQVkscUJBQXFCLE1BQU0sQ0FBQyxHQUFHLE1BQU0sS0FBSyxDQUFDO0FBQUEsRUFDckU7QUFBQSxDQUNEO0FBRUQsOEJBQWMsa0JBQWtCLE9BQU87QUFBQSxFQUNyQyxVQUFVLFFBQVE7QUFBQSxFQUNsQixVQUFVO0FBQUEsSUFDUixNQUFNLFFBQVEsU0FBUztBQUFBLElBQ3ZCLFFBQVEsUUFBUSxTQUFTO0FBQUEsSUFDekIsVUFBVSxRQUFRLFNBQVM7QUFBQSxFQUM3QjtBQUFBLEVBQ0EsT0FBTyxRQUFRLElBQUksWUFBWTtBQUFBLEVBQy9CLHNCQUFzQixRQUFRLElBQUksZ0NBQWdDO0FBQUEsRUFHbEUsaUJBQWlCLFFBQVEsSUFBSSwwQkFBMEI7QUFBQSxFQUV2RCxrQkFBa0IsUUFBUSxJQUFJO0FBQUEsRUFHOUIsY0FBYyxNQUFNLDRCQUFZLE9BQU8sb0JBQW9CO0FBQUEsRUFDM0QsaUJBQWlCLE1BQU0sNEJBQVksT0FBTyx3QkFBd0I7QUFBQSxFQUNsRSxzQkFBc0IsTUFBTSw0QkFBWSxPQUFPLDhCQUE4QjtBQUFBLEVBRzdFLHVCQUF1QixDQUFDLGFBQXNEO0FBQUEsSUFDNUUsTUFBTSxXQUFXLENBQUMsUUFBaUIsU0FBa0MsU0FBUyxJQUFJO0FBQUEsSUFDbEYsNEJBQVksR0FBRyw0QkFBNEIsUUFBUTtBQUFBLElBQ25ELE9BQU8sTUFBTTtBQUFBLE1BQ1gsNEJBQVksSUFBSSw0QkFBNEIsUUFBUTtBQUFBO0FBQUE7QUFBQSxFQUd4RCx5QkFBeUIsTUFBTSxpQkFBaUIsT0FBTyxHQUFHLGlCQUFpQixNQUFNO0FBQUEsRUFDakYsWUFBWSxDQUFDLGFBQW9EO0FBQUEsSUFDL0Qsb0JBQW9CLElBQUksUUFBUTtBQUFBLElBQ2hDLE9BQU8sTUFBTTtBQUFBLE1BQ1gsb0JBQW9CLE9BQU8sUUFBUTtBQUFBO0FBQUE7QUFHekMsQ0FBQzsiLAogICJkZWJ1Z0lkIjogIkI0NEEzQTdCMDM2Njc5MkY2NDc1NkUyMTY0NzU2RTIxIiwKICAibmFtZXMiOiBbXQp9
