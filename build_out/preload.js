// src/desktop/preload.ts
var import_electron = require("electron");
var pendingDeepLinks = [];
var deepLinkSubscribers = new Set;
import_electron.ipcRenderer.on("mux:deep-link", (_event, payload) => {
  if (deepLinkSubscribers.size === 0) {
    pendingDeepLinks.push(payload);
  }
  for (const subscriber of deepLinkSubscribers) {
    try {
      subscriber(payload);
    } catch (error) {
      console.debug("[deep-link] Renderer subscriber threw:", error);
    }
  }
});
window.addEventListener("message", (event) => {
  if (event.data === "start-orpc-client" && event.ports?.[0]) {
    import_electron.ipcRenderer.postMessage("start-orpc-server", null, [...event.ports]);
  }
});
import_electron.contextBridge.exposeInMainWorld("api", {
  platform: process.platform,
  versions: {
    node: process.versions.node,
    chrome: process.versions.chrome,
    electron: process.versions.electron
  },
  isE2E: process.env.MUX_E2E === "1",
  enableTelemetryInDev: process.env.MUX_ENABLE_TELEMETRY_IN_DEV === "1",
  debugLlmRequest: process.env.MUX_DEBUG_LLM_REQUEST === "1",
  muxMdUrlOverride: process.env.MUX_MD_URL_OVERRIDE,
  getIsRosetta: () => import_electron.ipcRenderer.invoke("mux:get-is-rosetta"),
  getApiServerUrl: () => import_electron.ipcRenderer.invoke("mux:get-api-server-url"),
  getIsWindowsWslShell: () => import_electron.ipcRenderer.invoke("mux:get-is-windows-wsl-shell"),
  onNotificationClicked: (callback) => {
    const listener = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("mux:notification-clicked", listener);
    return () => {
      import_electron.ipcRenderer.off("mux:notification-clicked", listener);
    };
  },
  consumePendingDeepLinks: () => pendingDeepLinks.splice(0, pendingDeepLinks.length),
  onDeepLink: (callback) => {
    deepLinkSubscribers.add(callback);
    return () => {
      deepLinkSubscribers.delete(callback);
    };
  }
});

//# debugId=B44A3A7B0366792F64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjXFxkZXNrdG9wXFxwcmVsb2FkLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWwogICAgIi8qKlxyXG4gKiBFbGVjdHJvbiBQcmVsb2FkIFNjcmlwdFxyXG4gKlxyXG4gKiBUaGlzIHNjcmlwdCBicmlkZ2VzIHRoZSByZW5kZXJlciBwcm9jZXNzIHdpdGggdGhlIG1haW4gcHJvY2VzcyB2aWEgT1JQQyBvdmVyIE1lc3NhZ2VQb3J0LlxyXG4gKlxyXG4gKiBLZXkgcmVzcG9uc2liaWxpdGllczpcclxuICogMSkgRm9yd2FyZCBNZXNzYWdlUG9ydCBmcm9tIHJlbmRlcmVyIHRvIG1haW4gcHJvY2VzcyBmb3IgT1JQQyB0cmFuc3BvcnQgc2V0dXBcclxuICogMikgRXhwb3NlIG1pbmltYWwgcGxhdGZvcm0gaW5mbyB0byByZW5kZXJlciB2aWEgY29udGV4dEJyaWRnZVxyXG4gKlxyXG4gKiBUaGUgT1JQQyBjb25uZWN0aW9uIGZsb3c6XHJcbiAqIC0gUmVuZGVyZXIgY3JlYXRlcyBNZXNzYWdlQ2hhbm5lbCwgcG9zdHMgXCJzdGFydC1vcnBjLWNsaWVudFwiIHdpdGggc2VydmVyUG9ydFxyXG4gKiAtIFByZWxvYWQgaW50ZXJjZXB0cywgZm9yd2FyZHMgc2VydmVyUG9ydCB0byBtYWluIHZpYSBpcGNSZW5kZXJlci5wb3N0TWVzc2FnZVxyXG4gKiAtIE1haW4gcHJvY2VzcyB1cGdyYWRlcyB0aGUgcG9ydCB3aXRoIFJQQ0hhbmRsZXIgZm9yIGJpZGlyZWN0aW9uYWwgUlBDXHJcbiAqXHJcbiAqIEJ1aWxkOiBgYnVuIGJ1aWxkIHNyYy9kZXNrdG9wL3ByZWxvYWQudHMgLS1mb3JtYXQ9Y2pzIC0tdGFyZ2V0PW5vZGUgLS1leHRlcm5hbD1lbGVjdHJvbmBcclxuICovXHJcblxyXG5pbXBvcnQgeyBjb250ZXh0QnJpZGdlLCBpcGNSZW5kZXJlciB9IGZyb20gXCJlbGVjdHJvblwiO1xyXG5pbXBvcnQgdHlwZSB7IE11eERlZXBMaW5rUGF5bG9hZCB9IGZyb20gXCJAL2NvbW1vbi90eXBlcy9kZWVwTGlua1wiO1xyXG5cclxuLy8gbXV4Oi8vIGRlZXAgbGlua3MgY2FuIGFycml2ZSBiZWZvcmUgdGhlIFJlYWN0IGFwcCBzdWJzY3JpYmVzLlxyXG4vLyBCdWZmZXIgdGhlbSBoZXJlIHNvIHRoZSByZW5kZXJlciBjYW4gY29uc3VtZSB0aGVtIG9uIG1vdW50LlxyXG5jb25zdCBwZW5kaW5nRGVlcExpbmtzOiBNdXhEZWVwTGlua1BheWxvYWRbXSA9IFtdO1xyXG5jb25zdCBkZWVwTGlua1N1YnNjcmliZXJzID0gbmV3IFNldDwocGF5bG9hZDogTXV4RGVlcExpbmtQYXlsb2FkKSA9PiB2b2lkPigpO1xyXG5cclxuaXBjUmVuZGVyZXIub24oXCJtdXg6ZGVlcC1saW5rXCIsIChfZXZlbnQ6IHVua25vd24sIHBheWxvYWQ6IE11eERlZXBMaW5rUGF5bG9hZCkgPT4ge1xyXG4gIGlmIChkZWVwTGlua1N1YnNjcmliZXJzLnNpemUgPT09IDApIHtcclxuICAgIHBlbmRpbmdEZWVwTGlua3MucHVzaChwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gIGZvciAoY29uc3Qgc3Vic2NyaWJlciBvZiBkZWVwTGlua1N1YnNjcmliZXJzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzdWJzY3JpYmVyKHBheWxvYWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgLy8gQmVzdC1lZmZvcnQ6IGEgcmVuZGVyZXIgYnVnIHNob3VsZG4ndCBicmVhayBkZWVwIGxpbmsgZGVsaXZlcnkuXHJcbiAgICAgIGNvbnNvbGUuZGVidWcoXCJbZGVlcC1saW5rXSBSZW5kZXJlciBzdWJzY3JpYmVyIHRocmV3OlwiLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIEZvcndhcmQgT1JQQyBNZXNzYWdlUG9ydCBmcm9tIHJlbmRlcmVyIHRvIG1haW4gcHJvY2Vzc1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XHJcbiAgaWYgKGV2ZW50LmRhdGEgPT09IFwic3RhcnQtb3JwYy1jbGllbnRcIiAmJiBldmVudC5wb3J0cz8uWzBdKSB7XHJcbiAgICBpcGNSZW5kZXJlci5wb3N0TWVzc2FnZShcInN0YXJ0LW9ycGMtc2VydmVyXCIsIG51bGwsIFsuLi5ldmVudC5wb3J0c10pO1xyXG4gIH1cclxufSk7XHJcblxyXG5jb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKFwiYXBpXCIsIHtcclxuICBwbGF0Zm9ybTogcHJvY2Vzcy5wbGF0Zm9ybSxcclxuICB2ZXJzaW9uczoge1xyXG4gICAgbm9kZTogcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLFxyXG4gICAgY2hyb21lOiBwcm9jZXNzLnZlcnNpb25zLmNocm9tZSxcclxuICAgIGVsZWN0cm9uOiBwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uLFxyXG4gIH0sXHJcbiAgaXNFMkU6IHByb2Nlc3MuZW52Lk1VWF9FMkUgPT09IFwiMVwiLFxyXG4gIGVuYWJsZVRlbGVtZXRyeUluRGV2OiBwcm9jZXNzLmVudi5NVVhfRU5BQkxFX1RFTEVNRVRSWV9JTl9ERVYgPT09IFwiMVwiLFxyXG4gIC8vIE5vdGU6IFdoZW4gZGVidWdnaW5nIExMTSByZXF1ZXN0cywgd2UgYWxzbyB3YW50IHRvIHNlZSBzeW50aGV0aWMvcmVxdWVzdC1vbmx5XHJcbiAgLy8gbWVzc2FnZXMgaW4gdGhlIGNoYXQgaGlzdG9yeSBzbyB0aGUgVUkgbWF0Y2hlcyB3aGF0IHdhcyBzZW50IHRvIHRoZSBwcm92aWRlci5cclxuICBkZWJ1Z0xsbVJlcXVlc3Q6IHByb2Nlc3MuZW52Lk1VWF9ERUJVR19MTE1fUkVRVUVTVCA9PT0gXCIxXCIsXHJcbiAgLy8gQWxsb3cgdGVzdGluZyBhZ2FpbnN0IGEgbXV4Lm1kIHN0YWdpbmcvbG9jYWwgZGVwbG95bWVudCB3aXRob3V0IHJlYnVpbGRpbmcgdGhlIHJlbmRlcmVyLlxyXG4gIG11eE1kVXJsT3ZlcnJpZGU6IHByb2Nlc3MuZW52Lk1VWF9NRF9VUkxfT1ZFUlJJREUsXHJcbiAgLy8gTk9URTogVGhpcyBpcyBpbnRlbnRpb25hbGx5IGFzeW5jIHNvIHRoZSBwcmVsb2FkIHNjcmlwdCBkb2VzIG5vdCByZWx5IG9uIE5vZGUgYnVpbHRpbnNcclxuICAvLyBsaWtlIGBjaGlsZF9wcm9jZXNzYCAod2hpY2ggY2FuIGJyZWFrIGluIGhhcmRlbmVkL3NhbmRib3hlZCBlbnZpcm9ubWVudHMpLlxyXG4gIGdldElzUm9zZXR0YTogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKFwibXV4OmdldC1pcy1yb3NldHRhXCIpLFxyXG4gIGdldEFwaVNlcnZlclVybDogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKFwibXV4OmdldC1hcGktc2VydmVyLXVybFwiKSBhcyBQcm9taXNlPHN0cmluZyB8IG51bGw+LFxyXG4gIGdldElzV2luZG93c1dzbFNoZWxsOiAoKSA9PiBpcGNSZW5kZXJlci5pbnZva2UoXCJtdXg6Z2V0LWlzLXdpbmRvd3Mtd3NsLXNoZWxsXCIpLFxyXG4gIC8vIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZm9yIG5vdGlmaWNhdGlvbiBjbGlja3MgKG5hdmlnYXRlcyB0byB3b3Jrc3BhY2UpXHJcbiAgLy8gUmV0dXJucyBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbi5cclxuICBvbk5vdGlmaWNhdGlvbkNsaWNrZWQ6IChjYWxsYmFjazogKGRhdGE6IHsgd29ya3NwYWNlSWQ6IHN0cmluZyB9KSA9PiB2b2lkKSA9PiB7XHJcbiAgICBjb25zdCBsaXN0ZW5lciA9IChfZXZlbnQ6IHVua25vd24sIGRhdGE6IHsgd29ya3NwYWNlSWQ6IHN0cmluZyB9KSA9PiBjYWxsYmFjayhkYXRhKTtcclxuICAgIGlwY1JlbmRlcmVyLm9uKFwibXV4Om5vdGlmaWNhdGlvbi1jbGlja2VkXCIsIGxpc3RlbmVyKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGlwY1JlbmRlcmVyLm9mZihcIm11eDpub3RpZmljYXRpb24tY2xpY2tlZFwiLCBsaXN0ZW5lcik7XHJcbiAgICB9O1xyXG4gIH0sXHJcbiAgY29uc3VtZVBlbmRpbmdEZWVwTGlua3M6ICgpID0+IHBlbmRpbmdEZWVwTGlua3Muc3BsaWNlKDAsIHBlbmRpbmdEZWVwTGlua3MubGVuZ3RoKSxcclxuICBvbkRlZXBMaW5rOiAoY2FsbGJhY2s6IChwYXlsb2FkOiBNdXhEZWVwTGlua1BheWxvYWQpID0+IHZvaWQpID0+IHtcclxuICAgIGRlZXBMaW5rU3Vic2NyaWJlcnMuYWRkKGNhbGxiYWNrKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGRlZXBMaW5rU3Vic2NyaWJlcnMuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgfSxcclxufSk7XHJcbiIKICBdLAogICJtYXBwaW5ncyI6ICI7QUFpQjJDLElBQTNDO0FBS0EsSUFBTSxtQkFBeUMsQ0FBQztBQUNoRCxJQUFNLHNCQUFzQixJQUFJO0FBRWhDLDRCQUFZLEdBQUcsaUJBQWlCLENBQUMsUUFBaUIsWUFBZ0M7QUFBQSxFQUNoRixJQUFJLG9CQUFvQixTQUFTLEdBQUc7QUFBQSxJQUNsQyxpQkFBaUIsS0FBSyxPQUFPO0FBQUEsRUFDL0I7QUFBQSxFQUVBLFdBQVcsY0FBYyxxQkFBcUI7QUFBQSxJQUM1QyxJQUFJO0FBQUEsTUFDRixXQUFXLE9BQU87QUFBQSxNQUNsQixPQUFPLE9BQU87QUFBQSxNQUVkLFFBQVEsTUFBTSwwQ0FBMEMsS0FBSztBQUFBO0FBQUEsRUFFakU7QUFBQSxDQUNEO0FBR0QsT0FBTyxpQkFBaUIsV0FBVyxDQUFDLFVBQVU7QUFBQSxFQUM1QyxJQUFJLE1BQU0sU0FBUyx1QkFBdUIsTUFBTSxRQUFRLElBQUk7QUFBQSxJQUMxRCw0QkFBWSxZQUFZLHFCQUFxQixNQUFNLENBQUMsR0FBRyxNQUFNLEtBQUssQ0FBQztBQUFBLEVBQ3JFO0FBQUEsQ0FDRDtBQUVELDhCQUFjLGtCQUFrQixPQUFPO0FBQUEsRUFDckMsVUFBVSxRQUFRO0FBQUEsRUFDbEIsVUFBVTtBQUFBLElBQ1IsTUFBTSxRQUFRLFNBQVM7QUFBQSxJQUN2QixRQUFRLFFBQVEsU0FBUztBQUFBLElBQ3pCLFVBQVUsUUFBUSxTQUFTO0FBQUEsRUFDN0I7QUFBQSxFQUNBLE9BQU8sUUFBUSxJQUFJLFlBQVk7QUFBQSxFQUMvQixzQkFBc0IsUUFBUSxJQUFJLGdDQUFnQztBQUFBLEVBR2xFLGlCQUFpQixRQUFRLElBQUksMEJBQTBCO0FBQUEsRUFFdkQsa0JBQWtCLFFBQVEsSUFBSTtBQUFBLEVBRzlCLGNBQWMsTUFBTSw0QkFBWSxPQUFPLG9CQUFvQjtBQUFBLEVBQzNELGlCQUFpQixNQUFNLDRCQUFZLE9BQU8sd0JBQXdCO0FBQUEsRUFDbEUsc0JBQXNCLE1BQU0sNEJBQVksT0FBTyw4QkFBOEI7QUFBQSxFQUc3RSx1QkFBdUIsQ0FBQyxhQUFzRDtBQUFBLElBQzVFLE1BQU0sV0FBVyxDQUFDLFFBQWlCLFNBQWtDLFNBQVMsSUFBSTtBQUFBLElBQ2xGLDRCQUFZLEdBQUcsNEJBQTRCLFFBQVE7QUFBQSxJQUNuRCxPQUFPLE1BQU07QUFBQSxNQUNYLDRCQUFZLElBQUksNEJBQTRCLFFBQVE7QUFBQTtBQUFBO0FBQUEsRUFHeEQseUJBQXlCLE1BQU0saUJBQWlCLE9BQU8sR0FBRyxpQkFBaUIsTUFBTTtBQUFBLEVBQ2pGLFlBQVksQ0FBQyxhQUFvRDtBQUFBLElBQy9ELG9CQUFvQixJQUFJLFFBQVE7QUFBQSxJQUNoQyxPQUFPLE1BQU07QUFBQSxNQUNYLG9CQUFvQixPQUFPLFFBQVE7QUFBQTtBQUFBO0FBR3pDLENBQUM7IiwKICAiZGVidWdJZCI6ICJCNDRBM0E3QjAzNjY3OTJGNjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
