// src/desktop/preload.ts
var import_electron = require("electron");
var pendingDeepLinks = [];
var deepLinkSubscribers = new Set;
import_electron.ipcRenderer.on("mux:deep-link", (_event, payload) => {
  if (deepLinkSubscribers.size === 0) {
    pendingDeepLinks.push(payload);
  }
  for (const subscriber of deepLinkSubscribers) {
    try {
      subscriber(payload);
    } catch (error) {
      console.debug("[deep-link] Renderer subscriber threw:", error);
    }
  }
});
window.addEventListener("message", (event) => {
  if (event.data === "start-orpc-client" && event.ports?.[0]) {
    import_electron.ipcRenderer.postMessage("start-orpc-server", null, [...event.ports]);
  }
});
import_electron.contextBridge.exposeInMainWorld("api", {
  platform: process.platform,
  versions: {
    node: process.versions.node,
    chrome: process.versions.chrome,
    electron: process.versions.electron
  },
  isE2E: process.env.MUX_E2E === "1",
  enableTelemetryInDev: process.env.MUX_ENABLE_TELEMETRY_IN_DEV === "1",
  debugLlmRequest: process.env.MUX_DEBUG_LLM_REQUEST === "1",
  muxMdUrlOverride: process.env.MUX_MD_URL_OVERRIDE,
  getIsRosetta: () => import_electron.ipcRenderer.invoke("mux:get-is-rosetta"),
  getIsWindowsWslShell: () => import_electron.ipcRenderer.invoke("mux:get-is-windows-wsl-shell"),
  onNotificationClicked: (callback) => {
    const listener = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("mux:notification-clicked", listener);
    return () => {
      import_electron.ipcRenderer.off("mux:notification-clicked", listener);
    };
  },
  consumePendingDeepLinks: () => pendingDeepLinks.splice(0, pendingDeepLinks.length),
  onDeepLink: (callback) => {
    deepLinkSubscribers.add(callback);
    return () => {
      deepLinkSubscribers.delete(callback);
    };
  }
});

//# debugId=58BF910C17C884D964756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL2Rlc2t0b3AvcHJlbG9hZC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsKICAgICIvKipcbiAqIEVsZWN0cm9uIFByZWxvYWQgU2NyaXB0XG4gKlxuICogVGhpcyBzY3JpcHQgYnJpZGdlcyB0aGUgcmVuZGVyZXIgcHJvY2VzcyB3aXRoIHRoZSBtYWluIHByb2Nlc3MgdmlhIE9SUEMgb3ZlciBNZXNzYWdlUG9ydC5cbiAqXG4gKiBLZXkgcmVzcG9uc2liaWxpdGllczpcbiAqIDEpIEZvcndhcmQgTWVzc2FnZVBvcnQgZnJvbSByZW5kZXJlciB0byBtYWluIHByb2Nlc3MgZm9yIE9SUEMgdHJhbnNwb3J0IHNldHVwXG4gKiAyKSBFeHBvc2UgbWluaW1hbCBwbGF0Zm9ybSBpbmZvIHRvIHJlbmRlcmVyIHZpYSBjb250ZXh0QnJpZGdlXG4gKlxuICogVGhlIE9SUEMgY29ubmVjdGlvbiBmbG93OlxuICogLSBSZW5kZXJlciBjcmVhdGVzIE1lc3NhZ2VDaGFubmVsLCBwb3N0cyBcInN0YXJ0LW9ycGMtY2xpZW50XCIgd2l0aCBzZXJ2ZXJQb3J0XG4gKiAtIFByZWxvYWQgaW50ZXJjZXB0cywgZm9yd2FyZHMgc2VydmVyUG9ydCB0byBtYWluIHZpYSBpcGNSZW5kZXJlci5wb3N0TWVzc2FnZVxuICogLSBNYWluIHByb2Nlc3MgdXBncmFkZXMgdGhlIHBvcnQgd2l0aCBSUENIYW5kbGVyIGZvciBiaWRpcmVjdGlvbmFsIFJQQ1xuICpcbiAqIEJ1aWxkOiBgYnVuIGJ1aWxkIHNyYy9kZXNrdG9wL3ByZWxvYWQudHMgLS1mb3JtYXQ9Y2pzIC0tdGFyZ2V0PW5vZGUgLS1leHRlcm5hbD1lbGVjdHJvbmBcbiAqL1xuXG5pbXBvcnQgeyBjb250ZXh0QnJpZGdlLCBpcGNSZW5kZXJlciB9IGZyb20gXCJlbGVjdHJvblwiO1xuaW1wb3J0IHR5cGUgeyBNdXhEZWVwTGlua1BheWxvYWQgfSBmcm9tIFwiQC9jb21tb24vdHlwZXMvZGVlcExpbmtcIjtcblxuLy8gbXV4Oi8vIGRlZXAgbGlua3MgY2FuIGFycml2ZSBiZWZvcmUgdGhlIFJlYWN0IGFwcCBzdWJzY3JpYmVzLlxuLy8gQnVmZmVyIHRoZW0gaGVyZSBzbyB0aGUgcmVuZGVyZXIgY2FuIGNvbnN1bWUgdGhlbSBvbiBtb3VudC5cbmNvbnN0IHBlbmRpbmdEZWVwTGlua3M6IE11eERlZXBMaW5rUGF5bG9hZFtdID0gW107XG5jb25zdCBkZWVwTGlua1N1YnNjcmliZXJzID0gbmV3IFNldDwocGF5bG9hZDogTXV4RGVlcExpbmtQYXlsb2FkKSA9PiB2b2lkPigpO1xuXG5pcGNSZW5kZXJlci5vbihcIm11eDpkZWVwLWxpbmtcIiwgKF9ldmVudDogdW5rbm93biwgcGF5bG9hZDogTXV4RGVlcExpbmtQYXlsb2FkKSA9PiB7XG4gIGlmIChkZWVwTGlua1N1YnNjcmliZXJzLnNpemUgPT09IDApIHtcbiAgICBwZW5kaW5nRGVlcExpbmtzLnB1c2gocGF5bG9hZCk7XG4gIH1cblxuICBmb3IgKGNvbnN0IHN1YnNjcmliZXIgb2YgZGVlcExpbmtTdWJzY3JpYmVycykge1xuICAgIHRyeSB7XG4gICAgICBzdWJzY3JpYmVyKHBheWxvYWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBCZXN0LWVmZm9ydDogYSByZW5kZXJlciBidWcgc2hvdWxkbid0IGJyZWFrIGRlZXAgbGluayBkZWxpdmVyeS5cbiAgICAgIGNvbnNvbGUuZGVidWcoXCJbZGVlcC1saW5rXSBSZW5kZXJlciBzdWJzY3JpYmVyIHRocmV3OlwiLCBlcnJvcik7XG4gICAgfVxuICB9XG59KTtcblxuLy8gRm9yd2FyZCBPUlBDIE1lc3NhZ2VQb3J0IGZyb20gcmVuZGVyZXIgdG8gbWFpbiBwcm9jZXNzXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC5kYXRhID09PSBcInN0YXJ0LW9ycGMtY2xpZW50XCIgJiYgZXZlbnQucG9ydHM/LlswXSkge1xuICAgIGlwY1JlbmRlcmVyLnBvc3RNZXNzYWdlKFwic3RhcnQtb3JwYy1zZXJ2ZXJcIiwgbnVsbCwgWy4uLmV2ZW50LnBvcnRzXSk7XG4gIH1cbn0pO1xuXG5jb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKFwiYXBpXCIsIHtcbiAgcGxhdGZvcm06IHByb2Nlc3MucGxhdGZvcm0sXG4gIHZlcnNpb25zOiB7XG4gICAgbm9kZTogcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLFxuICAgIGNocm9tZTogcHJvY2Vzcy52ZXJzaW9ucy5jaHJvbWUsXG4gICAgZWxlY3Ryb246IHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24sXG4gIH0sXG4gIGlzRTJFOiBwcm9jZXNzLmVudi5NVVhfRTJFID09PSBcIjFcIixcbiAgZW5hYmxlVGVsZW1ldHJ5SW5EZXY6IHByb2Nlc3MuZW52Lk1VWF9FTkFCTEVfVEVMRU1FVFJZX0lOX0RFViA9PT0gXCIxXCIsXG4gIC8vIE5vdGU6IFdoZW4gZGVidWdnaW5nIExMTSByZXF1ZXN0cywgd2UgYWxzbyB3YW50IHRvIHNlZSBzeW50aGV0aWMvcmVxdWVzdC1vbmx5XG4gIC8vIG1lc3NhZ2VzIGluIHRoZSBjaGF0IGhpc3Rvcnkgc28gdGhlIFVJIG1hdGNoZXMgd2hhdCB3YXMgc2VudCB0byB0aGUgcHJvdmlkZXIuXG4gIGRlYnVnTGxtUmVxdWVzdDogcHJvY2Vzcy5lbnYuTVVYX0RFQlVHX0xMTV9SRVFVRVNUID09PSBcIjFcIixcbiAgLy8gQWxsb3cgdGVzdGluZyBhZ2FpbnN0IGEgbXV4Lm1kIHN0YWdpbmcvbG9jYWwgZGVwbG95bWVudCB3aXRob3V0IHJlYnVpbGRpbmcgdGhlIHJlbmRlcmVyLlxuICBtdXhNZFVybE92ZXJyaWRlOiBwcm9jZXNzLmVudi5NVVhfTURfVVJMX09WRVJSSURFLFxuICAvLyBOT1RFOiBUaGlzIGlzIGludGVudGlvbmFsbHkgYXN5bmMgc28gdGhlIHByZWxvYWQgc2NyaXB0IGRvZXMgbm90IHJlbHkgb24gTm9kZSBidWlsdGluc1xuICAvLyBsaWtlIGBjaGlsZF9wcm9jZXNzYCAod2hpY2ggY2FuIGJyZWFrIGluIGhhcmRlbmVkL3NhbmRib3hlZCBlbnZpcm9ubWVudHMpLlxuICBnZXRJc1Jvc2V0dGE6ICgpID0+IGlwY1JlbmRlcmVyLmludm9rZShcIm11eDpnZXQtaXMtcm9zZXR0YVwiKSxcbiAgZ2V0SXNXaW5kb3dzV3NsU2hlbGw6ICgpID0+IGlwY1JlbmRlcmVyLmludm9rZShcIm11eDpnZXQtaXMtd2luZG93cy13c2wtc2hlbGxcIiksXG4gIC8vIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZm9yIG5vdGlmaWNhdGlvbiBjbGlja3MgKG5hdmlnYXRlcyB0byB3b3Jrc3BhY2UpXG4gIC8vIFJldHVybnMgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24uXG4gIG9uTm90aWZpY2F0aW9uQ2xpY2tlZDogKGNhbGxiYWNrOiAoZGF0YTogeyB3b3Jrc3BhY2VJZDogc3RyaW5nIH0pID0+IHZvaWQpID0+IHtcbiAgICBjb25zdCBsaXN0ZW5lciA9IChfZXZlbnQ6IHVua25vd24sIGRhdGE6IHsgd29ya3NwYWNlSWQ6IHN0cmluZyB9KSA9PiBjYWxsYmFjayhkYXRhKTtcbiAgICBpcGNSZW5kZXJlci5vbihcIm11eDpub3RpZmljYXRpb24tY2xpY2tlZFwiLCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlwY1JlbmRlcmVyLm9mZihcIm11eDpub3RpZmljYXRpb24tY2xpY2tlZFwiLCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgfSxcbiAgY29uc3VtZVBlbmRpbmdEZWVwTGlua3M6ICgpID0+IHBlbmRpbmdEZWVwTGlua3Muc3BsaWNlKDAsIHBlbmRpbmdEZWVwTGlua3MubGVuZ3RoKSxcbiAgb25EZWVwTGluazogKGNhbGxiYWNrOiAocGF5bG9hZDogTXV4RGVlcExpbmtQYXlsb2FkKSA9PiB2b2lkKSA9PiB7XG4gICAgZGVlcExpbmtTdWJzY3JpYmVycy5hZGQoY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkZWVwTGlua1N1YnNjcmliZXJzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgfTtcbiAgfSxcbn0pO1xuIgogIF0sCiAgIm1hcHBpbmdzIjogIjtBQWlCMkMsSUFBM0M7QUFLQSxJQUFNLG1CQUF5QyxDQUFDO0FBQ2hELElBQU0sc0JBQXNCLElBQUk7QUFFaEMsNEJBQVksR0FBRyxpQkFBaUIsQ0FBQyxRQUFpQixZQUFnQztBQUFBLEVBQ2hGLElBQUksb0JBQW9CLFNBQVMsR0FBRztBQUFBLElBQ2xDLGlCQUFpQixLQUFLLE9BQU87QUFBQSxFQUMvQjtBQUFBLEVBRUEsV0FBVyxjQUFjLHFCQUFxQjtBQUFBLElBQzVDLElBQUk7QUFBQSxNQUNGLFdBQVcsT0FBTztBQUFBLE1BQ2xCLE9BQU8sT0FBTztBQUFBLE1BRWQsUUFBUSxNQUFNLDBDQUEwQyxLQUFLO0FBQUE7QUFBQSxFQUVqRTtBQUFBLENBQ0Q7QUFHRCxPQUFPLGlCQUFpQixXQUFXLENBQUMsVUFBVTtBQUFBLEVBQzVDLElBQUksTUFBTSxTQUFTLHVCQUF1QixNQUFNLFFBQVEsSUFBSTtBQUFBLElBQzFELDRCQUFZLFlBQVkscUJBQXFCLE1BQU0sQ0FBQyxHQUFHLE1BQU0sS0FBSyxDQUFDO0FBQUEsRUFDckU7QUFBQSxDQUNEO0FBRUQsOEJBQWMsa0JBQWtCLE9BQU87QUFBQSxFQUNyQyxVQUFVLFFBQVE7QUFBQSxFQUNsQixVQUFVO0FBQUEsSUFDUixNQUFNLFFBQVEsU0FBUztBQUFBLElBQ3ZCLFFBQVEsUUFBUSxTQUFTO0FBQUEsSUFDekIsVUFBVSxRQUFRLFNBQVM7QUFBQSxFQUM3QjtBQUFBLEVBQ0EsT0FBTyxRQUFRLElBQUksWUFBWTtBQUFBLEVBQy9CLHNCQUFzQixRQUFRLElBQUksZ0NBQWdDO0FBQUEsRUFHbEUsaUJBQWlCLFFBQVEsSUFBSSwwQkFBMEI7QUFBQSxFQUV2RCxrQkFBa0IsUUFBUSxJQUFJO0FBQUEsRUFHOUIsY0FBYyxNQUFNLDRCQUFZLE9BQU8sb0JBQW9CO0FBQUEsRUFDM0Qsc0JBQXNCLE1BQU0sNEJBQVksT0FBTyw4QkFBOEI7QUFBQSxFQUc3RSx1QkFBdUIsQ0FBQyxhQUFzRDtBQUFBLElBQzVFLE1BQU0sV0FBVyxDQUFDLFFBQWlCLFNBQWtDLFNBQVMsSUFBSTtBQUFBLElBQ2xGLDRCQUFZLEdBQUcsNEJBQTRCLFFBQVE7QUFBQSxJQUNuRCxPQUFPLE1BQU07QUFBQSxNQUNYLDRCQUFZLElBQUksNEJBQTRCLFFBQVE7QUFBQTtBQUFBO0FBQUEsRUFHeEQseUJBQXlCLE1BQU0saUJBQWlCLE9BQU8sR0FBRyxpQkFBaUIsTUFBTTtBQUFBLEVBQ2pGLFlBQVksQ0FBQyxhQUFvRDtBQUFBLElBQy9ELG9CQUFvQixJQUFJLFFBQVE7QUFBQSxJQUNoQyxPQUFPLE1BQU07QUFBQSxNQUNYLG9CQUFvQixPQUFPLFFBQVE7QUFBQTtBQUFBO0FBR3pDLENBQUM7IiwKICAiZGVidWdJZCI6ICI1OEJGOTEwQzE3Qzg4NEQ5NjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
