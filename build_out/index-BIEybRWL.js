import{t as ht,Z as l}from"./types-BnSgsVUP.js";import{j as gt}from"./main-DwmWcc43.js";var Oe="vercel.ai.error",bt=Symbol.for(Oe),q,V,d=class Se extends(V=Error,q=bt,V){constructor({name:t,message:r,cause:a}){super(r),this[q]=!0,this.name=t,this.cause=a}static isInstance(t){return Se.hasMarker(t,Oe)}static hasMarker(t,r){const a=Symbol.for(r);return t!=null&&typeof t=="object"&&a in t&&typeof t[a]=="boolean"&&t[a]===!0}},Ie="AI_APICallError",Te=`vercel.ai.error.${Ie}`,_t=Symbol.for(Te),G,W,y=class extends(W=d,G=_t,W){constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:n,responseBody:s,cause:i,isRetryable:o=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:Ie,message:e,cause:i}),this[G]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=n,this.responseBody=s,this.isRetryable=o,this.data=c}static isInstance(e){return d.hasMarker(e,Te)}},Ne="AI_EmptyResponseBodyError",Ze=`vercel.ai.error.${Ne}`,wt=Symbol.for(Ze),K,Q,Pt=class extends(Q=d,K=wt,Q){constructor({message:e="Empty response body"}={}){super({name:Ne,message:e}),this[K]=!0}static isInstance(e){return d.hasMarker(e,Ze)}};function xe(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var De="AI_InvalidArgumentError",Fe=`vercel.ai.error.${De}`,kt=Symbol.for(Fe),X,Y,Ce=class extends(Y=d,X=kt,Y){constructor({message:e,cause:t,argument:r}){super({name:De,message:e,cause:t}),this[X]=!0,this.argument=r}static isInstance(e){return d.hasMarker(e,Fe)}},je="AI_InvalidPromptError",Re=`vercel.ai.error.${je}`,Et=Symbol.for(Re),ee,te,Kr=class extends(te=d,ee=Et,te){constructor({prompt:e,message:t,cause:r}){super({name:je,message:`Invalid prompt: ${t}`,cause:r}),this[ee]=!0,this.prompt=e}static isInstance(e){return d.hasMarker(e,Re)}},Me="AI_InvalidResponseDataError",Le=`vercel.ai.error.${Me}`,At=Symbol.for(Le),re,ae,Qr=class extends(ae=d,re=At,ae){constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:Me,message:t}),this[re]=!0,this.data=e}static isInstance(e){return d.hasMarker(e,Le)}},Be="AI_JSONParseError",ze=`vercel.ai.error.${Be}`,$t=Symbol.for(ze),ne,se,T=class extends(se=d,ne=$t,se){constructor({text:e,cause:t}){super({name:Be,message:`JSON parsing failed: Text: ${e}.
Error message: ${xe(t)}`,cause:t}),this[ne]=!0,this.text=e}static isInstance(e){return d.hasMarker(e,ze)}},Ue="AI_LoadAPIKeyError",Je=`vercel.ai.error.${Ue}`,Ot=Symbol.for(Je),ie,oe,S=class extends(oe=d,ie=Ot,oe){constructor({message:e}){super({name:Ue,message:e}),this[ie]=!0}static isInstance(e){return d.hasMarker(e,Je)}},He="AI_LoadSettingError",qe=`vercel.ai.error.${He}`,St=Symbol.for(qe),ue,ce,I=class extends(ce=d,ue=St,ce){constructor({message:e}){super({name:He,message:e}),this[ue]=!0}static isInstance(e){return d.hasMarker(e,qe)}},Ve="AI_NoContentGeneratedError",Ge=`vercel.ai.error.${Ve}`,It=Symbol.for(Ge),le,fe,Xr=class extends(fe=d,le=It,fe){constructor({message:e="No content generated."}={}){super({name:Ve,message:e}),this[le]=!0}static isInstance(e){return d.hasMarker(e,Ge)}},We="AI_NoSuchModelError",Ke=`vercel.ai.error.${We}`,Tt=Symbol.for(Ke),de,pe,Yr=class extends(pe=d,de=Tt,pe){constructor({errorName:e=We,modelId:t,modelType:r,message:a=`No such ${r}: ${t}`}){super({name:e,message:a}),this[de]=!0,this.modelId=t,this.modelType=r}static isInstance(e){return d.hasMarker(e,Ke)}},Qe="AI_TooManyEmbeddingValuesForCallError",Xe=`vercel.ai.error.${Qe}`,Nt=Symbol.for(Xe),me,ye,ea=class extends(ye=d,me=Nt,ye){constructor(e){super({name:Qe,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[me]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return d.hasMarker(e,Xe)}},Ye="AI_TypeValidationError",et=`vercel.ai.error.${Ye}`,Zt=Symbol.for(et),ve,he,A=class M extends(he=d,ve=Zt,he){constructor({value:t,cause:r,context:a}){let n="Type validation failed";if(a?.field&&(n+=` for ${a.field}`),a?.entityName||a?.entityId){n+=" (";const s=[];a.entityName&&s.push(a.entityName),a.entityId&&s.push(`id: "${a.entityId}"`),n+=s.join(", "),n+=")"}super({name:Ye,message:`${n}: Value: ${JSON.stringify(t)}.
Error message: ${xe(r)}`,cause:r}),this[ve]=!0,this.value=t,this.context=a}static isInstance(t){return d.hasMarker(t,et)}static wrap({value:t,cause:r,context:a}){var n,s,i;return M.isInstance(r)&&r.value===t&&((n=r.context)==null?void 0:n.field)===a?.field&&((s=r.context)==null?void 0:s.entityName)===a?.entityName&&((i=r.context)==null?void 0:i.entityId)===a?.entityId?r:new M({value:t,cause:r,context:a})}},tt="AI_UnsupportedFunctionalityError",rt=`vercel.ai.error.${tt}`,xt=Symbol.for(rt),ge,be,ta=class extends(be=d,ge=xt,be){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:tt,message:t}),this[ge]=!0,this.functionality=e}static isInstance(e){return d.hasMarker(e,rt)}};function N(e){return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"?!0:Array.isArray(e)?e.every(N):typeof e=="object"?Object.entries(e).every(([t,r])=>typeof t=="string"&&(r===void 0||N(r))):!1}function ra(e){return Array.isArray(e)&&e.every(N)}function aa(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,r])=>typeof t=="string"&&(r===void 0||N(r)))}class _e extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function F(e){}function Dt(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=F,onError:r=F,onRetry:a=F,onComment:n}=e;let s="",i=!0,o,c="",u="";function v(p){const m=i?p.replace(/^\xEF\xBB\xBF/,""):p,[P,x]=Ft(`${s}${m}`);for(const D of P)O(D);s=x,i=!1}function O(p){if(p===""){yt();return}if(p.startsWith(":")){n&&n(p.slice(p.startsWith(": ")?2:1));return}const m=p.indexOf(":");if(m!==-1){const P=p.slice(0,m),x=p[m+1]===" "?2:1,D=p.slice(m+x);E(P,D,p);return}E(p,"",p)}function E(p,m,P){switch(p){case"event":u=m;break;case"data":c=`${c}${m}
`;break;case"id":o=m.includes("\0")?void 0:m;break;case"retry":/^\d+$/.test(m)?a(parseInt(m,10)):r(new _e(`Invalid \`retry\` value: "${m}"`,{type:"invalid-retry",value:m,line:P}));break;default:r(new _e(`Unknown field "${p.length>20?`${p.slice(0,20)}â€¦`:p}"`,{type:"unknown-field",field:p,value:m,line:P}));break}}function yt(){c.length>0&&t({id:o,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),o=void 0,c="",u=""}function vt(p={}){s&&p.consume&&O(s),i=!0,o=void 0,c="",u="",s=""}return{feed:v,reset:vt}}function Ft(e){const t=[];let r="",a=0;for(;a<e.length;){const n=e.indexOf("\r",a),s=e.indexOf(`
`,a);let i=-1;if(n!==-1&&s!==-1?i=Math.min(n,s):n!==-1?n===e.length-1?i=-1:i=n:s!==-1&&(i=s),i===-1){r=e.slice(a);break}else{const o=e.slice(a,i);t.push(o),a=i+1,e[a-1]==="\r"&&e[a]===`
`&&a++}}return[t,r]}class Ct extends TransformStream{constructor({onError:t,onRetry:r,onComment:a}={}){let n;super({start(s){n=Dt({onEvent:i=>{s.enqueue(i)},onError(i){t==="terminate"?s.error(i):typeof t=="function"&&t(i)},onRetry:r,onComment:a})},transform(s){n.feed(s)}})}}var z={};function na(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}function sa({tools:e=[],providerToolNames:t}){const r={},a={};for(const n of e)if(n.type==="provider"&&n.id in t){const s=t[n.id];r[n.name]=s,a[s]=n.name}return{toProviderToolName:n=>{var s;return(s=r[n])!=null?s:n},toCustomToolName:n=>{var s;return(s=a[n])!=null?s:n}}}async function ia(e,t){if(e==null)return Promise.resolve();const r=t?.abortSignal;return new Promise((a,n)=>{if(r?.aborted){n(we());return}const s=setTimeout(()=>{i(),a()},e),i=()=>{clearTimeout(s),r?.removeEventListener("abort",o)},o=()=>{i(),n(we())};r?.addEventListener("abort",o)})}function we(){return new DOMException("Delay was aborted","AbortError")}var oa=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function k(e){return Object.fromEntries([...e.headers])}var{btoa:jt,atob:Rt}=globalThis;function ua(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=Rt(t);return Uint8Array.from(r,a=>a.codePointAt(0))}function Mt(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return jt(t)}function ca(e){return e instanceof Uint8Array?Mt(e):e}function la(e,t={}){const{useArrayBrackets:r=!0}=t,a=new FormData;for(const[n,s]of Object.entries(e))if(s!=null){if(Array.isArray(s)){if(s.length===1){a.append(n,s[0]);continue}const i=r?`${n}[]`:n;for(const o of s)a.append(i,o);continue}a.append(n,s)}return a}var at="AI_DownloadError",nt=`vercel.ai.error.${at}`,Lt=Symbol.for(nt),Pe,ke,C=class extends(ke=d,Pe=Lt,ke){constructor({url:e,statusCode:t,statusText:r,cause:a,message:n=a==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`}){super({name:at,message:n,cause:a}),this[Pe]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return d.hasMarker(e,nt)}};async function fa(e){try{const t=await fetch(e);if(!t.ok)throw new C({url:e,statusCode:t.status,statusText:t.statusText});return await t.blob()}catch(t){throw C.isInstance(t)?t:new C({url:e,cause:t})}}var Bt=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{const n=()=>{const s=r.length,i=new Array(t);for(let o=0;o<t;o++)i[o]=r[Math.random()*s|0];return i.join("")};if(e==null)return n;if(r.includes(a))throw new Ce({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return()=>`${e}${a}${n()}`},da=Bt();function pa(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function $(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var zt=["fetch failed","failed to fetch"],Ut=["ConnectionRefused","ConnectionClosed","FailedToOpenSocket","ECONNRESET","ECONNREFUSED","ETIMEDOUT","EPIPE"];function Jt(e){if(!(e instanceof Error))return!1;const t=e.code;return!!(typeof t=="string"&&Ut.includes(t))}function st({error:e,url:t,requestBodyValues:r}){if($(e))return e;if(e instanceof TypeError&&zt.includes(e.message.toLowerCase())){const a=e.cause;if(a!=null)return new y({message:`Cannot connect to API: ${a.message}`,cause:a,url:t,requestBodyValues:r,isRetryable:!0})}return Jt(e)?new y({message:`Cannot connect to API: ${e.message}`,cause:e,url:t,requestBodyValues:r,isRetryable:!0}):e}function it(e=globalThis){var t,r,a;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(a=(r=e.process)==null?void 0:r.versions)!=null&&a.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function Ht(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,a)=>{t[a.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,a]of e)a!=null&&(t[r.toLowerCase()]=a)}return t}function ot(e,...t){const r=new Headers(Ht(e)),a=r.get("user-agent")||"";return r.set("user-agent",[a,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var ut="4.0.13",qt=()=>globalThis.fetch,ma=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:a,abortSignal:n,fetch:s=qt()})=>{try{const i=await s(e,{method:"GET",headers:ot(t,`ai-sdk/provider-utils/${ut}`,it()),signal:n}),o=k(i);if(!i.ok){let c;try{c=await a({response:i,url:e,requestBodyValues:{}})}catch(u){throw $(u)||y.isInstance(u)?u:new y({message:"Failed to process error response",cause:u,statusCode:i.status,url:e,responseHeaders:o,requestBodyValues:{}})}throw c.value}try{return await r({response:i,url:e,requestBodyValues:{}})}catch(c){throw c instanceof Error&&($(c)||y.isInstance(c))?c:new y({message:"Failed to process successful response",cause:c,statusCode:i.status,url:e,responseHeaders:o,requestBodyValues:{}})}}catch(i){throw st({error:i,url:e,requestBodyValues:{}})}};function ya(e){return e!=null}function va({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([a,n])=>{const s=a.toLowerCase();return s==="*"||s==="*/*"?{mediaTypePrefix:"",regexes:n}:{mediaTypePrefix:s.replace(/\*/,""),regexes:n}}).filter(({mediaTypePrefix:a})=>e.startsWith(a)).flatMap(({regexes:a})=>a).some(a=>a.test(t))}function ha({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:a}){if(typeof e=="string")return e;if(e!=null)throw new S({message:`${a} API key must be a string.`});if(typeof process>"u")throw new S({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=z[t],e==null)throw new S({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new S({message:`${a} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function ga({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=z[t],!(e==null||typeof e!="string")))return e}function ba({settingValue:e,environmentVariableName:t,settingName:r,description:a}){if(typeof e=="string")return e;if(e!=null)throw new I({message:`${a} setting must be a string.`});if(typeof process>"u")throw new I({message:`${a} setting is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=z[t],e==null)throw new I({message:`${a} setting is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new I({message:`${a} setting must be a string. The value of the ${t} environment variable is not a string.`});return e}function _a(e){var t;const[r,a=""]=e.toLowerCase().split("/");return(t={mpeg:"mp3","x-wav":"wav",opus:"ogg",mp4:"m4a","x-m4a":"m4a"}[a])!=null?t:a}var Vt=/"__proto__"\s*:/,Gt=/"constructor"\s*:/;function Ee(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Vt.test(e)===!1&&Gt.test(e)===!1?t:Wt(t)}function Wt(e){let t=[e];for(;t.length;){const r=t;t=[];for(const a of r){if(Object.prototype.hasOwnProperty.call(a,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const n in a){const s=a[n];s&&typeof s=="object"&&t.push(s)}}}return e}function U(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return Ee(e)}try{return Ee(e)}finally{Error.stackTraceLimit=t}}function J(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;const{properties:r}=e;if(r!=null)for(const a of Object.keys(r))r[a]=w(r[a])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(w):w(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(w)),e.allOf!=null&&(e.allOf=e.allOf.map(w)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(w));const{definitions:t}=e;if(t!=null)for(const r of Object.keys(t))t[r]=w(t[r]);return e}function w(e){return typeof e=="boolean"?e:J(e)}var Kt=Symbol("Let zodToJsonSchema decide on which parser to use"),Ae={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Qt=e=>typeof e=="string"?{...Ae,name:e}:{...Ae,...e};function g(){return{}}function Xt(e,t){var r,a,n;const s={type:"array"};return(r=e.type)!=null&&r._def&&((n=(a=e.type)==null?void 0:a._def)==null?void 0:n.typeName)!==l.ZodAny&&(s.items=f(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(s.minItems=e.minLength.value),e.maxLength&&(s.maxItems=e.maxLength.value),e.exactLength&&(s.minItems=e.exactLength.value,s.maxItems=e.exactLength.value),s}function Yt(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function er(){return{type:"boolean"}}function ct(e,t){return f(e.type._def,t)}var tr=(e,t)=>f(e.innerType._def,t);function lt(e,t,r){const a=r??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,s)=>lt(e,t,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rr(e)}}var rr=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function ar(e,t){return{...f(e.innerType._def,t),default:e.defaultValue()}}function nr(e,t){return t.effectStrategy==="input"?f(e.schema._def,t):g()}function sr(e){return{type:"string",enum:Array.from(e.values)}}var ir=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function or(e,t){const r=[f(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),f(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),a=[];return r.forEach(n=>{if(ir(n))a.push(...n.allOf);else{let s=n;if("additionalProperties"in n&&n.additionalProperties===!1){const{additionalProperties:i,...o}=n;s=o}a.push(s)}}),a.length?{allOf:a}:void 0}function ur(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var j=void 0,b={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(j===void 0&&(j=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),j),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function ft(e,t){const r={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"email":switch(t.emailStrategy){case"format:email":_(r,"email",a.message,t);break;case"format:idn-email":_(r,"idn-email",a.message,t);break;case"pattern:zod":h(r,b.email,a.message,t);break}break;case"url":_(r,"uri",a.message,t);break;case"uuid":_(r,"uuid",a.message,t);break;case"regex":h(r,a.regex,a.message,t);break;case"cuid":h(r,b.cuid,a.message,t);break;case"cuid2":h(r,b.cuid2,a.message,t);break;case"startsWith":h(r,RegExp(`^${R(a.value,t)}`),a.message,t);break;case"endsWith":h(r,RegExp(`${R(a.value,t)}$`),a.message,t);break;case"datetime":_(r,"date-time",a.message,t);break;case"date":_(r,"date",a.message,t);break;case"time":_(r,"time",a.message,t);break;case"duration":_(r,"duration",a.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"includes":{h(r,RegExp(R(a.value,t)),a.message,t);break}case"ip":{a.version!=="v6"&&_(r,"ipv4",a.message,t),a.version!=="v4"&&_(r,"ipv6",a.message,t);break}case"base64url":h(r,b.base64url,a.message,t);break;case"jwt":h(r,b.jwt,a.message,t);break;case"cidr":{a.version!=="v6"&&h(r,b.ipv4Cidr,a.message,t),a.version!=="v4"&&h(r,b.ipv6Cidr,a.message,t);break}case"emoji":h(r,b.emoji(),a.message,t);break;case"ulid":{h(r,b.ulid,a.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{_(r,"binary",a.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{h(r,b.base64,a.message,t);break}}break}case"nanoid":h(r,b.nanoid,a.message,t)}return r}function R(e,t){return t.patternStrategy==="escape"?lr(e):e}var cr=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function lr(e){let t="";for(let r=0;r<e.length;r++)cr.has(e[r])||(t+="\\"),t+=e[r];return t}function _(e,t,r,a){var n;e.format||(n=e.anyOf)!=null&&n.some(s=>s.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function h(e,t,r,a){var n;e.pattern||(n=e.allOf)!=null&&n.some(s=>s.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:$e(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=$e(t,a)}function $e(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const a={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=a.i?e.source.toLowerCase():e.source;let s="",i=!1,o=!1,c=!1;for(let u=0;u<n.length;u++){if(i){s+=n[u],i=!1;continue}if(a.i){if(o){if(n[u].match(/[a-z]/)){c?(s+=n[u],s+=`${n[u-2]}-${n[u]}`.toUpperCase(),c=!1):n[u+1]==="-"&&((r=n[u+2])!=null&&r.match(/[a-z]/))?(s+=n[u],c=!0):s+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){s+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(a.m){if(n[u]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){s+=`($|(?=[\r
]))`;continue}}if(a.s&&n[u]==="."){s+=o?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}s+=n[u],n[u]==="\\"?i=!0:o&&n[u]==="]"?o=!1:!o&&n[u]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function dt(e,t){var r,a,n,s,i,o;const c={type:"object",additionalProperties:(r=f(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((a=e.keyType)==null?void 0:a._def.typeName)===l.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){const{type:u,...v}=ft(e.keyType._def,t);return{...c,propertyNames:v}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===l.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===l.ZodBranded&&e.keyType._def.type._def.typeName===l.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:u,...v}=ct(e.keyType._def,t);return{...c,propertyNames:v}}}return c}function fr(e,t){if(t.mapStrategy==="record")return dt(e,t);const r=f(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||g(),a=f(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||g();return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}function dr(e){const t=e.values,a=Object.keys(e.values).filter(s=>typeof t[t[s]]!="number").map(s=>t[s]),n=Array.from(new Set(a.map(s=>typeof s)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:a}}function pr(){return{not:g()}}function mr(){return{type:"null"}}var L={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function yr(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(a=>a._def.typeName in L&&(!a._def.checks||!a._def.checks.length))){const a=r.reduce((n,s)=>{const i=L[s._def.typeName];return i&&!n.includes(i)?[...n,i]:n},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=r.reduce((n,s)=>{const i=typeof s._def.value;switch(i){case"string":case"number":case"boolean":return[...n,i];case"bigint":return[...n,"integer"];case"object":if(s._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(a.length===r.length){const n=a.filter((s,i,o)=>o.indexOf(s)===i);return{type:n.length>1?n:n[0],enum:r.reduce((s,i)=>s.includes(i._def.value)?s:[...s,i._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,n)=>[...a,...n._def.values.filter(s=>!a.includes(s))],[])};return vr(e,t)}var vr=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((a,n)=>f(a._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(a=>!!a&&(!t.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0};function hr(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[L[e.innerType._def.typeName],"null"]};const r=f(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function gr(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function br(e,t){const r={type:"object",properties:{}},a=[],n=e.shape();for(const i in n){let o=n[i];if(o===void 0||o._def===void 0)continue;const c=wr(o),u=f(o._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,c||a.push(i))}a.length&&(r.required=a);const s=_r(e,t);return s!==void 0&&(r.additionalProperties=s),r}function _r(e,t){if(e.catchall._def.typeName!=="ZodNever")return f(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function wr(e){try{return e.isOptional()}catch{return!0}}var Pr=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return f(e.innerType._def,t);const a=f(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return a?{anyOf:[{not:g()},a]}:g()},kr=(e,t)=>{if(t.pipeStrategy==="input")return f(e.in._def,t);if(t.pipeStrategy==="output")return f(e.out._def,t);const r=f(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=f(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(n=>n!==void 0)}};function Er(e,t){return f(e.type._def,t)}function Ar(e,t){const a={type:"array",uniqueItems:!0,items:f(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(a.minItems=e.minSize.value),e.maxSize&&(a.maxItems=e.maxSize.value),a}function $r(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,a)=>f(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:f(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,a)=>f(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}function Or(){return{not:g()}}function Sr(){return g()}var Ir=(e,t)=>f(e.innerType._def,t),Tr=(e,t,r)=>{switch(t){case l.ZodString:return ft(e,r);case l.ZodNumber:return gr(e);case l.ZodObject:return br(e,r);case l.ZodBigInt:return Yt(e);case l.ZodBoolean:return er();case l.ZodDate:return lt(e,r);case l.ZodUndefined:return Or();case l.ZodNull:return mr();case l.ZodArray:return Xt(e,r);case l.ZodUnion:case l.ZodDiscriminatedUnion:return yr(e,r);case l.ZodIntersection:return or(e,r);case l.ZodTuple:return $r(e,r);case l.ZodRecord:return dt(e,r);case l.ZodLiteral:return ur(e);case l.ZodEnum:return sr(e);case l.ZodNativeEnum:return dr(e);case l.ZodNullable:return hr(e,r);case l.ZodOptional:return Pr(e,r);case l.ZodMap:return fr(e,r);case l.ZodSet:return Ar(e,r);case l.ZodLazy:return()=>e.getter()._def;case l.ZodPromise:return Er(e,r);case l.ZodNaN:case l.ZodNever:return pr();case l.ZodEffects:return nr(e,r);case l.ZodAny:return g();case l.ZodUnknown:return Sr();case l.ZodDefault:return ar(e,r);case l.ZodBranded:return ct(e,r);case l.ZodReadonly:return Ir(e,r);case l.ZodCatch:return tr(e,r);case l.ZodPipeline:return kr(e,r);case l.ZodFunction:case l.ZodVoid:case l.ZodSymbol:return;default:return(a=>{})()}},Nr=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function f(e,t,r=!1){var a;const n=t.seen.get(e);if(t.override){const c=(a=t.override)==null?void 0:a.call(t,e,t,n,r);if(c!==Kt)return c}if(n&&!r){const c=Zr(n,t);if(c!==void 0)return c}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=Tr(e,e.typeName,t),o=typeof i=="function"?f(i(),t):i;if(o&&xr(e,t,o),t.postProcess){const c=t.postProcess(o,e,t);return s.jsonSchema=o,c}return s.jsonSchema=o,o}var Zr=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Nr(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,a)=>t.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),g()):t.$refStrategy==="seen"?g():void 0}},xr=(e,t,r)=>(e.description&&(r.description=e.description),r),Dr=e=>{const t=Qt(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([a,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,a],jsonSchema:void 0}]))}},Fr=(e,t)=>{var r;const a=Dr(t);let n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[v,O])=>{var E;return{...u,[v]:(E=f(O._def,{...a,currentPath:[...a.basePath,a.definitionPath,v]},!0))!=null?E:g()}},{}):void 0;const s=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(r=f(e._def,s===void 0?a:{...a,currentPath:[...a.basePath,a.definitionPath,s]},!1))!=null?r:g(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const c=s===void 0?n?{...i,[a.definitionPath]:n}:i:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,s].join("/"),[a.definitionPath]:{...n,[s]:i}};return c.$schema="http://json-schema.org/draft-07/schema#",c},B=Symbol.for("vercel.ai.schema");function wa(e){let t;return()=>(t==null&&(t=e()),t)}function Z(e,{validate:t}={}){return{[B]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Cr(e){return typeof e=="object"&&e!==null&&B in e&&e[B]===!0&&"jsonSchema"in e&&"validate"in e}function jr(e){return e==null?Z({properties:{},additionalProperties:!1}):Cr(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?zr(e):Rr(e):e()}function Rr(e){return Z(()=>J(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{const r=await e["~standard"].validate(t);return"value"in r?{success:!0,value:r.value}:{success:!1,error:new A({value:t,cause:r.issues})}}})}function Mr(e,t){var r;const a=(r=t?.useReferences)!=null?r:!1;return Z(()=>Fr(e,{$refStrategy:a?"root":"none"}),{validate:async n=>{const s=await e.safeParseAsync(n);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Lr(e,t){var r;const a=(r=t?.useReferences)!=null?r:!1;return Z(()=>J(ht(e,{target:"draft-7",io:"input",reused:a?"ref":"inline"})),{validate:async n=>{const s=await gt(e,n);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}function Br(e){return"_zod"in e}function zr(e,t){return Br(e)?Lr(e,t):Mr(e,t)}async function Ur({value:e,schema:t,context:r}){const a=await H({value:e,schema:t,context:r});if(!a.success)throw A.wrap({value:e,cause:a.error,context:r});return a.value}async function H({value:e,schema:t,context:r}){const a=jr(t);try{if(a.validate==null)return{success:!0,value:e,rawValue:e};const n=await a.validate(e);return n.success?{success:!0,value:n.value,rawValue:e}:{success:!1,error:A.wrap({value:e,cause:n.error,context:r}),rawValue:e}}catch(n){return{success:!1,error:A.wrap({value:e,cause:n,context:r}),rawValue:e}}}async function Jr({text:e,schema:t}){try{const r=U(e);return t==null?r:Ur({value:r,schema:t})}catch(r){throw T.isInstance(r)||A.isInstance(r)?r:new T({text:e,cause:r})}}async function pt({text:e,schema:t}){try{const r=U(e);return t==null?{success:!0,value:r,rawValue:r}:await H({value:r,schema:t})}catch(r){return{success:!1,error:T.isInstance(r)?r:new T({text:e,cause:r}),rawValue:void 0}}}function Pa(e){try{return U(e),!0}catch{return!1}}function Hr({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Ct).pipeThrough(new TransformStream({async transform({data:r},a){r!=="[DONE]"&&a.enqueue(await pt({text:r,schema:t}))}}))}async function ka({provider:e,providerOptions:t,schema:r}){if(t?.[e]==null)return;const a=await H({value:t[e],schema:r});if(!a.success)throw new Ce({argument:"providerOptions",message:`invalid ${e} provider options`,cause:a.error});return a.value}var qr=()=>globalThis.fetch,Ea=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>mt({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),Aa=async({url:e,headers:t,formData:r,failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i})=>mt({url:e,headers:t,body:{content:r,values:Object.fromEntries(r.entries())},failedResponseHandler:a,successfulResponseHandler:n,abortSignal:s,fetch:i}),mt=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:n,abortSignal:s,fetch:i=qr()})=>{try{const o=await i(e,{method:"POST",headers:ot(t,`ai-sdk/provider-utils/${ut}`,it()),body:r.content,signal:s}),c=k(o);if(!o.ok){let u;try{u=await n({response:o,url:e,requestBodyValues:r.values})}catch(v){throw $(v)||y.isInstance(v)?v:new y({message:"Failed to process error response",cause:v,statusCode:o.status,url:e,responseHeaders:c,requestBodyValues:r.values})}throw u.value}try{return await a({response:o,url:e,requestBodyValues:r.values})}catch(u){throw u instanceof Error&&($(u)||y.isInstance(u))?u:new y({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:c,requestBodyValues:r.values})}}catch(o){throw st({error:o,url:e,requestBodyValues:r.values})}};function $a(e){return e}function Oa(e){return{...e,type:"dynamic"}}function Sa({id:e,inputSchema:t}){return({execute:r,outputSchema:a,needsApproval:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:c,...u})=>({type:"provider",id:e,args:u,inputSchema:t,outputSchema:a,execute:r,needsApproval:n,toModelOutput:s,onInputStart:i,onInputDelta:o,onInputAvailable:c})}function Ia({id:e,inputSchema:t,outputSchema:r,supportsDeferredResults:a}){return({execute:n,needsApproval:s,toModelOutput:i,onInputStart:o,onInputDelta:c,onInputAvailable:u,...v})=>({type:"provider",id:e,args:v,inputSchema:t,outputSchema:r,execute:n,needsApproval:s,toModelOutput:i,onInputStart:o,onInputDelta:c,onInputAvailable:u,supportsDeferredResults:a})}async function Ta(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Na=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:n,requestBodyValues:s})=>{const i=await a.text(),o=k(a);if(i.trim()==="")return{responseHeaders:o,value:new y({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:r?.(a)})};try{const c=await Jr({text:i,schema:e});return{responseHeaders:o,value:new y({message:t(c),url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,data:c,isRetryable:r?.(a,c)})}}catch{return{responseHeaders:o,value:new y({message:a.statusText,url:n,requestBodyValues:s,statusCode:a.status,responseHeaders:o,responseBody:i,isRetryable:r?.(a)})}}},Za=e=>async({response:t})=>{const r=k(t);if(t.body==null)throw new Pt({});return{responseHeaders:r,value:Hr({stream:t.body,schema:e})}},xa=e=>async({response:t,url:r,requestBodyValues:a})=>{const n=await t.text(),s=await pt({text:n,schema:e}),i=k(t);if(!s.success)throw new y({message:"Invalid JSON response",cause:s.error,statusCode:t.status,responseHeaders:i,responseBody:n,url:r,requestBodyValues:a});return{responseHeaders:i,value:s.value,rawValue:s.rawValue}},Da=()=>async({response:e,url:t,requestBodyValues:r})=>{const a=k(e);if(!e.body)throw new y({message:"Response body is empty",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0});try{const n=await e.arrayBuffer();return{responseHeaders:a,value:new Uint8Array(n)}}catch(n){throw new y({message:"Failed to read response as array buffer",url:t,requestBodyValues:r,statusCode:e.status,responseHeaders:a,responseBody:void 0,cause:n})}};function Fa(e){return e?.replace(/\/$/,"")}function Vr(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*Ca({execute:e,input:t,options:r}){const a=e(t,r);if(Vr(a)){let n;for await(const s of a)n=s,yield{type:"preliminary",output:s};yield{type:"final",output:n}}else yield{type:"final",output:await a}}export{oa as $,y as A,_a as B,Da as C,Kr as D,Mt as E,d as F,ia as G,ma as H,Ce as I,k as J,pt as K,ba as L,Ht as M,Yr as N,it as O,jr as P,Pt as Q,H as R,Hr as S,ea as T,ta as U,xe as V,pa as W,Bt as X,A as Y,C as Z,T as _,Ia as a,$ as a0,aa as a1,ra as a2,va as a3,Ca as a4,S as a5,I as a6,Xr as a7,Oa as a8,Z as a9,$a as aa,wa as b,Sa as c,sa as d,na as e,Ea as f,da as g,xa as h,Za as i,ha as j,ot as k,ga as l,ya as m,ca as n,Na as o,ka as p,Qr as q,Ta as r,Pa as s,Aa as t,la as u,Ur as v,Fa as w,fa as x,ua as y,zr as z};
