{"version":3,"file":"testUtils.js","sourceRoot":"","sources":["testUtils.ts"],"names":[],"mappings":";AAAA;;;;;;;GAOG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,mCAAgC;AAChC,MAAY,IAAI,iCAAa;AAE7B,+CAA+C;AAC/C,mDAAmD;AACnD,IAAA,eAAM,EAAC,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAElE;;;GAGG;AACH,qCAAqD;IACnD,OAAO,OAAO,CAAC,GAAG,CAAC,gBAAgB,KAAK,GAAG,CAAC;AAAA,CAC7C;AAED;;;GAGG;AACH,yBAAgC,YAAsB,EAAQ;IAC5D,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;QACjC,OAAO,CAAC,mDAAmD;IAC7D,CAAC;IAED,MAAM,OAAO,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAEhE,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QACvB,MAAM,IAAI,KAAK,CACb,kEAAkE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI;YACtF,gEAAgE,CACnE,CAAC;IACJ,CAAC;AAAA,CACF;AAED;;GAEG;AACH,mBAA0B,OAAe,EAAU;IACjD,IAAI,CAAC,yBAAyB,EAAE,EAAE,CAAC;QACjC,MAAM,IAAI,KAAK,CAAC,8DAA8D,CAAC,CAAC;IAClF,CAAC;IAED,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACnC,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,MAAM,IAAI,KAAK,CAAC,wBAAwB,OAAO,oCAAoC,CAAC,CAAC;IACvF,CAAC;IAED,OAAO,KAAK,CAAC;AAAA,CACd","sourcesContent":["/**\r\n * Shared test utilities for integration tests\r\n *\r\n * This module handles:\r\n * - Loading .env configuration for tests\r\n * - Checking TEST_INTEGRATION flag\r\n * - Validating required API keys\r\n */\r\n\r\nimport { config } from \"dotenv\";\r\nimport * as path from \"path\";\r\n\r\n// Load .env from project root on module import\r\n// This runs once when the module is first imported\r\nconfig({ path: path.resolve(__dirname, \"../.env\"), quiet: true });\r\n\r\n/**\r\n * Check if integration tests should run\r\n * Tests are skipped if TEST_INTEGRATION env var is not set\r\n */\r\nexport function shouldRunIntegrationTests(): boolean {\r\n  return process.env.TEST_INTEGRATION === \"1\";\r\n}\r\n\r\n/**\r\n * Validate required API keys are present\r\n * Throws if TEST_INTEGRATION is set but API keys are missing\r\n */\r\nexport function validateApiKeys(requiredKeys: string[]): void {\r\n  if (!shouldRunIntegrationTests()) {\r\n    return; // Skip validation if not running integration tests\r\n  }\r\n\r\n  const missing = requiredKeys.filter((key) => !process.env[key]);\r\n\r\n  if (missing.length > 0) {\r\n    throw new Error(\r\n      `Integration tests require the following environment variables: ${missing.join(\", \")}\\n` +\r\n        `Please set them or unset TEST_INTEGRATION to skip these tests.`\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Get API key from environment or throw if missing (when TEST_INTEGRATION is set)\r\n */\r\nexport function getApiKey(keyName: string): string {\r\n  if (!shouldRunIntegrationTests()) {\r\n    throw new Error(\"getApiKey should only be called when TEST_INTEGRATION is set\");\r\n  }\r\n\r\n  const value = process.env[keyName];\r\n  if (!value) {\r\n    throw new Error(`Environment variable ${keyName} is required for integration tests`);\r\n  }\r\n\r\n  return value;\r\n}\r\n"]}